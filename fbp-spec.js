/*! For license information please see fbp-spec.js.LICENSE.txt */
(()=>{var e,t={6835:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},2689:e=>{"use strict";e.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},38:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},2142:(e,t,r)=>{e.exports=r(4477)},318:(e,t,r)=>{var n=r(3086);t.isBrowser=function(){return"undefined"==typeof process||!process.execPath||!process.execPath.match(/node|iojs/)},t.randomString=function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0,o=e,i=o>=0;i?n<o:n>o;i?n+=1:n-=1){var a=Math.floor(Math.random()*r.length);t+=r.charAt(a)}return t},t.asyncSeries=function(e,t,r){var n=e.slice(0),o=[];!function e(){if(0!==n.length){var i=n.shift();t(i,(function(t,n){t?r(t):(o.push(n),e())}))}else r(null,o)}()},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},t.startsWith=function(e,t){return 0===e.indexOf(t)};var o=function(e){return function(t){return new n((function(r,n){return setTimeout(n.bind(null,t),e)}))}};t.retryUntil=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=n.reject(new Error("retry starter")),s=0,c=i,u=c>=0;u?s<=c:s>=c;u?s+=1:s-=1)a=a.catch(e).then(t).catch(o(r));return a}},1696:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(5419)("fbp-spec:expectation"),i=r(1032),a=r(6260),s=r(318),c={type:function(e,t){return i.expect(e).to.be.a(t)},equals:function(e,t){return i.expect(e).to.eql(t)},above:function(e,t){return i.expect(e).to.be.above(t)},below:function(e,t){return i.expect(e).to.be.below(t)},haveKeys:function(e,t){return i.expect(e).to.have.keys(t)},includeKeys:function(e,t){return i.expect(e).to.include.keys(t)},contains:function(e,t){return i.expect(e).to.contain(t)},noterror:function(e){if(null!=e?e.message:void 0)throw e}};t.expect=function e(t,r){s.isArray(t)?t.forEach((function(e){Object.keys(e).forEach((function(t){(s.isArray(e[t])?e[t]:[e[t]]).forEach((function(e){o("checking port for expectation",t,e);var i=r[t];if(void 0===i)throw new Error("No data received on port ".concat(t));var s=function(e){for(var t=Object.keys(e),r=function(r){var n=t[r],o=e[n];if("path"!==n){var i=c[n];if(i){var a=function(e){return i(e,o)};return a.toString=function(){return"".concat(n," ").concat(o)},{v:a}}}},o=0;o<t.length;o+=1){var i=r(o);if("object"===n(i))return i.v}throw new Error("fbp-spec: No operator matching ".concat(Object.keys(e),". Available: ").concat(Object.keys(c)))}(e);(function(e,t){var r;if(e.path){if(o("extracting JSONPath from",e.path,t),!(r=a.query(t,e.path)).length)throw new Error("expected JSONPath '".concat(e.path,"' to match data in ").concat(JSON.stringify(t)))}else r=[t];return o("matching against",r),r})(e,i).forEach((function(e){o("checking against predicate",e,s.toString()),s(e)}))}))}))})):e([t],r)},t.noError=function(e){return i.expect(e).to.not.exist}},4477:(e,t,r)=>{e.exports={runner:r(8469),subprocess:r(4926),mocha:r(2220),testsuite:r(7715),schema:r(3039),getSchema:function(t){var r=t.replace(".json","");return e.exports.schema[r]},ui:{}}},2220:(e,t,r)=>{var n=r(5419)("fbp-spec:mocha"),o=r(8469),i=o.Runner,a=r(7715),s=r(1696),c=r(4926);t.run=function(e,t,r){var u,p=r;null==r.starttimeout&&(p.starttimeout=5e3),null==r.fixturetimeout&&(p.fixturetimeout=2e3);var l={connectTimeout:r.starttimeout,commandTimeout:r.commandtimeout},d=new i(e,l);try{u=a.getSuitesSync(t)}catch(e){throw console.log("Unable to get suites:",e),e}var h=null;before((function(t){var o;this.timeout(r.starttimeout+500),o=function(e){n("started",e),s.noError(e),d.connect(t)},e.command?h=c.start(e.command,{},o):o(null)})),after((function(e){var t;t=function(t){n("stopped",t),s.noError(t),d.disconnect(e)},h&&h.kill(),t(null)})),u.forEach((function(e){null==e.timeout&&(e.timeout=r.fixturetimeout),function(e,t){(t.skip?describe.skip:describe)("".concat(t.name),(function(){beforeEach((function(r){null!=t.timeout&&this.timeout(t.timeout),e.setupSuite(t,r)})),afterEach((function(r){return e.teardownSuite(t,r)})),t.cases.forEach((function(r){(r.skip?describe.skip:describe)(r.name,(function(){return it(r.assertion,(function(n){null!=t.timeout&&this.timeout(t.timeout),null!=r.timeout&&this.timeout(r.timeout),o.runTestAndCheck(e,r,(function(e,t){n(e||t.error)}))}))}))}))}))}(d,e)}))}},967:(e,t,r)=>{var n=r(2561),o=r(5419)("fbp-spec:protocol"),i=r(3086),a=r(318);t.sendGraph=function(e,r,s){if(r){var c=r.name||r.properties.id;c||(c="fixture.".concat(a.randomString(10))),r.name=c,r instanceof n.Graph?(o("sendgraph",c),i.resolve().then((function(){return e.protocol.graph.send(r,!1)})).then((function(){return c})).nodeify(s)):n.graph.loadJSON(r,(function(r,n){r?s(r):t.sendGraph(e,n,s)}))}else s(new Error("Graph not defined"))},t.startNetwork=function(e,t,r){o("startnetwork",t),i.resolve().then((function(){return e.protocol.network.start({graph:t})})).nodeify(r)},t.stopNetwork=function(e,t,r){o("stopnetwork",t),i.resolve().then((function(){return e.protocol.network.stop({graph:t})})).nodeify(r)},t.sendPackets=function(e,t,r,n){o("sendpackets",t,r),i.all(Object.keys(r).map((function(n){return e.protocol.runtime.packet({event:"data",port:n,payload:r[n],graph:t})}))).nodeify(n)},t.getComponents=function(e,t){o("get components"),i.resolve().then((function(){return e.protocol.component.list()})).then((function(e){var t={};return e.forEach((function(e){t[e.name]=e})),t})).nodeify(t)},t.getCapabilities=function(e,t){var r=e.definition;r&&r.capabilities&&r.capabilities.length?t(null,r.capabilities):i.resolve().then((function(){return e.protocol.runtime.getruntime()})).then((function(e){return e.capabilities})).nodeify(t)},t.getComponentTests=function(e,t){o("get component tests"),i.resolve().then((function(){return e.protocol.component.list()})).then((function(t){return i.all(t.map((function(t){return e.protocol.component.getsource({name:t.name}).then((function(e){return e}),(function(){return{tests:null}}))})))})).then((function(e){var t={};return e.forEach((function(e){if(e.tests){var r=e.library?"".concat(e.library,"/").concat(e.name):e.name;t[r]=e.tests}})),t})).nodeify(t)}},8469:(e,t,r)=>{function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(4655),s=r(3049),c=r(5419)("fbp-spec:runner"),u=r(5419)("fbp-spec:runner:received"),p=r(3086),l=r(7131).FlowtraceRecorder,d=r(318),h=r(967),f=r(7715),m=r(1696);function y(e){return e.cases.filter((function(e){return!e.skip})).length>0}var g=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.client=t,this.currentGraphId=null,this.components={},this.parentElement=null,this.options=r,this.recorder=null,null==this.options.connectTimeout&&(this.options.connectTimeout=5e3),null==this.options.commandTimeout&&(this.options.commandTimeout=3e3)}var t,r;return t=e,(r=[{key:"prepareClient",value:function(e){var t=this;null==this.client.protocol||null==this.client.address?e(null,this.client):p.resolve().then((function(){return s(t.client,{commandTimeout:t.options.commandTimeout})})).then((function(e){return t.client=e,t.parentElement&&"iframe"===e.definition.protocol&&e.transport.setParentElement(t.parentElement),e})).nodeify(e)}},{key:"connect",value:function(e){var t=this;c("connect"),this.prepareClient((function(r){if(r)e(r);else{t.client.on("signal",(function(e){var t=e.proto,r=e.command,n=e.payload;return u(t,r,n)})),t.client.on("network",(function(e){var t=e.command,r=e.payload;"output"===t&&r.message&&console.log(r.message)}));var n=Math.floor(t.options.connectTimeout/500);d.retryUntil((function(){return c("trying to connect"),t.client.connect()}),(function(){return t.client.isConnected()?p.resolve():p.reject(new Error("Not connected to runtime"))}),500,n).then((function(){return t.checkCapabilities(["protocol:graph","protocol:network","protocol:runtime"])})).nodeify(e)}}))}},{key:"disconnect",value:function(e){var t=this;c("disconnect"),(null!=this.client?this.client.isConnected():void 0)?p.resolve().then((function(){return t.client.disconnect()})).nodeify(e):e()}},{key:"checkCapabilities",value:function(e){if(!this.client.isConnected())return p.reject(new Error("Not connected to runtime"));if(!this.client.definition||!this.client.definition.capabilities||!this.client.definition.capabilities.length)return p.reject(new Error("Runtime provides no capabilities"));for(var t=0;t<e.length;t+=1){var r=e[t];if(-1===this.client.definition.capabilities.indexOf(r))return p.reject(new Error("Runtime doesn't provide ".concat(r)))}return p.resolve()}},{key:"setupSuite",value:function(e,t){var r=this;c('setup suite "'.concat(e.name,'"')),this.options.traceCallback&&!this.recorder&&(this.recorder=new l(this.client)),y(e)?this.client.isConnected()?function(e,t,r){var n,o;n=function(n){if(n)r(n);else if(t.fixture)if("json"!==t.fixture.type){if("fbp"===t.fixture.type){var o;try{o=a.parse(t.fixture.data)}catch(e){return void r(e)}return o.properties||(o.properties={}),void r(null,o)}r(new Error("Unknown fixture type ".concat(t.fixture.type)))}else{var i;try{i=JSON.parse(t.fixture.data)}catch(e){return void r(e)}r(null,i)}else!function(e,t,r){c("synthesizing fixture",e);var n=t[e];if(n){var o={properties:{},inports:{},outports:{},processes:{},connections:[]},i="testee";o.processes.testee={component:e},n.inPorts.forEach((function(e){var t=e.id;o.inports[t]={process:i,port:t}})),n.outPorts.forEach((function(e){var t=e.id;o.outports[t]={process:i,port:t}})),Object.keys(o.outports).length<1?r(new Error("Component '".concat(e,"' used as fixture has no outports"))):Object.keys(o.inports).length<1?r(new Error("Component '".concat(e,"' used as fixture has no inports"))):r(null,o)}else r(new Error("Could not find component for topic: ".concat(e)))}(t.topic,e.components,r)},null!=(o=e).components&&"object"===i(o.components)&&Object.keys(o.components).length?n(null):h.getComponents(e.client,(function(t,r){t?n(t):(e.components=r,n(null))}))}(this,e,(function(e,n){e?t(e):h.sendGraph(r.client,n,(function(e,n){e?t(e):(r.currentGraphId=n,r.recorder?r.recorder.start(n).then((function(){h.startNetwork(r.client,n,t)}),t):h.startNetwork(r.client,n,t))}))})):t(new Error("Disconnected from runtime")):t(null)}},{key:"teardownSuite",value:function(e,t){c('teardown suite "'.concat(e.name,'"')),this.recorder&&this.currentGraphId&&this.recorder.stop(this.currentGraphId),y(e)?this.client.isConnected()?this.currentGraphId?h.stopNetwork(this.client,this.currentGraphId,t):t():t(new Error("Disconnected from runtime")):t(null)}},{key:"runTest",value:function(e,t){var r=this;if(c('runtest "'.concat(e.name,'"')),this.client.isConnected()){for(var n=d.isArray(e.inputs)?e.inputs:[e.inputs],o=d.isArray(e.expect)?e.expect:[e.expect],i=[],a=0,s=n.length,u=s>=0;u?a<s:a>s;u?a+=1:a-=1)i.push({inputs:n[a],expect:o[a]});d.asyncSeries(i,(function(e,t){return function(e,t,r,n,o){var i=e.observe((function(e){return"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t}));function a(e){var t={};return e.forEach((function(e){t[e.payload.port]=e.payload.payload})),t}function s(e){if("runtime"!==e.protocol||"packet"!==e.command)return!1;if(e.payload.graph!==t)return!1;if("data"!==e.payload.event)return!1;var r=a(i.signals.slice(0,i.signals.indexOf(e)+1));return Object.keys(r).length===Object.keys(n).length}function c(e){return"network"===e.protocol&&"error"===e.command||"network"===e.protocol&&"processerror"===e.command?!e.payload.graph||e.payload.graph===t:"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t&&"data"===e.payload.event&&"error"===e.payload.port&&void 0===n.error}var u=p.promisify(h.sendPackets);p.resolve().then((function(){return u(e,t,r)})).then((function(){return i.until(s,c)})).then((function(e){return a(e)})).nodeify(o)}(r.client,r.currentGraphId,e.inputs,e.expect,t)}),(function(n,o){r.options.traceCallback&&r.currentGraphId&&r.recorder&&r.options.traceCallback(r.currentGraphId,e.name,r.recorder.dump(r.currentGraphId)),n?t(n):(o.forEach((function(e,t){i[t].actual=e})),t(null,i))}))}else t(new Error("Disconnected from runtime"))}}])&&o(t.prototype,r),e}();function v(e,t,r){if(t.skip)r(null,{passed:!0});else{var n=d.isArray(t.inputs)?t.inputs:[t.inputs],o=d.isArray(t.expect)?t.expect:[t.expect];n.length===o.length?e.runTest(t,(function(e,t){var n;e?r(null,n={passed:!1,error:e}):((n=function(e){var t,r=e.filter((function(e){return null!=e.actual})),n=e.filter((function(e){return null!=e.expect}));if(r.length<n.length)return{passed:!1,error:new Error("Only got ".concat(r.length," output messages out of ").concat(n.length))};var o=e.map((function(e){e.error=null;try{m.expect(e.expect,e.actual)}catch(t){e.error=t}return e})),i=o.filter((function(e){return e.error}));if(0===i.length)t={passed:!0};else if(1===n.length)t={error:i[0].error};else if(n.length>1&&1===i.length){var a=o.findIndex((function(e){return e.error})),s=o[a];t={error:new Error("Expectation ".concat(a," of sequence failed: ").concat(s.error.message))}}else{var c=o.map((function(e){return(null!=e.error?e.error.message:void 0)||""}));t={error:new Error("Multiple failures in sequence: ".concat(c))}}return t}(t)).error&&(n.passed=!1),r(null,n))})):r(null,{passed:!1,error:new Error("Test sequence length mismatch. Got ".concat(n.length," inputs and ").concat(o.length," expectations"))})}}t.getComponentSuites=function(e,t){h.getCapabilities(e.client,(function(r,n){r?t(r):-1!==n.indexOf("component:getsource")?h.getComponentTests(e.client,(function(e,r){e?t(e):function(e,t){var r=Object.keys(e).map((function(t){return e[t]}));d.asyncSeries(r,(function(e,t){f.loadYAML(e,(function(e,r){t(null,e?null:r)}))}),(function(e,r){e?t(e):t(null,r.filter((function(e){return null!==e})).reduce((function(e,t){return e.concat(t)}),[]))}))}(r,(function(e,n){e?t(e):(c("get component suites",r.length,n.length),t(null,n))}))})):t(null,[])}))},t.Runner=g,t.runAll=function(e,t,r,n){function o(n,o){v(e,n,(function(e,i){var a=n;Object.keys(i).forEach((function(e){var t=i[e];a[e]=t})),n.error&&(a.error=n.error.message),c('ran test "'.concat(n.name,'"'),n.passed,e),r(t),o(null)}))}c("running suites",t.map((function(e){return e.name}))),d.asyncSeries(t,(function(t,r){return function(e,t,r,n){t.skip?n(null,t):e.setupSuite(t,(function(o){c("setup suite",o),o?n(o,t):d.asyncSeries(t.cases,r,(function(r){c("testrun complete",r),r?e.teardownSuite(t,(function(e){c("teardown suite",e),n(r,t)})):e.teardownSuite(t,(function(e){c("teardown suite",e),n(e,t)}))}))}))}(e,t,o,r)}),(function(e){return n(e)}))},t.runTestAndCheck=v},4926:(e,t,r)=>{var n=r(5419)("fbp-spec:subprocess");t.start=function(e,t,o){var i;try{i=r(Object(function(){var e=new Error("Cannot find module 'child_process'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){return o(e),null}null==t.timeout&&(t.timeout=300);var a=!1,s="",c=["-c",e],u=i.spawn("sh",c);return n("spawned","'".concat("sh"," ").concat(c.join(" "),"'")),n("waiting for output"),u.on("error",(function(e){return o(e)})),u.stdout.on("data",(function(e){var t=e.toString();n("sub stdout",t),a||(n("got output, transitioning to started"),a=!0,setTimeout(o,100))})),u.stderr.on("data",(function(e){var t=e.toString();s+=t,n("sub stderr",t),a||(n("got stderr, failing"),a=!0,o(new Error("Subprocess wrote on stderr: '".concat(s,"'"))))})),setTimeout((function(){a||(n("timeout waiting for output, assuming started"),a=!0,o(null))}),t.timeout),u}},7715:(e,t,r)=>{var n=r(5069),o=r(1249),i=r(318),a=r(3039);function s(e){var t=e;return e.name||(t.name=e.topic),e.cases||(t.cases=[]),e}t.validate=function(e){var t="undefined"!=typeof window&&window.tv4?window.tv4:r(4363);if(!t)throw new Error("TV4 not available, unable to validate");t.reset(),Object.keys(a).forEach((function(e){var r=a[e];t.addSchema(r.id,r)}));var n=t.validateMultiple(e,"testsfile.json");return n.missing.length&&(n.passed=!1),n},t.create=function(e){return s(e)},t.loadYAML=function(e,t){var n=[];try{("undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(5767)).safeLoadAll(e,(function(e){return n.push(s(e))}))}catch(e){return void t(e)}t(null,n)},t.loadYAMLSync=function(e){var t="undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(5767),n=[];return t.safeLoadAll(e,(function(e){return n.push(s(e))})),n},t.getSuitesSync=function(e){if(!i.isArray(e))return t.getSuitesSync([e]);var n=[];return e.forEach((function(e){n=n.concat(function(e){var n=r(2993);if(n.statSync(e).isDirectory()){var i=n.readdirSync(e).filter((function(e){return".yaml"===o.extname(e)})).map((function(t){return o.join(e,t)}));return t.getSuitesSync(i)}var a=n.readFileSync(e,"utf-8");return t.loadYAMLSync(a)}(e))})),n},t.getSuites=function(e,a){i.isArray(e)?i.asyncSeries(e,(function(e,a){i.startsWith(e,"http://")?function(e,r){n(e).then((function(e){return e.text()})).then((function(e){return new Promise((function(r,n){t.loadYAML(e,(function(e,t){e?n(e):r(t)}))}))})).then((function(e){r(null,e)}),r)}(e,a):function(e,n){var i=r(2993);i.stat(e,(function(r,a){r?n(r):a.isDirectory()?i.readdir(e,(function(r,i){if(r)n(r);else{var a=i.filter((function(e){return".yaml"===o.extname(e)})).map((function(t){return o.join(e,t)}));t.getSuites(a,n)}})):i.readFile(e,"utf-8",(function(e,r){e?n(e):t.loadYAML(r,n)}))}))}(e,a)}),(function(e,t){if(e)a(e);else{var r=t.reduce((function(e,t){return e.concat(t)}),[]);a(null,r)}})):t.getSuites([e],a)}},8501:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(7998),i=r(478),a=r(2380),s=r(8843),c=r(7642),u=r(2760),p=r(4338),l=r(2482),d=r(5437);e.exports=v,v.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);return!0!==r.$async&&(this.errors=r.errors),o},v.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},v.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,n);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return S(this,t=i.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,n,!0),this},v.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},v.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==n(t)?e._getId(t)||t:e.getSchema(m)?m:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var o=this.validate(r,e);if(!o&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return o},v.prototype.getSchema=function(e){var t=b(this,e);switch(n(t)){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var n=r.schema,a=r.root,c=r.baseId,u=o.call(e,n,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:n,root:a,baseId:c,validate:u}),u}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return w(this,this._schemas,e),w(this,this._refs,e),this;switch(n(e)){case"undefined":return w(this,this._schemas),w(this,this._refs),this._cache.clear(),this;case"string":var t=b(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,o=r?r(e):e;this._cache.del(o);var a=this._getId(e);a&&(a=i.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},v.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",i=0;i<e.length;i++){var a=e[i];a&&(o+=n+a.dataPath+" "+a.message+r)}return o.slice(0,-r.length)},v.prototype._addSchema=function(e,t,r,o){if("object"!=n(e)&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,c=a?a(e):e,u=this._cache.get(c);if(u)return u;o=o||!1!==this._opts.addUsedSchema;var p=i.normalizeId(this._getId(e));p&&o&&S(this,p);var l,d=!1!==this._opts.validateSchema&&!t;d&&!(l=p&&p==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=i.ids.call(this,e),f=new s({id:p,schema:e,localRefs:h,cacheKey:c,meta:r});return"#"!=p[0]&&o&&(this._refs[p]=f),this._cache.put(c,f),d&&l&&this.validateSchema(e,!0),f},v.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=o.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},v.prototype.compileAsync=r(7624);var h=r(6156);v.prototype.addKeyword=h.add,v.prototype.getKeyword=h.get,v.prototype.removeKeyword=h.remove,v.prototype.validateKeyword=h.validate;var f=r(1145);v.ValidationError=f.Validation,v.MissingRefError=f.MissingRef,v.$dataMetaSchema=l;var m="http://json-schema.org/draft-07/schema",y=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function v(e){if(!(this instanceof v))return new v(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:k,warn:k,error:k};else{if(void 0===t&&(t=console),!("object"==n(t)&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format),this._cache=e.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=p(),this._getId=function(e){switch(e.schemaId){case"auto":return _;case"id":return x;default:return E}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=c),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<y.length;r++)delete t[y[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=r(6835),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=r(38);e._opts.$data&&(n=l(n,g)),e.addMetaSchema(n,m,!0),e._refs["http://json-schema.org/schema"]=m}}(this),"object"==n(e.meta)&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function b(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function w(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function x(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function E(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function S(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function k(){}},2380:e=>{"use strict";var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}},7624:(e,t,r)=>{"use strict";var n=r(1145).MissingRef;e.exports=function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var a=s(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||c(e)}));return o&&a.then((function(e){o(null,e)}),o),a;function s(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}function c(e){try{return i._compile(e)}catch(t){if(t instanceof n)return function(t){var n=t.missingSchema;if(u(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var o=i._loadingSchemas[n];return o||(o=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(a,a),o.then((function(e){if(!u(n))return s(e).then((function(){u(n)||i.addSchema(e,n,void 0,r)}))})).then((function(){return c(e)}));function a(){delete i._loadingSchemas[n]}function u(e){return i._refs[e]||i._schemas[e]}}(t);throw t}}}},1145:(e,t,r)=>{"use strict";var n=r(478);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:i(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},2760:(e,t,r)=>{"use strict";var n=r(5437),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,p=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function y(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],a=+t[3];return n>=1&&n<=12&&a>=1&&a<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[n])}function g(e,t){var r=e.match(a);if(!r)return!1;var n=r[1],o=r[2],i=r[3],s=r[5];return(n<=23&&o<=59&&i<=59||23==n&&59==o&&60==i)&&(!t||s)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:p,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:l,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f},m.full={date:y,time:g,"date-time":function(e){var t=e.split(v);return 2==t.length&&y(t[0])&&g(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:p,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:l,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var v=/t|\s/i,b=/\/|:/,w=/[^\\]\\Z/;function x(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},7998:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(478),i=r(5437),a=r(1145),s=r(7642),c=r(345),u=i.ucs2length,p=r(8598),l=a.Validation;function d(e,t,r){var n=f.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=f.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function f(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function m(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function y(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function b(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,f,w){var x=this,E=this._opts,_=[void 0],S={},k=[],C={},A=[],P={},D=[];r=r||{schema:t,refVal:_,refs:S};var O=d.call(this,t,r,w),T=this._compilations[O.index];if(O.compiling)return T.callValidate=function e(){var t=T.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var F=this._formats,j=this.RULES;try{var I=N(t,r,f,w);T.validate=I;var R=T.callValidate;return R&&(R.schema=I.schema,R.errors=null,R.refs=I.refs,R.refVal=I.refVal,R.root=I.root,R.$async=I.$async,E.sourceCode&&(R.source=I.source)),I}finally{h.call(this,t,r,w)}function N(t,n,s,d){var h=!n||n&&n.schema==t;if(n.schema!=r.schema)return e.call(x,t,n,s,d);var f,w=!0===t.$async,C=c({isTop:!0,schema:t,isRoot:h,baseId:d,root:n,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:j,validate:c,util:i,resolve:o,resolveRef:M,usePattern:q,useDefault:U,useCustomRule:z,opts:E,formats:F,logger:x.logger,self:x});C=b(_,g)+b(k,m)+b(A,y)+b(D,v)+C,E.processCode&&(C=E.processCode(C,t));try{f=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(x,j,F,r,_,A,D,p,u,l),_[0]=f}catch(e){throw x.logger.error("Error compiling schema, function code:",C),e}return f.schema=t,f.errors=null,f.refs=S,f.refVal=_,f.root=h?f:n,w&&(f.$async=!0),!0===E.sourceCode&&(f.source={code:C,patterns:k,defaults:A}),f}function M(t,n,i){n=o.url(t,n);var a,s,c=S[n];if(void 0!==c)return B(a=_[c],s="refVal["+c+"]");if(!i&&r.refs){var u=r.refs[n];if(void 0!==u)return B(a=r.refVal[u],s=L(n,a))}s=L(n);var p=o.call(x,N,r,n);if(void 0===p){var l=f&&f[n];l&&(p=o.inlineRef(l,E.inlineRefs)?l:e.call(x,l,r,f,t))}if(void 0!==p)return function(e,t){var r=S[e];_[r]=t}(n,p),B(p,s);!function(e){delete S[e]}(n)}function L(e,t){var r=_.length;return _[r]=t,S[e]=r,"refVal"+r}function B(e,t){return"object"==n(e)||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function q(e){var t=C[e];return void 0===t&&(t=C[e]=k.length,k[t]=e),"pattern"+t}function U(e){switch(n(e)){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=P[t];return void 0===r&&(r=P[t]=A.length,A[r]=e),"default"+r}}function z(e,t,r,n){if(!1!==x._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var i=e.definition.validateSchema;if(i&&!i(t)){var a="keyword schema is invalid: "+x.errorsText(i.errors);if("log"!=x._opts.validateSchema)throw new Error(a);x.logger.error(a)}}var s,c=e.definition.compile,u=e.definition.inline,p=e.definition.macro;if(c)s=c.call(x,t,r,n);else if(p)s=p.call(x,t,r,n),!1!==E.validateSchema&&x.validateSchema(s,!0);else if(u)s=u.call(x,n,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var l=D.length;return D[l]=s,{code:"customRule"+l,validate:s}}}},478:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(4686),i=r(8598),a=r(5437),s=r(8843),c=r(4291);function u(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return u.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return m(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,i,a,c=p.call(this,t,r);return c&&(o=c.schema,t=c.root,a=c.baseId),o instanceof s?i=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(i=m(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),i}function p(e,t){var r=o.parse(t),n=b(r),i=v(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==i){var a=x(n),c=this._refs[a];if("string"==typeof c)return l.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==x(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=v(this._getId(e.schema))}return h.call(this,r,i,e.schema,e)}function l(e,t,r){var n=p.call(this,e,t);if(n){var o=n.schema,i=n.baseId;e=n.root;var a=this._getId(o);return a&&(i=E(i,a)),h.call(this,r,i,o,e)}}e.exports=u,u.normalizeId=x,u.fullPath=v,u.url=E,u.ids=function(e){var t=x(this._getId(e)),r={"":t},n={"":v(t,!1)},s={},u=this;return c(e,{allKeys:!0},(function(e,t,c,p,l,d,h){if(""!==t){var f=u._getId(e),m=r[p],y=n[p]+"/"+l;if(void 0!==h&&(y+="/"+("number"==typeof h?h:a.escapeFragment(h))),"string"==typeof f){f=m=x(m?o.resolve(m,f):f);var g=u._refs[f];if("string"==typeof g&&(g=u._refs[g]),g&&g.schema){if(!i(e,g.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=x(y))if("#"==f[0]){if(s[f]&&!i(e,s[f]))throw new Error('id "'+f+'" resolves to more than one schema');s[f]=e}else u._refs[f]=y}r[t]=m,n[t]=y}})),s},u.inlineRef=m,u.schema=p;var d=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),i=1;i<o.length;i++){var s=o[i];if(s){if(void 0===(r=r[s=a.unescapeFragment(s)]))break;var c;if(!d[s]&&((c=this._getId(r))&&(t=E(t,c)),r.$ref)){var u=E(t,r.$ref),l=p.call(this,n,u);l&&(r=l.schema,n=l.root,t=l.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var f=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function m(e,t){return!1!==t&&(void 0===t||!0===t?y(e):t?g(e)<=t:void 0)}function y(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==n(t=e[r])&&!y(t))return!1}else for(var o in e){if("$ref"==o)return!1;if("object"==n(t=e[o])&&!y(t))return!1}return!0}function g(e){var t,r=0;if(Array.isArray(e)){for(var o=0;o<e.length;o++)if("object"==n(t=e[o])&&(r+=g(t)),r==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(f[i])r++;else if("object"==n(t=e[i])&&(r+=g(t)+1),r==1/0)return 1/0}return r}function v(e,t){return!1!==t&&(e=x(e)),b(o.parse(e))}function b(e){return o.serialize(e).split("#")[0]+"#"}var w=/#\/?$/;function x(e){return e?e.replace(w,""):""}function E(e,t){return t=x(t),o.resolve(e,t)}},4338:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(7796),i=r(5437).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var i;if("object"==n(r)){var a=Object.keys(r)[0];i=r[a],r=a,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:o[r],implements:i}})),e.all.$comment={keyword:"$comment",code:o.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},8843:(e,t,r)=>{"use strict";var n=r(5437);e.exports=function(e){n.copy(e,this)}},7020:e=>{"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},5437:(e,t,r)=>{"use strict";function n(e,t,r,n){var o=n?" !== ":" === ",i=n?" || ":" && ",a=n?"!":"",s=n?"":"!";switch(e){case"null":return t+o+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+i+"typeof "+t+o+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+o+'"number"'+i+s+"("+t+" % 1)"+i+t+o+t+(r?i+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+o+'"'+e+'"'+(r?i+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+o+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var o="",a=i(e);for(var s in a.array&&a.object&&(o=a.null?"(":"(!"+t+" || ",o+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)o+=(o?" && ":"")+n(s,t,r,!0);return o}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(o[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:u,equal:r(8598),ucs2length:r(7020),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:p,getPathExpr:function(e,t,r,n){return h(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return h(e,p(r?"/"+f(t):c(t)))},getData:function(e,t,r){var n,o,i,a;if(""===e)return"rootData";if("/"==e[0]){if(!l.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i="rootData"}else{if(!(a=e.match(d)))throw new Error("Invalid JSON-pointer: "+e);if(n=+a[1],"#"==(o=a[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!o)return i}for(var s=i,u=o.split("/"),p=0;p<u.length;p++){var h=u[p];h&&(s+=" && "+(i+=c(m(h))))}return s},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var o=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+u(e)+"']"}function u(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function p(e){return"'"+u(e)+"'"}var l=/^\/(?:[^~]|~0|~1)*$/,d=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},2482:e=>{"use strict";var t=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,r){for(var n=0;n<r.length;n++){e=JSON.parse(JSON.stringify(e));var o,i=r[n].split("/"),a=e;for(o=1;o<i.length;o++)a=a[i[o]];for(o=0;o<t.length;o++){var s=t[o],c=a[s];c&&(a[s]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},4717:(e,t,r)=>{"use strict";var n=r(38);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},8955:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],y=e.opts.$data&&m&&m.$data,g=h?"<":">",v=h?">":"<",b=void 0;if(!d&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!y&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(y){var w,x=e.util.getData(m.$data,a,e.dataPathArr),E="exclusive"+i,_="exclType"+i,S="exclIsNumber"+i,k="' + "+(A="op"+i)+" + '";o+=" var schemaExcl"+i+" = "+x+"; ",o+=" var "+E+"; var "+_+" = typeof "+(x="schemaExcl"+i)+"; if ("+_+" != 'boolean' && "+_+" != 'undefined' && "+_+" != 'number') { ",b=f,(w=w||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var C=o;o=w.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+_+" == 'number' ? ( ("+E+" = "+n+" === undefined || "+x+" "+g+"= "+n+") ? "+l+" "+v+"= "+x+" : "+l+" "+v+" "+n+" ) : ( ("+E+" = "+x+" === true) ? "+l+" "+v+"= "+n+" : "+l+" "+v+" "+n+" ) || "+l+" !== "+l+") { var op"+i+" = "+E+" ? '"+g+"' : '"+g+"='; ",void 0===s&&(b=f,u=e.errSchemaPath+"/"+f,n=x,d=y)}else if(k=g,(S="number"==typeof m)&&d){var A="'"+k+"'";o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+m+" "+g+"= "+n+" ? "+l+" "+v+"= "+m+" : "+l+" "+v+" "+n+" ) || "+l+" !== "+l+") { "}else S&&void 0===s?(E=!0,b=f,u=e.errSchemaPath+"/"+f,n=m,v+="="):(S&&(n=Math[h?"min":"max"](m,s)),m===(!S||n)?(E=!0,b=f,u=e.errSchemaPath+"/"+f,v+="="):(E=!1,k+="=")),A="'"+k+"'",o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+" "+v+" "+n+" || "+l+" !== "+l+") { ";return b=b||t,(w=w||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+A+", limit: "+n+", exclusive: "+E+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+k+" ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",C=o,o=w.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o}},6842:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+s,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},2114:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+l+".length ":o+=" ucs2length("+l+") ",o+=" "+h+" "+n+") { ";var f=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=d?"' + "+n+" + '":""+s,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var y=o;return o=m.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},7378:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+l+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+s,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},6722:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.schema[r],a=e.schemaPath+e.util.getProperty(r),s=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,u=e.util.copy(e),p="";u.level++;var l="valid"+u.level,d=u.baseId,h=!0,f=i;if(f)for(var m,y=-1,g=f.length-1;y<g;)m=f[y+=1],(e.opts.strictKeywords?"object"==t(m)&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all))&&(h=!1,u.schema=m,u.schemaPath=a+"["+y+"]",u.errSchemaPath=s+"/"+y,o+="  "+e.validate(u)+" ",u.baseId=d,c&&(o+=" if ("+l+") { ",p+="}"));return c&&(o+=h?" if (true) { ":" "+p.slice(0,-1)+" "),o}},4434:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),m="";f.level++;var y="valid"+f.level;if(s.every((function(r){return e.opts.strictKeywords?"object"==t(r)&&Object.keys(r).length>0||!1===r:e.util.schemaHasRules(r,e.RULES.all)}))){var g=f.baseId;o+=" var "+h+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=f.compositeRule=!0;var b=s;if(b)for(var w,x=-1,E=b.length-1;x<E;)w=b[x+=1],f.schema=w,f.schemaPath=c+"["+x+"]",f.errSchemaPath=u+"/"+x,o+="  "+e.validate(f)+" ",f.baseId=g,o+=" "+d+" = "+d+" || "+y+"; if (!"+d+") { ",m+="}";e.compositeRule=f.compositeRule=v,o+=" "+m+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else p&&(o+=" if (true) { ");return o}},7497:e=>{"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+a+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},3902:e=>{"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d=e.opts.$data&&a&&a.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; "),d||(n+=" var schema"+o+" = validate.schema"+s+";"),n+="var "+l+" = equal("+p+", schema"+o+"); if (!"+l+") {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},2771:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e);f.level++;var m="valid"+f.level,y="i"+i,g=f.dataLevel=e.dataLevel+1,v="data"+g,b=e.baseId,w=e.opts.strictKeywords?"object"==t(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(o+="var "+h+" = errors;var "+d+";",w){var x=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=s,f.schemaPath=c,f.errSchemaPath=u,o+=" var "+m+" = false; for (var "+y+" = 0; "+y+" < "+l+".length; "+y+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var E=l+"["+y+"]";f.dataPathArr[g]=y;var _=e.validate(f);f.baseId=b,e.util.varOccurences(_,v)<2?o+=" "+e.util.varReplace(_,v,E)+" ":o+=" var "+v+" = "+E+"; "+_+" ",o+=" if ("+m+") break; }  ",e.compositeRule=f.compositeRule=x,o+="  if (!"+m+") {"}else o+=" if ("+l+".length == 0) {";var S=S||[];S.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should contain a valid item' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var k=o;return o=S.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { ",w&&(o+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(o+=" } "),o}},5924:e=>{"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(s||""),h="valid"+a,f="errs__"+a,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+a+" = "+e.util.getData(c.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=c;var y,g,v,b,w,x=this,E="definition"+a,_=x.definition,S="";if(m&&_.$data){w="keywordValidate"+a;var k=_.validateSchema;i+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(x,c,e.schema,e)))return;o="validate.schema"+u,w=b.code,y=_.compile,g=_.inline,v=_.macro}var C=w+".errors",A="i"+a,P="ruleErr"+a,D=_.async;if(D&&!e.async)throw new Error("async keyword in sync schema");if(g||v||(i+=C+" = null;"),i+="var "+f+" = errors;var "+h+";",m&&_.$data&&(S+="}",i+=" if ("+o+" === undefined) { "+h+" = true; } else { ",k&&(S+="}",i+=" "+h+" = "+E+".validateSchema("+o+"); if ("+h+") { ")),g)_.statements?i+=" "+b.validate+" ":i+=" "+h+" = "+b.validate+"; ";else if(v){var O=e.util.copy(e);S="",O.level++;var T="valid"+O.level;O.schema=b.validate,O.schemaPath="";var F=e.compositeRule;e.compositeRule=O.compositeRule=!0;var j=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=F,i+=" "+j}else{(M=M||[]).push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",y||!1===_.schema?i+=" , "+d+" ":i+=" , "+o+" , "+d+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var I=s?"data"+(s-1||""):"parentData",R=s?e.dataPathArr[s]:"parentDataProperty",N=i+=" , "+I+" , "+R+" , rootData )  ";i=M.pop(),!1===_.errors?(i+=" "+h+" = ",D&&(i+="await "),i+=N+"; "):i+=D?" var "+(C="customErrors"+a)+" = null; try { "+h+" = await "+N+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+C+" = e.errors; else throw e; } ":" "+C+" = null; "+h+" = "+N+"; "}if(_.modifying&&(i+=" if ("+I+") "+d+" = "+I+"["+R+"];"),i+=""+S,_.valid)l&&(i+=" if (true) { ");else{var M;i+=" if ( ",void 0===_.valid?(i+=" !",i+=v?""+T:""+h):i+=" "+!_.valid+" ",i+=") { ",n=x.keyword,(M=M||[]).push(i),i="",(M=M||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+x.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+x.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var L=i;i=M.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+L+"]); ":i+=" validate.errors = ["+L+"]; return false; ":i+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var B=i;i=M.pop(),g?_.errors?"full"!=_.errors&&(i+="  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } "):!1===_.errors?i+=" "+B+" ":(i+=" if ("+f+" == errors) { "+B+" } else {  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } } "):v?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+x.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+x.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===_.errors?i+=" "+B+" ":(i+=" if (Array.isArray("+C+")) { if (vErrors === null) vErrors = "+C+"; else vErrors = vErrors.concat("+C+"); errors = vErrors.length;  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } } else { "+B+" } "),i+=" } ",l&&(i+=" else { ")}return i}},8635:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="errs__"+i,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,y={},g={},v=e.opts.ownProperties;for(E in s)if("__proto__"!=E){var b=s[E],w=Array.isArray(b)?g:y;w[E]=b}o+="var "+d+" = errors;";var x=e.errorPath;for(var E in o+="var missing"+i+";",g)if((w=g[E]).length){if(o+=" if ( "+l+e.util.getProperty(E)+" !== undefined ",v&&(o+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),p){o+=" && ( ";var _=w;if(_)for(var S=-1,k=_.length-1;S<k;)T=_[S+=1],S&&(o+=" || "),o+=" ( ( "+(R=l+(I=e.util.getProperty(T)))+" === undefined ",v&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),o+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:I)+") ) ";o+=")) {  ";var C="missing"+i,A="' + "+C+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,C,!0):x+" + "+C);var P=P||[];P.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+A+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(1==w.length?w[0]:w.join(", "))+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should have ",1==w.length?o+="property "+e.util.escapeQuotes(w[0]):o+="properties "+e.util.escapeQuotes(w.join(", ")),o+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var D=o;o=P.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+D+"]); ":o+=" validate.errors = ["+D+"]; return false; ":o+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{o+=" ) { ";var O=w;if(O)for(var T,F=-1,j=O.length-1;F<j;){T=O[F+=1];var I=e.util.getProperty(T),R=(A=e.util.escapeQuotes(T),l+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,T,e.opts.jsonPointers)),o+=" if ( "+R+" === undefined ",v&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+A+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(1==w.length?w[0]:w.join(", "))+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should have ",1==w.length?o+="property "+e.util.escapeQuotes(w[0]):o+="properties "+e.util.escapeQuotes(w.join(", ")),o+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}o+=" }   ",p&&(f+="}",o+=" else { ")}e.errorPath=x;var N=h.baseId;for(var E in y)b=y[E],(e.opts.strictKeywords?"object"==t(b)&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))&&(o+=" "+m+" = true; if ( "+l+e.util.getProperty(E)+" !== undefined ",v&&(o+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),o+=") { ",h.schema=b,h.schemaPath=c+e.util.getProperty(E),h.errSchemaPath=u+"/"+e.util.escapeFragment(E),o+="  "+e.validate(h)+" ",h.baseId=N,o+=" }  ",p&&(o+=" if ("+m+") { ",f+="}"));return p&&(o+="   "+f+" if ("+d+" == errors) {"),o}},8159:e=>{"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d=e.opts.$data&&a&&a.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ");var h="i"+o,f="schema"+o;d||(n+=" var "+f+" = validate.schema"+s+";"),n+="var "+l+";",d&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=l+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+p+", "+f+"["+h+"])) { "+l+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+l+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},5356:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||"");if(!1===e.opts.format)return p&&(o+=" if (true) { "),o;var d,h=e.opts.$data&&s&&s.$data;h?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",d="schema"+i):d=s;var f=e.opts.unknownFormats,m=Array.isArray(f);if(h)o+=" var "+(y="format"+i)+" = formats["+d+"]; var "+(g="isObject"+i)+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+(v="formatType"+i)+" = "+g+" && "+y+".type || 'string'; if ("+g+") { ",e.async&&(o+=" var async"+i+" = "+y+".async; "),o+=" "+y+" = "+y+".validate; } if (  ",h&&(o+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),o+=" (","ignore"!=f&&(o+=" ("+d+" && !"+y+" ",m&&(o+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),o+=") || "),o+=" ("+y+" && "+v+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?o+=" (async"+i+" ? await "+y+"("+l+") : "+y+"("+l+")) ":o+=" "+y+"("+l+") ",o+=" : "+y+".test("+l+"))))) {";else{var y;if(!(y=e.formats[s])){if("ignore"==f)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),p&&(o+=" if (true) { "),o;if(m&&f.indexOf(s)>=0)return p&&(o+=" if (true) { "),o;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,v=(g="object"==t(y)&&!(y instanceof RegExp)&&y.validate)&&y.type||"string";if(g){var b=!0===y.async;y=y.validate}if(v!=n)return p&&(o+=" if (true) { "),o;if(b){if(!e.async)throw new Error("async format in sync schema");o+=" if (!(await "+(w="formats"+e.util.getProperty(s)+".validate")+"("+l+"))) { "}else{o+=" if (! ";var w="formats"+e.util.getProperty(s);g&&(w+=".validate"),o+="function"==typeof y?" "+w+"("+l+") ":" "+w+".test("+l+") ",o+=") { "}}var x=x||[];x.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",o+=h?""+d:""+e.util.toQuotedString(s),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match format \"",o+=h?"' + "+d+" + '":""+e.util.escapeQuotes(s),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+e.util.toQuotedString(s),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var E=o;return o=x.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+E+"]); ":o+=" validate.errors = ["+E+"]; return false; ":o+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o}},8298:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e);f.level++;var m="valid"+f.level,y=e.schema.then,g=e.schema.else,v=void 0!==y&&(e.opts.strictKeywords?"object"==t(y)&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all)),b=void 0!==g&&(e.opts.strictKeywords?"object"==t(g)&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),w=f.baseId;if(v||b){var x;f.createErrors=!1,f.schema=s,f.schemaPath=c,f.errSchemaPath=u,o+=" var "+h+" = errors; var "+d+" = true;  ";var E=e.compositeRule;e.compositeRule=f.compositeRule=!0,o+="  "+e.validate(f)+" ",f.baseId=w,f.createErrors=!0,o+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=E,v?(o+=" if ("+m+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",o+="  "+e.validate(f)+" ",f.baseId=w,o+=" "+d+" = "+m+"; ",v&&b?o+=" var "+(x="ifClause"+i)+" = 'then'; ":x="'then'",o+=" } ",b&&(o+=" else { ")):o+=" if (!"+m+") { ",b&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",o+="  "+e.validate(f)+" ",f.baseId=w,o+=" "+d+" = "+m+"; ",v&&b?o+=" var "+(x="ifClause"+i)+" = 'else'; ":x="'else'",o+=" } "),o+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+x+" } ",!1!==e.opts.messages&&(o+=" , message: 'should match \"' + "+x+" + '\" schema' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" }   ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o}},7796:(e,t,r)=>{"use strict";e.exports={$ref:r(1041),allOf:r(6722),anyOf:r(4434),$comment:r(7497),const:r(3902),contains:r(2771),dependencies:r(8635),enum:r(8159),format:r(5356),if:r(8298),items:r(4707),maximum:r(8955),minimum:r(8955),maxItems:r(6842),minItems:r(6842),maxLength:r(2114),minLength:r(2114),maxProperties:r(7378),minProperties:r(7378),multipleOf:r(2464),not:r(3890),oneOf:r(2945),pattern:r(9201),properties:r(4335),propertyNames:r(4924),required:r(8310),uniqueItems:r(9642),validate:r(345)}},4707:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),m="";f.level++;var y="valid"+f.level,g="i"+i,v=f.dataLevel=e.dataLevel+1,b="data"+v,w=e.baseId;if(o+="var "+h+" = errors;var "+d+";",Array.isArray(s)){var x=e.schema.additionalItems;if(!1===x){o+=" "+d+" = "+l+".length <= "+s.length+"; ";var E=u;u=e.errSchemaPath+"/additionalItems",o+="  if (!"+d+") {   ";var _=_||[];_.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var S=o;o=_.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+S+"]); ":o+=" validate.errors = ["+S+"]; return false; ":o+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",u=E,p&&(m+="}",o+=" else { ")}var k=s;if(k)for(var C,A=-1,P=k.length-1;A<P;)if(C=k[A+=1],e.opts.strictKeywords?"object"==t(C)&&Object.keys(C).length>0||!1===C:e.util.schemaHasRules(C,e.RULES.all)){o+=" "+y+" = true; if ("+l+".length > "+A+") { ";var D=l+"["+A+"]";f.schema=C,f.schemaPath=c+"["+A+"]",f.errSchemaPath=u+"/"+A,f.errorPath=e.util.getPathExpr(e.errorPath,A,e.opts.jsonPointers,!0),f.dataPathArr[v]=A;var O=e.validate(f);f.baseId=w,e.util.varOccurences(O,b)<2?o+=" "+e.util.varReplace(O,b,D)+" ":o+=" var "+b+" = "+D+"; "+O+" ",o+=" }  ",p&&(o+=" if ("+y+") { ",m+="}")}"object"==t(x)&&(e.opts.strictKeywords?"object"==t(x)&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all))&&(f.schema=x,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",o+=" "+y+" = true; if ("+l+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+l+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),D=l+"["+g+"]",f.dataPathArr[v]=g,O=e.validate(f),f.baseId=w,e.util.varOccurences(O,b)<2?o+=" "+e.util.varReplace(O,b,D)+" ":o+=" var "+b+" = "+D+"; "+O+" ",p&&(o+=" if (!"+y+") break; "),o+=" } }  ",p&&(o+=" if ("+y+") { ",m+="}"))}else(e.opts.strictKeywords?"object"==t(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all))&&(f.schema=s,f.schemaPath=c,f.errSchemaPath=u,o+="  for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),D=l+"["+g+"]",f.dataPathArr[v]=g,O=e.validate(f),f.baseId=w,e.util.varOccurences(O,b)<2?o+=" "+e.util.varReplace(O,b,D)+" ":o+=" var "+b+" = "+D+"; "+O+" ",p&&(o+=" if (!"+y+") break; "),o+=" }");return p&&(o+=" "+m+" if ("+h+" == errors) {"),o}},2464:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");o+="var division"+i+";if (",d&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+i+" = "+l+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+i+" !== parseInt(division"+i+") ",o+=" ) ",d&&(o+="  )  "),o+=" ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},3890:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(e.opts.strictKeywords?"object"==t(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=c,h.errSchemaPath=u,o+=" var "+d+" = errors;  ";var m,y=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(m=h.opts.allErrors,h.opts.allErrors=!1),o+=" "+e.validate(h)+" ",h.createErrors=!0,m&&(h.opts.allErrors=m),e.compositeRule=h.compositeRule=y,o+=" if ("+f+") {   ";var g=g||[];g.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;o=g.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else o+="  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(o+=" if (false) { ");return o}},2945:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h="errs__"+i,f=e.util.copy(e),m="";f.level++;var y="valid"+f.level,g=f.baseId,v="prevValid"+i,b="passingSchemas"+i;o+="var "+h+" = errors , "+v+" = false , "+d+" = false , "+b+" = null; ";var w=e.compositeRule;e.compositeRule=f.compositeRule=!0;var x=s;if(x)for(var E,_=-1,S=x.length-1;_<S;)E=x[_+=1],(e.opts.strictKeywords?"object"==t(E)&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all))?(f.schema=E,f.schemaPath=c+"["+_+"]",f.errSchemaPath=u+"/"+_,o+="  "+e.validate(f)+" ",f.baseId=g):o+=" var "+y+" = true; ",_&&(o+=" if ("+y+" && "+v+") { "+d+" = false; "+b+" = ["+b+", "+_+"]; } else { ",m+="}"),o+=" if ("+y+") { "+d+" = "+v+" = true; "+b+" = "+_+"; }";return e.compositeRule=f.compositeRule=w,o+=m+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+b+" } ",!1!==e.opts.messages&&(o+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(o+=" } "),o}},9201:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d=e.opts.$data&&s&&s.$data;d?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(d?"(new RegExp("+n+"))":e.usePattern(s))+".test("+l+") ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",o+=d?""+n:""+e.util.toQuotedString(s),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=d?"' + "+n+" + '":""+e.util.escapeQuotes(s),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+e.util.toQuotedString(s),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},4335:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="errs__"+i,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,y="key"+i,g="idx"+i,v=h.dataLevel=e.dataLevel+1,b="data"+v,w="dataProperties"+i,x=Object.keys(s||{}).filter(I),E=e.schema.patternProperties||{},_=Object.keys(E).filter(I),S=e.schema.additionalProperties,k=x.length||_.length,C=!1===S,A="object"==t(S)&&Object.keys(S).length,P=e.opts.removeAdditional,D=C||A||P,O=e.opts.ownProperties,T=e.baseId,F=e.schema.required;if(F&&(!e.opts.$data||!F.$data)&&F.length<e.opts.loopRequired)var j=e.util.toHash(F);function I(e){return"__proto__"!==e}if(o+="var "+d+" = errors;var "+m+" = true;",O&&(o+=" var "+w+" = undefined;"),D){if(o+=O?" "+w+" = "+w+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+w+".length; "+g+"++) { var "+y+" = "+w+"["+g+"]; ":" for (var "+y+" in "+l+") { ",k){if(o+=" var isAdditional"+i+" = !(false ",x.length)if(x.length>8)o+=" || validate.schema"+c+".hasOwnProperty("+y+") ";else{var R=x;if(R)for(var N=-1,M=R.length-1;N<M;)W=R[N+=1],o+=" || "+y+" == "+e.util.toQuotedString(W)+" "}if(_.length){var L=_;if(L)for(var B=-1,q=L.length-1;B<q;)ae=L[B+=1],o+=" || "+e.usePattern(ae)+".test("+y+") "}o+=" ); if (isAdditional"+i+") { "}if("all"==P)o+=" delete "+l+"["+y+"]; ";else{var U=e.errorPath,z="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),C)if(P)o+=" delete "+l+"["+y+"]; ";else{o+=" "+m+" = false; ";var $=u;u=e.errSchemaPath+"/additionalProperties",(ne=ne||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+z+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is an invalid additional property":o+="should NOT have additional properties",o+="' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var G=o;o=ne.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+G+"]); ":o+=" validate.errors = ["+G+"]; return false; ":o+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=$,p&&(o+=" break; ")}else if(A)if("failing"==P){o+=" var "+d+" = errors;  ";var J=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=S,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var H=l+"["+y+"]";h.dataPathArr[v]=y;var V=e.validate(h);h.baseId=T,e.util.varOccurences(V,b)<2?o+=" "+e.util.varReplace(V,b,H)+" ":o+=" var "+b+" = "+H+"; "+V+" ",o+=" if (!"+m+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+y+"]; }  ",e.compositeRule=h.compositeRule=J}else h.schema=S,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers),H=l+"["+y+"]",h.dataPathArr[v]=y,V=e.validate(h),h.baseId=T,e.util.varOccurences(V,b)<2?o+=" "+e.util.varReplace(V,b,H)+" ":o+=" var "+b+" = "+H+"; "+V+" ",p&&(o+=" if (!"+m+") break; ");e.errorPath=U}k&&(o+=" } "),o+=" }  ",p&&(o+=" if ("+m+") { ",f+="}")}var X=e.opts.useDefaults&&!e.compositeRule;if(x.length){var K=x;if(K)for(var W,Y=-1,Q=K.length-1;Y<Q;){var Z=s[W=K[Y+=1]];if(e.opts.strictKeywords?"object"==t(Z)&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){var ee=e.util.getProperty(W),te=(H=l+ee,X&&void 0!==Z.default);if(h.schema=Z,h.schemaPath=c+ee,h.errSchemaPath=u+"/"+e.util.escapeFragment(W),h.errorPath=e.util.getPath(e.errorPath,W,e.opts.jsonPointers),h.dataPathArr[v]=e.util.toQuotedString(W),V=e.validate(h),h.baseId=T,e.util.varOccurences(V,b)<2){V=e.util.varReplace(V,b,H);var re=H}else re=b,o+=" var "+b+" = "+H+"; ";if(te)o+=" "+V+" ";else{if(j&&j[W]){o+=" if ( "+re+" === undefined ",O&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(W)+"') "),o+=") { "+m+" = false; ",U=e.errorPath,$=u;var ne,oe=e.util.escapeQuotes(W);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(U,W,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(ne=ne||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+oe+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+oe+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",G=o,o=ne.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+G+"]); ":o+=" validate.errors = ["+G+"]; return false; ":o+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=$,e.errorPath=U,o+=" } else { "}else p?(o+=" if ( "+re+" === undefined ",O&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(W)+"') "),o+=") { "+m+" = true; } else { "):(o+=" if ("+re+" !== undefined ",O&&(o+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(W)+"') "),o+=" ) { ");o+=" "+V+" } "}}p&&(o+=" if ("+m+") { ",f+="}")}}if(_.length){var ie=_;if(ie)for(var ae,se=-1,ce=ie.length-1;se<ce;)Z=E[ae=ie[se+=1]],(e.opts.strictKeywords?"object"==t(Z)&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all))&&(h.schema=Z,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),o+=O?" "+w+" = "+w+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+w+".length; "+g+"++) { var "+y+" = "+w+"["+g+"]; ":" for (var "+y+" in "+l+") { ",o+=" if ("+e.usePattern(ae)+".test("+y+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers),H=l+"["+y+"]",h.dataPathArr[v]=y,V=e.validate(h),h.baseId=T,e.util.varOccurences(V,b)<2?o+=" "+e.util.varReplace(V,b,H)+" ":o+=" var "+b+" = "+H+"; "+V+" ",p&&(o+=" if (!"+m+") break; "),o+=" } ",p&&(o+=" else "+m+" = true; "),o+=" }  ",p&&(o+=" if ("+m+") { ",f+="}"))}return p&&(o+=" "+f+" if ("+d+" == errors) {"),o}},4924:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="errs__"+i,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(o+="var "+d+" = errors;",e.opts.strictKeywords?"object"==t(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=c,h.errSchemaPath=u;var m="key"+i,y="idx"+i,g="i"+i,v="' + "+m+" + '",b="data"+(h.dataLevel=e.dataLevel+1),w="dataProperties"+i,x=e.opts.ownProperties,E=e.baseId;x&&(o+=" var "+w+" = undefined; "),o+=x?" "+w+" = "+w+" || Object.keys("+l+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+m+" = "+w+"["+y+"]; ":" for (var "+m+" in "+l+") { ",o+=" var startErrs"+i+" = errors; ";var _=m,S=e.compositeRule;e.compositeRule=h.compositeRule=!0;var k=e.validate(h);h.baseId=E,e.util.varOccurences(k,b)<2?o+=" "+e.util.varReplace(k,b,_)+" ":o+=" var "+b+" = "+_+"; "+k+" ",e.compositeRule=h.compositeRule=S,o+=" if (!"+f+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(o+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),p&&(o+=" break; "),o+=" } }"}return p&&(o+="  if ("+d+" == errors) {"),o}},1041:e=>{"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d="valid"+a;if("#"==c||"#/"==c)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),p&&(i+=" if (true) { ")}}else if(h.inline){var y=e.util.copy(e);y.level++;var g="valid"+y.level;y.schema=h.schema,y.schemaPath="",y.errSchemaPath=c,i+=" "+e.validate(y).replace(/validate\.schema/g,h.code)+" ",p&&(i+=" if ("+g+") { ")}else n=!0===h.$async||e.async&&!1!==h.$async,o=h.code}if(o){var v;(v=v||[]).push(i),i="",e.opts.passContext?i+=" "+o+".call(this, ":i+=" "+o+"( ",i+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(i+=" var "+d+"; "),i+=" try { await "+b+"; ",p&&(i+=" "+d+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(i+=" "+d+" = false; "),i+=" } ",p&&(i+=" if ("+d+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",p&&(i+=" else { ")}return i}},8310:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r,n){var o=" ",i=e.level,a=e.dataLevel,s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h=e.opts.$data&&s&&s.$data;h&&(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ");var f="schema"+i;if(!h)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],y=s;if(y)for(var g,v=-1,b=y.length-1;v<b;){g=y[v+=1];var w=e.schema.properties[g];w&&(e.opts.strictKeywords?"object"==t(w)&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))||(m[m.length]=g)}}else m=s;if(h||m.length){var x=e.errorPath,E=h||m.length>=e.opts.loopRequired,_=e.opts.ownProperties;if(p)if(o+=" var missing"+i+"; ",E){h||(o+=" var "+f+" = validate.schema"+c+"; ");var S="' + "+(O="schema"+i+"["+(P="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,O,e.opts.jsonPointers)),o+=" var "+d+" = true; ",h&&(o+=" if (schema"+i+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+i+")) "+d+" = false; else {"),o+=" for (var "+P+" = 0; "+P+" < "+f+".length; "+P+"++) { "+d+" = "+l+"["+f+"["+P+"]] !== undefined ",_&&(o+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+f+"["+P+"]) "),o+="; if (!"+d+") break; } ",h&&(o+="  }  "),o+="  if (!"+d+") {   ",(C=C||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+S+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var k=o;o=C.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else{o+=" if ( ";var C,A=m;if(A)for(var P=-1,D=A.length-1;P<D;)F=A[P+=1],P&&(o+=" || "),o+=" ( ( "+(N=l+(R=e.util.getProperty(F)))+" === undefined ",_&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(F)+"') "),o+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:R)+") ) ";o+=") {  ",S="' + "+(O="missing"+i)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,O,!0):x+" + "+O),(C=C||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+S+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",k=o,o=C.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else if(E){var O;h||(o+=" var "+f+" = validate.schema"+c+"; "),S="' + "+(O="schema"+i+"["+(P="i"+i)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,O,e.opts.jsonPointers)),h&&(o+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+S+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),o+=" for (var "+P+" = 0; "+P+" < "+f+".length; "+P+"++) { if ("+l+"["+f+"["+P+"]] === undefined ",_&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+f+"["+P+"]) "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+S+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(o+="  }  ")}else{var T=m;if(T)for(var F,j=-1,I=T.length-1;j<I;){F=T[j+=1];var R=e.util.getProperty(F),N=(S=e.util.escapeQuotes(F),l+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,F,e.opts.jsonPointers)),o+=" if ( "+N+" === undefined ",_&&(o+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(F)+"') "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+S+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=x}else p&&(o+=" if (true) {");return o}},9642:e=>{"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+i,h=e.opts.$data&&s&&s.$data;if(h?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,(s||h)&&!1!==e.opts.uniqueItems){h&&(o+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),o+=" var i = "+l+".length , "+d+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+d+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+l+"[i]; ";var y="checkDataType"+(m?"s":"");o+=" if ("+e.util[y](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",h&&(o+="  }  "),o+=" if (!"+d+") {   ";var g=g||[];g.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;o=g.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o}},345:e=>{"use strict";e.exports=function(e,t,r){var n="",o=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var c="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",o&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){t="false schema";var u=e.level,p=e.dataLevel,l=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,m="data"+(p||""),y="valid"+u;if(!1===e.schema){e.isTop?f=!0:n+=" var "+y+" = false; ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var g=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+y+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;if(u=e.level=0,p=e.dataLevel=0,m="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(u=e.level,m="data"+((p=e.dataLevel)||""),a&&(e.baseId=e.resolve.url(e.baseId,a)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+u+" = errors;"}y="valid"+u,f=!e.opts.allErrors;var w="",x="",E=e.schema.type,_=Array.isArray(E);if(E&&e.opts.nullable&&!0===e.schema.nullable&&(_?-1==E.indexOf("null")&&(E=E.concat("null")):"null"!=E&&(E=[E,"null"],_=!0)),_&&1==E.length&&(E=E[0],_=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),E){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,E);var k=e.RULES.types[E];if(S||_||!0===k||k&&!Y(k)){d=e.schemaPath+".type",h=e.errSchemaPath+"/type",d=e.schemaPath+".type",h=e.errSchemaPath+"/type";var C=_?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[C](E,m,e.opts.strictNumbers,!0)+") { ",S){var A="dataType"+u,P="coerced"+u;n+=" var "+A+" = typeof "+m+"; var "+P+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+A+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+A+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+P+" = "+m+"; } "),n+=" if ("+P+" !== undefined) ; ";var D=S;if(D)for(var O,T=-1,F=D.length-1;T<F;)"string"==(O=D[T+=1])?n+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+P+" = '' + "+m+"; else if ("+m+" === null) "+P+" = ''; ":"number"==O||"integer"==O?(n+=" else if ("+A+" == 'boolean' || "+m+" === null || ("+A+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==O&&(n+=" && !("+m+" % 1)"),n+=")) "+P+" = +"+m+"; "):"boolean"==O?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+P+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+P+" = true; ":"null"==O?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+P+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+m+" == null) "+P+" = ["+m+"]; ");n+=" else {   ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",g=n,n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+P+" !== undefined) {  ";var j=p?"data"+(p-1||""):"parentData";n+=" "+m+" = "+P+"; ",p||(n+="if ("+j+" !== undefined)"),n+=" "+j+"["+(p?e.dataPathArr[p]:"parentDataProperty")+"] = "+P+"; } "}else(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",g=n,n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(e.schema.$ref&&!i)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",x+="}");else{var I=e.RULES;if(I)for(var R=-1,N=I.length-1;R<N;)if(Y(k=I[R+=1])){if(k.type&&(n+=" if ("+e.util.checkDataType(k.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==k.type&&e.schema.properties){l=e.schema.properties;var M=Object.keys(l);if(M)for(var L,B=-1,q=M.length-1;B<q;)if(void 0!==($=l[L=M[B+=1]]).default){var U=m+e.util.getProperty(L);if(e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+U,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}else if("array"==k.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){T=-1;for(var $,G=z.length-1;T<G;)if(void 0!==($=z[T+=1]).default)if(U=m+"["+T+"]",e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+U,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault($.default)+" ":n+=" "+JSON.stringify($.default)+" ",n+="; "}}var J,H=k.rules;if(H)for(var V,X=-1,K=H.length-1;X<K;)if(Q(V=H[X+=1])){var W=V.code(e,V.keyword,k.type);W&&(n+=" "+W+" ",f&&(w+="}"))}if(f&&(n+=" "+w+" ",w=""),k.type&&(n+=" } ",E&&E===k.type&&!S))n+=" else { ",d=e.schemaPath+".type",h=e.errSchemaPath+"/type",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",g=n,n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ";f&&(n+=" if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",x+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(Q(t[r]))return!0}function Q(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+x+" "),v?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+y+" = errors === errs_"+u+";",n}},6156:(e,t,r)=>{"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(5924),i=r(4717);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var a=0;a<i.length;a++)c(e,i[a],t);else c(e,i,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function c(e,t,n){for(var i,a=0;a<r.length;a++){var s=r[a];if(s.type==t){i=s;break}}i||(i={type:t,rules:[]},r.push(i));var c={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};i.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},5949:e=>{function t(){var e=[].slice.call(arguments);function t(t,r){Object.keys(r).forEach((function(n){~e.indexOf(n)||(t[n]=r[n])}))}return function(){for(var e=[].slice.call(arguments),r=0,n={};r<e.length;r++)t(n,e[r]);return n}}function r(e,n,o){var i=t("name","message","stack","constructor","toJSON")(n||{});for(var a in this.message=e||"Unspecified AssertionError",this.showDiff=!1,i)this[a]=i[a];if(o=o||r,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}e.exports=r,r.prototype=Object.create(Error.prototype),r.prototype.name="AssertionError",r.prototype.constructor=r,r.prototype.toJSON=function(e){var r=t("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(r.stack=this.stack),r}},1285:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=c(e),a=i[0],s=i[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),p=0,l=s>0?a-4:a;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[p++]=t>>16&255,u[p++]=t>>8&255,u[p++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[p++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[p++]=t>>8&255,u[p++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(u(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3086:(e,t,r)=>{var n,o,i,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[a]={exports:{}};t[a][0].call(p.exports,(function(e){return o(t[a][1][e]||e)}),p,p.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,t,r){"use strict";var n;try{throw new Error}catch(e){n=e}var o=e("./schedule"),i=e("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function s(e){for(;e.length()>0;)c(e)}function c(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()},a.prototype.invoke=function(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()},a.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},a.prototype._drainQueues=function(){s(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,s(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},t.exports=a,t.exports.firstLineError=n},{"./queue":26,"./schedule":29}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=!1,i=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var u=r(i),p=new e(t);p._propagateFrom(this,1);var l=this._target();if(p._setBoundTo(u),u instanceof e){var d={promiseRejectionQueued:!1,promise:p,target:l,bindingPromise:u};l._then(t,a,void 0,p,d),u._then(s,c,void 0,p,d),p._setOnCancel(u)}else p._resolveCallback(l);return p},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;function o(e){return function(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(i)}return o}(e,this.pop()).apply(e,this)}function i(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}r.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=a;else if(n){var r=(void 0)(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),a=i.tryCatch,s=i.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=a(e).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),c.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,o=r.tryCatch,i=r.errorObj;return function(e,a,s){return function(c){var u=s._boundValue();e:for(var p=0;p<e.length;++p){var l=e[p];if(l===Error||null!=l&&l.prototype instanceof Error){if(c instanceof l)return o(a).call(u,c)}else if("function"==typeof l){var d=o(l).call(u,c);if(d===i)return d;if(d)return o(a).call(u,c)}else if(r.isObject(c)){for(var h=n(l),f=0;f<h.length;++f){var m=h[f];if(l[m]!=c[m])continue e}return o(a).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(o())}function o(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,i=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,c=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=i,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=o,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,a,c,u,p=t._async,l=e("./errors").Warning,d=e("./util"),h=e("./es5"),f=d.canAttachTrace,m=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,y=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,b=null,w=!1,x=!(0==d.env("BLUEBIRD_DEBUG")),E=!(0==d.env("BLUEBIRD_WARNINGS")||!x&&!d.env("BLUEBIRD_WARNINGS")),_=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!x&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),S=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(E||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var e=[];function r(){for(var t=0;t<e.length;++t)e[t]._notifyUnhandledRejection();n()}function n(){e.length=0}u=function(t){e.push(t),setTimeout(r,1)},h.defineProperty(t,"_unhandledRejectionCheck",{value:r}),h.defineProperty(t,"_unhandledRejectionClear",{value:n})}(),t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u(this))},t.prototype._notifyUnhandledRejectionIsHandled=function(){X("rejectionHandled",i,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),X("unhandledRejection",a,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,r){return G(e,t,r||this)},t.onPossiblyUnhandledRejection=function(e){var r=t._getContext();a=d.contextBind(r,e)},t.onUnhandledRejectionHandled=function(e){var r=t._getContext();i=d.contextBind(r,e)};var k=function(){};t.longStackTraces=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&W()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace,o=t.prototype._dereferenceTrace;re.longStackTraces=!0,k=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,t.prototype._dereferenceTrace=o,r.deactivateLongStackTraces(),re.longStackTraces=!1},t.prototype._captureStackTrace=U,t.prototype._attachExtraTrace=z,t.prototype._dereferenceTrace=$,r.activateLongStackTraces()}},t.hasLongStackTraces=function(){return re.longStackTraces&&W()};var C={unhandledrejection:{before:function(){var e=d.global.onunhandledrejection;return d.global.onunhandledrejection=null,e},after:function(e){d.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=d.global.onrejectionhandled;return d.global.onrejectionhandled=null,e},after:function(e){d.global.onrejectionhandled=e}}},A=function(){var e=function(e,t){if(!e)return!d.global.dispatchEvent(t);var r;try{return r=e.before(),!d.global.dispatchEvent(t)}finally{e.after(r)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new CustomEvent(t,{detail:r,cancelable:!0});return h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(C[t],n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new Event(t,{cancelable:!0});return n.detail=r,h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(C[t],n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,r),e(C[t],n)})}catch(e){}return function(){return!1}}(),P=d.isNode?function(){return process.emit.apply(process,arguments)}:d.global?function(e){var t="on"+e.toLowerCase(),r=d.global[t];return!!r&&(r.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function D(e,t){return{promise:t}}var O={promiseCreated:D,promiseFulfilled:D,promiseRejected:D,promiseResolved:D,promiseCancelled:D,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:D},T=function(e){var t=!1;try{t=P.apply(null,arguments)}catch(e){p.throwLater(e),t=!0}var r=!1;try{r=A(e,O[e].apply(null,arguments))}catch(e){p.throwLater(e),r=!0}return r||t};function F(){return!1}function j(e,t,r){var n=this;try{e(t,r,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+d.toString(e));n._attachCancellationCallback(e)}))}catch(e){return e}}function I(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?d.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function R(){return this._onCancelField}function N(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function L(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&k()),"warnings"in e){var r=e.warnings;re.warnings=!!r,S=re.warnings,d.isObject(r)&&"wForgottenReturn"in r&&(S=!!r.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(p.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=M,t.prototype._propagateFrom=L,t.prototype._onCancel=R,t.prototype._setOnCancel=N,t.prototype._attachCancellationCallback=I,t.prototype._execute=j,B=L,re.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,t.prototype._fireEvent=T):!e.monitoring&&re.monitoring&&(re.monitoring=!1,t.prototype._fireEvent=F)),"asyncHooks"in e&&d.nodeSupportsAsyncResource){var i=re.asyncHooks,a=!!e.asyncHooks;i!==a&&(re.asyncHooks=a,a?n():o())}return t},t.prototype._fireEvent=F,t.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var B=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function q(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function U(){this._trace=new ee(this._peekContext())}function z(e,t){if(f(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=H(e);d.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),d.notEnumerableProp(e,"__stackCleaned__",!0)}}}function $(){this._trace=void 0}function G(e,r,n){if(re.warnings){var o,i=new l(e);if(r)n._attachExtraTrace(i);else if(re.longStackTraces&&(o=t._peekContext()))o.attachExtraTrace(i);else{var a=H(i);i.stack=a.message+"\n"+a.stack.join("\n")}T("warning",i)||V(i,"",!0)}}function J(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o="    (No stack trace)"===n||v.test(n),i=o&&Y(n);o&&!i&&(w&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function H(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:J(t)}}function V(e,t,r){if("undefined"!=typeof console){var n;if(d.isObject(e)){var o=e.stack;n=t+b(o,e)}else n=t+String(e);"function"==typeof c?c(n,r):"function"!=typeof console.log&&"object"!==s(console.log)||console.log(n)}}function X(e,t,r,n){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){p.throwLater(e)}"unhandledRejection"===e?T(e,r,n)||o||V(r,"Unhandled rejection "):T(e,n)}function K(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():d.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function W(){return"function"==typeof te}var Y=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Z(e){var t=e.match(Q);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function ee(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);te(this,ee),t>32&&this.uncycle()}d.inherits(ee,Error),r.CapturedTrace=ee,ee.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,o=this;void 0!==o;++n)t.push(o),o=o._parent;for(n=(e=this._length=n)-1;n>=0;--n){var i=t[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<e;++n){var a=r[t[n].stack];if(void 0!==a&&a!==n){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,u=n-2;u>=0;--u)t[u]._length=c,c++;return}}}},ee.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=H(e),r=t.message,n=[t.stack],o=this;void 0!==o;)n.push(J(o.stack.split("\n"))),o=o._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],o=t.length-1,i=t[o],a=-1,s=n.length-1;s>=0;--s)if(n[s]===i){a=s;break}for(s=a;s>=0;--s){var c=n[s];if(t[o]!==c)break;t.pop(),o--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),d.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),d.notEnumerableProp(e,"__stackCleaned__",!0)}};var te=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():K(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,b=t;var r=Error.captureStackTrace;return Y=function(e){return m.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,b=t,w=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return!("stack"in o)&&n&&"number"==typeof Error.stackTraceLimit?(v=e,b=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(b=function(e,t){return"string"==typeof e?e:"object"!==s(t)&&"function"!=typeof t||void 0===t.name||void 0===t.message?K(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(c=function(e){console.warn(e)},d.isNode&&process.stderr.isTTY?c=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:d.isNode||"string"!=typeof(new Error).stack||(c=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:E,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return _&&t.longStackTraces(),{asyncHooks:function(){return re.asyncHooks},longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return B},boundValueFunction:function(){return q},checkForgottenReturns:function(e,t,r,n,o){if(void 0===e&&null!==t&&S){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var i="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),c=J(s),u=c.length-1;u>=0;--u){var p=c[u];if(!y.test(p)){var l=p.match(g);l&&(i="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(c.length>0){var d=c[0];for(u=0;u<s.length;++u)if(s[u]===d){u>0&&(a="\n"+s[u-1]);break}}}var h="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(h,!0,t)}},setBounds:function(e,t){if(W()){for(var r,n,o=(e.stack||"").split("\n"),i=(t.stack||"").split("\n"),a=-1,s=-1,c=0;c<o.length;++c)if(u=Z(o[c])){r=u.fileName,a=u.line;break}for(c=0;c<i.length;++c){var u;if(u=Z(i[c])){n=u.fileName,s=u.line;break}}a<0||s<0||!r||!n||r!==n||a>=s||(Y=function(e){if(m.test(e))return!0;var t=Z(e);return!!(t&&t.fileName===r&&a<=t.line&&t.line<=s)})}},warn:G,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),G(r)},CapturedTrace:ee,fireDomEvent:A,fireGlobalEvent:P}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function o(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,o,i=e("./es5"),a=i.freeze,s=e("./util"),c=s.inherits,u=s.notEnumerableProp;function p(e,t){function r(n){if(!(this instanceof r))return new r(n);u(this,"message","string"==typeof n?n:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var l=p("Warning","warning"),d=p("CancellationError","cancellation error"),h=p("TimeoutError","timeout error"),f=p("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(e){n=p("TypeError","type error"),o=p("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"==typeof Array.prototype[m[y]]&&(f.prototype[m[y]]=Array.prototype[m[y]]);i.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var g=0;function v(e){if(!(this instanceof v))return new v(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var e=Array(4*g+1).join(" "),t="\n"+e+"AggregateError of:\n";g++,e=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];t+=(n=o.join("\n"))+"\n"}return g--,t},c(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:d,TimeoutError:h,OperationalError:v,RejectionError:v,AggregateError:f}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error,TypeError:n,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:l}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.CancellationError,a=o.errorObj,s=e("./catch_filter")(n);function c(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function p(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function l(){return h.call(this,this.promise._target()._settledValue())}function d(e){if(!p(this,e))return a.e=e,a}function h(e){var o=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(o._boundValue()):s.call(o._boundValue(),e);if(c===n)return c;if(void 0!==c){o._setReturnedNonUndefined();var h=r(c,o);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var f=new i("late cancellation observer");return o._attachExtraTrace(f),a.e=f,a}h.isPending()&&h._attachCancellationCallback(new u(this))}return h._then(l,d,void 0,this,void 0)}}}return o.isRejected()?(p(this),a.e=e,a):(p(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){p(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,h,h)},t.prototype.tap=function(e){return this._passThrough(e,1,h)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,h);var n,i=new Array(r-1),a=0;for(n=0;n<r-1;++n){var c=arguments[n];if(!o.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(c)));i[a++]=c}i.length=a;var u=arguments[n];return this._passThrough(s(i,u,this),1,void 0,h)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var s=e("./errors").TypeError,c=e("./util"),u=c.errorObj,p=c.tryCatch,l=[];function d(e,r,o,i){if(a.cancellation()){var s=new t(n),c=this._finallyPromise=new t(n);this._promise=s.lastly((function(){return c})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new t(n))._captureStackTrace();this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(l):l,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,i),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var r=this._promise;if(e===u)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var i=o(n,this._promise);if(i instanceof t||null!==(i=function(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var a=p(r[i])(e);if(n._popContext(),a===u){n._pushContext();var s=t.reject(u.e);return n._popContext(),s}var c=o(a,n);if(c instanceof t)return c}return null}(i,this._yieldHandlers,this._promise))){var a=(i=i._target())._bitField;0==(50397184&a)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=d,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new n(void 0,void 0,r,o),a=i.promise();return i._generator=t,i._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new s("expecting a function but got "+c.classString(e));l.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new d(e,this),o=n.promise();return n._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var o=new r(n).promise();return void 0!==e?o.spread(e):o}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var c=e("./util"),u=c.tryCatch,p=c.errorObj,l=t._async;function d(e,r,n,o){this.constructor$(e),this._promise._captureStackTrace();var a=t._getContext();if(this._callback=c.contextBind(a,r),this._preservedValues=o===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0),c.isArray(e))for(var s=0;s<e.length;++s){var u=e[s];u instanceof t&&u.suppressUnhandledRejections()}}function h(e,r,o,i){if("function"!=typeof r)return n("expecting a function but got "+c.classString(r));var a=0;if(void 0!==o){if("object"!==s(o)||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));a=o.concurrency}return new d(e,r,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,i).promise()}c.inherits(d,r),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),s=this._preservedValues,c=this._limit;if(r<0){if(n[r=-1*r-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return n[r]=e,this._queue.push(r),!1;null!==s&&(s[r]=e);var l=this._promise,d=this._callback,h=l._boundValue();l._pushContext();var f=u(d).call(h,e,r,i),m=l._popContext();if(a.checkForgottenReturns(f,m,null!==s?"Promise.filter":"Promise.map",l),f===p)return this._reject(f.e),!0;var y=o(f,this._promise);if(y instanceof t){var g=(y=y._target())._bitField;if(0==(50397184&g))return c>=1&&this._inFlight++,n[r]=y,y._proxy(this,-1*(r+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(y._reason()),!0):(this._cancel(),!0);f=y._value()}n[r]=f}return++this._totalResolved>=i&&(null!==s?this._filter(n,s):this._resolve(n),!0)},d.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},d.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),o=0,i=0;i<r;++i)e[i]&&(n[o++]=t[i]);n.length=o,this._resolve(n)},d.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return h(this,e,t,null)},t.map=function(e,t,r,n){return h(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var o=s(e).apply(this,arguments),a=n._popContext();return i.checkForgottenReturns(o,a,"Promise.method",n),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+a.classString(e));var n,c=new t(r);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],p=arguments[2];n=a.isArray(u)?s(e).apply(p,u):s(e).call(p,u)}else n=s(e)();var l=c._popContext();return i.checkForgottenReturns(n,l,"Promise.try",c),c._resolveFromSyncValue(n),c},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),o=n.maybeWrapAsError,i=e("./errors").OperationalError,a=e("./es5"),s=/^(?:name|message|stack|cause)$/;function c(e){var t;if(function(e){return e instanceof Error&&a.getPrototypeOf(e)===Error.prototype}(e)){(t=new i(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=a.keys(e),o=0;o<r.length;++o){var c=r[o];s.test(c)||(t[c]=e[c])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var i=c(o(r));e._attachExtraTrace(i),e._reject(i)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,o=r.tryCatch,i=r.errorObj;function a(e,t){if(!r.isArray(e))return s.call(this,e,t);var a=o(t).apply(this._boundValue(),[null].concat(e));a===i&&n.throwLater(a.e)}function s(e,t){var r=this._boundValue(),a=void 0===e?o(t).call(r,null):o(t).call(r,null,e);a===i&&n.throwLater(a.e)}function c(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var a=o(t).call(this._boundValue(),e);a===i&&n.throwLater(a.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=s;void 0!==t&&Object(t).spread&&(r=a),this._then(r,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,r){"use strict";t.exports=function(){var r=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},n=function(){return new F.PromiseInspection(this._target())},o=function(e){return F.reject(new g(e))};function i(){}var a={},s=e("./util");s.setReflectHandler(n);var c=function(){var e=process.domain;return void 0===e?null:e},u=function(){return{domain:c(),async:null}},p=s.isNode&&s.nodeSupportsAsyncResource?e("async_hooks").AsyncResource:null,l=function(){return{domain:c(),async:new p("Bluebird::Promise")}},d=s.isNode?u:function(){return null};s.notEnumerableProp(F,"_getContext",d);var h=e("./es5"),f=e("./async"),m=new f;h.defineProperty(F,"_async",{value:m});var y=e("./errors"),g=F.TypeError=y.TypeError;F.RangeError=y.RangeError;var v=F.CancellationError=y.CancellationError;F.TimeoutError=y.TimeoutError,F.OperationalError=y.OperationalError,F.RejectionError=y.OperationalError,F.AggregateError=y.AggregateError;var b=function(){},w={},x={},E=e("./thenables")(F,b),_=e("./promise_array")(F,b,E,o,i),S=e("./context")(F),k=S.create,C=e("./debuggability")(F,S,(function(){d=l,s.notEnumerableProp(F,"_getContext",l)}),(function(){d=u,s.notEnumerableProp(F,"_getContext",u)})),A=(C.CapturedTrace,e("./finally")(F,E,x)),P=e("./catch_filter")(x),D=e("./nodeback"),O=s.errorObj,T=s.tryCatch;function F(e){e!==b&&function(e,t){if(null==e||e.constructor!==F)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new g("expecting a function but got "+s.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function j(e){this.promise._resolveCallback(e)}function I(e){this.promise._rejectCallback(e,!1)}function R(e){var t=new F(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return F.prototype.toString=function(){return"[object Promise]"},F.prototype.caught=F.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var a=arguments[r];if(!s.isObject(a))return o("Catch statement predicate: expecting an object but got "+s.classString(a));n[i++]=a}if(n.length=i,"function"!=typeof(e=arguments[r]))throw new g("The last argument to .catch() must be a function, got "+s.toString(e));return this.then(void 0,P(n,e,this))}return this.then(void 0,e)},F.prototype.reflect=function(){return this._then(n,n,void 0,this,void 0)},F.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+s.classString(e);arguments.length>1&&(r+=", "+s.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},F.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},F.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+s.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},F.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},F.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},F.prototype.error=function(e){return this.caught(s.originatesFromRejection,e)},F.getNewLibraryCopy=t.exports,F.is=function(e){return e instanceof F},F.fromNode=F.fromCallback=function(e){var t=new F(b);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=T(e)(D(t,r));return n===O&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},F.all=function(e){return new _(e).promise()},F.cast=function(e){var t=E(e);return t instanceof F||((t=new F(b))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},F.resolve=F.fulfilled=F.cast,F.reject=F.rejected=function(e){var t=new F(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},F.setScheduler=function(e){if("function"!=typeof e)throw new g("expecting a function but got "+s.classString(e));return m.setScheduler(e)},F.prototype._then=function(e,t,r,n,o){var i=void 0!==o,a=i?o:new F(b),c=this._target(),u=c._bitField;i||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=d();if(0!=(50397184&u)){var l,h,f=c._settlePromiseCtx;0!=(33554432&u)?(h=c._rejectionHandler0,l=e):0!=(16777216&u)?(h=c._fulfillmentHandler0,l=t,c._unsetRejectionIsUnhandled()):(f=c._settlePromiseLateCancellationObserver,h=new v("late cancellation observer"),c._attachExtraTrace(h),l=t),m.invoke(f,c,{handler:s.contextBind(p,l),promise:a,receiver:n,value:h})}else c._addCallbacks(e,t,a,n,p);return a},F.prototype._length=function(){return 65535&this._bitField},F.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},F.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},F.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},F.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},F.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},F.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},F.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},F.prototype._isFinal=function(){return(4194304&this._bitField)>0},F.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},F.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},F.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},F.prototype._setAsyncGuaranteed=function(){if(!m.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},F.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},F.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==a)return void 0===t&&this._isBound()?this._boundValue():t},F.prototype._promiseAt=function(e){return this[4*e-4+2]},F.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},F.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},F.prototype._boundValue=function(){},F.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,o=e._receiverAt(0);void 0===o&&(o=a),this._addCallbacks(t,r,n,o,null)},F.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=a),this._addCallbacks(r,n,o,i,null)},F.prototype._addCallbacks=function(e,t,r,n,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=s.contextBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=s.contextBind(o,t));else{var a=4*i-4;this[a+2]=r,this[a+3]=n,"function"==typeof e&&(this[a+0]=s.contextBind(o,e)),"function"==typeof t&&(this[a+1]=s.contextBind(o,t))}return this._setLength(i+1),i},F.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},F.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=E(e,this);if(!(n instanceof F))return this._fulfill(e);t&&this._propagateFrom(n,2);var o=n._target();if(o!==this){var i=o._bitField;if(0==(50397184&i)){var a=this._length();a>0&&o._migrateCallback0(this);for(var s=1;s<a;++s)o._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&i))this._fulfill(o._value());else if(0!=(16777216&i))this._reject(o._reason());else{var c=new v("late cancellation observer");o._attachExtraTrace(c),this._reject(c)}}else this._reject(r())}},F.prototype._rejectCallback=function(e,t,r){var n=s.ensureErrorObject(e),o=n===e;if(!o&&!r&&C.warnings()){var i="a promise was rejected with a non-error: "+s.classString(e);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&o),this._reject(e)},F.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,r)}));r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},F.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0==(65536&o)){var i;n._pushContext(),t===w?r&&"number"==typeof r.length?i=T(e).apply(this._boundValue(),r):(i=O).e=new g("cannot .spread() a non-array: "+s.classString(r)):i=T(e).call(t,r);var a=n._popContext();0==(65536&(o=n._bitField))&&(i===x?n._reject(r):i===O?n._rejectCallback(i.e,!1):(C.checkForgottenReturns(i,a,"",n,this),n._resolveCallback(i)))}},F.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},F.prototype._followee=function(){return this._rejectionHandler0},F.prototype._setFollowee=function(e){this._rejectionHandler0=e},F.prototype._settlePromise=function(e,t,r,o){var a=e instanceof F,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(a&&e._invokeInternalOnCancel(),r instanceof A&&r.isFinallyHandler()?(r.cancelPromise=e,T(t).call(r,o)===O&&e._reject(O.e)):t===n?e._fulfill(n.call(r)):r instanceof i?r._promiseCancelled(e):a||e instanceof _?e._cancel():r.cancel()):"function"==typeof t?a?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,o,e)):t.call(r,o,e):r instanceof i?r._isResolved()||(0!=(33554432&s)?r._promiseFulfilled(o,e):r._promiseRejected(o,e)):a&&(c&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(o):e._reject(o))},F.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,o=e.value;"function"==typeof t?r instanceof F?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof F&&r._reject(o)},F.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},F.prototype._settlePromise0=function(e,t,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},F.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},F.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():m.settlePromises(this),this._dereferenceTrace())}},F.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return m.fatalError(e,s.isNode);(65535&t)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},F.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},F.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},F.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},F.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&h.defineProperty(F.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),F.defer=F.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new F(b),resolve:j,reject:I}},s.notEnumerableProp(F,"_makeSelfResolutionError",r),e("./method")(F,b,E,o,C),e("./bind")(F,b,E,C),e("./cancel")(F,_,o,C),e("./direct_resolve")(F),e("./synchronous_inspection")(F),e("./join")(F,_,E,b,m),F.Promise=F,F.version="3.7.2",e("./call_get.js")(F),e("./generators.js")(F,o,b,E,i,C),e("./map.js")(F,_,o,E,b,C),e("./nodeify.js")(F),e("./promisify.js")(F,b),e("./props.js")(F,_,E,o),e("./race.js")(F,b,E,o),e("./reduce.js")(F,_,o,E,b,C),e("./settle.js")(F,_,C),e("./some.js")(F,_,o),e("./timers.js")(F,b,C),e("./using.js")(F,o,E,k,b,C),e("./any.js")(F),e("./each.js")(F,b),e("./filter.js")(F,b),s.toFastProperties(F),s.toFastProperties(F.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R((function(){})),R(void 0),R(!1),R(new F(b)),C.setBounds(f.firstLineError,s.lastLineError),F}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var a=e("./util");function s(e){var n=this._promise=new t(r);e instanceof t&&(n._propagateFrom(e,3),e.suppressUnhandledRejections()),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,i),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(r,i){var s=n(this._values,this._promise);if(s instanceof t){var c=(s=s._target())._bitField;if(this._values=s,0==(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,i);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===i?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var u=o("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(u,!1)}},s.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var o=this._promise,i=!1,a=null,s=0;s<r;++s){var c=n(e[s],o);a=c instanceof t?(c=c._target())._bitField:null,i?null!==a&&c.suppressUnhandledRejections():null!==a?0==(50397184&a)?(c._proxy(this,s),this._values[s]=c):i=0!=(33554432&a)?this._promiseFulfilled(c._value(),s):0!=(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):i=this._promiseFulfilled(c,s)}i||o._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},o=e("./util"),i=e("./nodeback"),a=o.withAppended,c=o.maybeWrapAsError,u=o.canEvaluate,p=e("./errors").TypeError,l={__isPromisified__:!0},d=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!d.test(e)}function m(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function y(e,t,r){var n=o.getDataPropertyOrDefault(e,t+r,l);return!!n&&m(n)}var g=u?void 0:function(e,s,u,p,l,d){var h=function(){return this}(),f=e;function m(){var o=s;s===n&&(o=this);var u=new t(r);u._captureStackTrace();var p="string"==typeof f&&this!==h?this[f]:e,l=i(u,d);try{p.apply(o,a(arguments,l))}catch(e){u._rejectCallback(c(e),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof f&&(e=p),o.notEnumerableProp(m,"__isPromisified__",!0),m};function v(e,t,r,i,a){for(var s=new RegExp(t.replace(/([$])/,"\\$")+"$"),c=function(e,t,r,n){for(var i=o.inheritedDataKeys(e),a=[],s=0;s<i.length;++s){var c=i[s],u=e[c],l=n===h||h(c);"function"!=typeof u||m(u)||y(e,c,t)||!n(c,u,e,l)||a.push(c,u)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o))for(var i=o.replace(r,""),a=0;a<e.length;a+=2)if(e[a]===i)throw new p("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(a,t,r),a}(e,t,s,r),u=0,l=c.length;u<l;u+=2){var d=c[u],f=c[u+1],v=d+t;if(i===g)e[v]=g(d,n,d,f,t,a);else{var b=i(f,(function(){return g(d,n,d,f,t,a)}));o.notEnumerableProp(b,"__isPromisified__",!0),e[v]=b}}return o.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new p("expecting a function but got "+o.classString(e));if(m(e))return e;var r,i,a,s=(r=e,i=void 0===(t=Object(t)).context?n:t.context,a=!!t.multiArgs,g(r,i,void 0,r,null,a));return o.copyDescriptors(e,s,f),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==s(e))throw new p("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var i=t.filter;"function"!=typeof i&&(i=h);var a=t.promisifier;if("function"!=typeof a&&(a=g),!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var c=o.inheritedDataKeys(e),u=0;u<c.length;++u){var l=e[c[u]];"constructor"!==c[u]&&o.isClass(l)&&(v(l.prototype,n,i,a,r),v(l,n,i,a,r))}return v(e,n,i,a,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,a=e("./util"),s=a.isObject,c=e("./es5");"function"==typeof Map&&(i=Map);var u=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var o=new Array(2*n.size);return n.forEach(r,o),o}}();function p(e){var t,r=!1;if(void 0!==i&&e instanceof i)t=u(e),r=!0;else{var n=c.keys(e),o=n.length;t=new Array(2*o);for(var a=0;a<o;++a){var s=n[a];t[a]=e[s],t[a+o]=s}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function l(e){var r,i=n(e);return s(i)?(r=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new p(i).promise(),i instanceof t&&r._propagateFrom(i,2),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(p,r),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new i,r=e.length/2|0,n=0;n<r;++n){var o=e[r+n],a=e[n];t.set(o,a)}return t}(this._values);else{r={};for(var n=this.length(),o=0,a=this.length();o<a;++o)r[this._values[o+n]]=this._values[o]}return this._resolve(r),!0}return!1},p.prototype.shouldCopyValues=function(){return!1},p.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return l(this)},t.props=function(e){return l(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+0],e[i+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util");function a(e,s){var c,u=n(e);if(u instanceof t)return(c=u).then((function(e){return a(e,c)}));if(null===(e=i.asArray(e)))return o("expecting an array or an iterable object but got "+i.classString(e));var p=new t(r);void 0!==s&&p._propagateFrom(s,3);for(var l=p._fulfill,d=p._reject,h=0,f=e.length;h<f;++h){var m=e[h];(void 0!==m||h in e)&&t.cast(m)._then(l,d,void 0,p,null)}return p}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var s=e("./util"),c=s.tryCatch;function u(e,r,n,o){this.constructor$(e);var a=t._getContext();this._fn=s.contextBind(a,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,r,o){return"function"!=typeof t?n("expecting a function but got "+s.classString(t)):new u(e,t,r,o).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=o(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(h,void 0,void 0,this,void 0)):h.call(this,r)}function h(e){var r,n=this.array,o=n._promise,i=c(n._fn);o._pushContext(),(r=void 0!==n._eachValues?i.call(o._boundValue(),e,this.index,this.length):i.call(o._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var s=o._popContext();return a.checkForgottenReturns(r,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",o),r}s.inherits(u,r),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){var r,n;this._values=e;var o=e.length;void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r;for(var i=n;i<o;++i){var a=e[i];a instanceof t&&a.suppressUnhandledRejections()}if(!r.isRejected())for(;n<o;++n){var s={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(d,void 0,void 0,s,void 0),0==(127&n)&&r._setNoAsyncGuarantee()}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(p,p,void 0,r,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,r,n){return l(e,t,r,n)}}},{"./util":36}],29:[function(e,t,n){"use strict";var o,i,a,s,c,u=e("./util"),p=u.getNativePromise();if(u.isNode&&"undefined"==typeof MutationObserver){var l=r.g.setImmediate,d=process.nextTick;o=u.isRecentNode?function(e){l.call(r.g,e)}:function(e){d.call(process,e)}}else if("function"==typeof p&&"function"==typeof p.resolve){var h=p.resolve();o=function(e){h.then(e)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(i=document.createElement("div"),a={attributes:!0},s=!1,c=document.createElement("div"),new MutationObserver((function(){i.classList.toggle("foo"),s=!1})).observe(c,a),function(e){var t=new MutationObserver((function(){t.disconnect(),e()}));t.observe(i,a),s||(s=!0,c.classList.toggle("foo"))});t.exports=o},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=t.PromiseInspection;function i(e){this.constructor$(e)}e("./util").inherits(i,r),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var r=new o;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},i.prototype._promiseRejected=function(e,t){var r=new o;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=e("./errors").RangeError,a=e("./errors").AggregateError,s=o.isArray,c={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e),o=r.promise();return r.setHowMany(t),r.init(),o}o.inherits(u,r),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new a,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return p(e,t)},t.prototype.some=function(e){return p(this,e)},t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),o=n.errorObj,i=n.isObject,a={}.hasOwnProperty;return function(e,s){if(i(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return o.e=e,o}}(e);if(c===o){s&&s._pushContext();var u=t.reject(c.e);return s&&s._popContext(),u}if("function"==typeof c)return function(e){try{return a.call(e,"_promise0")}catch(e){return!1}}(e)?(u=new t(r),e._then(u._fulfill,u._reject,void 0,u,null),u):function(e,i,a){var s=new t(r),c=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var u=!0,p=n.tryCatch(i).call(e,(function(e){s&&(s._resolveCallback(e),s=null)}),(function(e){s&&(s._rejectCallback(e,u,!0),s=null)}));return u=!1,s&&p===o&&(s._rejectCallback(p.e,!0,!0),s=null),c}(e,c,s)}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.TimeoutError;function a(e){this.handle=e}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var i,c;return void 0!==o?(i=t.resolve(o)._then(s,null,null,e,void 0),n.cancellation()&&o instanceof t&&i._setOnCancel(o)):(i=new t(r),c=setTimeout((function(){i._fulfill()}),+e),n.cancellation()&&i._setOnCancel(new a(c)),i._captureStackTrace()),i._setAsyncGuaranteed(),i};function u(e){return clearTimeout(this.handle),e}function p(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){var r,s;e=+e;var c=new a(setTimeout((function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new i("operation timed out"):new i(t),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,s)}),e));return n.cancellation()?(s=this.then(),(r=s._then(u,p,void 0,c,void 0))._setOnCancel(c)):r=this._then(u,p,void 0,c,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var s=e("./util"),c=e("./errors").TypeError,u=e("./util").inherits,p=s.errorObj,l=s.tryCatch,d={};function h(e){setTimeout((function(){throw e}),0)}function f(e,r){var o=0,a=e.length,s=new t(i);return function i(){if(o>=a)return s._fulfill();var c=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(e){return h(e)}if(c instanceof t)return c._then(i,h,null,null,null)}i()}(),s}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function y(e,t,r){this.constructor$(e,t,r)}function g(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==d?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},u(y,m),y.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o,i=arguments[e-1];if("function"!=typeof i)return r("expecting a function but got "+s.classString(i));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,c=!1):(o=arguments,e--);for(var u=new v(e),d=0;d<e;++d){var h=o[d];if(m.isDisposer(h)){var y=h;(h=h.promise())._setDisposable(y)}else{var b=n(h);b instanceof t&&(h=b._then(g,null,null,{resources:u,index:d},void 0))}u[d]=h}var w=new Array(u.length);for(d=0;d<w.length;++d)w[d]=t.resolve(u[d]).reflect();var x=t.all(w).then((function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return p.e=r.error(),p;if(!r.isFulfilled())return void x.cancel();e[t]=r.value()}E._pushContext(),i=l(i);var n=c?i.apply(void 0,e):i(e),o=E._popContext();return a.checkForgottenReturns(n,o,"Promise.using",E),n})),E=x.lastly((function(){var e=new t.PromiseInspection(x);return f(u,e)}));return u.promise=E,E._setOnCancel(u),E},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new y(e,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";var o,i=e("./es5"),a="undefined"==typeof navigator,c={e:{}},u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:void 0!==this?this:null;function p(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return c.e=e,c}}function l(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function d(e,t,r){if(l(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return i.defineProperty(e,t,n),e}var h=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(i.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],o=Object.create(null);null!=e&&!t(e);){var a;try{a=r(e)}catch(e){return n}for(var s=0;s<a.length;++s){var c=a[s];if(!o[c]){o[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&n.push(c)}}e=i.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var i in r)if(n.call(r,i))o.push(i);else{for(var a=0;a<e.length;++a)if(n.call(e[a],i))continue e;o.push(i)}return o}}(),f=/this\s*\.\s*\S+\s*=/;var m=/^[a-z$_][a-z$_0-9]*$/i;function y(e){try{return e+""}catch(e){return"[no string representation]"}}function g(e){return e instanceof Error||null!==e&&"object"===s(e)&&"string"==typeof e.message&&"string"==typeof e.name}function v(e){return g(e)&&i.propertyIsWritable(e,"stack")}var b="stack"in new Error?function(e){return v(e)?e:new Error(y(e))}:function(e){if(v(e))return e;try{throw new Error(y(e))}catch(e){return e}};function w(e){return{}.toString.call(e)}var x=function(e){return i.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var E="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};x=function(e){return i.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?E(e):null}}var _,S="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),k="undefined"!=typeof process&&void 0!==process.env;var C,A={setReflectHandler:function(e){_=e},isClass:function(e){try{if("function"==typeof e){var t=i.names(e.prototype),r=i.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=f.test(e+"")&&i.names(e).length>0;if(r||n||o)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return m.test(e)},inheritedDataKeys:h,getDataPropertyOrDefault:function(e,t,r){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0},thrower:function(e){throw e},isArray:i.isArray,asArray:x,notEnumerableProp:d,isPrimitive:l,isObject:function(e){return"function"==typeof e||"object"===s(e)&&null!==e},isError:g,canEvaluate:a,errorObj:c,tryCatch:function(e){return o=e,p},inherits:function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype},withAppended:function(e,t){var r,n=e.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o},maybeWrapAsError:function(e){return l(e)?new Error(y(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;var r=new t;function n(){return s(r.foo)}return n(),n(),e},filledRange:function(e,t,r){for(var n=new Array(e),o=0;o<e;++o)n[o]=t+o+r;return n},toString:y,canAttachTrace:v,ensureErrorObject:b,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{d(e,"isOperational",!0)}catch(e){}},classString:w,copyDescriptors:function(e,t,r){for(var n=i.names(e),o=0;o<n.length;++o){var a=n[o];if(r(a))try{i.defineProperty(t,a,i.getDescriptor(e,a))}catch(e){}}},isNode:S,hasEnvVariables:k,env:function(e){return k?process.env[e]:void 0},global:u,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===w(new Promise((function(){}))))return Promise}catch(e){}},contextBind:function(e,t){if(null===e||"function"!=typeof t||t===_)return t;null!==e.domain&&(t=e.domain.bind(t));var r=e.async;if(null!==r){var n=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=n,e[1]=this,r.runInAsyncScope.apply(r,e)}}return t}};A.isRecentNode=A.isNode&&(process.versions&&process.versions.node?C=process.versions.node.split(".").map(Number):process.version&&(C=process.version.split(".").map(Number)),0===C[0]&&C[1]>10||C[0]>0),A.nodeSupportsAsyncResource=A.isNode&&function(){var t=!1;try{t="function"==typeof e("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(e){t=!1}return t}(),A.isNode&&A.toFastProperties(process);try{throw new Error}catch(e){A.lastLineError=e}t.exports=A},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},"object"==s(t)?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i)),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},3423:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=r(1285),l=r(8617),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=m,t.SlowBuffer=function(e){return+e!=e&&(e=0),m.alloc(+e)},t.INSPECT_MAX_BYTES=50;var h=2147483647;function f(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,m.prototype),t}function m(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return v(e)}return y(e,t,r)}function y(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|E(e,t),n=f(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(re(e,Uint8Array)){var t=new Uint8Array(e);return w(t.buffer,t.byteOffset,t.byteLength)}return b(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(e));if(re(e,ArrayBuffer)||e&&re(e.buffer,ArrayBuffer))return w(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(re(e,SharedArrayBuffer)||e&&re(e.buffer,SharedArrayBuffer)))return w(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return m.from(n,t,r);var o=function(e){if(m.isBuffer(e)){var t=0|x(e.length),r=f(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||ne(e.length)?f(0):b(e):"Buffer"===e.type&&Array.isArray(e.data)?b(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return m.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(e))}function g(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function v(e){return g(e),f(e<0?0:0|x(e))}function b(e){for(var t=e.length<0?0:0|x(e.length),r=f(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function w(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,m.prototype),n}function x(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|e}function E(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||re(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(e));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ee(e).length;default:if(o)return n?-1:Z(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return F(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function S(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function k(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),ne(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=m.from(t,n)),m.isBuffer(t))return 0===t.length?-1:C(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):C(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,r,n,o){var i,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var p=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*a}else-1!==p&&(i-=i-p),p=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var l=!0,d=0;d<c;d++)if(u(e,i+d)!==u(t,d)){l=!1;break}if(l)return i}return-1}function A(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i,a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(ne(s))return i;e[r+i]=s}return i}function P(e,t,r,n){return te(Z(t,e.length-r),e,r,n)}function D(e,t,r,n){return te(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function O(e,t,r,n){return te(ee(t),e,r,n)}function T(e,t,r,n){return te(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function F(e,t,r){return 0===t&&r===e.length?p.fromByteArray(e):p.fromByteArray(e.slice(t,r))}function j(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var c=void 0,u=void 0,p=void 0,l=void 0;switch(s){case 1:i<128&&(a=i);break;case 2:128==(192&(c=e[o+1]))&&(l=(31&i)<<6|63&c)>127&&(a=l);break;case 3:c=e[o+1],u=e[o+2],128==(192&c)&&128==(192&u)&&(l=(15&i)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:c=e[o+1],u=e[o+2],p=e[o+3],128==(192&c)&&128==(192&u)&&128==(192&p)&&(l=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&p)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=h,m.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(e,t,r){return y(e,t,r)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(e,t,r){return function(e,t,r){return g(e),e<=0?f(e):void 0!==t?"string"==typeof r?f(e).fill(t,r):f(e).fill(t):f(e)}(e,t,r)},m.allocUnsafe=function(e){return v(e)},m.allocUnsafeSlow=function(e){return v(e)},m.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==m.prototype},m.compare=function(e,t){if(re(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),re(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=m.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(re(i,Uint8Array))o+i.length>n.length?(m.isBuffer(i)||(i=m.from(i)),i.copy(n,o)):Uint8Array.prototype.set.call(n,i,o);else{if(!m.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o)}o+=i.length}return n},m.byteLength=E,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},m.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?j(this,0,e):_.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},d&&(m.prototype[d]=m.prototype.inspect),m.prototype.compare=function(e,t,r,n,o){if(re(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(e));if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(n,o),p=e.slice(t,r),l=0;l<s;++l)if(c[l]!==p[l]){i=c[l],a=p[l];break}return i<a?-1:a<i?1:0},m.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},m.prototype.indexOf=function(e,t,r){return k(this,e,t,r,!0)},m.prototype.lastIndexOf=function(e,t,r){return k(this,e,t,r,!1)},m.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return A(this,e,t,r);case"utf8":case"utf-8":return P(this,e,t,r);case"ascii":case"latin1":case"binary":return D(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=oe[e[i]];return o}function L(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function B(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,r,n,o,i){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n,o){K(t,n,o,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function z(e,t,r,n,o){K(t,n,o,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function $(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function G(e,t,r,n,o){return t=+t,r>>>=0,o||$(e,0,r,4),l.write(e,t,r,n,23,4),r+4}function J(e,t,r,n,o){return t=+t,r>>>=0,o||$(e,0,r,8),l.write(e,t,r,n,52,8),r+8}m.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,m.prototype),n},m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readBigUInt64LE=ie((function(e){W(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),o=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(o)<<BigInt(32))})),m.prototype.readBigUInt64BE=ie((function(e){W(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],o=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),m.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},m.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},m.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readBigInt64LE=ie((function(e){W(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),m.prototype.readBigInt64BE=ie((function(e){W(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r)})),m.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),l.read(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),l.read(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),l.read(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),l.read(this,e,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,1,255,0),this[t]=255&e,t+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigUInt64LE=ie((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeBigUInt64BE=ie((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},m.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},m.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},m.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigInt64LE=ie((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeBigInt64BE=ie((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeFloatLE=function(e,t,r){return G(this,e,t,!0,r)},m.prototype.writeFloatBE=function(e,t,r){return G(this,e,t,!1,r)},m.prototype.writeDoubleLE=function(e,t,r){return J(this,e,t,!0,r)},m.prototype.writeDoubleBE=function(e,t,r){return J(this,e,t,!1,r)},m.prototype.copy=function(e,t,r,n){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},m.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!m.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=m.isBuffer(e)?e:m.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var H={};function V(e,t,r){H[e]=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,r);var u,p,l,d,h=(l=f,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(l);if(d){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function f(){var r;return n(this,f),r=h.call(this),Object.defineProperty(s(r),"message",{value:t.apply(s(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return u=f,(p=[{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}},{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}}])&&o(u.prototype,p),f}(r)}function X(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function K(e,t,r,n,o,i){if(e>r||e<t){var a,s="bigint"==typeof t?"n":"";throw a=i>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(i+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(i+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new H.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Y(t,e.length-(r+1))}(n,o,i)}function W(e,t){if("number"!=typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new H.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(u(t))}),TypeError),V("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),o=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?o=X(String(r)):"bigint"==typeof r&&(o=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(o=X(o)),o+="n"),n+" It must be ".concat(t,". Received ").concat(o)}),RangeError);var Q=/[^+/0-9A-Za-z-_]/g;function Z(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function ee(e){return p.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function te(e,t,r,n){var o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function re(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ne(e){return e!=e}var oe=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}();function ie(e){return"undefined"==typeof BigInt?ae:e}function ae(){throw new Error("BigInt not supported")}},1032:(e,t,r)=>{e.exports=r(4731)},4731:(e,t,r)=>{var n=[];t.version="4.2.0",t.AssertionError=r(5949);var o=r(2333);t.use=function(e){return~n.indexOf(e)||(e(t,o),n.push(e)),t},t.util=o;var i=r(7134);t.config=i;var a=r(1909);t.use(a);var s=r(3015);t.use(s);var c=r(443);t.use(c);var u=r(9958);t.use(u);var p=r(7595);t.use(p)},1909:(e,t,r)=>{var n=r(7134);e.exports=function(e,t){var r=e.AssertionError,o=t.flag;function i(e,r,n,a){return o(this,"ssfi",n||i),o(this,"lockSsfi",a),o(this,"object",e),o(this,"message",r),t.proxify(this)}e.Assertion=i,Object.defineProperty(i,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=e}}),Object.defineProperty(i,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=e}}),i.addProperty=function(e,r){t.addProperty(this.prototype,e,r)},i.addMethod=function(e,r){t.addMethod(this.prototype,e,r)},i.addChainableMethod=function(e,r,n){t.addChainableMethod(this.prototype,e,r,n)},i.overwriteProperty=function(e,r){t.overwriteProperty(this.prototype,e,r)},i.overwriteMethod=function(e,r){t.overwriteMethod(this.prototype,e,r)},i.overwriteChainableMethod=function(e,r,n){t.overwriteChainableMethod(this.prototype,e,r,n)},i.prototype.assert=function(e,i,a,s,c,u){var p=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===s&&void 0===c&&(u=!1),!0!==n.showDiff&&(u=!1),!p){i=t.getMessage(this,arguments);var l=t.getActual(this,arguments);throw new r(i,{actual:l,expected:s,showDiff:u},n.includeStack?this.assert:o(this,"ssfi"))}},Object.defineProperty(i.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},7134:e=>{e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},3015:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r){var n=e.Assertion,o=e.AssertionError,i=r.flag;function a(e,t){t&&i(this,"message",t),e=e.toLowerCase();var n=i(this,"object"),o=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===r.type(n).toLowerCase(),"expected #{this} to be "+o+e,"expected #{this} not to be "+o+e)}function s(e,t){return r.isNaN(e)&&r.isNaN(t)||e===t}function c(){i(this,"contains",!0)}function u(e,t){t&&i(this,"message",t);var a=i(this,"object"),c=r.type(a).toLowerCase(),u=i(this,"message"),p=i(this,"negate"),l=i(this,"ssfi"),d=i(this,"deep"),h=d?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(d)throw new o(u+"unable to use .deep.include with WeakSet",void 0,l);f=a.has(e);break;case"map":var m=d?r.eql:s;a.forEach((function(t){f=f||m(t,e)}));break;case"set":d?a.forEach((function(t){f=f||r.eql(t,e)})):f=a.has(e);break;case"array":f=d?a.some((function(t){return r.eql(t,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new o(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,l);var y=Object.keys(e),g=null,v=0;if(y.forEach((function(t){var s=new n(a);if(r.transferFlags(this,s,!0),i(s,"lockSsfi",!0),p&&1!==y.length)try{s.property(t,e[t])}catch(e){if(!r.checkError.compatibleConstructor(e,o))throw e;null===g&&(g=e),v++}else s.property(t,e[t])}),this),p&&y.length>1&&v===y.length)throw g;return}this.assert(f,"expected #{this} to "+h+"include "+r.inspect(e),"expected #{this} to not "+h+"include "+r.inspect(e))}function p(){var e=i(this,"object"),t=r.type(e);this.assert("Arguments"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}function l(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"deep")){var n=i(this,"lockSsfi");i(this,"lockSsfi",!0),this.eql(e),i(this,"lockSsfi",n)}else this.assert(e===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function d(e,t){t&&i(this,"message",t),this.assert(r.eql(e,i(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function h(e,t){t&&i(this,"message",t);var a,s=i(this,"object"),c=i(this,"doLength"),u=i(this,"message"),p=u?u+": ":"",l=i(this,"ssfi"),d=r.type(s).toLowerCase(),h=r.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new n(s,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h?"number"===h||!c&&"number"!==d?c||"date"===d||"number"===d?f=!1:a=p+"expected "+("string"===d?"'"+s+"'":s)+" to be a number or a date":a=p+"the argument to above must be a number":a=p+"the argument to above must be a date",f)throw new o(a,void 0,l);if(c){var m,y="length";"map"===d||"set"===d?(y="size",m=s.size):m=s.length,this.assert(m>e,"expected #{this} to have a "+y+" above #{exp} but got #{act}","expected #{this} to not have a "+y+" above #{exp}",e,m)}else this.assert(s>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function f(e,t){t&&i(this,"message",t);var a,s=i(this,"object"),c=i(this,"doLength"),u=i(this,"message"),p=u?u+": ":"",l=i(this,"ssfi"),d=r.type(s).toLowerCase(),h=r.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new n(s,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h?"number"===h||!c&&"number"!==d?c||"date"===d||"number"===d?f=!1:a=p+"expected "+("string"===d?"'"+s+"'":s)+" to be a number or a date":a=p+"the argument to least must be a number":a=p+"the argument to least must be a date",f)throw new o(a,void 0,l);if(c){var m,y="length";"map"===d||"set"===d?(y="size",m=s.size):m=s.length,this.assert(m>=e,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",e,m)}else this.assert(s>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function m(e,t){t&&i(this,"message",t);var a,s=i(this,"object"),c=i(this,"doLength"),u=i(this,"message"),p=u?u+": ":"",l=i(this,"ssfi"),d=r.type(s).toLowerCase(),h=r.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new n(s,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h?"number"===h||!c&&"number"!==d?c||"date"===d||"number"===d?f=!1:a=p+"expected "+("string"===d?"'"+s+"'":s)+" to be a number or a date":a=p+"the argument to below must be a number":a=p+"the argument to below must be a date",f)throw new o(a,void 0,l);if(c){var m,y="length";"map"===d||"set"===d?(y="size",m=s.size):m=s.length,this.assert(m<e,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",e,m)}else this.assert(s<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function y(e,t){t&&i(this,"message",t);var a,s=i(this,"object"),c=i(this,"doLength"),u=i(this,"message"),p=u?u+": ":"",l=i(this,"ssfi"),d=r.type(s).toLowerCase(),h=r.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new n(s,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h?"number"===h||!c&&"number"!==d?c||"date"===d||"number"===d?f=!1:a=p+"expected "+("string"===d?"'"+s+"'":s)+" to be a number or a date":a=p+"the argument to most must be a number":a=p+"the argument to most must be a date",f)throw new o(a,void 0,l);if(c){var m,y="length";"map"===d||"set"===d?(y="size",m=s.size):m=s.length,this.assert(m<=e,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",e,m)}else this.assert(s<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function g(e,t){t&&i(this,"message",t);var n=i(this,"object"),a=i(this,"ssfi"),s=i(this,"message");try{var c=n instanceof e}catch(t){if(t instanceof TypeError)throw new o((s=s?s+": ":"")+"The instanceof assertion needs a constructor but "+r.type(e)+" was given.",void 0,a);throw t}var u=r.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function v(e,n,a){a&&i(this,"message",a);var s=i(this,"nested"),c=i(this,"own"),u=i(this,"message"),p=i(this,"object"),l=i(this,"ssfi"),d=t(e);if(u=u?u+": ":"",s){if("string"!==d)throw new o(u+"the argument to property must be a string when using nested syntax",void 0,l)}else if("string"!==d&&"number"!==d&&"symbol"!==d)throw new o(u+"the argument to property must be a string, number, or symbol",void 0,l);if(s&&c)throw new o(u+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null==p)throw new o(u+"Target cannot be null or undefined.",void 0,l);var h,f=i(this,"deep"),m=i(this,"negate"),y=s?r.getPathInfo(p,e):null,g=s?y.value:p[e],v="";f&&(v+="deep "),c&&(v+="own "),s&&(v+="nested "),v+="property ",h=c?Object.prototype.hasOwnProperty.call(p,e):s?y.exists:r.hasProperty(p,e),m&&1!==arguments.length||this.assert(h,"expected #{this} to have "+v+r.inspect(e),"expected #{this} to not have "+v+r.inspect(e)),arguments.length>1&&this.assert(h&&(f?r.eql(n,g):n===g),"expected #{this} to have "+v+r.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+r.inspect(e)+" of #{act}",n,g),i(this,"object",g)}function b(e,t,r){i(this,"own",!0),v.apply(this,arguments)}function w(e,t,n){"string"==typeof t&&(n=t,t=null),n&&i(this,"message",n);var o=i(this,"object"),a=Object.getOwnPropertyDescriptor(Object(o),e);a&&t?this.assert(r.eql(t,a),"expected the own property descriptor for "+r.inspect(e)+" on #{this} to match "+r.inspect(t)+", got "+r.inspect(a),"expected the own property descriptor for "+r.inspect(e)+" on #{this} to not match "+r.inspect(t),t,a,!0):this.assert(a,"expected #{this} to have an own property descriptor for "+r.inspect(e),"expected #{this} to not have an own property descriptor for "+r.inspect(e)),i(this,"object",a)}function x(){i(this,"doLength",!0)}function E(e,t){t&&i(this,"message",t);var o,a=i(this,"object"),s=r.type(a).toLowerCase(),c=i(this,"message"),u=i(this,"ssfi"),p="length";switch(s){case"map":case"set":p="size",o=a.size;break;default:new n(a,c,u,!0).to.have.property("length"),o=a.length}this.assert(o==e,"expected #{this} to have a "+p+" of #{exp} but got #{act}","expected #{this} to not have a "+p+" of #{act}",e,o)}function _(e,t){t&&i(this,"message",t);var r=i(this,"object");this.assert(e.exec(r),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function S(e){var n,a,s=i(this,"object"),c=r.type(s),u=r.type(e),p=i(this,"ssfi"),l=i(this,"deep"),d="",h=!0,f=i(this,"message"),m=(f=f?f+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===c||"Set"===c)d=l?"deeply ":"",a=[],s.forEach((function(e,t){a.push(t)})),"Array"!==u&&(e=Array.prototype.slice.call(arguments));else{switch(a=r.getOwnEnumerableProperties(s),u){case"Array":if(arguments.length>1)throw new o(m,void 0,p);break;case"Object":if(arguments.length>1)throw new o(m,void 0,p);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"===t(e)?e:String(e)}))}if(!e.length)throw new o(f+"keys required",void 0,p);var y=e.length,g=i(this,"any"),v=i(this,"all"),b=e;if(g||v||(v=!0),g&&(h=b.some((function(e){return a.some((function(t){return l?r.eql(e,t):e===t}))}))),v&&(h=b.every((function(e){return a.some((function(t){return l?r.eql(e,t):e===t}))})),i(this,"contains")||(h=h&&e.length==a.length)),y>1){var w=(e=e.map((function(e){return r.inspect(e)}))).pop();v&&(n=e.join(", ")+", and "+w),g&&(n=e.join(", ")+", or "+w)}else n=r.inspect(e[0]);n=(y>1?"keys ":"key ")+n,n=(i(this,"contains")?"contain ":"have ")+n,this.assert(h,"expected #{this} to "+d+n,"expected #{this} to not "+d+n,b.slice(0).sort(r.compareByInspect),a.sort(r.compareByInspect),!0)}function k(e,t,o){o&&i(this,"message",o);var a,s=i(this,"object"),c=i(this,"ssfi"),u=i(this,"message"),p=i(this,"negate")||!1;new n(s,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(t=e,e=null);try{s()}catch(e){a=e}var l=void 0===e&&void 0===t,d=Boolean(e&&t),h=!1,f=!1;if(l||!l&&!p){var m="an error";e instanceof Error?m="#{exp}":e&&(m=r.checkError.getConstructorName(e)),this.assert(a,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),a instanceof Error?a.toString():"string"==typeof a?a:a&&r.checkError.getConstructorName(a))}if(e&&a&&(e instanceof Error&&r.checkError.compatibleInstance(a,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a&&!p?" but #{act} was thrown":""),e.toString(),a.toString())),r.checkError.compatibleConstructor(a,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&r.checkError.getConstructorName(e),a instanceof Error?a.toString():a&&r.checkError.getConstructorName(a)))),a&&null!=t){var y="including";t instanceof RegExp&&(y="matching"),r.checkError.compatibleMessage(a,t)===p&&(d&&p?f=!0:this.assert(p,"expected #{this} to throw error "+y+" #{exp} but got #{act}","expected #{this} to throw error not "+y+" #{exp}",t,r.checkError.getMessage(a)))}h&&f&&this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&r.checkError.getConstructorName(e),a instanceof Error?a.toString():a&&r.checkError.getConstructorName(a)),i(this,"object",a)}function C(e,t){t&&i(this,"message",t);var n=i(this,"object"),o=i(this,"itself"),a="function"!=typeof n||o?n[e]:n.prototype[e];this.assert("function"==typeof a,"expected #{this} to respond to "+r.inspect(e),"expected #{this} to not respond to "+r.inspect(e))}function A(e,t){t&&i(this,"message",t);var n=e(i(this,"object"));this.assert(n,"expected #{this} to satisfy "+r.objDisplay(e),"expected #{this} to not satisfy"+r.objDisplay(e),!i(this,"negate"),n)}function P(e,t,r){r&&i(this,"message",r);var a=i(this,"object"),s=i(this,"message"),c=i(this,"ssfi");if(new n(a,s,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new o((s=s?s+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(a-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function D(e,t,r){r&&i(this,"message",r);var o,a=i(this,"object"),s=i(this,"message"),c=i(this,"ssfi");new n(a,s,c,!0).is.a("function"),t?(new n(e,s,c,!0).to.have.property(t),o=e[t]):(new n(e,s,c,!0).is.a("function"),o=e()),a();var u=null==t?e():e[t],p=null==t?o:"."+t;i(this,"deltaMsgObj",p),i(this,"initialDeltaValue",o),i(this,"finalDeltaValue",u),i(this,"deltaBehavior","change"),i(this,"realDelta",u!==o),this.assert(o!==u,"expected "+p+" to change","expected "+p+" to not change")}function O(e,t,r){r&&i(this,"message",r);var o,a=i(this,"object"),s=i(this,"message"),c=i(this,"ssfi");new n(a,s,c,!0).is.a("function"),t?(new n(e,s,c,!0).to.have.property(t),o=e[t]):(new n(e,s,c,!0).is.a("function"),o=e()),new n(o,s,c,!0).is.a("number"),a();var u=null==t?e():e[t],p=null==t?o:"."+t;i(this,"deltaMsgObj",p),i(this,"initialDeltaValue",o),i(this,"finalDeltaValue",u),i(this,"deltaBehavior","increase"),i(this,"realDelta",u-o),this.assert(u-o>0,"expected "+p+" to increase","expected "+p+" to not increase")}function T(e,t,r){r&&i(this,"message",r);var o,a=i(this,"object"),s=i(this,"message"),c=i(this,"ssfi");new n(a,s,c,!0).is.a("function"),t?(new n(e,s,c,!0).to.have.property(t),o=e[t]):(new n(e,s,c,!0).is.a("function"),o=e()),new n(o,s,c,!0).is.a("number"),a();var u=null==t?e():e[t],p=null==t?o:"."+t;i(this,"deltaMsgObj",p),i(this,"initialDeltaValue",o),i(this,"finalDeltaValue",u),i(this,"deltaBehavior","decrease"),i(this,"realDelta",o-u),this.assert(u-o<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){n.addProperty(e)})),n.addProperty("not",(function(){i(this,"negate",!0)})),n.addProperty("deep",(function(){i(this,"deep",!0)})),n.addProperty("nested",(function(){i(this,"nested",!0)})),n.addProperty("own",(function(){i(this,"own",!0)})),n.addProperty("ordered",(function(){i(this,"ordered",!0)})),n.addProperty("any",(function(){i(this,"any",!0),i(this,"all",!1)})),n.addProperty("all",(function(){i(this,"all",!0),i(this,"any",!1)})),n.addChainableMethod("an",a),n.addChainableMethod("a",a),n.addChainableMethod("include",u,c),n.addChainableMethod("contain",u,c),n.addChainableMethod("contains",u,c),n.addChainableMethod("includes",u,c),n.addProperty("ok",(function(){this.assert(i(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),n.addProperty("true",(function(){this.assert(!0===i(this,"object"),"expected #{this} to be true","expected #{this} to be false",!i(this,"negate"))})),n.addProperty("false",(function(){this.assert(!1===i(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!i(this,"negate"))})),n.addProperty("null",(function(){this.assert(null===i(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),n.addProperty("undefined",(function(){this.assert(void 0===i(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),n.addProperty("NaN",(function(){this.assert(r.isNaN(i(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),n.addProperty("exist",(function(){var e=i(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),n.addProperty("empty",(function(){var e,t=i(this,"object"),n=i(this,"ssfi"),a=i(this,"message");switch(a=a?a+": ":"",r.type(t).toLowerCase()){case"array":case"string":e=t.length;break;case"map":case"set":e=t.size;break;case"weakmap":case"weakset":throw new o(a+".empty was passed a weak collection",void 0,n);case"function":var s=a+".empty was passed a function "+r.getName(t);throw new o(s.trim(),void 0,n);default:if(t!==Object(t))throw new o(a+".empty was passed non-string primitive "+r.inspect(t),void 0,n);e=Object.keys(t).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),n.addProperty("arguments",p),n.addProperty("Arguments",p),n.addMethod("equal",l),n.addMethod("equals",l),n.addMethod("eq",l),n.addMethod("eql",d),n.addMethod("eqls",d),n.addMethod("above",h),n.addMethod("gt",h),n.addMethod("greaterThan",h),n.addMethod("least",f),n.addMethod("gte",f),n.addMethod("below",m),n.addMethod("lt",m),n.addMethod("lessThan",m),n.addMethod("most",y),n.addMethod("lte",y),n.addMethod("within",(function(e,t,a){a&&i(this,"message",a);var s,c=i(this,"object"),u=i(this,"doLength"),p=i(this,"message"),l=p?p+": ":"",d=i(this,"ssfi"),h=r.type(c).toLowerCase(),f=r.type(e).toLowerCase(),m=r.type(t).toLowerCase(),y=!0,g="date"===f&&"date"===m?e.toUTCString()+".."+t.toUTCString():e+".."+t;if(u&&"map"!==h&&"set"!==h&&new n(c,p,d,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===m?"number"===f&&"number"===m||!u&&"number"!==h?u||"date"===h||"number"===h?y=!1:s=l+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date":s=l+"the arguments to within must be numbers":s=l+"the arguments to within must be dates",y)throw new o(s,void 0,d);if(u){var v,b="length";"map"===h||"set"===h?(b="size",v=c.size):v=c.length,this.assert(v>=e&&v<=t,"expected #{this} to have a "+b+" within "+g,"expected #{this} to not have a "+b+" within "+g)}else this.assert(c>=e&&c<=t,"expected #{this} to be within "+g,"expected #{this} to not be within "+g)})),n.addMethod("instanceof",g),n.addMethod("instanceOf",g),n.addMethod("property",v),n.addMethod("ownProperty",b),n.addMethod("haveOwnProperty",b),n.addMethod("ownPropertyDescriptor",w),n.addMethod("haveOwnPropertyDescriptor",w),n.addChainableMethod("length",E,x),n.addChainableMethod("lengthOf",E,x),n.addMethod("match",_),n.addMethod("matches",_),n.addMethod("string",(function(e,t){t&&i(this,"message",t);var o=i(this,"object"),a=i(this,"message"),s=i(this,"ssfi");new n(o,a,s,!0).is.a("string"),this.assert(~o.indexOf(e),"expected #{this} to contain "+r.inspect(e),"expected #{this} to not contain "+r.inspect(e))})),n.addMethod("keys",S),n.addMethod("key",S),n.addMethod("throw",k),n.addMethod("throws",k),n.addMethod("Throw",k),n.addMethod("respondTo",C),n.addMethod("respondsTo",C),n.addProperty("itself",(function(){i(this,"itself",!0)})),n.addMethod("satisfy",A),n.addMethod("satisfies",A),n.addMethod("closeTo",P),n.addMethod("approximately",P),n.addMethod("members",(function(e,t){t&&i(this,"message",t);var o=i(this,"object"),a=i(this,"message"),s=i(this,"ssfi");new n(o,a,s,!0).to.be.an("array"),new n(e,a,s,!0).to.be.an("array");var c,u,p,l=i(this,"contains"),d=i(this,"ordered");l?(u="expected #{this} to be "+(c=d?"an ordered superset":"a superset")+" of #{exp}",p="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=d?"ordered members":"members")+" as #{exp}",p="expected #{this} to not have the same "+c+" as #{exp}");var h=i(this,"deep")?r.eql:void 0;this.assert(function(e,t,r,n,o){if(!n){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,i){if(o)return r?r(e,t[i]):e===t[i];if(!r){var a=t.indexOf(e);return-1!==a&&(n||t.splice(a,1),!0)}return t.some((function(o,i){return!!r(e,o)&&(n||t.splice(i,1),!0)}))}))}(e,o,h,l,d),u,p,e,o,!0)})),n.addMethod("oneOf",(function(e,t){t&&i(this,"message",t);var r=i(this,"object"),o=i(this,"message"),a=i(this,"ssfi");new n(e,o,a,!0).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)})),n.addMethod("change",D),n.addMethod("changes",D),n.addMethod("increase",O),n.addMethod("increases",O),n.addMethod("decrease",T),n.addMethod("decreases",T),n.addMethod("by",(function(e,t){t&&i(this,"message",t);var r,n=i(this,"deltaMsgObj"),o=i(this,"initialDeltaValue"),a=i(this,"finalDeltaValue"),s=i(this,"deltaBehavior"),c=i(this,"realDelta");r="change"===s?Math.abs(a-o)===Math.abs(e):c===Math.abs(e),this.assert(r,"expected "+n+" to "+s+" by "+e,"expected "+n+" to not "+s+" by "+e)})),n.addProperty("extensible",(function(){var e=i(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),n.addProperty("sealed",(function(){var e=i(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),n.addProperty("frozen",(function(){var e=i(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),n.addProperty("finite",(function(e){var t=i(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},7595:e=>{e.exports=function(e,t){var r=e.Assertion,n=t.flag,o=e.assert=function(t,n){new r(null,null,e.assert,!0).assert(t,n,"[ negation message unavailable ]")};o.fail=function(t,r,n,i){throw arguments.length<2&&(n=t,t=void 0),n=n||"assert.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:i},o.fail)},o.isOk=function(e,t){new r(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new r(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,i){var a=new r(e,i,o.equal,!0);a.assert(t==n(a,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,i){var a=new r(e,i,o.notEqual,!0);a.assert(t!=n(a,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,n){new r(e,n,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,n){new r(e,n,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,n){new r(e,n,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,n){new r(e,n,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,n){new r(e,n,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,n){new r(e,n,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,n){new r(e,n,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,n){new r(e,n,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new r(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new r(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new r(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new r(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new r(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new r(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new r(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new r(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new r(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new r(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new r(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new r(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new r(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new r(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new r(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new r(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new r(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new r(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new r(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new r(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new r(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new r(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new r(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new r(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new r(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,n){new r(e,n,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,n){new r(e,n,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,n){new r(e,n,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,n){new r(e,n,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,n){new r(e,n,o.include,!0).include(t)},o.notInclude=function(e,t,n){new r(e,n,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,n){new r(e,n,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,n){new r(e,n,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,n){new r(e,n,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,n){new r(e,n,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,n){new r(e,n,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,n){new r(e,n,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,n){new r(e,n,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,n){new r(e,n,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,n){new r(e,n,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,n){new r(e,n,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,n){new r(e,n,o.match,!0).to.match(t)},o.notMatch=function(e,t,n){new r(e,n,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,n){new r(e,n,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,n){new r(e,n,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,n,i){new r(e,i,o.propertyVal,!0).to.have.property(t,n)},o.notPropertyVal=function(e,t,n,i){new r(e,i,o.notPropertyVal,!0).to.not.have.property(t,n)},o.deepPropertyVal=function(e,t,n,i){new r(e,i,o.deepPropertyVal,!0).to.have.deep.property(t,n)},o.notDeepPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},o.ownProperty=function(e,t,n){new r(e,n,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,n){new r(e,n,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,n,i){new r(e,i,o.ownPropertyVal,!0).to.have.own.property(t,n)},o.notOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},o.deepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},o.notDeepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},o.nestedProperty=function(e,t,n){new r(e,n,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,n){new r(e,n,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,n,i){new r(e,i,o.nestedPropertyVal,!0).to.have.nested.property(t,n)},o.notNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},o.deepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},o.notDeepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},o.lengthOf=function(e,t,n){new r(e,n,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,n){new r(e,n,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,n){new r(e,n,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,n){new r(e,n,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,n){new r(e,n,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,n){new r(e,n,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,n){new r(e,n,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,i,a){("string"==typeof t||t instanceof RegExp)&&(i=t,t=null);var s=new r(e,a,o.throws,!0).to.throw(t,i);return n(s,"object")},o.doesNotThrow=function(e,t,n,i){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new r(e,i,o.doesNotThrow,!0).to.not.throw(t,n)},o.operator=function(i,a,s,c){var u;switch(a){case"==":u=i==s;break;case"===":u=i===s;break;case">":u=i>s;break;case">=":u=i>=s;break;case"<":u=i<s;break;case"<=":u=i<=s;break;case"!=":u=i!=s;break;case"!==":u=i!==s;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+a+'"',void 0,o.operator)}var p=new r(u,c,o.operator,!0);p.assert(!0===n(p,"object"),"expected "+t.inspect(i)+" to be "+a+" "+t.inspect(s),"expected "+t.inspect(i)+" to not be "+a+" "+t.inspect(s))},o.closeTo=function(e,t,n,i){new r(e,i,o.closeTo,!0).to.be.closeTo(t,n)},o.approximately=function(e,t,n,i){new r(e,i,o.approximately,!0).to.be.approximately(t,n)},o.sameMembers=function(e,t,n){new r(e,n,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,n){new r(e,n,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,n){new r(e,n,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,n){new r(e,n,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,n){new r(e,n,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,n){new r(e,n,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,n){new r(e,n,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,n){new r(e,n,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,n){new r(e,n,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,n){new r(e,n,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,n){new r(e,n,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,n){new r(e,n,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,n){new r(e,n,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,n){new r(e,n,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,n){new r(e,n,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,n,i){3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.changes,!0).to.change(t,n)},o.changesBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.changesBy,!0).to.change(t,n).by(i)},o.doesNotChange=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotChange,!0).to.not.change(t,n)},o.changesButNotBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.changesButNotBy,!0).to.change(t,n).but.not.by(i)},o.increases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.increases,!0).to.increase(t,n)},o.increasesBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.increasesBy,!0).to.increase(t,n).by(i)},o.doesNotIncrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotIncrease,!0).to.not.increase(t,n)},o.increasesButNotBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.increasesButNotBy,!0).to.increase(t,n).but.not.by(i)},o.decreases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.decreases,!0).to.decrease(t,n)},o.decreasesBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.decreasesBy,!0).to.decrease(t,n).by(i)},o.doesNotDecrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotDecrease,!0).to.not.decrease(t,n)},o.doesNotDecreaseBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);return new r(e,a,o.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(i)},o.decreasesButNotBy=function(e,t,n,i,a){if(4===arguments.length&&"function"==typeof t){var s=i;i=n,a=s}else 3===arguments.length&&(i=n,n=null);new r(e,a,o.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(i)},o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new r(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new r(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new r(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new r(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new r(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new r(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new r(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new r(e,t,o.isNotEmpty,!0).to.not.be.empty},function e(t,r){return o[r]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},443:e=>{e.exports=function(e,t){e.expect=function(t,r){return new e.Assertion(t,r)},e.expect.fail=function(t,r,n,o){throw arguments.length<2&&(n=t,t=void 0),n=n||"expect.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:o},e.expect.fail)}}},9958:e=>{e.exports=function(e,t){var r=e.Assertion;function n(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)},configurable:!0});var t={fail:function(r,n,o,i){throw arguments.length<2&&(o=r,r=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:r,expected:n,operator:i},t.fail)},equal:function(e,t,n){new r(e,n).to.equal(t)},Throw:function(e,t,n,o){new r(e,o).to.Throw(t,n)},exist:function(e,t){new r(e,t).to.exist},not:{}};return t.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},t.not.Throw=function(e,t,n,o){new r(e,o).to.not.Throw(t,n)},t.not.exist=function(e,t){new r(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=n,e.Should=n}},582:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(3733),i=r(4731),a=r(2755),s=r(9586),c=r(6907),u="function"==typeof Object.setPrototypeOf,p=function(){},l=Object.getOwnPropertyNames(p).filter((function(e){var t=Object.getOwnPropertyDescriptor(p,e);return"object"!==n(t)||!t.configurable})),d=Function.prototype.call,h=Function.prototype.apply;e.exports=function(e,t,r,n){"function"!=typeof n&&(n=function(){});var p={method:r,chainingBehavior:n};e.__methods||(e.__methods={}),e.__methods[t]=p,Object.defineProperty(e,t,{get:function(){p.chainingBehavior.call(this);var r=function e(){a(this,"lockSsfi")||a(this,"ssfi",e);var t=p.method.apply(this,arguments);if(void 0!==t)return t;var r=new i.Assertion;return c(this,r),r};if(o(r,t,!0),u){var n=Object.create(this);n.call=d,n.apply=h,Object.setPrototypeOf(r,n)}else Object.getOwnPropertyNames(e).forEach((function(t){if(-1===l.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}}));return c(this,r),s(r)},configurable:!0})}},3733:e=>{var t=Object.getOwnPropertyDescriptor((function(){}),"length");e.exports=function(e,r,n){return t.configurable?(Object.defineProperty(e,"length",{get:function(){if(n)throw Error("Invalid Chai property: "+r+'.length. Due to a compatibility issue, "length" cannot directly follow "'+r+'". Use "'+r+'.lengthOf" instead.');throw Error("Invalid Chai property: "+r+'.length. See docs for proper usage of "'+r+'".')}}),e):e}},4601:(e,t,r)=>{var n=r(3733),o=r(4731),i=r(2755),a=r(9586),s=r(6907);e.exports=function(e,t,r){var c=function e(){i(this,"lockSsfi")||i(this,"ssfi",e);var t=r.apply(this,arguments);if(void 0!==t)return t;var n=new o.Assertion;return s(this,n),n};n(c,t,!1),e[t]=a(c,t)}},6747:(e,t,r)=>{var n=r(4731),o=r(2755),i=r(2465),a=r(6907);e.exports=function(e,t,r){r=void 0===r?function(){}:r,Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=r.call(this);if(void 0!==t)return t;var s=new n.Assertion;return a(this,s),s},configurable:!0})}},757:(e,t,r)=>{var n=r(9199);e.exports=function(e,t){return n(e)<n(t)?-1:1}},1531:(e,t,r)=>{var n=r(5949),o=r(2755),i=r(1108);e.exports=function(e,t){var r=o(e,"message"),a=o(e,"ssfi");r=r?r+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var s=t.map((function(e,r){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&r===t.length-1?"or ":"")+n+" "+e})).join(", "),c=i(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new n(r+"object tested must be "+s+", but "+c+" given",void 0,a)}},2755:e=>{e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=r}},3442:e=>{e.exports=function(e,t){return t.length>4?t[4]:e._obj}},75:e=>{e.exports=function(e){var t=[];for(var r in e)t.push(r);return t}},8021:(e,t,r)=>{var n=r(2755),o=r(3442),i=r(4719);e.exports=function(e,t){var r=n(e,"negate"),a=n(e,"object"),s=t[3],c=o(e,t),u=r?t[2]:t[1],p=n(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return i(a)})).replace(/#\{act\}/g,(function(){return i(c)})).replace(/#\{exp\}/g,(function(){return i(s)})),p?p+": "+u:u}},2094:(e,t,r)=>{var n=r(3148);e.exports=function(e){return Object.keys(e).concat(n(e))}},3148:e=>{e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},1244:e=>{e.exports=function(e){var t=Object.getOwnPropertyNames(e);function r(e){-1===t.indexOf(e)&&t.push(e)}for(var n=Object.getPrototypeOf(e);null!==n;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return t}},2333:(e,t,r)=>{var n=r(4306);t.test=r(5210),t.type=r(1108),t.expectTypes=r(1531),t.getMessage=r(8021),t.getActual=r(3442),t.inspect=r(9199),t.objDisplay=r(4719),t.flag=r(2755),t.transferFlags=r(6907),t.eql=r(7390),t.getPathInfo=n.getPathInfo,t.hasProperty=n.hasProperty,t.getName=r(9935),t.addProperty=r(6747),t.addMethod=r(4601),t.overwriteProperty=r(6127),t.overwriteMethod=r(4305),t.addChainableMethod=r(582),t.overwriteChainableMethod=r(5098),t.compareByInspect=r(757),t.getOwnEnumerablePropertySymbols=r(3148),t.getOwnEnumerableProperties=r(2094),t.checkError=r(6699),t.proxify=r(9586),t.addLengthGuard=r(3733),t.isProxyEnabled=r(2465),t.isNaN=r(5140)},9199:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(9935),i=r(1244),a=r(75),s=r(7134);function c(e,r,m){if(r&&"function"==typeof r.inspect&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var y=r.inspect(m,e);return"string"!=typeof y&&(y=c(e,y,m)),y}var g,v=function(e,t){switch(n(t)){case"undefined":return e.stylize("undefined","undefined");case"string":var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,r);if(v)return v;if(g=r,"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?g instanceof HTMLElement:g&&"object"===n(g)&&"nodeType"in g&&1===g.nodeType&&"string"==typeof g.nodeName){if("outerHTML"in r)return r.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(r);var b=document.createElementNS("http://www.w3.org/1999/xhtml","_");b.appendChild(r.cloneNode(!1));var w=b.innerHTML.replace("><",">"+r.innerHTML+"<");return b.innerHTML="",w}catch(e){}}var x,E,_=a(r),S=e.showHidden?i(r):_;if(0===S.length||h(r)&&(1===S.length&&"stack"===S[0]||2===S.length&&"description"===S[0]&&"stack"===S[1])){if("function"==typeof r)return E=(x=o(r))?": "+x:"",e.stylize("[Function"+E+"]","special");if(l(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(d(r))return e.stylize(Date.prototype.toUTCString.call(r),"date");if(h(r))return u(r)}var k,C,A="",P=!1,D=!1,O=["{","}"];if("object"===n(k=r)&&/\w+Array]$/.test(f(k))&&(D=!0,O=["[","]"]),function(e){return Array.isArray(e)||"object"===n(e)&&"[object Array]"===f(e)}(r)&&(P=!0,O=["[","]"]),"function"==typeof r&&(A=" [Function"+(E=(x=o(r))?": "+x:"")+"]"),l(r)&&(A=" "+RegExp.prototype.toString.call(r)),d(r)&&(A=" "+Date.prototype.toUTCString.call(r)),h(r))return u(r);if(0===S.length&&(!P||0==r.length))return O[0]+A+O[1];if(m<0)return l(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");if(e.seen.push(r),P)C=function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)Object.prototype.hasOwnProperty.call(t,String(a))?i.push(p(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))})),i}(e,r,m,_,S);else{if(D)return function(e){for(var t="[ ",r=0;r<e.length;++r){if(t.length>=s.truncateThreshold-7){t+="...";break}t+=e[r]+", "}return-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]")),t}(r);C=S.map((function(t){return p(e,r,m,_,t,P)}))}return e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return e+t.length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(C,A,O)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var a,s,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special"))),n.indexOf(o)<0&&(a="["+o+"]"),s||(e.seen.indexOf(t[o])<0?(s=c(e,t[o],null===r?null:r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),void 0===a){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function l(e){return"object"===n(e)&&"[object RegExp]"===f(e)}function d(e){return"object"===n(e)&&"[object Date]"===f(e)}function h(e){return"object"===n(e)&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}e.exports=function(e,t,r,n){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===r?2:r)}},5140:e=>{e.exports=Number.isNaN||function(e){return e!=e}},2465:(e,t,r)=>{var n=r(7134);e.exports=function(){return n.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},4719:(e,t,r)=>{var n=r(9199),o=r(7134);e.exports=function(e){var t=n(e),r=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===r)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===r)return"[ Array("+e.length+") ]";if("[object Object]"===r){var i=Object.keys(e);return"{ Object ("+(i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", "))+") }"}return t}return t}},5098:(e,t,r)=>{var n=r(4731),o=r(6907);e.exports=function(e,t,r,i){var a=e.__methods[t],s=a.chainingBehavior;a.chainingBehavior=function(){var e=i(s).call(this);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t};var c=a.method;a.method=function(){var e=r(c).apply(this,arguments);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t}}},4305:(e,t,r)=>{var n=r(3733),o=r(4731),i=r(2755),a=r(9586),s=r(6907);e.exports=function(e,t,r){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var p=function e(){i(this,"lockSsfi")||i(this,"ssfi",e);var t=i(this,"lockSsfi");i(this,"lockSsfi",!0);var n=r(u).apply(this,arguments);if(i(this,"lockSsfi",t),void 0!==n)return n;var a=new o.Assertion;return s(this,a),a};n(p,t,!1),e[t]=a(p,t)}},6127:(e,t,r)=>{var n=r(4731),o=r(2755),i=r(2465),a=r(6907);e.exports=function(e,t,r){var s=Object.getOwnPropertyDescriptor(e,t),c=function(){};s&&"function"==typeof s.get&&(c=s.get),Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var s=r(c).call(this);if(o(this,"lockSsfi",t),void 0!==s)return s;var u=new n.Assertion;return a(this,u),u},configurable:!0})}},9586:(e,t,r)=>{var n=r(7134),o=r(2755),i=r(1244),a=r(2465),s=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return a()?new Proxy(e,{get:function e(r,a){if("string"==typeof a&&-1===n.proxyExcludedKeys.indexOf(a)&&!Reflect.has(r,a)){if(t)throw Error("Invalid Chai property: "+t+"."+a+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw i(r).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===s.indexOf(e)){var t=function(e,t,r){if(Math.abs(e.length-t.length)>=r)return r;for(var n=[],o=0;o<=e.length;o++)n[o]=Array(t.length+1).fill(0),n[o][0]=o;for(var i=0;i<t.length;i++)n[0][i]=i;for(o=1;o<=e.length;o++){var a=e.charCodeAt(o-1);for(i=1;i<=t.length;i++)Math.abs(o-i)>=r?n[o][i]=r:n[o][i]=Math.min(n[o-1][i]+1,n[o][i-1]+1,n[o-1][i-1]+(a===t.charCodeAt(i-1)?0:1))}return n[e.length][t.length]}(a,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+a+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+a)}return-1!==s.indexOf(a)||o(r,"lockSsfi")||o(r,"ssfi",e),Reflect.get(r,a)}}):e}},5210:(e,t,r)=>{var n=r(2755);e.exports=function(e,t){var r=n(e,"negate"),o=t[0];return r?!o:o}},6907:e=>{e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),r=3!==arguments.length||r,n)(r||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=n[o])}},6699:e=>{"use strict";var t=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function r(e){var r="";if(void 0===e.name){var n=String(e).match(t);n&&(r=n[1])}else r=e.name;return r}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var r="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(r):"string"==typeof t&&-1!==r.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=r(e.constructor):"function"==typeof e&&(t=r(e).trim()||r(new e)),t}}},9841:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){if(!(this instanceof r))return new r(e);if("object"==t(e)&&Array.isArray(e._buffer)&&"number"==typeof e._capacity&&"number"==typeof e._first&&"number"==typeof e._size)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);else{if("number"!=typeof e||e%1!=0||e<1)throw new TypeError("Invalid capacity");this._buffer=new Array(e),this._capacity=e,this._first=0,this._size=0}}r.prototype={size:function(){return this._size},capacity:function(){return this._capacity},enq:function(e){this._first>0?this._first--:this._first=this._capacity-1,this._buffer[this._first]=e,this._size<this._capacity&&this._size++},push:function(e){this._size==this._capacity?(this._buffer[this._first]=e,this._first=(this._first+1)%this._capacity):(this._buffer[(this._first+this._size)%this._capacity]=e,this._size++)},deq:function(){if(0==this._size)throw new RangeError("dequeue on empty buffer");var e=this._buffer[(this._first+this._size-1)%this._capacity];return this._size--,e},pop:function(){return this.deq()},shift:function(){if(0==this._size)throw new RangeError("shift on empty buffer");var e=this._buffer[this._first];return this._first==this._capacity-1?this._first=0:this._first++,this._size--,e},get:function(e,t){if(0==this._size&&0==e&&(null==t||0==t))return[];if("number"!=typeof e||e%1!=0||e<0)throw new TypeError("Invalid start");if(e>=this._size)throw new RangeError("Index past end of buffer: "+e);if(null==t)return this._buffer[(this._first+e)%this._capacity];if("number"!=typeof t||t%1!=0||t<0)throw new TypeError("Invalid end");if(t>=this._size)throw new RangeError("Index past end of buffer: "+t);return this._first+e>=this._capacity&&(e-=this._capacity,t-=this._capacity),this._first+t<this._capacity?this._buffer.slice(this._first+e,this._first+t+1):this._buffer.slice(this._first+e,this._capacity).concat(this._buffer.slice(0,this._first+t+1-this._capacity))},toarray:function(){return 0==this._size?[]:this.get(0,this._size-1)}},e.exports=r},8575:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,o;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{o=Promise}catch(e){o=function(){}}function i(a,c,u,p,l){"object"===n(c)&&(u=c.depth,p=c.prototype,l=c.includeNonEnumerable,c=c.circular);var d=[],h=[],f="undefined"!=typeof Buffer;return void 0===c&&(c=!0),void 0===u&&(u=1/0),function a(u,m){if(null===u)return null;if(0===m)return u;var y,g;if("object"!=n(u))return u;if(e(u,t))y=new t;else if(e(u,r))y=new r;else if(e(u,o))y=new o((function(e,t){u.then((function(t){e(a(t,m-1))}),(function(e){t(a(e,m-1))}))}));else if(i.__isArray(u))y=[];else if(i.__isRegExp(u))y=new RegExp(u.source,s(u)),u.lastIndex&&(y.lastIndex=u.lastIndex);else if(i.__isDate(u))y=new Date(u.getTime());else{if(f&&Buffer.isBuffer(u))return y=Buffer.allocUnsafe?Buffer.allocUnsafe(u.length):new Buffer(u.length),u.copy(y),y;e(u,Error)?y=Object.create(u):void 0===p?(g=Object.getPrototypeOf(u),y=Object.create(g)):(y=Object.create(p),g=p)}if(c){var v=d.indexOf(u);if(-1!=v)return h[v];d.push(u),h.push(y)}for(var b in e(u,t)&&u.forEach((function(e,t){var r=a(t,m-1),n=a(e,m-1);y.set(r,n)})),e(u,r)&&u.forEach((function(e){var t=a(e,m-1);y.add(t)})),u){var w;g&&(w=Object.getOwnPropertyDescriptor(g,b)),w&&null==w.set||(y[b]=a(u[b],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(b=0;b<x.length;b++){var E=x[b];(!(S=Object.getOwnPropertyDescriptor(u,E))||S.enumerable||l)&&(y[E]=a(u[E],m-1),S.enumerable||Object.defineProperty(y,E,{enumerable:!1}))}}if(l){var _=Object.getOwnPropertyNames(u);for(b=0;b<_.length;b++){var S,k=_[b];(S=Object.getOwnPropertyDescriptor(u,k))&&S.enumerable||(y[k]=a(u[k],m-1),Object.defineProperty(y,k,{enumerable:!1}))}}return y}(a,u)}function a(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"===n(e)&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"===n(e)&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"===n(e)&&"[object RegExp]"===a(e)},i.__getRegExpFlags=s,i}();"object"===n(e)&&e.exports&&(e.exports=o)},5419:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(6899)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},6899:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){function t(e){var r;function n(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];if(n.enabled){var a=n,s=Number(new Date),c=s-(r||s);a.diff=c,a.prev=r,a.curr=s,r=s,o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var n=t.formatters[r];if("function"==typeof n){var i=o[u];e=n.call(a,i),o.splice(u,1),u--}return e})),t.formatArgs.call(a,o);var p=a.log||t.log;p.apply(a,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=t.selectColor(e),n.destroy=o,n.extend=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function i(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(n(t.names.map(a)),n(t.skips.map(a).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(9842),Object.keys(e).forEach((function(r){t[r]=e[r]})),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7390:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(1108);function i(){this._key="chai/deep-eql__"+Math.random()+Date.now()}i.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var a="function"==typeof WeakMap?WeakMap:i;function s(e,t,r){if(!r||y(e)||y(t))return null;var n=r.get(e);if(n){var o=n.get(t);if("boolean"==typeof o)return o}return null}function c(e,t,r,n){if(r&&!y(e)&&!y(t)){var o=r.get(e);o?o.set(t,n):((o=new a).set(t,n),r.set(e,o))}}function u(e,t,r){if(r&&r.comparator)return l(e,t,r);var n=p(e,t);return null!==n?n:l(e,t,r)}function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!y(e)&&!y(t)&&null}function l(e,t,r){(r=r||{}).memoize=!1!==r.memoize&&(r.memoize||new a);var n=r&&r.comparator,i=s(e,t,r.memoize);if(null!==i)return i;var l=s(t,e,r.memoize);if(null!==l)return l;if(n){var y=n(e,t);if(!1===y||!0===y)return c(e,t,r.memoize,y),y;var g=p(e,t);if(null!==g)return g}var v=o(e);if(v!==o(t))return c(e,t,r.memoize,!1),!1;c(e,t,r.memoize,!0);var b=function(e,t,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return u(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,n);case"RegExp":return function(e,t){return e.toString()===t.toString()}(e,t);case"Generator":return function(e,t,r){return d(f(e),f(t),r)}(e,t,n);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return function(e,t,r){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],o=[];return e.forEach((function(e,t){n.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(n.sort(),o.sort(),r)}(e,t,n);default:return function(e,t,r){var n=m(e),o=m(t);if(n.length&&n.length===o.length)return n.sort(),o.sort(),!1!==d(n,o)&&function(e,t,r,n){var o=r.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(!1===u(e[r[i]],t[r[i]],n))return!1;return!0}(e,t,n,r);var i=h(e),a=h(t);return i.length&&i.length===a.length?(i.sort(),a.sort(),d(i,a,r)):0===n.length&&0===i.length&&0===o.length&&0===a.length}(e,t,n)}}(e,t,v,r);return c(e,t,r.memoize,b),b}function d(e,t,r){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var o=-1;++o<n;)if(!1===u(e[o],t[o],r))return!1;return!0}function h(e){if(function(e){return"undefined"!=typeof Symbol&&"object"===n(e)&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return f(e[Symbol.iterator]())}catch(e){return[]}return[]}function f(e){for(var t=e.next(),r=[t.value];!1===t.done;)t=e.next(),r.push(t.value);return r}function m(e){var t=[];for(var r in e)t.push(r);return t}function y(e){return null===e||"object"!==n(e)}e.exports=u,e.exports.MemoizeMap=a},5211:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,o){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");o||(o={}),"object"===t(n)&&(o=n,n=void 0),null!=n&&(o.code=n);try{return r(e,o)}catch(t){o.message=e.message,o.stack=e.stack;var i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),r(new i,o)}}},3905:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){if("object"===("undefined"==typeof self?"undefined":t(self))&&self)return self;if("object"===("undefined"==typeof window?"undefined":t(window))&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===("undefined"==typeof globalThis?"undefined":t(globalThis))&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},4396:function(e,t,r){var n,o,i,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(8),a=r(15);function s(e,t,r){var a=null,s=function(e,t){r&&r(e,t),a&&a.visit(e,t)},c="function"==typeof r?s:null,u=!1;if(t){u="boolean"==typeof t.comment&&t.comment;var p="boolean"==typeof t.attachComment&&t.attachComment;(u||p)&&((a=new n.CommentHandler).attach=p,t.comment=!0,c=s)}var l,d=!1;t&&"string"==typeof t.sourceType&&(d="module"===t.sourceType),l=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,c):new i.Parser(e,t,c);var h=d?l.parseModule():l.parseScript();return u&&a&&(h.comments=a.comments),l.config.tokens&&(h.tokens=l.tokens),l.config.tolerant&&(h.errors=l.errorHandler.errors),h}t.parse=s,t.parseModule=function(e,t,r){var n=t||{};return n.sourceType="module",s(e,n,r)},t.parseScript=function(e,t,r){var n=t||{};return n.sourceType="script",s(e,n,r)},t.tokenize=function(e,t,r){var n,o=new a.Tokenizer(e,t);n=[];try{for(;;){var i=o.getNextToken();if(!i)break;r&&(i=r(i)),n.push(i)}}catch(e){o.errorHandler.tolerate(e)}return o.errorHandler.tolerant&&(n.errors=o.errors()),n};var c=r(2);t.Syntax=c.Syntax,t.version="4.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],o=this.leading.length-1;o>=0;--o){var i=this.leading[o];t.end.offset>=i.start&&(r.unshift(i.comment),this.leading.splice(o,1),this.trailing.splice(o,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}return this.trailing.length=0,t}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var i=o.node.trailingComments[0];i&&i.range[0]>=e.end.offset&&(t=o.node.trailingComments,delete o.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,r=[];this.stack.length>0&&(i=this.stack[this.stack.length-1])&&i.start>=e.start.offset;)t=i.node,this.stack.pop();if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;n>=0;--n){var o=t.leadingComments[n];o.range[1]<=e.start.offset&&(r.unshift(o),t.leadingComments.splice(n,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,r}for(n=this.leading.length-1;n>=0;--n){var i;(i=this.leading[n]).start<=e.start.offset&&(r.unshift(i.comment),this.leading.splice(n,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(t),o=this.findLeadingComments(t);o.length>0&&(e.leadingComments=o),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var o={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(o.comment.loc=e.loc),e.type=r,this.leading.push(o),this.trailing.push(o)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),a=r(5),s=r(6),c=r(7),u=r(8),p=r(13),l=r(14);function d(e){var t;switch(e.type){case s.JSXSyntax.JSXIdentifier:t=e.name;break;case s.JSXSyntax.JSXNamespacedName:var r=e;t=d(r.namespace)+":"+d(r.name);break;case s.JSXSyntax.JSXMemberExpression:var n=e;t=d(n.object)+"."+d(n.property)}return t}p.TokenName[100]="JSXIdentifier",p.TokenName[101]="JSXText";var h=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return o(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",r=!0,n=!1,o=!1,a=!1;!this.scanner.eof()&&r&&!n;){var s=this.scanner.source[this.scanner.index];if(s===e)break;if(n=";"===s,t+=s,++this.scanner.index,!n)switch(t.length){case 2:o="#"===s;break;case 3:o&&(r=(a="x"===s)||i.Character.isDecimalDigit(s.charCodeAt(0)),o=o&&!a);break;default:r=(r=r&&!(o&&!i.Character.isDecimalDigit(s.charCodeAt(0))))&&!(a&&!i.Character.isHexDigit(s.charCodeAt(0)))}}if(r&&n&&t.length>2){var c=t.substr(1,t.length-2);o&&c.length>1?t=String.fromCharCode(parseInt(c.substr(1),10)):a&&c.length>2?t=String.fromCharCode(parseInt("0"+c.substr(1),16)):o||a||!l.XHTMLEntities[c]||(t=l.XHTMLEntities[c])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:s=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,r=this.scanner.source[this.scanner.index++],n="";!this.scanner.eof()&&(c=this.scanner.source[this.scanner.index++])!==r;)n+="&"===c?this.scanXHTMLEntity(r):c;return{type:8,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var o=this.scanner.source.charCodeAt(this.scanner.index+1),a=this.scanner.source.charCodeAt(this.scanner.index+2),s=46===o&&46===a?"...":".";return t=this.scanner.index,this.scanner.index+=s.length,{type:7,value:s,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var c=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(c)&&92!==c)++this.scanner.index;else{if(45!==c)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,i.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var n={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(n)),n},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new a.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=t;this.expectJSX(":");var n=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXNamespacedName(r,n))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var o=t;this.expectJSX(".");var i=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXMemberExpression(o,i))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=r;this.expectJSX(":");var o=this.parseJSXIdentifier();e=this.finalize(t,new a.JSXNamespacedName(n,o))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new a.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new a.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),o=this.matchJSX("/");return o&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(r,o,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new a.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new a.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),o=this.finalize(t,new a.JSXText(r.value,n));e.push(o)}if("{"!==this.scanner.source[this.scanner.index])break;var i=this.parseJSXExpressionContainer();e.push(i)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===s.JSXSyntax.JSXOpeningElement){var o=n;if(o.selfClosing){var i=this.finalize(r,new a.JSXElement(o,[],null));e.children.push(i)}else t.push(e),e={node:r,opening:o,closing:null,children:[]}}if(n.type===s.JSXSyntax.JSXClosingElement){e.closing=n;var c=d(e.opening.name);if(c!==d(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",c),!(t.length>0))break;i=this.finalize(e.node,new a.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(i),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var o=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=o.children,n=o.closing}return this.finalize(e,new a.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(u.Parser);t.JSXParser=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.JSXClosingElement=function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e};t.JSXElement=function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r};t.JSXEmptyExpression=function(){this.type=n.JSXSyntax.JSXEmptyExpression};t.JSXExpressionContainer=function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXIdentifier=function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e};t.JSXMemberExpression=function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXAttribute=function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXNamespacedName=function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXOpeningElement=function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r};t.JSXSpreadAttribute=function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXText=function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.ArrayExpression=function(e){this.type=n.Syntax.ArrayExpression,this.elements=e};t.ArrayPattern=function(e){this.type=n.Syntax.ArrayPattern,this.elements=e};t.ArrowFunctionExpression=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1};t.AssignmentExpression=function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r};t.AssignmentPattern=function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AsyncArrowFunctionExpression=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0};t.AsyncFunctionDeclaration=function(e,t,r){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=function(e,t,r){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AwaitExpression=function(e){this.type=n.Syntax.AwaitExpression,this.argument=e};t.BinaryExpression=function(e,t,r){var o="||"===e||"&&"===e;this.type=o?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r};t.BlockStatement=function(e){this.type=n.Syntax.BlockStatement,this.body=e};t.BreakStatement=function(e){this.type=n.Syntax.BreakStatement,this.label=e};t.CallExpression=function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CatchClause=function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t};t.ClassBody=function(e){this.type=n.Syntax.ClassBody,this.body=e};t.ClassDeclaration=function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r};t.ClassExpression=function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r};t.ComputedMemberExpression=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ConditionalExpression=function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r};t.ContinueStatement=function(e){this.type=n.Syntax.ContinueStatement,this.label=e};t.DebuggerStatement=function(){this.type=n.Syntax.DebuggerStatement};t.Directive=function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.DoWhileStatement=function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t};t.EmptyStatement=function(){this.type=n.Syntax.EmptyStatement};t.ExportAllDeclaration=function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e};t.ExportDefaultDeclaration=function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportNamedDeclaration=function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r};t.ExportSpecifier=function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExpressionStatement=function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e};t.ForInStatement=function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1};t.ForOfStatement=function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r};t.ForStatement=function(e,t,r,o){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=o};t.FunctionDeclaration=function(e,t,r,o){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionExpression=function(e,t,r,o){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.Identifier=function(e){this.type=n.Syntax.Identifier,this.name=e};t.IfStatement=function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r};t.ImportDeclaration=function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDefaultSpecifier=function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportNamespaceSpecifier=function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportSpecifier=function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.LabeledStatement=function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t};t.Literal=function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t};t.MetaProperty=function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t};t.MethodDefinition=function(e,t,r,o,i){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=o,this.static=i};t.Module=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="module"};t.NewExpression=function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t};t.ObjectExpression=function(e){this.type=n.Syntax.ObjectExpression,this.properties=e};t.ObjectPattern=function(e){this.type=n.Syntax.ObjectPattern,this.properties=e};t.Property=function(e,t,r,o,i,a){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=o,this.kind=e,this.method=i,this.shorthand=a};t.RegexLiteral=function(e,t,r,o){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:o}};t.RestElement=function(e){this.type=n.Syntax.RestElement,this.argument=e};t.ReturnStatement=function(e){this.type=n.Syntax.ReturnStatement,this.argument=e};t.Script=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="script"};t.SequenceExpression=function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e};t.SpreadElement=function(e){this.type=n.Syntax.SpreadElement,this.argument=e};t.StaticMemberExpression=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.Super=function(){this.type=n.Syntax.Super};t.SwitchCase=function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchStatement=function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.TaggedTemplateExpression=function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TemplateElement=function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateLiteral=function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.ThisExpression=function(){this.type=n.Syntax.ThisExpression};t.ThrowStatement=function(e){this.type=n.Syntax.ThrowStatement,this.argument=e};t.TryStatement=function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r};t.UnaryExpression=function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UpdateExpression=function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r};t.VariableDeclaration=function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclarator=function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t};t.WhileStatement=function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t};t.WithStatement=function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t};t.YieldExpression=function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(10),i=r(11),a=r(7),s=r(12),c=r(2),u=r(13),p="ArrowParameterPlaceHolder",l=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new s.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),a=this.lastMarker.index,s=this.lastMarker.line,c=this.lastMarker.column+1;throw this.errorHandler.createError(a,s,c,i)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),a=this.lastMarker.index,s=this.scanner.lineNumber,c=this.lastMarker.column+1;this.errorHandler.tolerateError(a,s,c,i)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||i.Messages.UnexpectedToken;if(e?(t||(n=2===e.type?i.Messages.UnexpectedEOS:3===e.type?i.Messages.UnexpectedIdentifier:6===e.type?i.Messages.UnexpectedNumber:8===e.type?i.Messages.UnexpectedString:10===e.type?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=i.Messages.StrictReservedWord))),r=e.value):r="ILLEGAL",n=n.replace("%0",r),e&&"number"==typeof e.lineNumber){var o=e.start,a=e.lineNumber,s=this.lastMarker.index-this.lastMarker.column,c=e.start-s+1;return this.errorHandler.createError(o,a,c,n)}return o=this.lastMarker.index,a=this.lastMarker.line,c=this.lastMarker.column+1,this.errorHandler.createError(o,a,c,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var o={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,o)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:u.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var r=e.pattern,n=e.flags;t.regex={pattern:r,flags:n}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,o},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,o},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new a.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal("true"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(n,new a.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(n,new a.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new a.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var r=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new a.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await;this.context.allowYield=!1,this.context.await=!0;var n=this.parseFormalParameters(),o=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new a.AsyncFunctionExpression(null,n.params,o))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:this.context.strict&&r.octal&&this.tolerateUnexpectedToken(r,i.Messages.StrictOctalLiteral);var n=this.getTokenRaw(r);e=this.finalize(t,new a.Literal(r.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new a.Identifier(r.value));break;case 7:"["===r.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(r);break;default:e=this.throwUnexpectedToken(r)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===c.Syntax.Identifier&&e.name===t||e.type===c.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r=this.createNode(),n=this.lookahead,o=null,s=null,c=!1,u=!1,p=!1,l=!1;if(3===n.type){var d=n.value;this.nextToken(),c=this.match("["),o=(l=!(this.hasLineTerminator||"async"!==d||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(r,new a.Identifier(d))}else this.match("*")?this.nextToken():(c=this.match("["),o=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(3===n.type&&!l&&"get"===n.value&&h)t="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod();else if(3===n.type&&!l&&"set"===n.value&&h)t="set",c=this.match("["),o=this.parseObjectPropertyKey(),s=this.parseSetterMethod();else if(7===n.type&&"*"===n.value&&h)t="init",c=this.match("["),o=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),u=!0;else if(o||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!l)!c&&this.isPropertyKey(o,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),s=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))s=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0;else if(3===n.type)if(d=this.finalize(r,new a.Identifier(n.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),p=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);s=this.finalize(r,new a.AssignmentPattern(d,f))}else p=!0,s=d;else this.throwUnexpectedToken(this.nextToken());return this.finalize(r,new a.Property(t,o,c,s,u,p))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new a.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r=t.value,o=t.cooked;return this.finalize(e,new a.TemplateElement({raw:r,cooked:o},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new a.TemplateElement({raw:r,cooked:n},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new a.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case c.Syntax.Identifier:case c.Syntax.MemberExpression:case c.Syntax.RestElement:case c.Syntax.AssignmentPattern:break;case c.Syntax.SpreadElement:e.type=c.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case c.Syntax.ArrayExpression:e.type=c.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case c.Syntax.ObjectExpression:for(e.type=c.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case c.Syntax.AssignmentExpression:e.type=c.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:p,params:[],async:!1};else{var t=this.lookahead,r=[];if(this.match("..."))e=this.parseRestElement(r),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:p,params:[e],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var o=[];for(this.context.isAssignmentTarget=!1,o.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:p,params:o,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),o.push(this.parseRestElement(r)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:p,params:o,async:!1}}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new a.SequenceExpression(o)))}if(!n){if(this.expect(")"),this.match("=>")&&(e.type===c.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:p,params:[e],async:!1}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===c.Syntax.SequenceExpression)for(i=0;i<e.expressions.length;i++)this.reinterpretExpressionAsPattern(e.expressions[i]);else this.reinterpretExpressionAsPattern(e);var s=e.type===c.Syntax.SequenceExpression?e.expressions:[e];e={type:p,params:s,async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new a.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert("new"===r.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var o=this.parseIdentifierName();e=new a.MetaProperty(r,o)}else this.throwUnexpectedToken(this.lookahead);else{var i=this.isolateCoverGrammar(this.parseLeftHandSideExpression),s=this.match("(")?this.parseArguments():[];e=new a.NewExpression(i,s),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.matchContextualKeyword("async"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new a.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var o=this.parseIdentifierName();e=this.finalize(this.startNode(t),new a.StaticMemberExpression(e,o))}else if(this.match("(")){var i=r&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var s=i?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new a.CallExpression(e,s)),i&&this.match("=>")){for(var c=0;c<s.length;++c)this.reinterpretExpressionAsPattern(s[c]);e={type:p,params:s,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),o=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new a.ComputedMemberExpression(e,o));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var u=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new a.TaggedTemplateExpression(e,u))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new a.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new a.ComputedMemberExpression(t,r))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),t=this.finalize(e,new a.StaticMemberExpression(t,r));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var o=this.parseTemplateLiteral();t=this.finalize(e,new a.TaggedTemplateExpression(t,o))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(r,new a.UpdateExpression(n.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var s=this.nextToken().value;o=!1,e=this.finalize(this.startNode(t),new a.UpdateExpression(s,e,o))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new a.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new a.UnaryExpression(r.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===c.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==c.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new a.BinaryExpression("**",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var o=[e,this.lookahead],i=t,s=this.isolateCoverGrammar(this.parseExponentiationExpression),c=[i,r.value,s],u=[n];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;c.length>2&&n<=u[u.length-1];){s=c.pop();var p=c.pop();u.pop(),i=c.pop(),o.pop();var l=this.startNode(o[o.length-1]);c.push(this.finalize(l,new a.BinaryExpression(p,i,s)))}c.push(this.nextToken().value),u.push(n),o.push(this.lookahead),c.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var d=c.length-1;t=c[d];for(var h=o.pop();d>1;){var f=o.pop(),m=h&&h.lineStart;l=this.startNode(f,m),p=c[d-1],t=this.finalize(l,new a.BinaryExpression(p,c[d-2],t)),d-=2,h=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(":");var o=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new a.ConditionalExpression(t,n,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case c.Syntax.Identifier:this.validateParam(e,t,t.name);break;case c.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case c.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case c.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case c.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof a.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e],n=!1;switch(e.type){case c.Syntax.Identifier:break;case p:r=e.params,n=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var o=0;o<r.length;++o)(a=r[o]).type===c.Syntax.AssignmentPattern?a.right.type===c.Syntax.YieldExpression&&(a.right.argument&&this.throwUnexpectedToken(this.lookahead),a.right.type=c.Syntax.Identifier,a.right.name="yield",delete a.right.argument,delete a.right.delegate):n&&a.type===c.Syntax.Identifier&&"await"===a.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,a),r[o]=a;if(this.context.strict||!this.context.allowYield)for(o=0;o<r.length;++o){var a;(a=r[o]).type===c.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var s=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(s,t.message)}return{simple:t.simple,params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if(e=this.parseConditionalExpression(),3===r.type&&r.lineNumber===this.lookahead.lineNumber&&"async"===r.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var n=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(n),e={type:p,params:[n],async:!0}}if(e.type===p||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=e.async,s=this.reinterpretAsCoverFormalsList(e);if(s){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var u=this.context.strict,l=this.context.allowStrictDirective;this.context.allowStrictDirective=s.simple;var d=this.context.allowYield,h=this.context.await;this.context.allowYield=!0,this.context.await=o;var f=this.startNode(t);this.expect("=>");var m=void 0;if(this.match("{")){var y=this.context.allowIn;this.context.allowIn=!0,m=this.parseFunctionSourceElements(),this.context.allowIn=y}else m=this.isolateCoverGrammar(this.parseAssignmentExpression);var g=m.type!==c.Syntax.BlockStatement;this.context.strict&&s.firstRestricted&&this.throwUnexpectedToken(s.firstRestricted,s.message),this.context.strict&&s.stricted&&this.tolerateUnexpectedToken(s.stricted,s.message),e=o?this.finalize(f,new a.AsyncArrowFunctionExpression(s.params,m,g)):this.finalize(f,new a.ArrowFunctionExpression(s.params,m,g)),this.context.strict=u,this.context.allowStrictDirective=l,this.context.allowYield=d,this.context.await=h}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===c.Syntax.Identifier){var v=e;this.scanner.isRestrictedWord(v.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(v.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var b=(r=this.nextToken()).value,w=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new a.AssignmentExpression(b,e,w)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new a.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new a.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&n.type!==c.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new a.VariableDeclarator(n,o))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert("let"===r||"const"===r,"Lexical declaration must be either let or const");var o=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new a.VariableDeclaration(o,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect("...");var n=this.parsePattern(e,t);return this.finalize(r,new a.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect("[");for(var n=[];!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new a.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,o=this.createNode(),i=!1,s=!1;if(3===this.lookahead.type){var c=this.lookahead;r=this.parseVariableIdentifier();var u=this.finalize(o,new a.Identifier(c.value));if(this.match("=")){e.push(c),s=!0,this.nextToken();var p=this.parseAssignmentExpression();n=this.finalize(this.startNode(c),new a.AssignmentPattern(u,p))}else this.match(":")?(this.expect(":"),n=this.parsePatternWithDefault(e,t)):(e.push(c),s=!0,n=u)}else i=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),n=this.parsePatternWithDefault(e,t);return this.finalize(o,new a.Property("init",r,i,n,!1,s))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new a.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match("[")?r=this.parseArrayPattern(e,t):this.match("{")?r=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var o=this.context.allowYield;this.context.allowYield=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=o,n=this.finalize(this.startNode(r),new a.AssignmentPattern(n,i))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&"yield"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):(this.context.strict||"let"!==r.value||"var"!==e)&&this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new a.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var");this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var n=null;return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===c.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new a.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new a.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new a.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword("if"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new a.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new a.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(")");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new a.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,o=null,s=null,u=!0,p=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var l=this.context.allowIn;this.context.allowIn=!1;var d=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=l,1===d.length&&this.matchKeyword("in")){var h=d[0];h.init&&(h.id.type===c.Syntax.ArrayPattern||h.id.type===c.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new a.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new a.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(n=this.finalize(n,new a.VariableDeclaration(d,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){n=this.createNode();var f=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(l=this.context.allowIn,this.context.allowIn=!1,d=this.parseBindingList(f,{inFor:!0}),this.context.allowIn=l,1===d.length&&null===d[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new a.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new a.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(this.consumeSemicolon(),n=this.finalize(n,new a.VariableDeclaration(d,f)))):(n=this.finalize(n,new a.Identifier(f)),this.nextToken(),e=n,t=this.parseExpression(),n=null)}else{var m=this.lookahead;if(l=this.context.allowIn,this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=l,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,u=!1;else{if(this.match(",")){for(var y=[n];this.match(",");)this.nextToken(),y.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new a.SequenceExpression(y))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(s=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(")");var g=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=g}return void 0===e?this.finalize(p,new a.ForStatement(n,o,s,r)):u?this.finalize(p,new a.ForInStatement(e,t,r)):this.finalize(p,new a.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier();t=r;var n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new a.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier(),n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name),t=r}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new a.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new a.WithStatement(r,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(t,new a.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],o=!1;for(this.expect("{");!this.match("}");){var s=this.parseSwitchCase();null===s.test&&(o&&this.throwError(i.Messages.MultipleDefaultsInSwitch),o=!0),n.push(s)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new a.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===c.Syntax.Identifier&&this.match(":")){this.nextToken();var n=r,o="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,o)&&this.throwError(i.Messages.Redeclaration,"Label",n.name),this.context.labelSet[o]=!0;var s=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),s=this.parseClassDeclaration();else if(this.matchKeyword("function")){var u=this.lookahead,p=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(u,i.Messages.StrictFunction):p.generator&&this.tolerateUnexpectedToken(u,i.Messages.GeneratorInLegacyContext),s=p}else s=this.parseStatement();delete this.context.labelSet[o],e=new a.LabeledStatement(n,s)}else this.consumeSemicolon(),e=new a.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},o=0;o<t.length;o++){var s="$"+t[o].value;Object.prototype.hasOwnProperty.call(n,s)&&this.tolerateError(i.Messages.DuplicateBinding,t[o].value),n[s]=!0}this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var u=this.parseBlock();return this.finalize(e,new a.CatchClause(r,u))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new a.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new a.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,o=this.context.inSwitch,i=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=o,this.context.inFunctionBody=i,this.finalize(e,new a.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new a.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof a.Identifier,e.params.push(r)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var r=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===r.lineNumber&&4===r.type&&"function"===r.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),r=this.matchContextualKeyword("async");r&&this.nextToken(),this.expectKeyword("function");var n,o=!r&&this.match("*");o&&this.nextToken();var s=null,c=null;if(!e||!this.match("(")){var u=this.lookahead;s=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(c=u,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(c=u,n=i.Messages.StrictReservedWord)}var p=this.context.await,l=this.context.allowYield;this.context.await=r,this.context.allowYield=!o;var d=this.parseFormalParameters(c),h=d.params,f=d.stricted;c=d.firstRestricted,d.message&&(n=d.message);var m=this.context.strict,y=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&c&&this.throwUnexpectedToken(c,n),this.context.strict&&f&&this.tolerateUnexpectedToken(f,n),this.context.strict=m,this.context.allowStrictDirective=y,this.context.await=p,this.context.allowYield=l,r?this.finalize(t,new a.AsyncFunctionDeclaration(s,h,g)):this.finalize(t,new a.FunctionDeclaration(s,h,g,o))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var r,n=!t&&this.match("*");n&&this.nextToken();var o,s=null,c=this.context.await,u=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!n,!this.match("(")){var p=this.lookahead;s=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(p.value)&&this.tolerateUnexpectedToken(p,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(p.value)?(o=p,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(p.value)&&(o=p,r=i.Messages.StrictReservedWord)}var l=this.parseFormalParameters(o),d=l.params,h=l.stricted;o=l.firstRestricted,l.message&&(r=l.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=l.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,r),this.context.strict&&h&&this.tolerateUnexpectedToken(h,r),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=c,this.context.allowYield=u,t?this.finalize(e,new a.AsyncFunctionExpression(s,d,y)):this.finalize(e,new a.FunctionExpression(s,d,y,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),n=r.type===c.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,n?new a.Directive(r,n):new a.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective();t.push(n);var o=n.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,i.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();1!==r.params.length?this.tolerateError(i.Messages.BadSetterArity):r.params[0]instanceof a.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new a.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n="",o=null,s=null,c=!1,u=!1,p=!1,l=!1;if(this.match("*"))this.nextToken();else if(c=this.match("["),"static"===(o=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,p=!0,c=this.match("["),this.match("*")?this.nextToken():o=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var d=this.lookahead.value;":"!==d&&"("!==d&&"*"!==d&&(l=!0,t=this.lookahead,o=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,i.Messages.ConstructorIsAsync))}var h=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&h?(n="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod()):"set"===t.value&&h&&(n="set",c=this.match("["),o=this.parseObjectPropertyKey(),s=this.parseSetterMethod()):7===t.type&&"*"===t.value&&h&&(n="init",c=this.match("["),o=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),u=!0),!n&&o&&this.match("(")&&(n="init",s=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0),n||this.throwUnexpectedToken(this.lookahead),"init"===n&&(n="method"),c||(p&&this.isPropertyKey(o,"prototype")&&this.throwUnexpectedToken(t,i.Messages.StaticPrototype),!p&&this.isPropertyKey(o,"constructor")&&(("method"!==n||!u||s&&s.generator)&&this.throwUnexpectedToken(t,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,i.Messages.DuplicateConstructor):e.value=!0,n="constructor")),this.finalize(r,new a.MethodDefinition(o,c,s,n,p))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new a.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),o=null;this.matchKeyword("extends")&&(this.nextToken(),o=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=r,this.finalize(t,new a.ClassDeclaration(n,o,i))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=3===this.lookahead.type?this.parseVariableIdentifier():null,n=null;this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=t,this.finalize(e,new a.ClassExpression(r,n,o))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new a.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new a.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new a.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new a.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var r=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?r=r.concat(this.parseNamedImports()):this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(r.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.match("{")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new a.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new a.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new a.ExportDefaultDeclaration(r))}else this.matchKeyword("class")?(r=this.parseClassDeclaration(!0),e=this.finalize(t,new a.ExportDefaultDeclaration(r))):this.matchContextualKeyword("async")?(r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new a.ExportDefaultDeclaration(r))):(this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value),r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new a.ExportDefaultDeclaration(r)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new a.ExportAllDeclaration(o))}else if(4===this.lookahead.type){switch(r=void 0,this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new a.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction())r=this.parseFunctionDeclaration(),e=this.finalize(t,new a.ExportNamedDeclaration(r,[],null));else{var s=[],c=null,u=!1;for(this.expect("{");!this.match("}");)u=u||this.matchKeyword("default"),s.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),c=this.parseModuleSpecifier(),this.consumeSemicolon()):u?(n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause,this.throwError(n,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new a.ExportNamedDeclaration(null,s,c))}return e},e}();t.Parser=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,"column",{value:t}))}return r},e.prototype.createError=function(e,t,r,n){var o="Line "+t+": "+n,i=this.constructError(o,r);return i.index=e,i.lineNumber=t,i.description=n,i},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var o=this.createError(e,t,r,n);if(!this.tolerant)throw o;this.recordError(o)},e}();t.ErrorHandler=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(4),i=r(11);function a(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function s(e){return"01234567".indexOf(e)}var c=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(i)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var a={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:r};n.push(a)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}}return this.trackComment&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:r},n.push(a)),n},e.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};r.push(i)}return r}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},i={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},r.push(i)),this.tolerateUnexpectedToken(),r},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(r))++this.index;else if(o.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2,n=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,n=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(n))}else{if(60!==r||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,n=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);r>=56320&&r<=57343&&(t=1024*(t-55296)+r-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+a(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+a(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=o.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)r+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},e.prototype.octalToDecimal=function(e){var t="0"!==e,r=s(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+s(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+s(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===r.length?3:this.isKeyword(r)?4:"null"===r?5:"true"===r||"false"===r?1:3)&&t+r.length!==this.index){var n=this.index;this.index=t,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=n}return{type:e,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var r=!1,a="";!this.eof();){var s=this.source[this.index++];if(s===t){t="";break}if("\\"===s)if((s=this.source[this.index++])&&o.Character.isLineTerminator(s.charCodeAt(0)))++this.lineNumber,"\r"===s&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(s){case"u":if("{"===this.source[this.index])++this.index,a+=this.scanUnicodeCodePointEscape();else{var c=this.scanHexEscape(s);null===c&&this.throwUnexpectedToken(),a+=c}break;case"x":var u=this.scanHexEscape(s);null===u&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),a+=u;break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;case"8":case"9":a+=s,this.tolerateUnexpectedToken();break;default:if(s&&o.Character.isOctalDigit(s.charCodeAt(0))){var p=this.octalToDecimal(s);r=p.octal||r,a+=String.fromCharCode(p.code)}else a+=s}else{if(o.Character.isLineTerminator(s.charCodeAt(0)))break;a+=s}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:a,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],a=!1,s=2;for(++this.index;!this.eof();){var c=this.source[this.index++];if("`"===c){s=1,a=!0,t=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=c}else if("\\"===c)if(c=this.source[this.index++],o.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var u=this.index,p=this.scanHexEscape(c);null!==p?e+=p:(this.index=u,e+=c)}break;case"x":var l=this.scanHexEscape(c);null===l&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),e+=l;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===c?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=c}else o.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=c}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-s),cooked:e,head:n,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&n.throwUnexpectedToken(i.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):""})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(r)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],r=!1,a=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){a=!0;break}"["===e&&(r=!0)}return a||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!o.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var r=this.index,n=this.scanHexEscape("u");if(null!==n)for(e+=n;r<this.index;++r)this.source[r];else this.index=r,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(12),i=r(13),a=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var r=this.values[this.paren-1];t="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(n=this.values[this.curly-4])&&!this.beforeFunctionExpression(n);else if("function"===this.values[this.curly-4]){var n;t=!(n=this.values[this.curly-5])||!this.beforeFunctionExpression(n)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),s=function(){function e(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new a}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=this.scanner.source.slice(r.slice[0],r.slice[1]),o={type:r.multiLine?"BlockComment":"LineComment",value:n};this.trackRange&&(o.range=r.range),this.trackLoc&&(o.loc=r.loc),this.buffer.push(o)}if(!this.scanner.eof()){var a=void 0;this.trackLoc&&(a={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var s="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(s);var c={type:i.TokenName[s.type],value:this.scanner.source.slice(s.start,s.end)};if(this.trackRange&&(c.range=[s.start,s.end]),this.trackLoc&&(a.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=a),9===s.type){var u=s.pattern,p=s.flags;c.regex={pattern:u,flags:p}}this.buffer.push(c)}}return this.buffer.shift()},e}();t.Tokenizer=s}])},"object"===s(t)&&"object"===s(e)?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},4092:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,n="object"===("undefined"==typeof Reflect?"undefined":t(Reflect))?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==i&&e.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==t&&(i=function(r){e.removeListener(t,o),n(r)},e.once("error",i)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+t(e))}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var o,i,a,s;if(c(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=u(e))>0&&a.length>o&&!a.warned){a.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=a.length,s=p,console&&console.warn&&console.warn(s)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):m(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,p=m(c,u);for(r=0;r<u;++r)o(p[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},8598:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function e(r,n){if(r===n)return!0;if(r&&n&&"object"==t(r)&&"object"==t(n)){if(r.constructor!==n.constructor)return!1;var o,i,a;if(Array.isArray(r)){if((o=r.length)!=n.length)return!1;for(i=o;0!=i--;)if(!e(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if((o=(a=Object.keys(r)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=o;0!=i--;){var s=a[i];if(!e(r[s],n[s]))return!1}return!0}return r!=r&&n!=n}},7642:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,r){r||(r={}),"function"==typeof r&&(r={cmp:r});var n,o="boolean"==typeof r.cycles&&r.cycles,i=r.cmp&&(n=r.cmp,function(e){return function(t,r){var o={key:t,value:e[t]},i={key:r,value:e[r]};return n(o,i)}}),a=[];return function e(r){if(r&&r.toJSON&&"function"==typeof r.toJSON&&(r=r.toJSON()),void 0!==r){if("number"==typeof r)return isFinite(r)?""+r:"null";if("object"!==t(r))return JSON.stringify(r);var n,s;if(Array.isArray(r)){for(s="[",n=0;n<r.length;n++)n&&(s+=","),s+=e(r[n])||"null";return s+"]"}if(null===r)return"null";if(-1!==a.indexOf(r)){if(o)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=a.push(r)-1,u=Object.keys(r).sort(i&&i(r));for(s="",n=0;n<u.length;n++){var p=u[n],l=e(r[p]);l&&(s&&(s+=","),s+=JSON.stringify(p)+":"+l)}return a.splice(c,1),"{"+s+"}"}}(e)}},4836:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(5419)("fbp-client:adapter:signal"),i=r(5419)("fbp-client:adapter:request"),a=r(5419)("fbp-client:adapter:response"),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.commands=[],this.listener=null,this.version=r,this.subscribe(),this.tick()}var t,r;return t=e,(r=[{key:"subscribe",value:function(){var e=this;this.client.transport.on("message",(function(t){e.listener?e.listener(t):(o("".concat(t.protocol,":").concat(t.command)),e.client.validate("/".concat(t.protocol,"/output/").concat(t.command),t).then((function(){return e.client.canReceive(t.protocol,t.command)})).then((function(){return e.client.signal(t)}),(function(t){return e.client.protocolError(t)})))})),this.client.transport.on("status",(function(t){t.online&&e.tick()}))}},{key:"send",value:function(e,t,r){var n=this;return new Promise((function(s,c){var u=[];n.commands.push((function(){var p=null;n.listener=function(r){n.client.validate("/".concat(r.protocol,"/output/").concat(r.command),r).then((function(){return n.client.canReceive(r.protocol,r.command)})).then((function(){if(!function(r){if(r.protocol!==e)return!1;var n=[];switch("".concat(e,":").concat(t)){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)}(r))return o("".concat(r.protocol,":").concat(r.command)),void n.client.signal(r);if(p&&(clearTimeout(p),p=null),a("".concat(r.protocol,":").concat(r.command," for request ").concat(e,":").concat(t)),"error"===r.command){var i=new Error(r.payload.message);return i.stack=r.payload.stack,n.listener=null,c(i),void n.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(n.listener=null,s(u),void n.tick()):void u.push(r.payload);n.listener=null,s(r.payload),n.tick()}),(function(e){n.listener=null,c(e),n.tick()}))},i("".concat(e,":").concat(t)),n.client.transport.send(e,t,r),"component"!==e&&(p="runtime"===e&&"packet"===t&&n.version<=.6?setTimeout((function(){n.listener=null,s(r),n.tick()}),10):setTimeout((function(){n.listener=null,c(new Error("".concat(e,":").concat(t," timed out"))),n.tick()}),n.client.options.commandTimeout))})),n.tick()}))}},{key:"tick",value:function(){this.commands.length&&this.client.isConnected()&&(this.listener||this.commands.shift()())}}])&&n(t.prototype,r),e}();e.exports=function(e,t){return new s(e,t)}},3049:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(581),d=r(4092).EventEmitter,h=r(2406),f=r(1882),m=f.timedPromise,y=f.addressToProtocol,g=r(2511),v=g.canSend,b=g.canReceive,w=r(9381)(),x=r(5232),E=r(4836),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,r,n,o,a=(n=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function d(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(r=a.call(this)).definition=e;var n=l.getTransport(e.protocol);return r.transport=new n(r.definition),r.options=t,r.options.connectionTimeout||(r.options.connectionTimeout=1e3),r.options.commandTimeout||(r.options.commandTimeout=1e3),r.options.skipPermissions||(r.options.skipPermissions=!1),r.options.skipValidation||(r.options.skipValidation=!1),r.prepareCommands(),r}return t=d,(r=[{key:"validate",value:function(e,t){var r=this;return w(e,t).catch((function(e){return r.options.skipValidation?(r.protocolError(e),Promise.resolve(t)):Promise.reject(e)}))}},{key:"isConnected",value:function(){return this.transport.isConnected()}},{key:"connect",value:function(){var e=this;return m((function(t,r){if(e.isConnected())t(e.definition);else{var n=null,o=function o(i){"runtime"===i.command?(e.transport.removeListener("error",n),e.validate("/runtime/output/runtime",i).then((function(){e.prepareAdapter(i.payload.version),t(e.definition),e.emit("connected",e.definition),e.transport.once("disconnected",(function(){e.emit("disconnected",e.definition)}))}),(function(t){e.transport.disconnect(),r(t)}))):e.transport.once("runtime",o)};n=function(t){var n=t;t instanceof Error||(n=new Error("Connection to ".concat(e.definition.address," failed"))),e.transport.removeListener("runtime",o),e.transport.disconnect(),r(n)},e.transport.once("runtime",o),e.transport.once("error",n),e.transport.connect()}}),this.options.connectionTimeout,"Connection to ".concat(this.definition.address," timed out"))}},{key:"disconnect",value:function(){var e=this;return new Promise((function(t){e.isConnected()?(e.transport.once("disconnected",(function(){t(null)})),e.transport.disconnect()):t(null)}))}},{key:"observe",value:function(e){return x(this,e)}},{key:"signal",value:function(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}},{key:"protocolError",value:function(e){this.emit("protocolError",e)}},{key:"canSend",value:function(e,t){var r=this;return new Promise((function(n,o){r.options.skipPermissions||v(e,t,r.definition.capabilities)?n(null):o(new Error("Not permitted to send ".concat(e,":").concat(t," messages")))}))}},{key:"canReceive",value:function(e,t){var r=this;return new Promise((function(n,o){r.options.skipPermissions||b(e,t,r.definition.capabilities)?n(null):o(new Error("Not permitted to receive ".concat(e,":").concat(t," messages")))}))}},{key:"prepareCommands",value:function(){var e=this;this.protocol={},Object.keys(h).forEach((function(t){if(h[t].input){var r={};Object.keys(h[t].input).forEach((function(n){r[n]=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i(i({},r),{},{secret:e.definition.secret});return e.validate("/".concat(t,"/").concat(h[t].input[n].id),{protocol:t,command:n,payload:r}).then((function(){return new Promise((function(t,r){e.adapter||r(new Error("FBP client must be connected to the runtime before sending commands")),t(null)}))})).then((function(){return e.canSend(t,n)})).then((function(){return e.adapter.send(t,n,o)}))}})),e.protocol[t]=r}})),this.protocol.graph.send=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.name||t.properties.id,o=t.properties,i=t.nodes,a=t.edges,s=t.initializers,c=t.inports,u=t.outports;return e.protocol.graph.clear({id:n,name:t.name,main:r,library:o.library||e.definition.namespace,icon:o.icon||"",description:o.description||""}).then((function(){return Promise.all(i.map((function(t){return e.protocol.graph.addnode({id:t.id,component:t.component,metadata:t.metadata,graph:n})})))})).then((function(){return Promise.all(a.map((function(t){return e.protocol.graph.addedge({src:t.from,tgt:t.to,metadata:t.metadata,graph:n})})))})).then((function(){return Promise.all(s.map((function(t){return e.protocol.graph.addinitial({src:t.from,tgt:t.to,metadata:t.metadata,graph:n})})))})).then((function(){return Promise.all(Object.keys(c).map((function(t){return e.protocol.graph.addinport({public:t,node:c[t].process,port:c[t].port,graph:n})})))})).then((function(){return Promise.all(Object.keys(u).map((function(t){return e.protocol.graph.addoutport({public:t,node:u[t].process,port:u[t].port,graph:n})})))})).then((function(){return t}))}}},{key:"prepareAdapter",value:function(e){if(!this.adapter){var t=Number.parseFloat(e);if(!(t<=.9))throw new Error("Unsupported FBP protocol version ".concat(e));this.adapter=E(this,t)}}}])&&s(t.prototype,r),d}(d);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){w("/definition/",e).then((function(){var o=e;o.protocol=o.protocol||y(o.address),o.protocol?l.transports[o.protocol]?r(new _(o,t)):n(new Error("Unsupported FBP transport ".concat(o.protocol))):n(new Error("Runtime connection protocol is required"))}),n)}))}},5232:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r(5419)("fbp-client:observer"),a=r(5419)("fbp-client:observer:ignored");function s(e,t){return"*"===t||e===t}function c(e,t){return"function"==typeof t?t(e):t.filter((function(t){var r,n,i=(r=t.split(":"),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(r,n)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return s(e.protocol,a)&&s(e.command,c)})).length>0}function u(e){var t="".concat(e.protocol,":").concat(e.command),r="Unexpected ".concat(t," message"),n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);var o=new Error(r);return o.signature=t,n&&(o.stack=n),o}var p=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(r)}var t,r;return t=e,(r=[{key:"subscribe",value:function(e){var t=this;this.listener=function(r){c(r,e)?(i("Observed ".concat(r.protocol,":").concat(r.command)),t.signals.push(r)):a("".concat(r.protocol,":").concat(r.command))},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=function(e){t.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}},{key:"unsubscribe",value:function(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}},{key:"until",value:function(e,t){var r=this;return new Promise((function(n,o){if(r.protocolErrors.length){var a=r.protocolErrors[0];return i("Failed with protocol error ".concat(a.message)),a.signals=r.signals.slice(0),r.unsubscribe(),r.signals=[],void o(a)}for(var s=0;s<r.signals.length;s+=1){var p=r.signals[s];if(c(p,t)){var l=u(p);return i("Failed with ".concat(p.protocol,":").concat(p.command)),l.signals=r.signals.slice(0,s+1),r.unsubscribe(),r.signals=[],void o(l)}if(c(p,e)){i("Succeeded with ".concat(p.protocol,":").concat(p.command));var d=r.signals.slice(0,s+1);return r.unsubscribe(),r.signals=[],void n(d)}}var h=null,f=function a(s){if(c(s,t)){i("Failed with ".concat(s.protocol,":").concat(s.command));var p=u(s);return p.signals=r.signals.slice(0),r.unsubscribe(),r.client.removeListener("signal",a),r.client.options.skipValidation||r.client.removeListener("protocolError",h),r.signals=[],void o(p)}if(c(s,e)){i("Succeeded with ".concat(s.protocol,":").concat(s.command));var l=r.signals.slice(0);r.unsubscribe(),r.client.removeListener("signal",a),r.client.options.skipValidation||r.client.removeListener("protocolError",h),r.signals=[],n(l)}};h=function(e){i("Failed with protocol error ".concat(e.message));var t=e;t.signals=r.signals.slice(0),r.unsubscribe(),r.client.removeListener("signal",f),r.client.options.skipValidation||r.client.removeListener("protocolError",h),r.signals=[],o(t)},r.client.on("signal",f),r.client.options.skipValidation||r.client.on("protocolError",h)}))}}])&&n(t.prototype,r),e}();e.exports=function(e,t){return new p(e,t)}},2511:(e,t,r)=>{var n=r(2406);function o(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.shared.capabilities.items._enumDescriptions;return o.filter((function(n){return r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf("".concat(e,":").concat(t)):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf("".concat(e,":").concat(t))})).map((function(e){return e.name}))}t.canSend=function(e,t,r){if("runtime"===e&&"getruntime"===t)return!0;var n=o(e,t,!0);return r.filter((function(e){return-1!==n.indexOf(e)})).length>0},t.canReceive=function(e,t,r){if("runtime"===e&&"runtime"===t)return!0;var n=o(e,t,!1);return r.filter((function(e){return-1!==n.indexOf(e)})).length>0}},1882:(e,t,r)=>{var n=r(4546).parse;t.addressToProtocol=function(e){var t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Request timed out";return Promise.race([new Promise(e),new Promise((function(e,n){setTimeout((function(){n(new Error(r))}),t)}))])}},9381:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(8501),i=r(2689),a=r(2406),s=r(3375);function c(){}e.exports=function(){var e=new o({extendRefs:!0,schemaId:"id",logger:{log:c,warn:c,error:console.log}});return e.addMetaSchema(i),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(a).forEach((function(t){a[t].id="/".concat(t,"/"),e.addSchema(a[t])})),e.addSchema(s),function(t,r){return new Promise((function(o,i){var a,s,c=(a=t.slice(1).split("/"),s=3,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(a,s)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],p=c[1],l=c[2];if(!p)return e.validate(t,r)?void o(r):void i(new Error("Runtime definition ".concat(e.errorsText())));var d=r;d.protocol=u,e.validate(t,d)?o(r):i("input"!==p?new Error("Runtime sent invalid payload for ".concat(u,":").concat(l,": ").concat(e.errorsText())):new Error("Client sent invalid payload for ".concat(u,":").concat(l,": ").concat(e.errorsText())))}))}}},6531:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeResolveTheirs=t.equivalent=t.loadFile=t.loadFBP=t.loadJSON=t.createGraph=t.Graph=void 0;var d=r(4092),h=r(8575),f=r(2831),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,n,o,a,d=(o=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(a){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,m),(e=d.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=m,(n=[{key:"getPortName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.transaction.id)throw Error("Nested transactions not supported");this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){this.transaction.id?"implicit"===this.transaction.id&&(this.transaction.depth+=1):this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){"implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth&&this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t=this;this.checkTransactionStart();var r=h(this.properties);Object.keys(e).forEach((function(r){var n=e[r];t.properties[r]=n})),this.emit("changeProperties",this.properties,r),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.inports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",o,this.inports[o]),this.checkTransactionEnd()}}},{key:"removeInport",value:function(e){var t=this.getPortName(e);if(this.inports[t]){this.checkTransactionStart();var r=this.inports[t];this.setInportMetadata(t,{}),delete this.inports[t],this.emit("removeInport",t,r),this.checkTransactionEnd()}}},{key:"renameInport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.inports[r]&&n!==r&&(this.checkTransactionStart(),this.inports[n]=this.inports[r],delete this.inports[r],this.emit("renameInport",r,n),this.checkTransactionEnd())}},{key:"setInportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.inports[n]){this.checkTransactionStart(),this.inports[n].metadata||(this.inports[n].metadata={});var o=h(this.inports[n].metadata);Object.keys(t).forEach((function(e){var o=t[e],i=r.inports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeInport",n,this.inports[n],o,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.outports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",o,this.outports[o]),this.checkTransactionEnd()}}},{key:"removeOutport",value:function(e){var t=this.getPortName(e);if(this.outports[t]){this.checkTransactionStart();var r=this.outports[t];this.setOutportMetadata(t,{}),delete this.outports[t],this.emit("removeOutport",t,r),this.checkTransactionEnd()}}},{key:"renameOutport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.outports[r]&&(this.checkTransactionStart(),this.outports[n]=this.outports[r],delete this.outports[r],this.emit("renameOutport",r,n),this.checkTransactionEnd())}},{key:"setOutportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.outports[n]){this.checkTransactionStart();var o=h(this.outports[n].metadata);this.outports[n].metadata||(this.outports[n].metadata={}),Object.keys(t).forEach((function(e){var o=t[e],i=r.outports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeOutport",n,this.outports[n],o,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){this.checkTransactionStart();var n={name:e,nodes:t,metadata:r};return this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd(),n}},{key:"renameGroup",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){n&&n.name===e&&(n.name=t,r.emit("renameGroup",e,t))})),this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t=this;this.checkTransactionStart(),this.groups=this.groups.filter((function(r){return!(!r||r.name===e&&(t.setGroupMetadata(r.name,{}),t.emit("removeGroup",r),1))})),this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){if(n&&n.name===e){var o=h(n.metadata);Object.keys(t).forEach((function(e){var r=t[e],o=n;o.metadata&&(null!=r?o.metadata[e]=r:delete o.metadata[e])})),r.emit("changeGroup",n,o,t)}})),this.checkTransactionEnd()}},{key:"addNode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.checkTransactionStart();var n={id:e,component:t,metadata:r};return this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t=this,r=this.getNode(e);r&&(this.checkTransactionStart(),this.edges.forEach((function(e){e.from.node!==r.id&&e.to.node!==r.id||t.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),this.initializers.forEach((function(e){e.to.node===r.id&&t.removeInitial(e.to.node,e.to.port)})),Object.keys(this.inports).forEach((function(r){t.inports[r].process===e&&t.removeInport(r)})),Object.keys(this.outports).forEach((function(r){t.outports[r].process===e&&t.removeOutport(r)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes.splice(n,1),0===r.nodes.length&&t.removeGroup(r.name))}})),this.setNodeMetadata(e,{}),this.nodes=this.nodes.filter((function(e){return e!==r})),this.emit("removeNode",r),this.checkTransactionEnd())}},{key:"getNode",value:function(e){return this.nodes.find((function(t){return t&&t.id===e}))||null}},{key:"renameNode",value:function(e,t){var r=this;this.checkTransactionStart();var n=this.getNode(e);n&&(n.id=t,this.edges.forEach((function(r){var n=r;n&&(n.from.node===e&&(n.from.node=t),n.to.node===e&&(n.to.node=t))})),this.initializers.forEach((function(r){var n=r;n&&n.to.node===e&&(n.to.node=t)})),Object.keys(this.inports).forEach((function(n){var o=r.inports[n];o.process===e&&(o.process=t)})),Object.keys(this.outports).forEach((function(n){var o=r.outports[n];o.process===e&&(o.process=t)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes[n]=t)}})),this.emit("renameNode",e,t),this.checkTransactionEnd())}},{key:"setNodeMetadata",value:function(e,t){var r=this.getNode(e);if(r){this.checkTransactionStart(),r.metadata||(r.metadata={});var n=h(r.metadata);Object.keys(t).forEach((function(e){if(r.metadata){var n=t[e];null!=n?r.metadata[e]=n:delete r.metadata[e]}})),this.emit("changeNode",r,n,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=this.getPortName(t),a=this.getPortName(n);if(this.edges.some((function(t){return t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===a})))return null;if(!this.getNode(e))return null;if(!this.getNode(r))return null;this.checkTransactionStart();var s={from:{node:e,port:i},to:{node:r,port:a},metadata:o};return this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=this.getPortName(t),c=this.getPortName(o),u=null===i?void 0:i,p=null===r?void 0:r;if(this.edges.some((function(t){return t.from.node===e&&t.from.port===s&&t.from.index===p&&t.to.node===n&&t.to.port===c&&t.to.index===u})))return null;if(!this.getNode(e))return null;if(!this.getNode(n))return null;this.checkTransactionStart();var l={from:{node:e,port:s,index:p},to:{node:n,port:c,index:u},metadata:a};return this.edges.push(l),this.emit("addEdge",l),this.checkTransactionEnd(),l}},{key:"removeEdge",value:function(e,t,r,n){var o=this;if(this.getEdge(e,t,r,n)){this.checkTransactionStart();var i=this.getPortName(t),a=this.getPortName(n);this.edges=this.edges.filter((function(t){if(r&&a){if(t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===a)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1}else if(t.from.node===e&&t.from.port===i||t.to.node===e&&t.to.port===i)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1;return!0})),this.checkTransactionEnd()}}},{key:"getEdge",value:function(e,t,r,n){var o=this.getPortName(t),i=this.getPortName(n);return this.edges.find((function(t){return!!t&&t.from.node===e&&t.from.port===o&&t.to.node===r&&t.to.port===i}))||null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i=this.getEdge(e,t,r,n);if(i){this.checkTransactionStart(),i.metadata||(i.metadata={});var a=h(i.metadata);Object.keys(o).forEach((function(e){var t=o[e];i.metadata||(i.metadata={}),null!==t?i.metadata[e]=t:delete i.metadata[e]})),this.emit("changeEdge",i,a,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.getNode(t))return null;var o=this.getPortName(r);this.checkTransactionStart();var i={from:{data:e},to:{node:t,port:o},metadata:n};return this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addInitialIndex",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.getNode(t))return null;var i=null===n?void 0:n,a=this.getPortName(r);this.checkTransactionStart();var s={from:{data:e},to:{node:t,port:a,index:i},metadata:o};return this.initializers.push(s),this.emit("addInitial",s),this.checkTransactionEnd(),s}},{key:"addGraphInitial",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.inports[t];return n?this.addInitial(e,n.process,n.port,r):null}},{key:"addGraphInitialIndex",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.inports[t];return o?this.addInitialIndex(e,o.process,o.port,r,n):null}},{key:"removeInitial",value:function(e,t){var r=this,n=this.getPortName(t);this.checkTransactionStart(),this.initializers=this.initializers.filter((function(t){return t.to.node!==e||t.to.port!==n||(r.emit("removeInitial",t),!1)})),this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t=this.inports[e];t&&this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e=function(e){return e.replace(/\./g,"")},t=function(e){return'"'.concat(function(e){return e.replace(/"/g,'\\"')}(e),'"')},r="digraph {\n";return this.nodes.forEach((function(e){r+="    ".concat(t(e.id)," [label=").concat(t(e.id)," shape=box]\n")})),this.initializers.forEach((function(n,o){var i;i="function"==typeof n.from.data?"Function":JSON.stringify(n.from.data),r+="    data".concat(o," [label=").concat(t(i)," shape=plaintext]\n"),r+="    data".concat(o," -> ").concat(t(n.to.node),"[headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),this.edges.forEach((function(n){r+="    ".concat(t(n.from.node)," -> ").concat(t(n.to.node),"[taillabel=").concat(e(n.from.port)," headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),r+="}"}},{key:"toYUML",value:function(){var e=[];return this.initializers.forEach((function(t){e.push("(start)[".concat(t.to.port,"]->(").concat(t.to.node,")"))})),this.edges.forEach((function(t){e.push("(".concat(t.from.node,")[").concat(t.from.port,"]->(").concat(t.to.node,")"))})),e.join(",")}},{key:"toJSON",value:function(){var e={caseSensitive:this.caseSensitive,properties:i({name:this.name},this.properties),inports:i({},this.inports),outports:i({},this.outports),groups:this.groups.map((function(e){var t={name:e.name,nodes:e.nodes};return e.metadata&&Object.keys(e.metadata).length&&(t.metadata=i({},e.metadata)),t})),processes:{},connections:[]};return this.nodes.forEach((function(t){e.processes||(e.processes={}),e.processes[t.id]={component:t.component},t.metadata&&(e.processes[t.id].metadata=i({},t.metadata))})),this.edges.forEach((function(t){var r={src:{process:t.from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),this.initializers.forEach((function(t){var r={data:t.from.data,tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),e}},{key:"save",value:function(e,t){if(f.isBrowser())t(new Error("Saving graphs not supported on browser"));else{var n=JSON.stringify(this.toJSON(),null,4),o=e;o.match(/\.json$/)||(o="".concat(e,".json")),r(2993).writeFile(o,n,"utf-8",(function(e){e?t(e):t(null,o)}))}}}])&&c(t.prototype,n),m}(d.EventEmitter);function y(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(r="string"==typeof e?JSON.parse(e):h(e)).properties||(r.properties={}),r.processes||(r.processes={}),r.connections||(r.connections=[]);var o=new m(r.properties.name,{caseSensitive:r.caseSensitive||!1});o.startTransaction("loadJSON",n);var i={};return Object.keys(r.properties).forEach((function(e){if("name"!==e&&r.properties){var t=r.properties[e];i[e]=t}})),o.setProperties(i),Object.keys(r.processes).forEach((function(e){if(r.processes){var t=r.processes[e];t.metadata||(t.metadata={}),o.addNode(e,t.component,t.metadata)}})),r.connections.forEach((function(e){var t=e.metadata?e.metadata:{};void 0===e.data?void 0!==e.src&&("number"!=typeof e.src.index&&"number"!=typeof e.tgt.index?o.addEdge(e.src.process,o.getPortName(e.src.port),e.tgt.process,o.getPortName(e.tgt.port),t):o.addEdgeIndex(e.src.process,o.getPortName(e.src.port),e.src.index,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t)):"number"==typeof e.tgt.index?o.addInitialIndex(e.data,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t):o.addInitial(e.data,e.tgt.process,o.getPortName(e.tgt.port),t)})),r.inports&&Object.keys(r.inports).forEach((function(e){if(r.inports&&r.inports[e]){var t=r.inports[e];o.addInport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.outports&&Object.keys(r.outports).forEach((function(e){if(r.outports&&r.outports[e]){var t=r.outports[e];o.addOutport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.groups&&r.groups.forEach((function(e){o.addGroup(e.name,e.nodes,e.metadata||{})})),o.endTransaction("loadJSON"),t(null,o)}function g(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{n=r(4655).parse(e,{caseSensitive:i})}catch(e){return t(e)}return y(n,t,o)}function v(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200!==r.status&&t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))),t(null,r.responseText))},r.open("GET",e,!0),r.send()}t.Graph=m,t.createGraph=function(e,t){return new m(e,t)},t.loadJSON=y,t.loadFBP=g,t.loadFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f.isBrowser()?v(e,(function(r,o){r?t(r):o?"fbp"!==e.split(".").pop()?y(o,t,n):g(o,t,n):t(new Error("No data received"))})):r(2993).readFile(e,"utf-8",(function(r,n){r?t(r):"fbp"!==e.split(".").pop()?y(n,t,{}):g(n,t,{},o)}))},t.mergeResolveTheirs=function(e,t){var r;(r=e).groups.reverse(),r.groups.forEach((function(e){null!=e&&r.removeGroup(e.name)})),Object.keys(r.outports).forEach((function(e){r.removeOutport(e)})),Object.keys(r.inports).forEach((function(e){r.removeInport(e)})),r.setProperties({}),r.initializers.reverse(),r.initializers.forEach((function(e){r.removeInitial(e.to.node,e.to.port)})),r.edges.reverse(),r.edges.forEach((function(e){r.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),r.nodes.reverse(),r.nodes.forEach((function(e){r.removeNode(e.id)})),t.nodes.forEach((function(t){e.addNode(t.id,t.component,t.metadata)})),t.edges.forEach((function(t){e.addEdge(t.from.node,t.from.port,t.to.node,t.to.port,t.metadata)})),t.initializers.forEach((function(t){"number"!=typeof t.to.index?e.addInitial(t.from.data,t.to.node,t.to.port,t.metadata||{}):e.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata||{})})),e.setProperties(t.properties),Object.keys(t.inports).forEach((function(r){var n=t.inports[r];e.addInport(r,n.process,n.port,n.metadata||{})})),Object.keys(t.outports).forEach((function(r){var n=t.outports[r];e.addOutport(r,n.process,n.port,n.metadata||{})})),t.groups.forEach((function(t){e.addGroup(t.name,t.nodes,t.metadata||{})}))},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},776:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryJournalStore=t.JournalStore=t.Journal=void 0;var c=r(4092),u=r(8575),p=r(5387);t.JournalStore=p.default;var l=r(8347);function d(e){var t=e.args;switch(e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}function h(e,t){var r={};return Object.keys(e).forEach((function(e){r[e]=null})),Object.keys(t).forEach((function(e){var n=t[e];r[e]=n})),r}t.MemoryJournalStore=l.default;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(m,e);var t,n,c,p,f=(c=m,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(c);if(p){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function m(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(n=f.call(this)).graph=e,n.entries=[],n.subscribed=!0,n.store=r||new l.default(n.graph),0===n.store.countTransactions()?(n.currentRevision=-1,n.startTransaction("initial",t||{}),n.graph.nodes.forEach((function(e){n.appendCommand("addNode",e)})),n.graph.edges.forEach((function(e){n.appendCommand("addEdge",e)})),n.graph.initializers.forEach((function(e){n.appendCommand("addInitial",e)})),Object.keys(n.graph.properties).length>0&&n.appendCommand("changeProperties",n.graph.properties),Object.keys(n.graph.inports).forEach((function(e){var t=n.graph.inports[e];n.appendCommand("addInport",{name:e,port:t})})),Object.keys(n.graph.outports).forEach((function(e){var t=n.graph.outports[e];n.appendCommand("addOutport",{name:e,port:t})})),n.graph.groups.forEach((function(e){n.appendCommand("addGroup",e)})),n.endTransaction("initial",t||{})):n.currentRevision=n.store.lastRevision,n.graph.on("addNode",(function(e){n.appendCommand("addNode",e)})),n.graph.on("removeNode",(function(e){n.appendCommand("removeNode",e)})),n.graph.on("renameNode",(function(e,t){var r={oldId:e,newId:t};n.appendCommand("renameNode",r)})),n.graph.on("changeNode",(function(e,t){n.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),n.graph.on("addEdge",(function(e){n.appendCommand("addEdge",e)})),n.graph.on("removeEdge",(function(e){n.appendCommand("removeEdge",e)})),n.graph.on("changeEdge",(function(e,t){n.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),n.graph.on("addInitial",(function(e){n.appendCommand("addInitial",e)})),n.graph.on("removeInitial",(function(e){n.appendCommand("removeInitial",e)})),n.graph.on("changeProperties",(function(e,t){return n.appendCommand("changeProperties",{new:e,old:t})})),n.graph.on("addGroup",(function(e){return n.appendCommand("addGroup",e)})),n.graph.on("renameGroup",(function(e,t){return n.appendCommand("renameGroup",{oldName:e,newName:t})})),n.graph.on("removeGroup",(function(e){return n.appendCommand("removeGroup",e)})),n.graph.on("changeGroup",(function(e,t){return n.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),n.graph.on("addExport",(function(e){return n.appendCommand("addExport",e)})),n.graph.on("removeExport",(function(e){return n.appendCommand("removeExport",e)})),n.graph.on("addInport",(function(e,t){return n.appendCommand("addInport",{name:e,port:t})})),n.graph.on("removeInport",(function(e,t){return n.appendCommand("removeInport",{name:e,port:t})})),n.graph.on("renameInport",(function(e,t){return n.appendCommand("renameInport",{oldId:e,newId:t})})),n.graph.on("changeInport",(function(e,t,r){return n.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),n.graph.on("addOutport",(function(e,t){return n.appendCommand("addOutport",{name:e,port:t})})),n.graph.on("removeOutport",(function(e,t){return n.appendCommand("removeOutport",{name:e,port:t})})),n.graph.on("renameOutport",(function(e,t){return n.appendCommand("renameOutport",{oldId:e,newId:t})})),n.graph.on("changeOutport",(function(e,t,r){return n.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),n.graph.on("startTransaction",(function(e,t){n.startTransaction(e,t)})),n.graph.on("endTransaction",(function(e,t){n.endTransaction(e,t)})),n}return t=m,(n=[{key:"startTransaction",value:function(e,t){if(this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");this.currentRevision+=1,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){this.subscribed&&(this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[])}},{key:"appendCommand",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.subscribed){var n={cmd:e,args:u(t),rev:r};this.entries.push(n)}}},{key:"executeEntry",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.addNode(t.id,t.component);break;case"removeNode":this.graph.removeNode(t.id);break;case"renameNode":this.graph.renameNode(t.oldId,t.newId);break;case"changeNode":this.graph.setNodeMetadata(t.id,h(t.old,t.new));break;case"addEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,h(t.old,t.new));break;case"addInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"removeInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.new);break;case"addGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"renameGroup":this.graph.renameGroup(t.oldName,t.newName);break;case"removeGroup":this.graph.removeGroup(t.name);break;case"changeGroup":this.graph.setGroupMetadata(t.name,h(t.old,t.new));break;case"addInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"removeInport":this.graph.removeInport(t.name);break;case"renameInport":this.graph.renameInport(t.oldId,t.newId);break;case"changeInport":this.graph.setInportMetadata(t.name,h(t.old,t.new));break;case"addOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));break;case"removeOutport":this.graph.removeOutport(t.name);break;case"renameOutport":this.graph.renameOutport(t.oldId,t.newId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,h(t.old,t.new));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.removeNode(t.id);break;case"removeNode":this.graph.addNode(t.id,t.component);break;case"renameNode":this.graph.renameNode(t.newId,t.oldId);break;case"changeNode":this.graph.setNodeMetadata(t.id,h(t.new,t.old));break;case"addEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,h(t.new,t.old));break;case"addInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"removeInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.old);break;case"addGroup":this.graph.removeGroup(t.name);break;case"renameGroup":this.graph.renameGroup(t.newName,t.oldName);break;case"removeGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"changeGroup":this.graph.setGroupMetadata(t.name,h(t.new,t.old));break;case"addInport":this.graph.removeInport(t.name);break;case"removeInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameInport":this.graph.renameInport(t.newId,t.oldId);break;case"changeInport":this.graph.setInportMetadata(t.name,h(t.new,t.old));break;case"addOutport":this.graph.removeOutport(t.name);break;case"removeOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameOutport":this.graph.renameOutport(t.newId,t.oldId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,h(t.new,t.old));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t=this;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(var r=this.currentRevision+1,n=r,o=e,i=r<=o;i?n<=o:n>=o;i?n+=1:n-=1)this.store.fetchTransaction(n).forEach((function(e){t.executeEntry(e)}));else for(var a=this.currentRevision,s=e+1;a>=s;a-=1){var c=this.store.fetchTransaction(a).slice(0);c.reverse(),c.forEach((function(e){t.executeEntryInversed(e)}))}this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){this.canUndo()&&this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){this.canRedo()&&this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=t||this.store.lastRevision,n=[],o=e,i=r,a=e<=i;a?o<i:o>i;a?o+=1:o-=1){var s=this.store.fetchTransaction(o);s.forEach((function(e){n.push(d(e))}))}return n.join("\n")}},{key:"toJSON",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||this.store.lastRevision,n=[],o=e,i=r;o<i;o+=1){var a=this.store.fetchTransaction(o);a.forEach((function(e){n.push(d(e))}))}return n}},{key:"save",value:function(e,t){var n=JSON.stringify(this.toJSON(),null,4);(0,r(2993).writeFile)("".concat(e,".json"),n,"utf-8",t)}}])&&o(t.prototype,n),m}(c.EventEmitter);t.Journal=f},5387:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(p,e);var t,r,n,c,u=(n=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(n);if(c){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this)).graph=e,t.lastRevision=0,t}return t=p,(r=[{key:"countTransactions",value:function(){return 0}},{key:"putTransaction",value:function(e,t){e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e,t)}},{key:"fetchTransaction",value:function(e){return[]}}])&&o(t.prototype,r),p}(r(4092).EventEmitter);t.default=c},8347:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,u,p=(n=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(u){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=p.call(this,e)).transactions=[],t}return t=l,(r=[{key:"countTransactions",value:function(){return this.transactions.length}},{key:"putTransaction",value:function(e,t){i(c(l.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}])&&o(t.prototype,r),l}(r(5387).default);t.default=u},2831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.isBrowser=function(){return"undefined"==typeof process||!process.execPath||!process.execPath.match(/node|iojs/)}},2561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.Journal=t.graph=t.journal=void 0;var n=r(776);t.journal=n;var o=r(6531);t.graph=o;var i=n.Journal;t.Journal=i;var a=o.Graph;t.Graph=a},581:(e,t,r)=>{t.transports={websocket:r(2675),iframe:r(2613),opener:r(6144),webrtc:r(4148),base:r(3721)},t.connection=r(1553),t.Signaller=r(7352),t.getTransport=function(e){return t.transports[e]}},1553:(e,t)=>{t.sendGraph=function(e,t,r,n){if(!(null!=e.properties.environment?e.properties.environment.type:void 0)||["all",t.definition.type].includes(e.properties.environment.type))if(t.canDo("protocol:graph")){var o=e.name||e.properties.id;t.sendGraph("clear",{id:o,name:e.name,main:n,library:e.properties.project,icon:e.properties.icon||"",description:e.properties.description||""}),e.nodes.forEach((function(e){t.sendGraph("addnode",{id:e.id,component:e.component,metadata:e.metadata,graph:o})})),e.edges.forEach((function(e){t.sendGraph("addedge",{src:{node:e.from.node,port:e.from.port},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})})),e.initializers.forEach((function(e){t.sendGraph("addinitial",{src:{data:e.from.data},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})})),e.inports&&Object.keys(e.inports).forEach((function(r){var n=e.inports[r];t.sendGraph("addinport",{public:r,node:n.process,port:n.port,graph:o})})),e.outports&&Object.keys(e.outports).forEach((function(r){var n=e.outports[r];t.sendGraph("addoutport",{public:r,node:n.process,port:n.port,graph:o})})),r()}else r(new Error("Runtime doesn't support graph protocol"));else r(new Error("Graph type ".concat(e.properties.environment.type," doesn't match runtime type ").concat(t.definition.type)))}},1526:(e,t,r)=>{var n=r(4092).EventEmitter,o=function(){return!("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node"))};e.exports={isBrowser:o,EventEmitter:n,WebSocket:o()?window.WebSocket:r(5763).w3cwebsocket}},7352:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=r(5419)("fbp-protocol-client:signaller"),g=r(1526),v=g.WebSocket,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,r,n,o,a=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function u(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"client",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"wss://api.flowhub.io";return l(this,u),(t=a.call(this)).signaller=n,t.role=r,t.id=e,t.connection=null,t.connecting=!1,t.buffer=[],t}return t=u,(r=[{key:"isConnected",value:function(){return!(!this.connection||this.connection.readyState!==this.connection.OPEN)}},{key:"connect",value:function(){var e=this;if(!this.isConnected()&&!this.connecting){y("".concat(this.id," ").concat(this.role," connecting"));var t=new v(this.signaller);this.connecting=!0,t.addEventListener("open",(function(){y("".concat(e.id," ").concat(e.role," connected to ").concat(e.signaller)),e.connection=t,e.connecting=!1,e.emit("connected"),e.flush()})),t.addEventListener("message",(function(t){e.handleMessage(t)})),t.addEventListener("close",(function(){e.connection=null,e.connecting=!1,e.emit("disconnected"),y("".concat(e.id," ").concat(e.role," disconnected"))})),t.addEventListener("error",(function(t){e.connection=null,e.connecting=!1,e.emit("error",t),y("".concat(e.id," ").concat(e.role," error"),t)}))}}},{key:"signal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={id:this.id};this.send("/to|".concat(e,"|/signal|").concat(JSON.stringify(r),"|").concat(JSON.stringify(t)))}},{key:"join",value:function(e){var t={id:this.id},r={room:e,id:this.id};this.send("/announce|".concat(JSON.stringify(t),"|").concat(JSON.stringify(r)))}},{key:"joinReply",value:function(e,t){var r={id:this.id},n={room:t,id:this.id};this.send("/to|".concat(e,"|/announce|").concat(JSON.stringify(r),"|").concat(JSON.stringify(n)))}},{key:"send",value:function(e){if(!this.isConnected())return y("".concat(this.id," ").concat(this.role," push buffer")),void this.buffer.push(e);var t,r,n=(t=e.split("|"),r=1,p(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(t,r)||c(t,r)||s())[0];y("".concat(this.id," ").concat(this.role," send ").concat(n)),this.connection.send(e)}},{key:"disconnect",value:function(){this.isConnected()&&(y("".concat(this.id," ").concat(this.role," disconnecting")),this.connection.close())}},{key:"handleMessage",value:function(e){var t,r=p(t=e.data.split("|"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||c(t)||s(),n=r[0],o=r[1],a=r[2],u=r.slice(3);if("/to"!==n){y("".concat(this.id," ").concat(this.role," recv ").concat(n));var l;switch(l=a?JSON.parse(a):JSON.parse(o),n){case"/announce":this.emit("join",l,JSON.parse(o));break;case"/signal":this.emit("signal",l,JSON.parse(o));break;case"/roominfo":break;default:y("".concat(this.id," ").concat(this.role," unhandled command ").concat(n),l)}}else{if(o!==this.id)return void y("".concat(this.id," ").concat(this.role," wrongly-addressed DM, was sent to ").concat(o));var d="".concat(a,"|").concat(u.join("|"));this.handleMessage(i(i({},e),{},{data:d}))}}},{key:"flush",value:function(){var e=this;this.buffer.length&&(y("".concat(this.id," ").concat(this.role," flush buffer"),this.buffer.length),this.buffer.forEach((function(t){e.send(t)})),this.buffer=[])}}])&&d(t.prototype,r),u}(g.EventEmitter);e.exports=b},3721:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this)).definition=e,t.definition.capabilities||(t.definition.capabilities=[]),t.graph=null,t}return t=l,(r=[{key:"setMain",value:function(e){this.graph=e}},{key:"getType",value:function(){return this.definition.protocol}},{key:"getAddress",value:function(){return this.definition.address}},{key:"canDo",value:function(e){return-1!==this.definition.capabilities.indexOf(e)}},{key:"isConnected",value:function(){return!1}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"reconnect",value:function(){return this.disconnect(),this.connect()}},{key:"start",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("start",{graph:this.graph.name||this.graph.properties.id})}},{key:"stop",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("stop",{graph:this.graph.name||this.graph.properties.id})}},{key:"setParentElement",value:function(){}},{key:"getElement",value:function(){}},{key:"recvMessage",value:function(e){switch(this.emit("message",e),e.protocol){case"runtime":return this.recvRuntime(e.command,e.payload);case"graph":return this.recvGraph(e.command,e.payload);case"network":return this.recvNetwork(e.command,e.payload);case"component":return this.recvComponent(e.command,e.payload);case"trace":return this.recvTrace(e.command,e.payload);default:return null}}},{key:"recvRuntime",value:function(e,t){var r=this;"runtime"===e&&(Object.keys(t).forEach((function(e){var n=t[e];r.definition[e]=n})),this.emit("capabilities",t.capabilities||[])),this.emit("runtime",{command:e,payload:t})}},{key:"recvComponent",value:function(e,t){switch(e){case"error":return void this.emit("network",{command:e,payload:t});default:this.emit("component",{command:e,payload:t})}}},{key:"recvGraph",value:function(e,t){this.emit("graph",{command:e,payload:t})}},{key:"recvNetwork",value:function(e,t){switch(e){case"started":return void this.emit("execution",{running:null==t||null==t.running||t.running,started:null==t||!t.started||t.started});case"stopped":return void this.emit("execution",{running:null!=t&&null!=t.running&&t.running,started:!(null==t||!t.started)&&t.started});case"status":return void this.emit("execution",{running:t.running,started:t.started});case"icon":return void this.emit("icon",t);default:this.emit("network",{command:e,payload:t})}}},{key:"recvTrace",value:function(e,t){this.emit("trace",{command:e,payload:t})}},{key:"sendRuntime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("runtime",e,i(i({},t),{},{secret:this.definition.secret}))}},{key:"sendGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("graph",e,i(i({},t),{},{secret:this.definition.secret}))}},{key:"sendNetwork",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("network",e,i(i({},t),{},{secret:this.definition.secret}))}},{key:"sendComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("component",e,i(i({},t),{},{secret:this.definition.secret}))}},{key:"sendTrace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("trace",e,i(i({},t),{},{secret:this.definition.secret}))}},{key:"send",value:function(){}}])&&s(t.prototype,r),l}(r(1526).EventEmitter);e.exports=l},2613:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,n,p,l=(n=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(p){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).updateIframe=t.updateIframe.bind(c(t)),t.onLoaded=t.onLoaded.bind(c(t)),t.onMessage=t.onMessage.bind(c(t)),t.origin=window.location.origin,t.connecting=!1,t.connected=!1,t.buffer=[],t.iframe=null,t}return t=d,(r=[{key:"getElement",value:function(){return this.iframe}},{key:"isConnected",value:function(){return this.connected}},{key:"setMain",value:function(e){this.graph&&this.graph.removeListener("changeProperties",this.updateIframe),e?(e.on("changeProperties",this.updateIframe),i(u(d.prototype),"setMain",this).call(this,e),this.updateIframe()):i(u(d.prototype),"setMain",this).call(this,e)}},{key:"setParentElement",value:function(e){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.appendChild(this.iframe)}},{key:"connect",value:function(){if(!this.iframe)throw new Error("Unable to connect without a parent element");return this.iframe.addEventListener("load",this.onLoaded,!1),this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),this.iframe.setAttribute("src",this.getAddress()),this.iframe.id="preview-iframe",window.addEventListener("message",this.onMessage,!1)}},{key:"updateIframe",value:function(){if(this.iframe&&this.graph){var e=this.graph.properties.environment;e&&e.content&&this.send("iframe","setcontent",e.content)}}},{key:"disconnect",value:function(){return this.iframe&&this.iframe.removeEventListener("load",this.onLoaded,!1),this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"onLoaded",value:function(){var e,t=this;this.once("capabilities",(function(){return e&&clearTimeout(e),t.connecting=!1,t.connected=!0,t.emit("status",{online:!0,label:"connected"}),t.emit("connected"),t.updateIframe(),t.flush()})),this.postMessage("runtime","getruntime",{}),e=setTimeout((function(){t.postMessage("runtime","getruntime",{})}),500)}},{key:"send",value:function(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}},{key:"postMessage",value:function(e,t,r){var n=this.iframe.contentWindow;if(n){try{if("about:blank"===n.location.href)return;if(-1!==n.location.href.indexOf("chrome-extension://"))throw new Error("Use * for IFRAME communications in a Chrome app")}catch(o){return void n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),n.location.href)}}},{key:"onMessage",value:function(e){var t;e.source&&e.source!==this.iframe.contentWindow||(t="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(t))}},{key:"flush",value:function(){var e=this;this.buffer.forEach((function(t){e.postMessage(t.protocol,t.command,t.payload)})),this.buffer=[]}}])&&o(t.prototype,r),d}(r(3721));e.exports=p},6144:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,n,u,p=(n=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(u){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=p.call(this,e)).onMessage=t.onMessage.bind(s(t)),t.connecting=!1,t.connected=!1,t.buffer=[],t}return t=l,(r=[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){return this.connected}},{key:"setParentElement",value:function(){}},{key:"connect",value:function(){var e,t=this;this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),window.addEventListener("message",this.onMessage,!1),this.once("capabilities",(function(){e&&clearTimeout(e),t.connecting=!1,t.connected=!0,t.emit("status",{online:!0,label:"connected"}),t.emit("connected"),t.flush()})),this.postMessage("runtime","getruntime",{}),e=setTimeout((function(){t.postMessage("runtime","getruntime",{})}),500)}},{key:"updateIframe",value:function(){}},{key:"disconnect",value:function(){this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"send",value:function(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}},{key:"postMessage",value:function(e,t,r){window.opener&&window.opener.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}},{key:"onMessage",value:function(e){var t;e.source&&e.source!==window.opener||(t="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(t))}},{key:"flush",value:function(){var e=this;this.buffer.forEach((function(t){e.postMessage(t.protocol,t.command,t.payload)})),this.buffer=[]}}])&&o(t.prototype,r),l}(r(3721));e.exports=u},4148:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=r(5419)("fbp-protocol-client:webrtc"),l=r(8833),d=r(8076).v4,h=r(3721),f=r(1526).isBrowser,m=r(7352),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(v,e);var t,n,h,y,g=(h=v,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(h);if(y){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=g.call(this,e)).id=d(),t.handleMessage=t.handleMessage.bind(c(t)),t.signaller=null,t.connecting=!1,t.protocol="webrtc",t.buffer=[],t.peers={},t}return t=v,(n=[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){var e=this;return!!Object.keys(this.peers).filter((function(t){return e.peers[t].connected})).length}},{key:"maybeDisconnected",value:function(){this.signaller&&!this.signaller.isConnected()&&(this.signaller=null,this.connecting=!1),this.isConnected()||(this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected"))}},{key:"connect",value:function(){var e,t,n,i,a=this;if(!(this.isConnected()||this.connecting||this.signaller&&this.signaller.isConnected())){var s=this.getAddress();if(-1!==s.indexOf("#")){var c=(n=s.split("#"),i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(n,i)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());t=c[0],e=c[1],"webrtc://"===t&&(t=null)}else e=s;t||(t="wss://api.flowhub.io/"),this.signaller=new m(this.id,"client",t);var u={channelName:e,initiator:!0};f()||(u.wrtc=r(8864)),this.signaller.connect(),this.signaller.once("connected",(function(){a.signaller.join(e)})),this.signaller.on("join",(function(e){a.peers[e.id]||(a.signaller.joinReply(e.id,a.id),a.connectPeer(e,u))})),this.signaller.on("signal",(function(e,t){var r=a.peers[t.id];r||r.destroyed?(p("".concat(a.id," received signalling data for peer ").concat(t.id)),r.signal(e)):p("".concat(a.id," received signalling data for unknown/destroyed peer ").concat(t.id))})),this.signaller.on("error",(function(e){p("".concat(a.id," signaller errored"),e),a.connecting=!1,a.signaller=null,a.maybeDisconnected(),a.emit("error",e)})),this.signaller.on("disconnected",(function(){a.signaller=null,a.connecting=!1,a.maybeDisconnected()})),this.connecting=!0}}},{key:"connectPeer",value:function(e,t){var r=this;p("".concat(this.id," connecting to peer ").concat(e.id));var n=new l(t);this.peers[e.id]=n,n.on("signal",(function(t){p("".concat(r.id," sending signalling data to peer ").concat(e.id)),r.signaller.signal(e.id,t)})),n.on("connect",(function(){p("".concat(r.id," connected to peer ").concat(e.id)),r.connecting=!1,r.emit("status",{online:!0,label:"connected"}),r.emit("connected"),r.sendRuntime("getruntime",{}),r.flush()})),n.on("data",this.handleMessage),n.on("close",(function(){p("".concat(r.id," disconnected from peer ").concat(e.id)),delete r.peers[e.id],r.maybeDisconnected()})),n.on("error",(function(t){p("".concat(r.id," peer ").concat(e.id," errored"),t),delete r.peers[e.id],r.maybeDisconnected(),r.emit("error",t)}))}},{key:"disconnect",value:function(){var e=this;this.connecting=!1,Object.keys(this.peers).forEach((function(t){e.peers[t].destroy(),delete e.peers[t]})),this.signaller&&(this.signaller.disconnect(),this.signaller=null)}},{key:"send",value:function(e,t,r){var n=this,o={protocol:e,command:t,payload:r};this.isConnected()?Object.keys(this.peers).forEach((function(e){var t=n.peers[e];t.connected&&t.send(JSON.stringify(o))})):this.buffer.push(o)}},{key:"handleMessage",value:function(e){var t=JSON.parse(e);return this.recvMessage(t)}},{key:"flush",value:function(){var e=this;this.buffer.forEach((function(t){e.send(t.protocol,t.command,t.payload)})),this.buffer=[]}}])&&i(t.prototype,n),v}(h);e.exports=y},2675:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(3721),p=r(1526),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,r,n,u,l=(n=d,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(u){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).handleError=t.handleError.bind(s(t)),t.handleMessage=t.handleMessage.bind(s(t)),t.connecting=!1,t.connection=null,t.protocol="noflo",t.buffer=[],t.container=null,t}return t=d,(r=[{key:"getElement",value:function(){if(this.container)return this.container;this.container=document.createElement("div"),this.container.classList.add("preview-container");var e=document.createElement("pre"),t=document.createElement("img");return this.container.appendChild(t),this.container.appendChild(e),this.on("network",(function(r){if("output"===r.command){var n=r.payload;if(null!=n.type&&"previewurl"===n.type){var o=n.url.indexOf(!0)?"&":"?";t.src="".concat(n.url+o,"timestamp=").concat((new Date).getTime())}if(null!=n.message){var i=n.message.replace(/[\u00A0-\u99999<>&]/gim,(function(e){return"&#".concat(e.charCodeAt(0),";")}));e.innerHTML+="".concat(i,"\n"),e.scrollTop=e.scrollHeight}}})),this.on("disconnected",(function(){e.innerHTML=""})),this.container}},{key:"isConnected",value:function(){return this.connection&&!1===this.connecting}},{key:"connect",value:function(){var e=this;this.connection||this.connecting||(this.protocol?this.connection=new p.WebSocket(this.getAddress(),this.protocol):this.connection=new p.WebSocket(this.getAddress()),this.connection.addEventListener("open",(function(){return e.connecting=!1,e.sendRuntime("getruntime",{}),e.emit("status",{online:!0,label:"connected"}),e.emit("connected"),e.flush()}),!1),this.connection.addEventListener("message",this.handleMessage,!1),this.connection.addEventListener("error",this.handleError,!1),this.connection.addEventListener("close",(function(){e.connection=null,e.emit("status",{online:!1,label:"disconnected"}),e.emit("disconnected")}),!1),this.connecting=!0)}},{key:"disconnect",value:function(){this.connection&&(this.connecting=!1,this.connection.close())}},{key:"send",value:function(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.connection&&this.connection.send(JSON.stringify({protocol:e,command:t,payload:r}))}},{key:"handleError",value:function(e){var t=this;if("noflo"===this.protocol)return delete this.protocol,this.connecting=!1,this.connection=null,void setTimeout((function(){t.connect()}),1);this.connection=null,this.connecting=!1;var r=new Error("Connection failed");r.event=e,this.emit("error",r)}},{key:"handleMessage",value:function(e){var t=JSON.parse(e.data);return this.recvMessage(t)}},{key:"flush",value:function(){var e=this;this.buffer.forEach((function(t){e.send(t.protocol,t.command,t.payload)})),this.buffer=[]}}])&&o(t.prototype,r),d}(u);e.exports=l},2406:e=>{e.exports={component:{title:"Component protocol",description:"Protocol for handling the component registry.",output:{error:{id:"output/error",description:"Error response to a command on component protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},component:{id:"output/component",description:"Transmit the metadata about a component instance.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["component"]},payload:{required:["name","subgraph","inPorts","outPorts"],additionalProperties:!1,properties:{name:{type:"string",description:"component name in format that can be used in graphs. Should contain the component library prefix.",example:"my-project/MyComponent"},description:{type:"string",description:"textual description on what the component does"},icon:{type:"string",description:'Visual icon for the component, matching icon names in <a href="http://fortawesome.github.io/Font-Awesome/icons/">Font Awesome</a>'},subgraph:{type:"boolean",description:"boolean telling whether the component is a subgraph"},inPorts:{description:"list of input ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}}}}}}]},componentsready:{id:"output/componentsready",description:"Indication that a component listing has finished",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{enum:["component"],type:"string",description:"type of protocol"},command:{enum:["componentsready"],description:"command to be executed",example:"addnode"},payload:{type:"integer",description:"number of components transmitted in this batch",example:42},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},source:{id:"output/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix",example:"MyComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"components-common"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"unit tests for the component"}}}}}]}},input:{list:{id:"input/list",description:"Request a list of currently available components. Will be responded with a set of `component` messages.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["list"]},payload:{required:[]}}}]},getsource:{id:"input/getsource",description:"Request for the source code of a given component. Will be responded with a `source` message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["getsource"]},payload:{required:["name"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component to for which to get source code. Should contain the library prefix",example:"my-project/SomeComponent"}}}}}]},source:{id:"input/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix.",example:"SomeComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"my-project"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"Unit tests for the component"}}}}}]}}},graph:{$schema:"http://json-schema.org/draft-04/schema#",title:"Graph protocol",description:"This protocol is utilized for communicating about graph changes in both directions.",messages:{error:{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}},clear:{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}},addnode:{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removenode:{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamenode:{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changenode:{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addedge:{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinport:{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameinport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addgroup:{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{error:{id:"output/error",description:"Error response to a command on graph protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},clear:{id:"output/clear",description:"An empty graph was initialized",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"output/addnode",description:"A node was added to a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"output/removenode",description:"A node was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"output/renamenode",description:"A node was renamed in a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"output/changenode",description:"Metadata of a node was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"output/addedge",description:"An edge was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"output/removeedge",description:"An edge was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"output/changeedge",description:"Metadata of an edge was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"output/addinitial",description:"An IIP was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"output/removeinitial",description:"An IIP was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"output/addinport",description:"An exported inport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"output/removeinport",description:"An exported inport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"output/renameinport",description:"An exported inport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"output/addoutport",description:"An exported outport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"output/removeoutport",description:"An exported outport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"output/renameoutport",description:"An exported outport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"output/addgroup",description:"A group was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"output/removegroup",description:"A group was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"output/renamegroup",description:"A group was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"output/changegroup",description:"Metadata of a group was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{clear:{id:"input/clear",description:"Initialize an empty graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"input/addnode",description:"Add node to a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"input/removenode",description:"Remove a node from a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"input/renamenode",description:"Change the ID of a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"input/changenode",description:"Change the metadata associated to a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"input/addedge",description:"Add an edge to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"input/removeedge",description:"Remove an edge from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"input/changeedge",description:"Change an edge's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"input/addinitial",description:"Add an IIP to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"input/removeinitial",description:"Remove an IIP from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"input/addinport",description:"Add an exported inport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"input/removeinport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"input/renameinport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"input/addoutport",description:"Add an exported outport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"input/removeoutport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"input/renameoutport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"input/addgroup",description:"Add a group to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"input/removegroup",description:"Remove a group from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"input/renamegroup",description:"Rename a group in the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"input/changegroup",description:"Change a group's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},network:{$schema:"http://json-schema.org/draft-04/schema#",title:"Network protocol",description:"Protocol for starting and stopping FBP networks, and finding out about their state.",output:{stopped:{id:"output/stopped",description:"Inform that a given network has stopped.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stopped"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was stopped"},uptime:{type:"number",description:"time the network was running, in seconds"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},running:{type:"boolean",description:"whether or not network is currently running"},started:{type:"boolean",description:"whether or not network has been started"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},started:{id:"output/started",description:"Inform that a given network has been started.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["started"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was started"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"whether or not network is currently running"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},status:{id:"output/status",description:"Response to a getstatus message.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["status"]},payload:{required:["running","graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},uptime:{type:"number",description:"time the network has been running, in seconds"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"boolean tells whether the network is running or not"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},output:{id:"output/output",description:"An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["output"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{type:"string",description:"contents of the output line"},type:{type:"string",enum:["message","previewurl"],description:"type of output, either message or previewurl"},url:{type:"string",format:"uri",description:"URL for an image generated by the runtime"}}}}}]},error:{id:"output/error",description:"An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["error"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{description:"contents of the error message",type:"string"},stack:{description:"stack trace",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},processerror:{id:"output/processerror",description:"When in debug mode, a network can signal an error happening inside a process.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["processerror"]},payload:{required:["id","error","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},error:{type:"string",description:"error from the component"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},icon:{id:"output/icon",description:"Icon of a component instance has changed.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["icon"]},payload:{required:["id","icon","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},icon:{type:"string",description:"new icon for the component instance"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},connect:{id:"output/connect",description:"Beginning of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["connect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},begingroup:{id:"output/begingroup",description:"Beginning of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["begingroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,tgt:!0,src:!0,graph:!0,subgraph:!0}}]}}}]},data:{id:"output/data",description:"Data transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["data"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["data"],properties:{data:{description:"actual data being transmitted, encoded in a way that can be carried over the protocol transport"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"}}},{additionalProperties:!1,properties:{data:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},endgroup:{id:"output/endgroup",description:"Ending of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["endgroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},disconnect:{id:"output/disconnect",description:"End of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["disconnect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},edges:{id:"output/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from runtime to UI.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{start:{id:"input/start",description:"Start execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},getstatus:{id:"input/getstatus",description:"Get the current status of the runtime. The runtime should respond with a status message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["getstatus"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},stop:{id:"input/stop",description:"Stop execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},persist:{id:"input/persist",description:"Tells the runtime to persist the current state of graphs and components so that they are available between restarts. Requires the network:persist capability.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["persist"]},payload:{required:[],additionalProperties:!1,properties:null}}}]},debug:{id:"input/debug",description:"Set a network into debug mode",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["debug"]},payload:{additionalProperties:!1,required:["enable","graph"],properties:{enable:{description:"tells whether to put the network in debug mode",type:"boolean"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},edges:{id:"input/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},runtime:{title:"Runtime protocol",description:"When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",input:{getruntime:{id:"input/getruntime",description:"Request the information about the runtime. When receiving this message the runtime should response with a runtime message. If the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["getruntime"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize the client. Provided also in payload for compatibility with older runtimes"}}}}}]},packet:{id:"input/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},output:{error:{id:"output/error",description:"Error response to a command on runtime protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},ports:{id:"output/ports",description:"Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["ports"]},payload:{required:["graph","inPorts","outPorts"],additionalProperties:!1,properties:{inPorts:{description:"list of input ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},runtime:{id:"output/runtime",description:"Response from the runtime to the getruntime request.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["runtime"]},payload:{required:["version","capabilities","type"],additionalProperties:!1,properties:{id:{type:"string",description:"unique runtime ID. Must be a UUID, version 4",example:"f18a4924-9d4f-414d-a37c-cd24b39bba10"},label:{description:"Human-readable description of the runtime",type:"string"},version:{description:"version of the runtime protocol that the runtime supports",type:"string",example:"0.6"},allCapabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do. May include things not permitted for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},capabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},graph:{description:"ID of the currently configured main graph running on the runtime, if any",type:"string",example:"service-main",id:"graph_id"},type:{description:"type of the runtime",type:"string",example:"microflo"},namespace:{description:"Library namespace of the project running on the runtime, if any. Must match that of components belonging to the (top-level) of project.",type:"string",example:"my-project-foo"},repository:{description:"Source-code repository URL of the project running on the runtime, if any",type:"string",example:"https://github.com/flowbased/fbp-protocol.git"},repositoryVersion:{description:"Unique version identifier of the source code of the project, if known. The version should be available in @repository.",type:"string",example:"0.6.3-8-g90edcfc"}}}}}]},packetsent:{id:"output/packetsent",description:"Confirmation that a packet has been sent",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packetsent"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{description:"port name for the input port",id:"port_id",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},packet:{id:"output/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},shared:{$schema:"http://json-schema.org/draft-04/schema#",title:"Shared",description:"Shared schema fragments",graph_id:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},node_id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port_id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},input_message:{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},output_message:{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},metadata_node:{id:"metadata_node",description:"structure of key-value pairs for graph node metadata",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},metadata_edge:{id:"metadata_edge",description:"structure of key-value pairs for graph edge metadata",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},metadata_group:{id:"metadata_group",description:"structure of key-value pairs for graph group metadata",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},port:{id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},port_definition:{id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},iip:{id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},network_event:{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},capabilities:{id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}}},trace:{$schema:"http://json-schema.org/draft-04/schema#",title:"Trace protocol",description:"This protocol is utilized for triggering and transmitting [Flowtrace](https://github.com/flowbased/flowtrace)s",messages:{start:{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}},stop:{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},clear:{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{start:{id:"output/start",description:"Tracing was started",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{id:"output/stop",description:"Tracing was stopped",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},clear:{id:"output/clear",description:"Tracing buffer was cleared",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"output/dump",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type","flowtrace"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"String describing type of trace.",type:"string",enum:["flowtrace.json"]},flowtrace:{description:"A Flowtrace file of `type`",type:"string"}}}}}]},error:{id:"output/error",description:"Error response to a command on trace protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]}},input:{start:{id:"input/start",description:"Enable/start tracing of a network.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{description:"Stop/disable tracing of a network.",id:"input/stop",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"input/dump",description:"Trigger dumping of the current tracing buffer, to return it back to server.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"Type/format of trace to output",type:"string",enum:["flowtrace.json"]}}}}}]},clear:{id:"input/clear",description:"Clear current tracing buffer.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}}}},1807:(e,t,r)=>{e.exports=function(){"use strict";function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var n,o,i=arguments.length>1?arguments[1]:{},a=this,s={},c={start:pr},u=pr,p=function(){return a.getResult()},l="INPORT=",d={type:"literal",value:"INPORT=",description:'"INPORT="'},h=".",f={type:"literal",value:".",description:'"."'},m=":",y={type:"literal",value:":",description:'":"'},g=function(e,t,r){return a.registerInports(e,t,r)},v="OUTPORT=",b={type:"literal",value:"OUTPORT=",description:'"OUTPORT="'},w=function(e,t,r){return a.registerOutports(e,t,r)},x="DEFAULT_INPORT=",E={type:"literal",value:"DEFAULT_INPORT=",description:'"DEFAULT_INPORT="'},_=function(e){vn=e},S="DEFAULT_OUTPORT=",k={type:"literal",value:"DEFAULT_OUTPORT=",description:'"DEFAULT_OUTPORT="'},C=function(e){bn=e},A=function(e){return a.registerAnnotation(e[0],e[1])},P=function(e){return a.registerEdges(e)},D=",",O={type:"literal",value:",",description:'","'},T=/^[\n\r\u2028\u2029]/,F={type:"class",value:"[\\n\\r\\u2028\\u2029]",description:"[\\n\\r\\u2028\\u2029]"},j="#",I={type:"literal",value:"#",description:'"#"'},R="->",N={type:"literal",value:"->",description:'"->"'},M=function(e,t){return[e,t]},L=function(e,t,r){return[{tgt:kn(t,e)},{src:Cn(t,r)}]},B=function(e,t){return{src:Cn(e,t)}},q=function(e,t){return{tgt:kn(t,e)}},U="'",z={type:"literal",value:"'",description:'"\'"'},$=function(e){return{data:e.join("")}},G=function(e){return{data:e}},J=function(e){return e},H=/^[a-zA-Z_]/,V={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},X=/^[a-zA-Z0-9_\-]/,K={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},W=function(e){return _n(e)},Y=function(e,t){return a.addNode(e,t),e},Q=function(e){return a.addAnonymousNode(e,ir().start.offset)},Z="(",ee={type:"literal",value:"(",description:'"("'},te=/^[a-zA-Z\/\-0-9_]/,re={type:"class",value:"[a-zA-Z/\\-0-9_]",description:"[a-zA-Z/\\-0-9_]"},ne=")",oe={type:"literal",value:")",description:'")"'},ie=function(e,t){var r={};return r.comp=e?e.join(""):"",t&&(r.meta=t.join("").split(",")),r},ae=/^[a-zA-Z\/=_,0-9]/,se={type:"class",value:"[a-zA-Z/=_,0-9]",description:"[a-zA-Z/=_,0-9]"},ce=function(e){return e},ue="@",pe={type:"literal",value:"@",description:'"@"'},le=/^[a-zA-Z0-9\-_]/,de={type:"class",value:"[a-zA-Z0-9\\-_]",description:"[a-zA-Z0-9\\-_]"},he=/^[a-zA-Z0-9\-_ .]/,fe={type:"class",value:"[a-zA-Z0-9\\-_ \\.]",description:"[a-zA-Z0-9\\-_ \\.]"},me=function(e,t){return[e.join(""),t.join("")]},ye=function(e,t){return{port:i.caseSensitive?e:e.toLowerCase(),index:null!=t?t:void 0}},ge=function(e){return e},ve=/^[a-zA-Z.0-9_]/,be={type:"class",value:"[a-zA-Z.0-9_]",description:"[a-zA-Z.0-9_]"},we=function(e){return _n(e)},xe="[",Ee={type:"literal",value:"[",description:'"["'},_e=/^[0-9]/,Se={type:"class",value:"[0-9]",description:"[0-9]"},ke="]",Ce={type:"literal",value:"]",description:'"]"'},Ae=function(e){return parseInt(e.join(""))},Pe=/^[^\n\r\u2028\u2029]/,De={type:"class",value:"[^\\n\\r\\u2028\\u2029]",description:"[^\\n\\r\\u2028\\u2029]"},Oe=/^[\\]/,Te={type:"class",value:"[\\\\]",description:"[\\\\]"},Fe=/^[']/,je={type:"class",value:"[']",description:"[']"},Ie=function(){return"'"},Re=/^[^']/,Ne={type:"class",value:"[^']",description:"[^']"},Me=" ",Le={type:"literal",value:" ",description:'" "'},Be=function(e){return e},qe="{",Ue={type:"literal",value:"{",description:'"{"'},ze="}",$e={type:"literal",value:"}",description:'"}"'},Ge={type:"other",description:"whitespace"},Je=/^[ \t\n\r]/,He={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Ve="false",Xe={type:"literal",value:"false",description:'"false"'},Ke=function(){return!1},We="null",Ye={type:"literal",value:"null",description:'"null"'},Qe=function(){return null},Ze="true",et={type:"literal",value:"true",description:'"true"'},tt=function(){return!0},rt=function(e,t){return t},nt=function(e,t){var r,n={};for(n[e.name]=e.value,r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n},ot=function(e){return null!==e?e:{}},it=function(e,t){return{name:e,value:t}},at=function(e,t){return t},st=function(e,t){return[e].concat(t)},ct=function(e){return null!==e?e:[]},ut={type:"other",description:"number"},pt=function(){return parseFloat(or())},lt=/^[1-9]/,dt={type:"class",value:"[1-9]",description:"[1-9]"},ht=/^[eE]/,ft={type:"class",value:"[eE]",description:"[eE]"},mt="-",yt={type:"literal",value:"-",description:'"-"'},gt="+",vt={type:"literal",value:"+",description:'"+"'},bt="0",wt={type:"literal",value:"0",description:'"0"'},xt={type:"other",description:"string"},Et=function(e){return e.join("")},_t='"',St={type:"literal",value:'"',description:'"\\""'},kt="\\",Ct={type:"literal",value:"\\",description:'"\\\\"'},At="/",Pt={type:"literal",value:"/",description:'"/"'},Dt="b",Ot={type:"literal",value:"b",description:'"b"'},Tt=function(){return"\b"},Ft="f",jt={type:"literal",value:"f",description:'"f"'},It=function(){return"\f"},Rt="n",Nt={type:"literal",value:"n",description:'"n"'},Mt=function(){return"\n"},Lt="r",Bt={type:"literal",value:"r",description:'"r"'},qt=function(){return"\r"},Ut="t",zt={type:"literal",value:"t",description:'"t"'},$t=function(){return"\t"},Gt="u",Jt={type:"literal",value:"u",description:'"u"'},Ht=function(e){return String.fromCharCode(parseInt(e,16))},Vt=function(e){return e},Xt=/^[^\0-\x1F"\\]/,Kt={type:"class",value:"[^\\0-\\x1F\\x22\\x5C]",description:"[^\\0-\\x1F\\x22\\x5C]"},Wt=/^[0-9a-f]/i,Yt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Qt=0,Zt=0,er=[{line:1,column:1,seenCR:!1}],tr=0,rr=[],nr=0;if("startRule"in i){if(!(i.startRule in c))throw new Error("Can't start parsing from rule \""+i.startRule+'".');u=c[i.startRule]}function or(){return t.substring(Zt,Qt)}function ir(){return sr(Zt,Qt)}function ar(e){var r,n,o=er[e];if(o)return o;for(r=e-1;!er[r];)r--;for(o={line:(o=er[r]).line,column:o.column,seenCR:o.seenCR};r<e;)"\n"===(n=t.charAt(r))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return er[e]=o,o}function sr(e,t){var r=ar(e),n=ar(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function cr(e){Qt<tr||(Qt>tr&&(tr=Qt,rr=[]),rr.push(e))}function ur(t,r,n,o){return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==t?t:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,n),r,n,o)}function pr(){var e,t,r;for(e=Qt,t=[],r=lr();r!==s;)t.push(r),r=lr();return t!==s&&(Zt=e,t=p()),t}function lr(){var e,r,n,o,i,a,c,u,p;return e=Qt,(r=Mr())!==s?(t.substr(Qt,7)===l?(n=l,Qt+=7):(n=s,0===nr&&cr(d)),n!==s&&(o=Er())!==s?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=s,0===nr&&cr(f)),i!==s&&(a=jr())!==s?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=s,0===nr&&cr(y)),c!==s&&(u=jr())!==s&&Mr()!==s?((p=dr())===s&&(p=null),p!==s?(Zt=e,e=r=g(o,a,u)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=Mr())!==s?(t.substr(Qt,8)===v?(n=v,Qt+=8):(n=s,0===nr&&cr(b)),n!==s&&(o=Er())!==s?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=s,0===nr&&cr(f)),i!==s&&(a=jr())!==s?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=s,0===nr&&cr(y)),c!==s&&(u=jr())!==s&&Mr()!==s?((p=dr())===s&&(p=null),p!==s?(Zt=e,e=r=w(o,a,u)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=Mr())!==s?(t.substr(Qt,15)===x?(n=x,Qt+=15):(n=s,0===nr&&cr(E)),n!==s&&(o=jr())!==s&&(i=Mr())!==s?((a=dr())===s&&(a=null),a!==s?(Zt=e,e=r=_(o)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=Mr())!==s?(t.substr(Qt,16)===S?(n=S,Qt+=16):(n=s,0===nr&&cr(k)),n!==s&&(o=jr())!==s&&(i=Mr())!==s?((a=dr())===s&&(a=null),a!==s?(Zt=e,e=r=C(o)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=Dr())!==s&&(n=hr())!==s?(Zt=e,e=r=A(r)):(Qt=e,e=s),e===s&&(e=Qt,(r=fr())!==s?((n=hr())===s&&(n=null),n!==s?e=r=[r,n]:(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=Mr())!==s&&(n=hr())!==s?e=r=[r,n]:(Qt=e,e=s),e===s&&(e=Qt,(r=Mr())!==s&&(n=mr())!==s&&(o=Mr())!==s?((i=dr())===s&&(i=null),i!==s?(Zt=e,e=r=P(n)):(Qt=e,e=s)):(Qt=e,e=s)))))))),e}function dr(){var e,r,n,o,i;return e=Qt,(r=Mr())!==s?(44===t.charCodeAt(Qt)?(n=D,Qt++):(n=s,0===nr&&cr(O)),n===s&&(n=null),n!==s?((o=fr())===s&&(o=null),o!==s?((i=hr())===s&&(i=null),i!==s?e=r=[r,n,o,i]:(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e}function hr(){var e;return T.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(F)),e}function fr(){var e,r,n,o,i;if(e=Qt,(r=Mr())!==s)if(35===t.charCodeAt(Qt)?(n=j,Qt++):(n=s,0===nr&&cr(I)),n!==s){for(o=[],i=Rr();i!==s;)o.push(i),i=Rr();o!==s?e=r=[r,n,o]:(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s;return e}function mr(){var e,r,n,o;return e=Qt,(r=yr())!==s&&Mr()!==s?(t.substr(Qt,2)===R?(n=R,Qt+=2):(n=s,0===nr&&cr(N)),n!==s&&Mr()!==s&&(o=mr())!==s?(Zt=e,e=r=M(r,o)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=gr()),e}function yr(){var e;return(e=vr())===s&&(e=br())===s&&(e=xr()),e}function gr(){var e;return(e=wr())===s&&(e=vr()),e}function vr(){var e,t,r,n;return e=Qt,(t=Tr())!==s&&(r=Er())!==s&&(n=Fr())!==s?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=s),e===s&&(e=Qt,(t=Tr())===s&&(t=null),t!==s&&(r=Cr())!==s?((n=Fr())===s&&(n=null),n!==s?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=s)):(Qt=e,e=s)),e}function br(){var e,t,r;return e=Qt,(t=Er())!==s?((r=Fr())===s&&(r=null),r!==s?(Zt=e,e=t=B(t,r)):(Qt=e,e=s)):(Qt=e,e=s),e}function wr(){var e,t,r;return e=Qt,(t=Tr())===s&&(t=null),t!==s&&(r=Er())!==s?(Zt=e,e=t=q(t,r)):(Qt=e,e=s),e}function xr(){var e,r,n,o;if(e=Qt,39===t.charCodeAt(Qt)?(r=U,Qt++):(r=s,0===nr&&cr(z)),r!==s){for(n=[],o=Nr();o!==s;)n.push(o),o=Nr();n!==s?(39===t.charCodeAt(Qt)?(o=U,Qt++):(o=s,0===nr&&cr(z)),o!==s?(Zt=e,e=r=$(n)):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e===s&&(e=Qt,(r=Br())!==s&&(Zt=e,r=G(r)),e=r),e}function Er(){var e,t;return e=Qt,(t=Sr())!==s&&(Zt=e,t=J(t)),(e=t)===s&&(e=Qt,(t=_r())!==s&&(Zt=e,t=J(t)),(e=t)===s&&(e=Qt,(t=kr())!==s&&(Zt=e,t=J(t)),e=t)),e}function _r(){var e,r,n,o,i;if(e=Qt,r=Qt,H.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&cr(V)),n!==s){for(o=[],X.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(K));i!==s;)o.push(i),X.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(K));o!==s?r=n=[n,o]:(Qt=r,r=s)}else Qt=r,r=s;return r!==s&&(Zt=e,r=W(r)),r}function Sr(){var e,t,r;return e=Qt,(t=_r())!==s&&(r=Ar())!==s?(Zt=e,e=t=Y(t,r)):(Qt=e,e=s),e}function kr(){var e,t;return e=Qt,(t=Ar())!==s&&(Zt=e,t=Q(t)),t}function Cr(){var e;return(e=Sr())===s&&(e=kr()),e}function Ar(){var e,r,n,o,i;if(e=Qt,40===t.charCodeAt(Qt)?(r=Z,Qt++):(r=s,0===nr&&cr(ee)),r!==s){for(n=[],te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(re));o!==s;)n.push(o),te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(re));n===s&&(n=null),n!==s?((o=Pr())===s&&(o=null),o!==s?(41===t.charCodeAt(Qt)?(i=ne,Qt++):(i=s,0===nr&&cr(oe)),i!==s?(Zt=e,e=r=ie(n,o)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e}function Pr(){var e,r,n,o;if(e=Qt,58===t.charCodeAt(Qt)?(r=m,Qt++):(r=s,0===nr&&cr(y)),r!==s){if(n=[],ae.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(se)),o!==s)for(;o!==s;)n.push(o),ae.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(se));else n=s;n!==s?(Zt=e,e=r=ce(n)):(Qt=e,e=s)}else Qt=e,e=s;return e}function Dr(){var e,r,n,o,i,a,c;if(e=Qt,35===t.charCodeAt(Qt)?(r=j,Qt++):(r=s,0===nr&&cr(I)),r!==s)if(Lr()!==s)if(64===t.charCodeAt(Qt)?(n=ue,Qt++):(n=s,0===nr&&cr(pe)),n!==s){if(o=[],le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(de)),i!==s)for(;i!==s;)o.push(i),le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(de));else o=s;if(o!==s)if((i=Lr())!==s){if(a=[],he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=s,0===nr&&cr(fe)),c!==s)for(;c!==s;)a.push(c),he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=s,0===nr&&cr(fe));else a=s;a!==s?(Zt=e,e=r=me(o,a)):(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s}else Qt=e,e=s;else Qt=e,e=s;else Qt=e,e=s;return e}function Or(){var e,t,r;return e=Qt,(t=jr())!==s?((r=Ir())===s&&(r=null),r!==s?(Zt=e,e=t=ye(t,r)):(Qt=e,e=s)):(Qt=e,e=s),e}function Tr(){var e,t;return e=Qt,(t=Or())!==s&&Lr()!==s?(Zt=e,e=t=ge(t)):(Qt=e,e=s),e}function Fr(){var e,t;return e=Qt,Lr()!==s&&(t=Or())!==s?(Zt=e,e=ge(t)):(Qt=e,e=s),e}function jr(){var e,r,n,o,i;if(e=Qt,r=Qt,H.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&cr(V)),n!==s){for(o=[],ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(be));i!==s;)o.push(i),ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&cr(be));o!==s?r=n=[n,o]:(Qt=r,r=s)}else Qt=r,r=s;return r!==s&&(Zt=e,r=we(r)),r}function Ir(){var e,r,n,o;if(e=Qt,91===t.charCodeAt(Qt)?(r=xe,Qt++):(r=s,0===nr&&cr(Ee)),r!==s){if(n=[],_e.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(Se)),o!==s)for(;o!==s;)n.push(o),_e.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&cr(Se));else n=s;n!==s?(93===t.charCodeAt(Qt)?(o=ke,Qt++):(o=s,0===nr&&cr(Ce)),o!==s?(Zt=e,e=r=Ae(n)):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e}function Rr(){var e;return Pe.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(De)),e}function Nr(){var e,r,n;return e=Qt,Oe.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&cr(Te)),r!==s?(Fe.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&cr(je)),n!==s?(Zt=e,e=r=Ie()):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(Re.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(Ne))),e}function Mr(){var e,r;for(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&cr(Le));r!==s;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&cr(Le));return e===s&&(e=null),e}function Lr(){var e,r;if(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&cr(Le)),r!==s)for(;r!==s;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&cr(Le));else e=s;return e}function Br(){var e,t;return e=Qt,Hr()!==s&&(t=Vr())!==s&&Hr()!==s?(Zt=e,e=Be(t)):(Qt=e,e=s),e}function qr(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(91===t.charCodeAt(Qt)?(n=xe,Qt++):(n=s,0===nr&&cr(Ee)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function Ur(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(123===t.charCodeAt(Qt)?(n=qe,Qt++):(n=s,0===nr&&cr(Ue)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function zr(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(93===t.charCodeAt(Qt)?(n=ke,Qt++):(n=s,0===nr&&cr(Ce)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function $r(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(125===t.charCodeAt(Qt)?(n=ze,Qt++):(n=s,0===nr&&cr($e)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function Gr(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(58===t.charCodeAt(Qt)?(n=m,Qt++):(n=s,0===nr&&cr(y)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function Jr(){var e,r,n,o;return e=Qt,(r=Hr())!==s?(44===t.charCodeAt(Qt)?(n=D,Qt++):(n=s,0===nr&&cr(O)),n!==s&&(o=Hr())!==s?e=r=[r,n,o]:(Qt=e,e=s)):(Qt=e,e=s),e}function Hr(){var e,r;for(nr++,e=[],Je.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&cr(He));r!==s;)e.push(r),Je.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&cr(He));return nr--,e===s&&(r=s,0===nr&&cr(Ge)),e}function Vr(){var e;return(e=Xr())===s&&(e=Kr())===s&&(e=Wr())===s&&(e=Yr())===s&&(e=Zr())===s&&(e=en())===s&&(e=ln()),e}function Xr(){var e,r;return e=Qt,t.substr(Qt,5)===Ve?(r=Ve,Qt+=5):(r=s,0===nr&&cr(Xe)),r!==s&&(Zt=e,r=Ke()),r}function Kr(){var e,r;return e=Qt,t.substr(Qt,4)===We?(r=We,Qt+=4):(r=s,0===nr&&cr(Ye)),r!==s&&(Zt=e,r=Qe()),r}function Wr(){var e,r;return e=Qt,t.substr(Qt,4)===Ze?(r=Ze,Qt+=4):(r=s,0===nr&&cr(et)),r!==s&&(Zt=e,r=tt()),r}function Yr(){var e,t,r,n,o,i;if(e=Qt,Ur()!==s){if(t=Qt,(r=Qr())!==s){for(n=[],o=Qt,Jr()!==s&&(i=Qr())!==s?(Zt=o,o=rt(r,i)):(Qt=o,o=s);o!==s;)n.push(o),o=Qt,Jr()!==s&&(i=Qr())!==s?(Zt=o,o=rt(r,i)):(Qt=o,o=s);n!==s?(Zt=t,t=r=nt(r,n)):(Qt=t,t=s)}else Qt=t,t=s;t===s&&(t=null),t!==s&&(r=$r())!==s?(Zt=e,e=ot(t)):(Qt=e,e=s)}else Qt=e,e=s;return e}function Qr(){var e,t,r;return e=Qt,(t=ln())!==s&&Gr()!==s&&(r=Vr())!==s?(Zt=e,e=t=it(t,r)):(Qt=e,e=s),e}function Zr(){var e,t,r,n,o,i;if(e=Qt,qr()!==s){if(t=Qt,(r=Vr())!==s){for(n=[],o=Qt,Jr()!==s&&(i=Vr())!==s?(Zt=o,o=at(r,i)):(Qt=o,o=s);o!==s;)n.push(o),o=Qt,Jr()!==s&&(i=Vr())!==s?(Zt=o,o=at(r,i)):(Qt=o,o=s);n!==s?(Zt=t,t=r=st(r,n)):(Qt=t,t=s)}else Qt=t,t=s;t===s&&(t=null),t!==s&&(r=zr())!==s?(Zt=e,e=ct(t)):(Qt=e,e=s)}else Qt=e,e=s;return e}function en(){var e,t,r,n;return nr++,e=Qt,(t=cn())===s&&(t=null),t!==s&&sn()!==s?((r=an())===s&&(r=null),r!==s?((n=on())===s&&(n=null),n!==s?(Zt=e,e=t=pt()):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),nr--,e===s&&(t=s,0===nr&&cr(ut)),e}function tn(){var e;return 46===t.charCodeAt(Qt)?(e=h,Qt++):(e=s,0===nr&&cr(f)),e}function rn(){var e;return lt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(dt)),e}function nn(){var e;return ht.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(ft)),e}function on(){var e,t,r,n,o;if(e=Qt,(t=nn())!==s)if((r=cn())===s&&(r=un()),r===s&&(r=null),r!==s){if(n=[],(o=yn())!==s)for(;o!==s;)n.push(o),o=yn();else n=s;n!==s?e=t=[t,r,n]:(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s;return e}function an(){var e,t,r,n;if(e=Qt,(t=tn())!==s){if(r=[],(n=yn())!==s)for(;n!==s;)r.push(n),n=yn();else r=s;r!==s?e=t=[t,r]:(Qt=e,e=s)}else Qt=e,e=s;return e}function sn(){var e,t,r,n;if((e=pn())===s)if(e=Qt,(t=rn())!==s){for(r=[],n=yn();n!==s;)r.push(n),n=yn();r!==s?e=t=[t,r]:(Qt=e,e=s)}else Qt=e,e=s;return e}function cn(){var e;return 45===t.charCodeAt(Qt)?(e=mt,Qt++):(e=s,0===nr&&cr(yt)),e}function un(){var e;return 43===t.charCodeAt(Qt)?(e=gt,Qt++):(e=s,0===nr&&cr(vt)),e}function pn(){var e;return 48===t.charCodeAt(Qt)?(e=bt,Qt++):(e=s,0===nr&&cr(wt)),e}function ln(){var e,t,r;if(nr++,e=Qt,fn()!==s){for(t=[],r=dn();r!==s;)t.push(r),r=dn();t!==s&&(r=fn())!==s?(Zt=e,e=Et(t)):(Qt=e,e=s)}else Qt=e,e=s;return nr--,e===s&&0===nr&&cr(xt),e}function dn(){var e,r,n,o,i,a,c,u,p;return(e=mn())===s&&(e=Qt,hn()!==s?(34===t.charCodeAt(Qt)?(r=_t,Qt++):(r=s,0===nr&&cr(St)),r===s&&(92===t.charCodeAt(Qt)?(r=kt,Qt++):(r=s,0===nr&&cr(Ct)),r===s&&(47===t.charCodeAt(Qt)?(r=At,Qt++):(r=s,0===nr&&cr(Pt)),r===s&&(r=Qt,98===t.charCodeAt(Qt)?(n=Dt,Qt++):(n=s,0===nr&&cr(Ot)),n!==s&&(Zt=r,n=Tt()),(r=n)===s&&(r=Qt,102===t.charCodeAt(Qt)?(n=Ft,Qt++):(n=s,0===nr&&cr(jt)),n!==s&&(Zt=r,n=It()),(r=n)===s&&(r=Qt,110===t.charCodeAt(Qt)?(n=Rt,Qt++):(n=s,0===nr&&cr(Nt)),n!==s&&(Zt=r,n=Mt()),(r=n)===s&&(r=Qt,114===t.charCodeAt(Qt)?(n=Lt,Qt++):(n=s,0===nr&&cr(Bt)),n!==s&&(Zt=r,n=qt()),(r=n)===s&&(r=Qt,116===t.charCodeAt(Qt)?(n=Ut,Qt++):(n=s,0===nr&&cr(zt)),n!==s&&(Zt=r,n=$t()),(r=n)===s&&(r=Qt,117===t.charCodeAt(Qt)?(n=Gt,Qt++):(n=s,0===nr&&cr(Jt)),n!==s?(o=Qt,i=Qt,(a=gn())!==s&&(c=gn())!==s&&(u=gn())!==s&&(p=gn())!==s?i=a=[a,c,u,p]:(Qt=i,i=s),(o=i!==s?t.substring(o,Qt):i)!==s?(Zt=r,r=n=Ht(o)):(Qt=r,r=s)):(Qt=r,r=s))))))))),r!==s?(Zt=e,e=Vt(r)):(Qt=e,e=s)):(Qt=e,e=s)),e}function hn(){var e;return 92===t.charCodeAt(Qt)?(e=kt,Qt++):(e=s,0===nr&&cr(Ct)),e}function fn(){var e;return 34===t.charCodeAt(Qt)?(e=_t,Qt++):(e=s,0===nr&&cr(St)),e}function mn(){var e;return Xt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(Kt)),e}function yn(){var e;return _e.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(Se)),e}function gn(){var e;return Wt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&cr(Yt)),e}var vn="IN",bn="OUT";delete(a=this).properties,delete a.inports,delete a.outports,delete a.groups,a.edges=[],o={},a.validateContents=function(e,t){e.processes&&Object.keys(e.processes).forEach((function(t){if(!e.processes[t].component)throw new Error('Node "'+t+'" does not have a component defined')})),e.inports&&Object.keys(e.inports).forEach((function(t){var r=e.inports[t];if(!e.processes[r.process])throw new Error('Inport "'+t+'" is connected to an undefined target node "'+r.process+'"')})),e.outports&&Object.keys(e.outports).forEach((function(t){var r=e.outports[t];if(!e.processes[r.process])throw new Error('Outport "'+t+'" is connected to an undefined source node "'+r.process+'"')})),e.connections&&e.connections.forEach((function(t){if(t.tgt&&!e.processes[t.tgt.process]){if(t.data)throw new Error('IIP containing "'+t.data+'" is connected to an undefined target node "'+t.tgt.process+'"');throw new Error('Edge from "'+t.src.process+'" port "'+t.src.port+'" is connected to an undefined target node "'+t.tgt.process+'"')}if(t.src&&!e.processes[t.src.process])throw new Error('Edge to "'+t.tgt.process+'" port "'+t.tgt.port+'" is connected to an undefined source node "'+t.src.process+'"')}))},a.addNode=function(e,t){if(o[e]||(o[e]={}),t.comp&&(o[e].component=t.comp),t.meta){for(var r={},n=0;n<t.meta.length;n++){var i=t.meta[n].split("=");1===i.length&&(i=["routes",i[0]]);var a=i[0],s=i[1];"x"!==a&&"y"!==a||(s=parseFloat(s)),r[a]=s}o[e].metadata=r}};var wn={},xn={};a.addAnonymousNode=function(e,t){if(!xn[t]){var r=e.comp.replace(/[^a-zA-Z0-9]+/,"_");wn[r]=(wn[r]||0)+1,xn[t]="_"+r+"_"+wn[r],this.addNode(xn[t],e)}return xn[t]},a.getResult=function(){var e={inports:a.inports||{},outports:a.outports||{},groups:a.groups||[],processes:o||{},connections:a.processEdges()};a.properties&&(e.properties=a.properties),e.caseSensitive=i.caseSensitive||!1;var t=a.validateSchema;if(void 0!==i.validateSchema&&(t=i.validateSchema),t){if(void 0===n)var n=r(4363);var s=r(7731),c=n.validateMultiple(e,s);if(!c.valid)throw new Error("fbp: Did not validate againt graph schema:\n"+JSON.stringify(c.errors,null,2))}return(void 0===i.validateContents||i.validateContents)&&a.validateContents(e),e};var En=function e(t,r){for(var n=-1,o=t?t.length:0,i=[];++n<o;){var a=t[n];a instanceof Array?Array.prototype.push.apply(i,r?a:e(a)):i.push(a)}return i};function _n(e){return e[0]+e[1].join("")}function Sn(e,t,r){i.caseSensitive||(r=r.toLowerCase());var n={process:e,port:t?t.port:r};return t&&null!=t.index&&(n.index=t.index),n}function kn(e,t){return Sn(e,t,vn)}function Cn(e,t){return Sn(e,t,bn)}if(a.registerAnnotation=function(e,t){if(a.properties||(a.properties={}),"runtime"===e)return a.properties.environment={},void(a.properties.environment.type=t);a.properties[e]=t},a.registerInports=function(e,t,r){a.inports||(a.inports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),a.inports[r]={process:e,port:t}},a.registerOutports=function(e,t,r){a.outports||(a.outports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),a.outports[r]={process:e,port:t}},a.registerEdges=function(e){Array.isArray(e)&&e.forEach((function(e,t){a.edges.push(e)}))},a.processEdges=function(){var e,t;e=En(a.edges),t=[];for(var r=1;r<e.length;r+=1)("src"in e[r-1]||"data"in e[r-1])&&"tgt"in e[r]&&(e[r-1].tgt=e[r].tgt,t.push(e[r-1]),r++);return t},(n=u())!==s&&Qt===t.length)return n;throw n!==s&&Qt<t.length&&cr({type:"end",description:"end of input"}),ur(null,rr,tr<t.length?t.charAt(tr):null,tr<t.length?sr(tr,tr+1):sr(tr,tr))}}}()},4655:(e,t,r)=>{var n=r(1807),o=r(6928);e.exports={SyntaxError:n.SyntaxError,parse:n.parse,serialize:o}},6928:e=>{var t=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};e.exports=function(e,r){var n,o,i,a,s,c,u,p,l,d,h,f,m,y,g,v,b,w,x,E,_,S,k;for(p in null==r&&(r={}),c="string"==typeof e?JSON.parse(e):e,l=[],h="",i=function(e){return null!=c.processes[e].metadata&&(e=c.processes[e].metadata.label),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},o=function(e,t){return null!=t.process&&null!=c.processes[t.process].metadata?e=c.processes[t.process].metadata.label:null!=t.process&&(e=t.process),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},c.properties&&(c.properties.environment&&c.properties.environment.type&&(h+="# @runtime "+c.properties.environment.type+"\n"),Object.keys(c.properties).forEach((function(e){if(e.match(/^[a-zA-Z0-9\-_]+$/)){var t=c.properties[e];"string"==typeof t&&t.match(/^[a-zA-Z0-9\-_\s\.]+$/)&&(h+="# @"+e+" "+t+"\n")}}))),m=c.inports)f=o(p,s=m[p]),p=c.caseSensitive?p:p.toUpperCase(),s.port=c.caseSensitive?s.port:s.port.toUpperCase(),h+="INPORT="+f+"."+s.port+":"+p+"\n";for(p in y=c.outports)f=o(p,d=y[p]),p=c.caseSensitive?p:p.toUpperCase(),d.port=c.caseSensitive?d.port:d.port.toUpperCase(),h+="OUTPORT="+f+"."+d.port+":"+p+"\n";for(h+="\n",a=0,u=(g=c.connections).length;a<u;a++)null!=(n=g[a]).data?(S=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),_=n.tgt.process,k=c.processes[_].component,E=i(_),t.call(l,k)<0&&(E+="("+k+")",l.push(k)),h+='"'+n.data+'" -> '+S+" "+E+"\n"):(w=c.caseSensitive?n.src.port:n.src.port.toUpperCase(),b=n.src.process,x=c.processes[b].component,v=i(b),t.call(l,x)<0&&(v+="("+x+")",l.push(x)),S=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),_=n.tgt.process,k=c.processes[_].component,E=i(_),t.call(l,k)<0&&(E+="("+k+")",l.push(k)),h+=v+" "+w+" -> "+S+" "+E+"\n");return h}},4727:(e,t,r)=>{t.graph=r(8840),t.Graph=t.graph.Graph,t.journal=r(7702),t.Journal=t.journal.Journal},8840:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,l,d,h,f,m=r(4092);u=m.EventEmitter,l=r(8575),h=r(2806),p=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,n,u,p,d=(u=f,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(u);if(p){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,f),(e=d.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=f,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=l(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=l(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=l(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,a,s,c;for(this.checkTransactionStart(),o=0,a=(s=this.groups).length;o<a;o++)if((n=s[o])&&n.name===e){for(i in r=l(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,a,s,c,u,p,l,d,h,f,m,y,g,v,b,w,x,E,_,S,k,C;if(v=this.getNode(e)){for(this.checkTransactionStart(),C=[],n=0,u=(x=this.edges).length;n<u;n++)(t=x[n]).from.node!==v.id&&t.to.node!==v.id||C.push(t);for(a=0,p=C.length;a<p;a++)t=C[a],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(C=[],s=0,l=(E=this.initializers).length;s<l;s++)(i=E[s]).to.node===v.id&&C.push(i);for(c=0,d=C.length;c<d;c++)i=C[c],this.removeInitial(i.to.node,i.to.port);for(w in C=[],_=this.inports)_[w].process===e&&C.push(w);for(y=0,h=C.length;y<h;y++)w=C[y],this.removeInport(w);for(w in C=[],S=this.outports)S[w].process===e&&C.push(w);for(g=0,f=C.length;g<f;g++)w=C[g],this.removeOutport(w);for(b=0,m=(k=this.groups).length;b<m;b++)(r=k[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,a,s,c,u,p,l,d,h,f,m,y,g,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,u=(m=this.edges).length;o<u;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(s=0,p=(y=this.initializers).length;s<p;s++)(i=y[s])&&i.to.node===e&&(i.to.node=t);for(f in g=this.inports)(h=g[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,l=(b=this.groups).length;c<l;c++)(n=b[c])&&-1!==(a=n.nodes.indexOf(e))&&(n.nodes[a]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=l(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,a,s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,a=(s=this.edges).length;i<a;i++)if((o=s[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),s||(s={}),this.checkTransactionStart(),a={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:s},this.edges.push(a),this.emit("addEdge",a),this.checkTransactionEnd(),a}},{key:"removeEdge",value:function(e,t,r,n){var o,i,a,s,c,u,p,l,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(a=i=0,u=(d=this.edges).length;i<u;a=++i)(o=d[a]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(a=s=0,p=(h=this.edges).length;s<p;a=++s)(o=h[a]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,a,s,c;for(t=this.getPortName(t),n=this.getPortName(n),a=i=0,s=(c=this.edges).length;i<s;a=++i)if((o=c[a])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,a,s,c;if(a=this.getEdge(e,t,r,n)){for(s in this.checkTransactionStart(),i=l(a.metadata),a.metadata||(a.metadata={}),o)null!=(c=o[s])?a.metadata[s]=c:delete a.metadata[s];return this.emit("changeEdge",a,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,a,s,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,a=(c=this.initializers).length;n<a;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,s=p.length;i<s;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,a,s,c,u,p,l,d,h,f,m,y;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(a=c=0,l=(m=this.initializers).length;c<l;a=++c)r="function"==typeof(s=m[a]).from.data?"Function":s.from.data,n+="    data".concat(a," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(a," -> ").concat(e(s.to.node),"[headlabel=").concat(t(s.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(u=0,d=(y=this.edges).length;u<d;u++)o=y[u],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+"}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,a,s,c;for(c=[],t=0,o=(a=this.initializers).length;t<o;t++)r=a[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(s=this.edges).length;n<i;n++)e=s[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,a,s,c,u,p,l,d,h,f,m,y,g,v,b,w,x,E,_,S,k;for(y in s={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(s.properties.name=this.name),v=this.properties)k=v[y],s.properties[y]=k;for(g in b=this.inports)m=b[g],s.inports[g]=m;for(g in w=this.outports)m=w[g],s.outports[g]=m;for(o=0,p=(x=this.groups).length;o<p;o++)n={name:(r=x[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),s.groups.push(n);for(a=0,l=(E=this.nodes).length;a<l;a++)f=E[a],s.processes[f.id]={component:f.component},f.metadata&&(s.processes[f.id].metadata=f.metadata);for(c=0,d=(_=this.edges).length;c<d;c++)e={src:{process:(t=_[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),s.connections.push(e);for(u=0,h=(S=this.initializers).length;u<h;u++)i=S[u],s.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return s}},{key:"save",value:function(e,t){var n;return h.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(2993).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),f}(u);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=p,t.createGraph=function(e,t){return new p(e,t)},t.loadJSON=function(e,t){var r,n,o,i,a,s,c,u,l,d,h,f,m,y,g,v,b,w,x,E,_,S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(y in(i="string"==typeof e?JSON.parse(e):JSON.parse(JSON.stringify(e))).properties||(i.properties={}),i.processes||(i.processes={}),i.connections||(i.connections=[]),r=i.caseSensitive||!1,(a=new p(i.properties.name,{caseSensitive:r})).startTransaction("loadJSON",k),m={},v=i.properties)S=v[y],"name"!==y&&(m[y]=S);for(u in a.setProperties(m),b=i.processes)(o=b[u]).metadata||(o.metadata={}),a.addNode(u,o.component,o.metadata);for(c=0,d=(w=i.connections).length;c<d;c++)k=(n=w[c]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?a.addEdge(n.src.process,a.getPortName(n.src.port),n.tgt.process,a.getPortName(n.tgt.port),k):a.addEdgeIndex(n.src.process,a.getPortName(n.src.port),n.src.index,n.tgt.process,a.getPortName(n.tgt.port),n.tgt.index,k):"number"==typeof n.tgt.index?a.addInitialIndex(n.data,n.tgt.process,a.getPortName(n.tgt.port),n.tgt.index,k):a.addInitial(n.data,n.tgt.process,a.getPortName(n.tgt.port),k);if(i.inports)for(g in x=i.inports)f=x[g],a.addInport(g,f.process,a.getPortName(f.port),f.metadata);if(i.outports)for(g in E=i.outports)f=E[g],a.addOutport(g,f.process,a.getPortName(f.port),f.metadata);if(i.groups)for(l=0,h=(_=i.groups).length;l<h;l++)s=_[l],a.addGroup(s.name,s.nodes,s.metadata||{});return a.endTransaction("loadJSON"),t(null,a)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(4655).parse(e,{caseSensitive:a})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!h.isBrowser())return r(2993).readFile(e,"utf-8",(function(r,o){var a;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(a=JSON.parse(o),t.loadJSON(a,n,{}))}));t.loadHTTP(e,(function(r,i){var a;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(a=JSON.parse(i),t.loadJSON(a,n,o))}))},f=function(e){var t,r,n,o,i,a,s,c,u,p,d,h,f,m,y,g,v,b,w,x;for(n=0,c=(m=l(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in y=l(e.outports))y[f],e.removeOutport(f);for(f in g=l(e.inports))g[f],e.removeInport(f);for(e.setProperties({}),i=0,u=(v=l(e.initializers).reverse()).length;i<u;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(a=0,p=(b=l(e.edges).reverse()).length;a<p;a++)t=b[a],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(x=[],s=0,d=(w=l(e.nodes).reverse()).length;s<d;s++)h=w[s],x.push(e.removeNode(h.id));return x},d=function(e,t){var r,n,o,i,a,s,c,u,p,l,d,h,m,y,g,v,b,w,x,E,_;for(f(e),o=0,u=(g=t.nodes).length;o<u;o++)h=g[o],e.addNode(h.id,h.component,h.metadata);for(a=0,p=(v=t.edges).length;a<p;a++)r=v[a],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(s=0,l=(b=t.initializers).length;s<l;s++)i=b[s],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(y in e.setProperties(t.properties),w=t.inports)m=w[y],e.addInport(y,m.process,m.port,m.metadata);for(y in x=t.outports)m=x[y],e.addOutport(y,m.process,m.port,m.metadata);for(_=[],c=0,d=(E=t.groups).length;c<d;c++)n=E[c],_.push(e.addGroup(n.name,n.nodes,n.metadata));return _},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=d},7702:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,y,g,v,b,w,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},E=r(4092);f=E.EventEmitter,b=r(8575),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},y=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return s(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),g=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return s(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(y),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var a,s,c,u,p,l,h,f,m,y,v,b,w,x,E,_,S,k,C,A,P;if(i(this,n),(a=t.call(this)).startTransaction=a.startTransaction.bind(d(a)),a.endTransaction=a.endTransaction.bind(d(a)),a.graph=e,a.entries=[],a.subscribed=!0,a.store=o||new g(a.graph),0===a.store.transactions.length){for(a.currentRevision=-1,a.startTransaction("initial",r),p=0,f=(E=a.graph.nodes).length;p<f;p++)x=E[p],a.appendCommand("addNode",x);for(h=0,m=(_=a.graph.edges).length;h<m;h++)s=_[h],a.appendCommand("addEdge",s);for(b=0,y=(S=a.graph.initializers).length;b<y;b++)u=S[b],a.appendCommand("addInitial",u);for(l in Object.keys(a.graph.properties).length>0&&a.appendCommand("changeProperties",a.graph.properties,{}),k=a.graph.inports)P=k[l],a.appendCommand("addInport",{name:l,port:P});for(l in C=a.graph.outports)P=C[l],a.appendCommand("addOutport",{name:l,port:P});for(w=0,v=(A=a.graph.groups).length;w<v;w++)c=A[w],a.appendCommand("addGroup",c);a.endTransaction("initial",r)}else a.currentRevision=a.store.lastRevision;return a.graph.on("addNode",(function(e){return a.appendCommand("addNode",e)})),a.graph.on("removeNode",(function(e){return a.appendCommand("removeNode",e)})),a.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},a.appendCommand("renameNode",r)})),a.graph.on("changeNode",(function(e,t){return a.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),a.graph.on("addEdge",(function(e){return a.appendCommand("addEdge",e)})),a.graph.on("removeEdge",(function(e){return a.appendCommand("removeEdge",e)})),a.graph.on("changeEdge",(function(e,t){return a.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),a.graph.on("addInitial",(function(e){return a.appendCommand("addInitial",e)})),a.graph.on("removeInitial",(function(e){return a.appendCommand("removeInitial",e)})),a.graph.on("changeProperties",(function(e,t){return a.appendCommand("changeProperties",{new:e,old:t})})),a.graph.on("addGroup",(function(e){return a.appendCommand("addGroup",e)})),a.graph.on("renameGroup",(function(e,t){return a.appendCommand("renameGroup",{oldName:e,newName:t})})),a.graph.on("removeGroup",(function(e){return a.appendCommand("removeGroup",e)})),a.graph.on("changeGroup",(function(e,t){return a.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),a.graph.on("addExport",(function(e){return a.appendCommand("addExport",e)})),a.graph.on("removeExport",(function(e){return a.appendCommand("removeExport",e)})),a.graph.on("addInport",(function(e,t){return a.appendCommand("addInport",{name:e,port:t})})),a.graph.on("removeInport",(function(e,t){return a.appendCommand("removeInport",{name:e,port:t})})),a.graph.on("renameInport",(function(e,t){return a.appendCommand("renameInport",{oldId:e,newId:t})})),a.graph.on("changeInport",(function(e,t,r){return a.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),a.graph.on("addOutport",(function(e,t){return a.appendCommand("addOutport",{name:e,port:t})})),a.graph.on("removeOutport",(function(e,t){return a.appendCommand("removeOutport",{name:e,port:t})})),a.graph.on("renameOutport",(function(e,t){return a.appendCommand("renameOutport",{oldId:e,newId:t})})),a.graph.on("changeOutport",(function(e,t,r){return a.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),a.graph.on("startTransaction",(function(e,t){return a.startTransaction(e,t)})),a.graph.on("endTransaction",(function(e,t){return a.endTransaction(e,t)})),a}return s(n,[{key:"startTransaction",value:function(e,t){if(x(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(x(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,a,s,c,u,p,l,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,a=(d=this.store.fetchTransaction(u)).length;i<a;i++)r=d[i],this.executeEntry(r);else for(u=s=this.currentRevision,h=e+1;s>=h;u=s+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,a,s,c,u,p;for(s=[],c=o=u=e|=0,p=t|=this.store.lastRevision;u<=p?o<p:o>p;c=u<=p?++o:--o)for(i=0,a=(r=this.store.fetchTransaction(c)).length;i<a;i++)n=r[i],s.push(w(n));return s.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,a,s,c,u;for(r=[],s=o=e|=0,c=t|=this.store.lastRevision;o<c;s=o+=1)for(i=0,a=(u=this.store.fetchTransaction(s)).length;i<a;i++)n=u[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(2993).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=y,t.MemoryJournalStore=g},2806:(e,t)=>{t.isBrowser=function(){return"undefined"==typeof process||!process.execPath||!process.execPath.match(/node|iojs/)},t.deprecated=function(e){if(!t.isBrowser()){if(process.env.NOFLO_FATAL_DEPRECATED)throw new Error(e);return console.warn(e)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(e);console.warn(e)}},7131:(e,t,r)=>{e.exports={trace:r(3611),Flowtrace:r(5399),FlowtraceRecorder:r(954)}},5399:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(9841),f=r(8575),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(m,e);var t,r,n,i,s=(n=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(i){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return l(this,e)});function m(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;return c(this,m),(t=s.call(this)).events=new h(r),t.graphs={},t.metadata=a(a({},e),{},{start:new Date}),t.mainGraph=null,t.subscribe(),t}return t=m,(r=[{key:"subscribe",value:function(){var e=this;this.on("event",(function(t,r,n){e.events.enq({event:t,payload:f(r),graph:n,time:new Date})}))}},{key:"addGraph",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.graphs[e]=t,r&&(this.mainGraph=e)}},{key:"addNetworkPacket",value:function(e,t,r,n,o){this.emit("event",e,a(a({},o),{},{src:t,tgt:r}),n)}},{key:"addNetworkStarted",value:function(e){this.emit("event","network:started",{},e)}},{key:"addNetworkStopped",value:function(e){this.emit("event","network:stopped",{},e)}},{key:"addNetworkError",value:function(e,t){this.emit("event","network:stopped",t,e)}},{key:"addNetworkIcon",value:function(e,t,r){this.emit("event","network:icon",{node:t,icon:r},e)}},{key:"toJSON",value:function(){var e=this.events.toarray().map((function(e){var t,r,n=(t=e.event.split(":"),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{protocol:n[0],command:n[1],payload:e.payload,graph:e.graph,time:e.time}}));return e.reverse(),{header:{metadata:a(a({},this.metadata),{},{end:this.metadata.end||new Date}),graphs:this.graphs,main:this.mainGraph},events:e}}}])&&u(t.prototype,r),m}(r(4092).EventEmitter);e.exports=m},954:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(4727),c=r(5399);function u(e){return new Promise((function(t,r){var n="fbp"===e.language?"loadFBP":"loadJSON";s.graph[n](e.code,(function(e,n){e?r(e):t(n.toJSON())}))}))}function p(e,t){var r=[],n=t.find((function(t){return t.name===e}));if(!n)return r;r.push(n);var o=t.map((function(e){return e.name}));return Object.keys(n.processes).forEach((function(e){var i=n.processes[e];-1!==o.indexOf(i.component)&&(r=r.concat(p(i.component,t)))})),r}function l(e,t,r){return e.protocol.component.list().then((function(e){return e.filter((function(e){return e.subgraph&&"Graph"!==e.name}))})).then((function(n){var o=n.map((function(e){return e.name}));-1===o.indexOf(r)&&o.push(r);var a=o.filter((function(e){return!t.graphs[e]}));return Promise.all(a.map((function(t){return e.protocol.component.getsource({name:t}).then(u).then((function(e){return i(i({},e),{},{name:t})}))}))).then((function(e){p(r,e).forEach((function(e){var n=e.name===r;t.addGraph(e.name,e,n)}))}))}))}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fbpClient=t,this.traces={},this.signalHandlers={}}var t,r;return t=e,(r=[{key:"handleSignal",value:function(e){if(this.signalHandlers[e])return this.signalHandlers[e];var t=this.traces[e],r=function(r){if(r.payload.graph===e){var n="".concat(r.protocol,":").concat(r.command);switch(n){case"network:connect":case"network:begingroup":case"network:data":case"network:endgroup":case"network:disconnect":t.addNetworkPacket(n,r.payload.src,r.payload.tgt,r.payload.graph,r.payload);break;case"network:error":t.addNetworkError(r.payload.graph,r.payload);break;case"network:icon":t.addNetworkIcon(r.payload.graph,r.payload.id,r.payload.icon)}}};return this.signalHandlers[e]=r,r}},{key:"start",value:function(e){var t=this;return this.fbpClient.connect().then((function(){t.traces[e]=new c({runtime:t.fbpClient.definition.id,type:t.fbpClient.definition.type,address:t.fbpClient.definition.address,repository:t.fbpClient.definition.repository,repositoryVersion:t.fbpClient.definition.repositoryVersion})})).then((function(){t.fbpClient.on("signal",t.handleSignal(e))})).then((function(){return l(t.fbpClient,t.traces[e],e)}))}},{key:"stop",value:function(e){return this.traces[e]?(this.fbpClient.removeListener("signal",this.handleSignal(e)),this.traces[e].metadata.end=new Date,Promise.resolve()):Promise.resolve()}},{key:"dump",value:function(e){return this.traces[e]?this.traces[e].toJSON():{}}}])&&n(t.prototype,r),e}();e.exports=d},3611:(e,t,r)=>{var n=r(2993);r(5069),t.loadString=function(e){return JSON.parse(e)},t.loadFile=function(e,r){n.readFile(e,{encoding:"utf-8"},(function(e,n){var o;if(e)r(e);else{try{o=t.loadString(n)}catch(e){return void r(e)}r(null,o)}}))},t.loadHttp=function(e,t){fetch(e).then((function(e){if(200!==e.status)throw new Error("Received HTTP error ".concat(e.status));return e.json()})).then((function(e){t(null,e)}),(function(e){t(e)}))}},5587:e=>{e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},9935:e=>{"use strict";var t=Function.prototype.toString,r=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var n="";if(void 0===Function.prototype.name&&void 0===e.name){var o=t.call(e).match(r);o&&(n=o[1])}else n=e.name;return n}},8617:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,p=-7,l=r?o-1:0,d=r?-1:1,h=e[t+l];for(l+=d,i=h&(1<<-p)-1,h>>=-p,p+=s;p>0;i=256*i+e[t+l],l+=d,p-=8);for(a=i&(1<<-p)-1,i>>=-p,p+=n;p>0;a=256*a+e[t+l],l+=d,p-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=p?(s=0,a=p):a+l>=1?(s=(t*c-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=f,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+h]=255&a,h+=f,a/=256,u-=8);e[r+h-f]|=128*m}},1842:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},5069:(e,t,r)=>{r(2599),e.exports=self.fetch.bind(self)},5767:(e,t,r)=>{"use strict";var n=r(9265);e.exports=n},9265:(e,t,r)=>{"use strict";var n=r(3103),o=r(3387);function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=r(3034),e.exports.Schema=r(8183),e.exports.FAILSAFE_SCHEMA=r(5569),e.exports.JSON_SCHEMA=r(1634),e.exports.CORE_SCHEMA=r(3181),e.exports.DEFAULT_SAFE_SCHEMA=r(6801),e.exports.DEFAULT_FULL_SCHEMA=r(3728),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=r(4677),e.exports.MINIMAL_SCHEMA=r(5569),e.exports.SAFE_SCHEMA=r(6801),e.exports.DEFAULT_SCHEMA=r(3728),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},284:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return null==e}e.exports.isNothing=r,e.exports.isObject=function(e){return"object"===t(e)&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:r(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,o,i;if(t)for(r=0,n=(i=Object.keys(t)).length;r<n;r+=1)e[o=i[r]]=t[o];return e}},3387:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(284),i=r(4677),a=r(3728),s=r(6801),c=Object.prototype.toString,u=Object.prototype.hasOwnProperty,p={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},l=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function d(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+o.repeat("0",n-t.length)+t}function h(e){this.schema=e.schema||a,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=o.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,i,a,s,c;if(null===t)return{};for(r={},o=0,i=(n=Object.keys(t)).length;o<i;o+=1)a=n[o],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(c=e.compiledTypeMap.fallback[a])&&u.call(c.styleAliases,s)&&(s=c.styleAliases[s]),r[a]=s;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function f(e,t){for(var r,n=o.repeat(" ",t),i=0,a=-1,s="",c=e.length;i<c;)-1===(a=e.indexOf("\n",i))?(r=e.slice(i),i=c):(r=e.slice(i,a+1),i=a+1),r.length&&"\n"!==r&&(s+=n),s+=r;return s}function m(e,t){return"\n"+o.repeat(" ",e.indent*t)}function y(e){return 32===e||9===e}function g(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function v(e,t){return g(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&(35!==e||t&&function(e){return g(e)&&!y(e)&&65279!==e&&13!==e&&10!==e}(t))}function b(e){return/^\n* /.test(e)}function w(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==l.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,r),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=n||e.flowLevel>-1&&r>=e.flowLevel;switch(function(e,t,r,n,o){var i,a,s,c,u=!1,p=!1,l=-1!==n,d=-1,h=g(c=e.charCodeAt(0))&&65279!==c&&!y(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&!y(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!g(a=e.charCodeAt(i)))return 5;s=i>0?e.charCodeAt(i-1):null,h=h&&v(a,s)}else{for(i=0;i<e.length;i++){if(10===(a=e.charCodeAt(i)))u=!0,l&&(p=p||i-d-1>n&&" "!==e[d+1],d=i);else if(!g(a))return 5;s=i>0?e.charCodeAt(i-1):null,h=h&&v(a,s)}p=p||l&&i-d-1>n&&" "!==e[d+1]}return u||p?r>9&&b(e)?5:p?4:3:h&&!o(e)?1:2}(t,s,e.indent,a,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+x(t,e.indent)+E(f(t,o));case 4:return">"+x(t,e.indent)+E(f(function(e,t){for(var r,n,o,i=/(\n+)([^\n]*)/g,a=(o=-1!==(o=e.indexOf("\n"))?o:e.length,i.lastIndex=o,_(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];n=i.exec(e);){var c=n[1],u=n[2];r=" "===u[0],a+=c+(s||r||""===u?"":"\n")+_(u,t),s=r}return a}(t,a),o));case 5:return'"'+function(e){for(var t,r,n,o="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(r=e.charCodeAt(i+1))>=56320&&r<=57343?(o+=d(1024*(t-55296)+r-56320+65536),i++):o+=!(n=p[t])&&g(t)?e[i]:n||d(t);return o}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function x(e,t){var r=b(e)?String(t):"",n="\n"===e[e.length-1];return r+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function E(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function _(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,i=0,a=0,s=0,c="";r=o.exec(e);)(s=r.index)-i>t&&(n=a>i?a:s,c+="\n"+e.slice(i,n),i=n+1),a=s;return c+="\n",e.length-i>t&&a>i?c+=e.slice(i,a)+"\n"+e.slice(a+1):c+=e.slice(i),c.slice(1)}function S(e,t,r){var o,a,s,p,l,d;for(s=0,p=(a=r?e.explicitTypes:e.implicitTypes).length;s<p;s+=1)if(((l=a[s]).instanceOf||l.predicate)&&(!l.instanceOf||"object"===n(t)&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(e.tag=r?l.tag:"?",l.represent){if(d=e.styleMap[l.tag]||l.defaultStyle,"[object Function]"===c.call(l.represent))o=l.represent(t,d);else{if(!u.call(l.represent,d))throw new i("!<"+l.tag+'> tag resolver accepts not "'+d+'" style');o=l.represent[d](t,d)}e.dump=o}return!0}return!1}function k(e,t,r,n,o,a){e.tag=null,e.dump=r,S(e,r,!1)||S(e,r,!0);var s=c.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var u,p,l="[object Object]"===s||"[object Array]"===s;if(l&&(p=-1!==(u=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(o=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(l&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===s)n&&0!==Object.keys(e.dump).length?(function(e,t,r,n){var o,a,s,c,u,p,l="",d=e.tag,h=Object.keys(r);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(o=0,a=h.length;o<a;o+=1)p="",n&&0===o||(p+=m(e,t)),c=r[s=h[o]],k(e,t+1,s,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=m(e,t)),k(e,t+1,c,!0,u)&&(e.dump&&10===e.dump.charCodeAt(0)?p+=":":p+=": ",l+=p+=e.dump));e.tag=d,e.dump=l||"{}"}(e,t,e.dump,o),p&&(e.dump="&ref_"+u+e.dump)):(function(e,t,r){var n,o,i,a,s,c="",u=e.tag,p=Object.keys(r);for(n=0,o=p.length;n<o;n+=1)s="",0!==n&&(s+=", "),e.condenseFlow&&(s+='"'),a=r[i=p[n]],k(e,t,i,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),k(e,t,a,!1,!1)&&(c+=s+=e.dump));e.tag=u,e.dump="{"+c+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===s){var d=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(function(e,t,r,n){var o,i,a="",s=e.tag;for(o=0,i=r.length;o<i;o+=1)k(e,t+1,r[o],!0,!0)&&(n&&0===o||(a+=m(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=s,e.dump=a||"[]"}(e,d,e.dump,o),p&&(e.dump="&ref_"+u+e.dump)):(function(e,t,r){var n,o,i="",a=e.tag;for(n=0,o=r.length;n<o;n+=1)k(e,t,r[n],!1,!1)&&(0!==n&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=a,e.dump="["+i+"]"}(e,d,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump))}else{if("[object String]"!==s){if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&w(e,e.dump,t,a)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function C(e,t){var r,n,o=[],i=[];for(A(e,o,i),r=0,n=i.length;r<n;r+=1)t.duplicates.push(o[i[r]]);t.usedDuplicates=new Array(n)}function A(e,t,r){var o,i,a;if(null!==e&&"object"===n(e))if(-1!==(i=t.indexOf(e)))-1===r.indexOf(i)&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)A(e[i],t,r);else for(i=0,a=(o=Object.keys(e)).length;i<a;i+=1)A(e[o[i]],t,r)}function P(e,t){var r=new h(t=t||{});return r.noRefs||C(e,r),k(r,0,e,!0,!0)?r.dump+"\n":""}e.exports.dump=P,e.exports.safeDump=function(e,t){return P(e,o.extend({schema:s},t))}},4677:e=>{"use strict";function t(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=t},3103:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(284),i=r(4677),a=r(4425),s=r(6801),c=r(3728),u=Object.prototype.hasOwnProperty,p=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,l=/[\x85\u2028\u2029]/,d=/[,\[\]\{\}]/,h=/^(?:!|!!|![a-z\-]+!)$/i,f=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(e){return Object.prototype.toString.call(e)}function y(e){return 10===e||13===e}function g(e){return 9===e||32===e}function v(e){return 9===e||32===e||10===e||13===e}function b(e){return 44===e||91===e||93===e||123===e||125===e}function w(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function x(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function E(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var _=new Array(256),S=new Array(256),k=0;k<256;k++)_[k]=x(k)?1:0,S[k]=x(k);function C(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||c,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function A(e,t){return new i(t,new a(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function P(e,t){throw A(e,t)}function D(e,t){e.onWarning&&e.onWarning.call(null,A(e,t))}var O={YAML:function(e,t,r){var n,o,i;null!==e.version&&P(e,"duplication of %YAML directive"),1!==r.length&&P(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&P(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),i=parseInt(n[2],10),1!==o&&P(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&D(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&P(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],h.test(n)||P(e,"ill-formed tag handle (first argument) of the TAG directive"),u.call(e.tagMap,n)&&P(e,'there is a previously declared suffix for "'+n+'" tag handle'),f.test(o)||P(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function T(e,t,r,n){var o,i,a,s;if(t<r){if(s=e.input.slice(t,r),n)for(o=0,i=s.length;o<i;o+=1)9===(a=s.charCodeAt(o))||32<=a&&a<=1114111||P(e,"expected valid JSON character");else p.test(s)&&P(e,"the stream contains non-printable characters");e.result+=s}}function F(e,t,r,n){var i,a,s,c;for(o.isObject(r)||P(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,c=(i=Object.keys(r)).length;s<c;s+=1)a=i[s],u.call(t,a)||(t[a]=r[a],n[a]=!0)}function j(e,t,r,o,i,a,s,c){var p,l;if(Array.isArray(i))for(p=0,l=(i=Array.prototype.slice.call(i)).length;p<l;p+=1)Array.isArray(i[p])&&P(e,"nested arrays are not supported inside keys"),"object"===n(i)&&"[object Object]"===m(i[p])&&(i[p]="[object Object]");if("object"===n(i)&&"[object Object]"===m(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===o)if(Array.isArray(a))for(p=0,l=a.length;p<l;p+=1)F(e,t,a[p],r);else F(e,t,a,r);else e.json||u.call(r,i)||!u.call(t,i)||(e.line=s||e.line,e.position=c||e.position,P(e,"duplicated mapping key")),t[i]=a,delete r[i];return t}function I(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):P(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function R(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!y(o))break;for(I(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&D(e,"deficient indentation"),n}function N(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!v(t)))}function M(e,t){1===t?e.result+=" ":t>1&&(e.result+=o.repeat("\n",t-1))}function L(e,t){var r,n,o=e.tag,i=e.anchor,a=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),n=e.input.charCodeAt(e.position);0!==n&&45===n&&v(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,R(e,!0,-1)&&e.lineIndent<=t)a.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,U(e,t,3,!1,!0),a.push(e.result),R(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)P(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=o,e.anchor=i,e.kind="sequence",e.result=a,!0)}function B(e){var t,r,n,o,i=!1,a=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&P(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(i=!0,o=e.input.charCodeAt(++e.position)):33===o?(a=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):P(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!v(o);)33===o&&(a?P(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),h.test(r)||P(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),d.test(n)&&P(e,"tag suffix cannot contain flow indicator characters")}return n&&!f.test(n)&&P(e,"tag name cannot contain such characters: "+n),i?e.tag=n:u.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:P(e,'undeclared tag handle "'+r+'"'),!0}function q(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&P(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!v(r)&&!b(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&P(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function U(e,t,r,n,i){var a,s,c,p,l,d,h,f,m=1,x=!1,k=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=c=4===r||3===r,n&&R(e,!0,-1)&&(x=!0,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)),1===m)for(;B(e)||q(e);)R(e,!0,-1)?(x=!0,c=a,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)):c=!1;if(c&&(c=x||i),1!==m&&4!==r||(h=1===r||2===r?t:t+1,f=e.position-e.lineStart,1===m?c&&(L(e,f)||function(e,t,r){var n,o,i,a,s,c=e.tag,u=e.anchor,p={},l={},d=null,h=null,f=null,m=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),s=e.input.charCodeAt(e.position);0!==s;){if(n=e.input.charCodeAt(e.position+1),i=e.line,a=e.position,63!==s&&58!==s||!v(n)){if(!U(e,r,2,!1,!0))break;if(e.line===i){for(s=e.input.charCodeAt(e.position);g(s);)s=e.input.charCodeAt(++e.position);if(58===s)v(s=e.input.charCodeAt(++e.position))||P(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(j(e,p,l,d,h,null),d=h=f=null),y=!0,m=!1,o=!1,d=e.tag,h=e.result;else{if(!y)return e.tag=c,e.anchor=u,!0;P(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=c,e.anchor=u,!0;P(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(m&&(j(e,p,l,d,h,null),d=h=f=null),y=!0,m=!0,o=!0):m?(m=!1,o=!0):P(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=n;if((e.line===i||e.lineIndent>t)&&(U(e,t,4,!0,o)&&(m?h=e.result:f=e.result),m||(j(e,p,l,d,h,f,i,a),d=h=f=null),R(e,!0,-1),s=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==s)P(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&j(e,p,l,d,h,null),y&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=p),y}(e,f,h))||function(e,t){var r,n,o,i,a,s,c,u,p,l,d=!0,h=e.tag,f=e.anchor,m={};if(91===(l=e.input.charCodeAt(e.position)))o=93,s=!1,n=[];else{if(123!==l)return!1;o=125,s=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),l=e.input.charCodeAt(++e.position);0!==l;){if(R(e,!0,t),(l=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=f,e.kind=s?"mapping":"sequence",e.result=n,!0;d||P(e,"missed comma between flow collection entries"),p=null,i=a=!1,63===l&&v(e.input.charCodeAt(e.position+1))&&(i=a=!0,e.position++,R(e,!0,t)),r=e.line,U(e,t,1,!1,!0),u=e.tag,c=e.result,R(e,!0,t),l=e.input.charCodeAt(e.position),!a&&e.line!==r||58!==l||(i=!0,l=e.input.charCodeAt(++e.position),R(e,!0,t),U(e,t,1,!1,!0),p=e.result),s?j(e,n,m,u,c,p):i?n.push(j(e,null,m,u,c,p)):n.push(c),R(e,!0,t),44===(l=e.input.charCodeAt(e.position))?(d=!0,l=e.input.charCodeAt(++e.position)):d=!1}P(e,"unexpected end of the stream within a flow collection")}(e,h)?k=!0:(s&&function(e,t){var r,n,i,a,s,c=1,u=!1,p=!1,l=t,d=0,h=!1;if(124===(a=e.input.charCodeAt(e.position)))n=!1;else{if(62!==a)return!1;n=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===c?c=43===a?3:2:P(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(s=a)&&s<=57?s-48:-1)>=0))break;0===i?P(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?P(e,"repeat of an indentation width identifier"):(l=t+i-1,p=!0)}if(g(a)){do{a=e.input.charCodeAt(++e.position)}while(g(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!y(a)&&0!==a)}for(;0!==a;){for(I(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!p||e.lineIndent<l)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!p&&e.lineIndent>l&&(l=e.lineIndent),y(a))d++;else{if(e.lineIndent<l){3===c?e.result+=o.repeat("\n",u?1+d:d):1===c&&u&&(e.result+="\n");break}for(n?g(a)?(h=!0,e.result+=o.repeat("\n",u?1+d:d)):h?(h=!1,e.result+=o.repeat("\n",d+1)):0===d?u&&(e.result+=" "):e.result+=o.repeat("\n",d):e.result+=o.repeat("\n",u?1+d:d),u=!0,p=!0,d=0,r=e.position;!y(a)&&0!==a;)a=e.input.charCodeAt(++e.position);T(e,r,e.position,!1)}}return!0}(e,h)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(T(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else y(r)?(T(e,n,o,!0),M(e,R(e,!1,t)),n=o=e.position):e.position===e.lineStart&&N(e)?P(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);P(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var r,n,o,i,a,s,c;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return T(e,r,e.position,!0),e.position++,!0;if(92===s){if(T(e,r,e.position,!0),y(s=e.input.charCodeAt(++e.position)))R(e,!1,t);else if(s<256&&_[s])e.result+=S[s],e.position++;else if((a=120===(c=s)?2:117===c?4:85===c?8:0)>0){for(o=a,i=0;o>0;o--)(a=w(s=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+a:P(e,"expected hexadecimal character");e.result+=E(i),e.position++}else P(e,"unknown escape sequence");r=n=e.position}else y(s)?(T(e,r,n,!0),M(e,R(e,!1,t)),r=n=e.position):e.position===e.lineStart&&N(e)?P(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}P(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?k=!0:function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!v(n)&&!b(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&P(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||P(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],R(e,!0,-1),!0}(e)?(k=!0,null===e.tag&&null===e.anchor||P(e,"alias node should not have any properties")):function(e,t,r){var n,o,i,a,s,c,u,p,l=e.kind,d=e.result;if(v(p=e.input.charCodeAt(e.position))||b(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p)return!1;if((63===p||45===p)&&(v(n=e.input.charCodeAt(e.position+1))||r&&b(n)))return!1;for(e.kind="scalar",e.result="",o=i=e.position,a=!1;0!==p;){if(58===p){if(v(n=e.input.charCodeAt(e.position+1))||r&&b(n))break}else if(35===p){if(v(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&N(e)||r&&b(p))break;if(y(p)){if(s=e.line,c=e.lineStart,u=e.lineIndent,R(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}e.position=i,e.line=s,e.lineStart=c,e.lineIndent=u;break}}a&&(T(e,o,i,!1),M(e,e.line-s),o=i=e.position,a=!1),g(p)||(i=e.position+1),p=e.input.charCodeAt(++e.position)}return T(e,o,i,!1),!!e.result||(e.kind=l,e.result=d,!1)}(e,h,1===r)&&(k=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===m&&(k=c&&L(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&P(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,l=e.implicitTypes.length;p<l;p+=1)if((d=e.implicitTypes[p]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else u.call(e.typeMap[e.kind||"fallback"],e.tag)?(d=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&d.kind!==e.kind&&P(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result)?(e.result=d.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):P(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):P(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||k}function z(e){var t,r,n,o,i=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(R(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(a=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!v(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&P(e,"directive name must not be less than one character in length");0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!y(o));break}if(y(o))break;for(t=e.position;0!==o&&!v(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&I(e),u.call(O,r)?O[r](e,r,n):D(e,'unknown document directive "'+r+'"')}R(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,R(e,!0,-1)):a&&P(e,"directives end mark is expected"),U(e,e.lineIndent-1,4,!1,!0),R(e,!0,-1),e.checkLineBreaks&&l.test(e.input.slice(i,e.position))&&D(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&N(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,R(e,!0,-1)):e.position<e.length-1&&P(e,"end of the stream or a document separator is expected")}function $(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new C(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,P(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)z(r);return r.documents}function G(e,t,r){null!==t&&"object"===n(t)&&void 0===r&&(r=t,t=null);var o=$(e,r);if("function"!=typeof t)return o;for(var i=0,a=o.length;i<a;i+=1)t(o[i])}function J(e,t){var r=$(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new i("expected a single document in the stream, but found more")}}e.exports.loadAll=G,e.exports.load=J,e.exports.safeLoadAll=function(e,t,r){return"object"===n(t)&&null!==t&&void 0===r&&(r=t,t=null),G(e,t,o.extend({schema:s},r))},e.exports.safeLoad=function(e,t){return J(e,o.extend({schema:s},t))}},4425:(e,t,r)=>{"use strict";var n=r(284);function o(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}o.prototype.getSnippet=function(e,t){var r,o,i,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",o=this.position;o>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o-1));)if(o-=1,this.position-o>t/2-1){r=" ... ",o+=5;break}for(i="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){i=" ... ",a-=5;break}return s=this.buffer.slice(o,a),n.repeat(" ",e)+r+s+i+"\n"+n.repeat(" ",e+this.position-o+r.length)+"^"},o.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},e.exports=o},8183:(e,t,r)=>{"use strict";var n=r(284),o=r(4677),i=r(3034);function a(e,t,r){var n=[];return e.include.forEach((function(e){r=a(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function s(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=a(this,"implicit",[]),this.compiledExplicit=a(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}s.DEFAULT=null,s.create=function(){var e,t;switch(arguments.length){case 1:e=s.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(e=n.toArray(e),t=n.toArray(t),!e.every((function(e){return e instanceof s})))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof i})))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new s({include:e,explicit:t})},e.exports=s},3181:(e,t,r)=>{"use strict";var n=r(8183);e.exports=new n({include:[r(1634)]})},3728:(e,t,r)=>{"use strict";var n=r(8183);e.exports=n.DEFAULT=new n({include:[r(6801)],explicit:[r(4221),r(7058),r(7509)]})},6801:(e,t,r)=>{"use strict";var n=r(8183);e.exports=new n({include:[r(3181)],implicit:[r(1239),r(7900)],explicit:[r(5013),r(265),r(7408),r(9782)]})},5569:(e,t,r)=>{"use strict";var n=r(8183);e.exports=new n({explicit:[r(7861),r(5166),r(2113)]})},1634:(e,t,r)=>{"use strict";var n=r(8183);e.exports=new n({include:[r(5569)],implicit:[r(4064),r(6554),r(8734),r(8018)]})},3034:(e,t,r)=>{"use strict";var n=r(4677),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],i=["scalar","sequence","mapping"];e.exports=function(e,t){var r,a;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===o.indexOf(t))throw new n('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,a={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){a[String(t)]=e}))})),a),-1===i.indexOf(this.kind))throw new n('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},5013:(e,t,r)=>{"use strict";var n;try{n=r(3423).Buffer}catch(e){}var o=r(3034),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,a=i;for(r=0;r<o;r++)if(!((t=a.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,o=e.replace(/[\r\n=]/g,""),a=o.length,s=i,c=0,u=[];for(t=0;t<a;t++)t%4==0&&t&&(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)),c=c<<6|s.indexOf(o.charAt(t));return 0==(r=a%4*6)?(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)):18===r?(u.push(c>>10&255),u.push(c>>2&255)):12===r&&u.push(c>>4&255),n?n.from?n.from(u):new n(u):u},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n="",o=0,a=e.length,s=i;for(t=0;t<a;t++)t%3==0&&t&&(n+=s[o>>18&63],n+=s[o>>12&63],n+=s[o>>6&63],n+=s[63&o]),o=(o<<8)+e[t];return 0==(r=a%3)?(n+=s[o>>18&63],n+=s[o>>12&63],n+=s[o>>6&63],n+=s[63&o]):2===r?(n+=s[o>>10&63],n+=s[o>>4&63],n+=s[o<<2&63],n+=s[64]):1===r&&(n+=s[o>>2&63],n+=s[o<<4&63],n+=s[64],n+=s[64]),n}})},6554:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},8018:(e,t,r)=>{"use strict";var n=r(284),o=r(3034),i=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),a=/^[-+]?[0-9]+e/;e.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!i.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){o.unshift(parseFloat(e,10))})),t=0,n=1,o.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(e))return"-0.0";return r=e.toString(10),a.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})},8734:(e,t,r)=>{"use strict";var n=r(284),o=r(3034);function i(e){return 48<=e&&e<=55}function a(e){return 48<=e&&e<=57}e.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,s=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!i(e.charCodeAt(o)))return!1;s=!0}return s&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!a(e.charCodeAt(o)))return!1;s=!0}return!(!s||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,i=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){i.unshift(parseInt(e,10))})),n=0,r=1,i.forEach((function(e){n+=e*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},7509:(e,t,r)=>{"use strict";var n;try{n=r(4396)}catch(e){"undefined"!=typeof window&&(n=window.esprima)}var o=r(3034);e.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=n.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,r="("+e+")",o=n.parse(r,{range:!0}),i=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?new Function(i,r.slice(t[0]+1,t[1]-1)):new Function(i,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},7058:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},4221:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},2113:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},7900:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},4064:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},265:(e,t,r)=>{"use strict";var n=r(3034),o=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,a,s,c=[],u=e;for(t=0,r=u.length;t<r;t+=1){if(n=u[t],s=!1,"[object Object]"!==i.call(n))return!1;for(a in n)if(o.call(n,a)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==c.indexOf(a))return!1;c.push(a)}return!0},construct:function(e){return null!==e?e:[]}})},7408:(e,t,r)=>{"use strict";var n=r(3034),o=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],"[object Object]"!==o.call(n))return!1;if(1!==(i=Object.keys(n)).length)return!1;a[t]=[i[0],n[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,i,a=e;for(i=new Array(a.length),t=0,r=a.length;t<r;t+=1)n=a[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}})},5166:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},9782:(e,t,r)=>{"use strict";var n=r(3034),o=Object.prototype.hasOwnProperty;e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(o.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},7861:(e,t,r)=>{"use strict";var n=r(3034);e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},1239:(e,t,r)=>{"use strict";var n=r(3034),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==o.exec(e)||null!==i.exec(e))},construct:function(e){var t,r,n,a,s,c,u,p,l=0,d=null;if(null===(t=o.exec(e))&&(t=i.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(s=+t[4],c=+t[5],u=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),p=new Date(Date.UTC(r,n,a,s,c,u,l)),d&&p.setTime(p.getTime()-d),p},instanceOf:Date,represent:function(e){return e.toISOString()}})},4291:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,o,i,a,s,c,u,p,l,d){if(a&&"object"==t(a)&&!Array.isArray(a)){for(var h in o(a,s,c,u,p,l,d),a){var f=a[h];if(Array.isArray(f)){if(h in r.arrayKeywords)for(var m=0;m<f.length;m++)n(e,o,i,f[m],s+"/"+h+"/"+m,c,s,h,a,m)}else if(h in r.propsKeywords){if(f&&"object"==t(f))for(var y in f)n(e,o,i,f[y],s+"/"+h+"/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),c,s,h,a,y)}else(h in r.keywords||e.allKeys&&!(h in r.skipKeywords))&&n(e,o,i,f,s+"/"+h,c,s,h,a)}i(a,s,c,u,p,l,d)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},6260:(e,t,r)=>{var n,o,i,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,r,n)}return r[a].exports}for(var i=void 0,a=0;a<n.length;a++)o(n[a]);return o}({"./aesprim":[function(e,t,r){!function(e,t){"use strict";!function(e){var t,r,n,o,i,a,s,c,u,p,l,d,h,f,m,y,g,v;function b(e,t){if(!e)throw new Error("ASSERT: "+t)}function w(e){return e>=48&&e<=57}function x(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E(e){return"01234567".indexOf(e)>=0}function _(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function S(e){return 10===e||13===e||8232===e||8233===e}function k(e){return 64==e||36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function C(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function A(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function P(e){return"eval"===e||"arguments"===e}function D(e,t,r,n,o){var i;b("number"==typeof r,"Comment must have valid position"),g.lastCommentStart>=r||(g.lastCommentStart=r,i={type:e,value:t},v.range&&(i.range=[r,n]),v.loc&&(i.loc=o),v.comments.push(i),v.attachComment&&(v.leadingComments.push(i),v.trailingComments.push(i)))}function O(e){var t,r,n,o;for(t=l-e,r={start:{line:d,column:l-h-e}};l<f;)if(n=u.charCodeAt(l),++l,S(n))return v.comments&&(o=u.slice(t+e,l-1),r.end={line:d,column:l-h-1},D("Line",o,t,l-1,r)),13===n&&10===u.charCodeAt(l)&&++l,++d,void(h=l);v.comments&&(o=u.slice(t+e,l),r.end={line:d,column:l-h},D("Line",o,t,l,r))}function T(){var e,t,r,n;for(v.comments&&(e=l-2,t={start:{line:d,column:l-h-2}});l<f;)if(S(r=u.charCodeAt(l)))13===r&&10===u.charCodeAt(l+1)&&++l,++d,++l,h=l,l>=f&&V({},a.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===u.charCodeAt(l+1))return++l,++l,void(v.comments&&(n=u.slice(e+2,l-2),t.end={line:d,column:l-h},D("Block",n,e,l,t)));++l}else++l;V({},a.UnexpectedToken,"ILLEGAL")}function F(){var e,t;for(t=0===l;l<f;)if(_(e=u.charCodeAt(l)))++l;else if(S(e))++l,13===e&&10===u.charCodeAt(l)&&++l,++d,h=l,t=!0;else if(47===e)if(47===(e=u.charCodeAt(l+1)))++l,++l,O(2),t=!0;else{if(42!==e)break;++l,++l,T()}else if(t&&45===e){if(45!==u.charCodeAt(l+1)||62!==u.charCodeAt(l+2))break;l+=3,O(3)}else{if(60!==e)break;if("!--"!==u.slice(l+1,l+4))break;++l,++l,++l,++l,O(4)}}function j(e){var t,r,n,o=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(l<f&&x(u[l])))return"";n=u[l++],o=16*o+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(o)}function I(){var e,t;for(e=u.charCodeAt(l++),t=String.fromCharCode(e),92===e&&(117!==u.charCodeAt(l)&&V({},a.UnexpectedToken,"ILLEGAL"),++l,(e=j("u"))&&"\\"!==e&&k(e.charCodeAt(0))||V({},a.UnexpectedToken,"ILLEGAL"),t=e);l<f&&C(e=u.charCodeAt(l));)++l,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==u.charCodeAt(l)&&V({},a.UnexpectedToken,"ILLEGAL"),++l,(e=j("u"))&&"\\"!==e&&C(e.charCodeAt(0))||V({},a.UnexpectedToken,"ILLEGAL"),t+=e);return t}function R(){var e,r;return e=l,{type:1===(r=92===u.charCodeAt(l)?I():function(){var e,t;for(e=l++;l<f;){if(92===(t=u.charCodeAt(l)))return l=e,I();if(!C(t))break;++l}return u.slice(e,l)}()).length?t.Identifier:function(e){if(p&&A(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(r)?t.Keyword:"null"===r?t.NullLiteral:"true"===r||"false"===r?t.BooleanLiteral:t.Identifier,value:r,lineNumber:d,lineStart:h,start:e,end:l}}function N(){var e,r,n,o,i=l,s=u.charCodeAt(l),c=u[l];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++l,v.tokenize&&(40===s?v.openParenToken=v.tokens.length:123===s&&(v.openCurlyToken=v.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(s),lineNumber:d,lineStart:h,start:i,end:l};default:if(61===(e=u.charCodeAt(l+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return l+=2,{type:t.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:d,lineStart:h,start:i,end:l};case 33:case 61:return l+=2,61===u.charCodeAt(l)&&++l,{type:t.Punctuator,value:u.slice(i,l),lineNumber:d,lineStart:h,start:i,end:l}}}return">>>="===(o=u.substr(l,4))?{type:t.Punctuator,value:o,lineNumber:d,lineStart:h,start:i,end:l+=4}:">>>"===(n=o.substr(0,3))||"<<="===n||">>="===n?{type:t.Punctuator,value:n,lineNumber:d,lineStart:h,start:i,end:l+=3}:c===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(c)>=0||"=>"===r?{type:t.Punctuator,value:r,lineNumber:d,lineStart:h,start:i,end:l+=2}:"<>=!+-*%&|^/".indexOf(c)>=0?(++l,{type:t.Punctuator,value:c,lineNumber:d,lineStart:h,start:i,end:l}):void V({},a.UnexpectedToken,"ILLEGAL")}function M(){var e,r,n;if(b(w((n=u[l]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=l,e="","."!==n){if(e=u[l++],n=u[l],"0"===e){if("x"===n||"X"===n)return++l,function(e){for(var r="";l<f&&x(u[l]);)r+=u[l++];return 0===r.length&&V({},a.UnexpectedToken,"ILLEGAL"),k(u.charCodeAt(l))&&V({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:d,lineStart:h,start:e,end:l}}(r);if(E(n))return function(e){for(var r="0"+u[l++];l<f&&E(u[l]);)r+=u[l++];return(k(u.charCodeAt(l))||w(u.charCodeAt(l)))&&V({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:d,lineStart:h,start:e,end:l}}(r);n&&w(n.charCodeAt(0))&&V({},a.UnexpectedToken,"ILLEGAL")}for(;w(u.charCodeAt(l));)e+=u[l++];n=u[l]}if("."===n){for(e+=u[l++];w(u.charCodeAt(l));)e+=u[l++];n=u[l]}if("e"===n||"E"===n)if(e+=u[l++],"+"!==(n=u[l])&&"-"!==n||(e+=u[l++]),w(u.charCodeAt(l)))for(;w(u.charCodeAt(l));)e+=u[l++];else V({},a.UnexpectedToken,"ILLEGAL");return k(u.charCodeAt(l))&&V({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:h,start:r,end:l}}function L(){var e,r,n,o;return y=null,F(),e=l,r=function(){var e,t,r,n;for(b("/"===(e=u[l]),"Regular expression literal must start with a slash"),t=u[l++],r=!1,n=!1;l<f;)if(t+=e=u[l++],"\\"===e)S((e=u[l++]).charCodeAt(0))&&V({},a.UnterminatedRegExp),t+=e;else if(S(e.charCodeAt(0)))V({},a.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||V({},a.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,r,n;for(t="",r="";l<f&&C((e=u[l]).charCodeAt(0));)if(++l,"\\"===e&&l<f)if("u"===(e=u[l])){if(n=++l,e=j("u"))for(r+=e,t+="\\u";n<l;++n)t+=u[n];else l=n,r+="u",t+="\\u";X({},a.UnexpectedToken,"ILLEGAL")}else t+="\\",X({},a.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),o=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){V({},a.InvalidRegExp)}return r}(r.value,n.value),v.tokenize?{type:t.RegularExpression,value:o,lineNumber:d,lineStart:h,start:e,end:l}:{literal:r.literal+n.literal,value:o,start:e,end:l}}function B(){var e,t,r,n;return F(),e=l,t={start:{line:d,column:l-h}},r=L(),t.end={line:d,column:l-h},v.tokenize||(v.tokens.length>0&&(n=v.tokens[v.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||v.tokens.pop()),v.tokens.push({type:"RegularExpression",value:r.literal,range:[e,l],loc:t})),r}function q(){var e;return F(),l>=f?{type:t.EOF,lineNumber:d,lineStart:h,start:l,end:l}:k(e=u.charCodeAt(l))?R():40===e||41===e||59===e?N():39===e||34===e?function(){var e,r,n,o,i,s,c,p,m="",y=!1;for(c=d,p=h,b("'"===(e=u[l])||'"'===e,"String literal must starts with a quote"),r=l,++l;l<f;){if((n=u[l++])===e){e="";break}if("\\"===n)if((n=u[l++])&&S(n.charCodeAt(0)))++d,"\r"===n&&"\n"===u[l]&&++l,h=l;else switch(n){case"u":case"x":s=l,(i=j(n))?m+=i:(l=s,m+=n);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:E(n)?(0!==(o="01234567".indexOf(n))&&(y=!0),l<f&&E(u[l])&&(y=!0,o=8*o+"01234567".indexOf(u[l++]),"0123".indexOf(n)>=0&&l<f&&E(u[l])&&(o=8*o+"01234567".indexOf(u[l++]))),m+=String.fromCharCode(o)):m+=n}else{if(S(n.charCodeAt(0)))break;m+=n}}return""!==e&&V({},a.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:m,octal:y,startLineNumber:c,startLineStart:p,lineNumber:d,lineStart:h,start:r,end:l}}():46===e?w(u.charCodeAt(l+1))?M():N():w(e)?M():v.tokenize&&47===e?function(){var e,t;if(!(e=v.tokens[v.tokens.length-1]))return B();if("Punctuator"===e.type){if("]"===e.value)return N();if(")"===e.value)return!(t=v.tokens[v.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?N():B();if("}"===e.value){if(v.tokens[v.openCurlyToken-3]&&"Keyword"===v.tokens[v.openCurlyToken-3].type){if(!(t=v.tokens[v.openCurlyToken-4]))return N()}else{if(!v.tokens[v.openCurlyToken-4]||"Keyword"!==v.tokens[v.openCurlyToken-4].type)return N();if(!(t=v.tokens[v.openCurlyToken-5]))return B()}return n.indexOf(t.value)>=0?N():B()}return B()}return"Keyword"===e.type?B():N()}():N()}function U(){var e,n,o;return F(),e={start:{line:d,column:l-h}},n=q(),e.end={line:d,column:l-h},n.type!==t.EOF&&(o=u.slice(n.start,n.end),v.tokens.push({type:r[n.type],value:o,range:[n.start,n.end],loc:e})),n}function z(){var e;return l=(e=y).end,d=e.lineNumber,h=e.lineStart,y=void 0!==v.tokens?U():q(),l=e.end,d=e.lineNumber,h=e.lineStart,e}function $(){var e,t,r;e=l,t=d,r=h,y=void 0!==v.tokens?U():q(),l=e,d=t,h=r}function G(e,t){this.line=e,this.column=t}function J(e,t,r,n){this.start=new G(e,t),this.end=new G(r,n)}function H(){var e,t,r,n;return e=l,t=d,r=h,F(),n=d!==t,l=e,d=t,h=r,n}function V(e,t){var r,n=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,(function(e,t){return b(t<n.length,"Message reference must be in range"),n[t]}));throw"number"==typeof e.lineNumber?((r=new Error("Line "+e.lineNumber+": "+o)).index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-h+1):((r=new Error("Line "+d+": "+o)).index=l,r.lineNumber=d,r.column=l-h+1),r.description=o,r}function X(){try{V.apply(null,arguments)}catch(e){if(!v.errors)throw e;v.errors.push(e)}}function K(e){if(e.type===t.EOF&&V(e,a.UnexpectedEOS),e.type===t.NumericLiteral&&V(e,a.UnexpectedNumber),e.type===t.StringLiteral&&V(e,a.UnexpectedString),e.type===t.Identifier&&V(e,a.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))V(e,a.UnexpectedReserved);else if(p&&A(e.value))return void X(e,a.StrictReservedWord);V(e,a.UnexpectedToken,e.value)}V(e,a.UnexpectedToken,e.value)}function W(e){var r=z();r.type===t.Punctuator&&r.value===e||K(r)}function Y(e){var r=z();r.type===t.Keyword&&r.value===e||K(r)}function Q(e){return y.type===t.Punctuator&&y.value===e}function Z(e){return y.type===t.Keyword&&y.value===e}function ee(){var e;59===u.charCodeAt(l)||Q(";")?z():(e=d,F(),d===e&&(y.type===t.EOF||Q("}")||K(y)))}function te(e){return e.type===o.Identifier||e.type===o.MemberExpression}function re(e,t){var r,n,o;return r=p,o=y,n=ke(),t&&p&&P(e[0].name)&&X(t,a.StrictParamName),p=r,m.markEnd(m.createFunctionExpression(null,e,[],n),o)}function ne(){var e,r;return r=y,(e=z()).type===t.StringLiteral||e.type===t.NumericLiteral?(p&&e.octal&&X(e,a.StrictOctalLiteral),m.markEnd(m.createLiteral(e),r)):m.markEnd(m.createIdentifier(e.value),r)}function oe(){var e,r,n,o,i,s;return s=y,(e=y).type===t.Identifier?(n=ne(),"get"!==e.value||Q(":")?"set"!==e.value||Q(":")?(W(":"),o=me(),m.markEnd(m.createProperty("init",n,o),s)):(r=ne(),W("("),(e=y).type!==t.Identifier?(W(")"),X(e,a.UnexpectedToken,e.value),o=re([])):(i=[ve()],W(")"),o=re(i,e)),m.markEnd(m.createProperty("set",r,o),s)):(r=ne(),W("("),W(")"),o=re([]),m.markEnd(m.createProperty("get",r,o),s))):e.type!==t.EOF&&e.type!==t.Punctuator?(r=ne(),W(":"),o=me(),m.markEnd(m.createProperty("init",r,o),s)):void K(e)}function ie(){var e,r,n,s;if(Q("("))return function(){var e;return W("("),e=ye(),W(")"),e}();if(Q("["))return function(){var e,t=[];for(e=y,W("[");!Q("]");)Q(",")?(z(),t.push(null)):(t.push(me()),Q("]")||W(","));return z(),m.markEnd(m.createArrayExpression(t),e)}();if(Q("{"))return function(){var e,t,r,n,s,c=[],u={},l=String;for(s=y,W("{");!Q("}");)t=(e=oe()).key.type===o.Identifier?e.key.name:l(e.key.value),n="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,r="$"+t,Object.prototype.hasOwnProperty.call(u,r)?(u[r]===i.Data?p&&n===i.Data?X({},a.StrictDuplicateProperty):n!==i.Data&&X({},a.AccessorDataProperty):n===i.Data?X({},a.AccessorDataProperty):u[r]&n&&X({},a.AccessorGetSet),u[r]|=n):u[r]=n,c.push(e),Q("}")||W(",");return W("}"),m.markEnd(m.createObjectExpression(c),s)}();if(e=y.type,s=y,e===t.Identifier)n=m.createIdentifier(z().value);else if(e===t.StringLiteral||e===t.NumericLiteral)p&&y.octal&&X(y,a.StrictOctalLiteral),n=m.createLiteral(z());else if(e===t.Keyword){if(Z("function"))return function(){var e,t,r,n,o,i,s,c,u=null,l=[];return c=y,Y("function"),Q("(")||(e=y,u=ve(),p?P(e.value)&&X(e,a.StrictFunctionName):P(e.value)?(r=e,n=a.StrictFunctionName):A(e.value)&&(r=e,n=a.StrictReservedWord)),l=(o=Ce(r)).params,t=o.stricted,r=o.firstRestricted,o.message&&(n=o.message),s=p,i=ke(),p&&r&&V(r,n),p&&t&&X(t,n),p=s,m.markEnd(m.createFunctionExpression(u,l,[],i),c)}();Z("this")?(z(),n=m.createThisExpression()):K(z())}else e===t.BooleanLiteral?((r=z()).value="true"===r.value,n=m.createLiteral(r)):e===t.NullLiteral?((r=z()).value=null,n=m.createLiteral(r)):Q("/")||Q("/=")?(n=void 0!==v.tokens?m.createLiteral(B()):m.createLiteral(L()),$()):K(z());return m.markEnd(n,s)}function ae(){var e=[];if(W("("),!Q(")"))for(;l<f&&(e.push(me()),!Q(")"));)W(",");return W(")"),e}function se(){var e,r;return r=y,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=z())||K(e),m.markEnd(m.createIdentifier(e.value),r)}function ce(){return W("."),se()}function ue(){var e;return W("["),e=ye(),W("]"),e}function pe(){var e,t,r;return r=y,Y("new"),e=function(){var e,t,r,n;for(n=y,e=g.allowIn,t=Z("new")?pe():ie(),g.allowIn=e;Q(".")||Q("[");)Q("[")?(r=ue(),t=m.createMemberExpression("[",t,r)):(r=ce(),t=m.createMemberExpression(".",t,r)),m.markEnd(t,n);return t}(),t=Q("(")?ae():[],m.markEnd(m.createNewExpression(e,t),r)}function le(){var e,r,n=y;return e=function(){var e,t,r,n,o;for(o=y,e=g.allowIn,g.allowIn=!0,t=Z("new")?pe():ie(),g.allowIn=e;;){if(Q("."))n=ce(),t=m.createMemberExpression(".",t,n);else if(Q("("))r=ae(),t=m.createCallExpression(t,r);else{if(!Q("["))break;n=ue(),t=m.createMemberExpression("[",t,n)}m.markEnd(t,o)}return t}(),y.type===t.Punctuator&&(!Q("++")&&!Q("--")||H()||(p&&e.type===o.Identifier&&P(e.name)&&X({},a.StrictLHSPostfix),te(e)||X({},a.InvalidLHSInAssignment),r=z(),e=m.markEnd(m.createPostfixExpression(r.value,e),n))),e}function de(){var e,r,n;return y.type!==t.Punctuator&&y.type!==t.Keyword?r=le():Q("++")||Q("--")?(n=y,e=z(),r=de(),p&&r.type===o.Identifier&&P(r.name)&&X({},a.StrictLHSPrefix),te(r)||X({},a.InvalidLHSInAssignment),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Q("+")||Q("-")||Q("~")||Q("!")?(n=y,e=z(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Z("delete")||Z("void")||Z("typeof")?(n=y,e=z(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n),p&&"delete"===r.operator&&r.argument.type===o.Identifier&&X({},a.StrictDelete)):r=le(),r}function he(e,r){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function fe(){var e,t,r,n,o;return o=y,e=function(){var e,t,r,n,o,i,a,s,c,u;if(e=y,c=de(),0===(o=he(n=y,g.allowIn)))return c;for(n.prec=o,z(),t=[e,y],i=[c,n,a=de()];(o=he(y,g.allowIn))>0;){for(;i.length>2&&o<=i[i.length-2].prec;)a=i.pop(),s=i.pop().value,c=i.pop(),r=m.createBinaryExpression(s,c,a),t.pop(),e=t[t.length-1],m.markEnd(r,e),i.push(r);(n=z()).prec=o,i.push(n),t.push(y),r=de(),i.push(r)}for(r=i[u=i.length-1],t.pop();u>1;)r=m.createBinaryExpression(i[u-1].value,i[u-2],r),u-=2,e=t.pop(),m.markEnd(r,e);return r}(),Q("?")&&(z(),t=g.allowIn,g.allowIn=!0,r=me(),g.allowIn=t,W(":"),n=me(),e=m.createConditionalExpression(e,r,n),m.markEnd(e,o)),e}function me(){var e,r,n,i,s,c;return e=y,s=y,i=r=fe(),y.type!==t.Punctuator||"="!==(c=y.value)&&"*="!==c&&"/="!==c&&"%="!==c&&"+="!==c&&"-="!==c&&"<<="!==c&&">>="!==c&&">>>="!==c&&"&="!==c&&"^="!==c&&"|="!==c||(te(r)||X({},a.InvalidLHSInAssignment),p&&r.type===o.Identifier&&P(r.name)&&X(e,a.StrictLHSAssignment),e=z(),n=me(),i=m.markEnd(m.createAssignmentExpression(e.value,r,n),s)),i}function ye(){var e,t=y;if(e=me(),Q(",")){for(e=m.createSequenceExpression([e]);l<f&&Q(",");)z(),e.expressions.push(me());m.markEnd(e,t)}return e}function ge(){var e,t;return t=y,W("{"),e=function(){for(var e,t=[];l<f&&!Q("}")&&void 0!==(e=Pe());)t.push(e);return t}(),W("}"),m.markEnd(m.createBlockStatement(e),t)}function ve(){var e,r;return r=y,(e=z()).type!==t.Identifier&&K(e),m.markEnd(m.createIdentifier(e.value),r)}function be(e){var t,r,n=null;return r=y,t=ve(),p&&P(t.name)&&X({},a.StrictVarName),"const"===e?(W("="),n=me()):Q("=")&&(z(),n=me()),m.markEnd(m.createVariableDeclarator(t,n),r)}function we(e){var t=[];do{if(t.push(be(e)),!Q(","))break;z()}while(l<f);return t}function xe(){var e,t,r,n,o,i,s,c,u,p;return e=t=r=null,Y("for"),W("("),Q(";")?z():(Z("var")||Z("let")?(g.allowIn=!1,p=y,c=z(),u=we(),e=m.markEnd(m.createVariableDeclaration(u,c.value),p),g.allowIn=!0,1===e.declarations.length&&Z("in")&&(z(),n=e,o=ye(),e=null)):(g.allowIn=!1,e=ye(),g.allowIn=!0,Z("in")&&(te(e)||X({},a.InvalidLHSInForIn),z(),n=e,o=ye(),e=null)),void 0===n&&W(";")),void 0===n&&(Q(";")||(t=ye()),W(";"),Q(")")||(r=ye())),W(")"),s=g.inIteration,g.inIteration=!0,i=Se(),g.inIteration=s,void 0===n?m.createForStatement(e,t,r,i):m.createForInStatement(n,o,i)}function Ee(){var e,t,r,n=[];for(r=y,Z("default")?(z(),e=null):(Y("case"),e=ye()),W(":");l<f&&!(Q("}")||Z("default")||Z("case"));)t=Se(),n.push(t);return m.markEnd(m.createSwitchCase(e,n),r)}function _e(){var e,t,r,n,o=[],i=null;return Y("try"),e=ge(),Z("catch")&&o.push((n=y,Y("catch"),W("("),Q(")")&&K(y),t=ve(),p&&P(t.name)&&X({},a.StrictCatchVariable),W(")"),r=ge(),m.markEnd(m.createCatchClause(t,r),n))),Z("finally")&&(z(),i=ge()),0!==o.length||i||V({},a.NoCatchOrFinally),m.createTryStatement(e,[],o,i)}function Se(){var e,r,n,i,s,c,d,h,v,b=y.type;if(b===t.EOF&&K(y),b===t.Punctuator&&"{"===y.value)return ge();if(i=y,b===t.Punctuator)switch(y.value){case";":return m.markEnd((W(";"),m.createEmptyStatement()),i);case"(":return m.markEnd(function(){var e=ye();return ee(),m.createExpressionStatement(e)}(),i)}if(b===t.Keyword)switch(y.value){case"break":return m.markEnd(function(){var e,r=null;return Y("break"),59===u.charCodeAt(l)?(z(),g.inIteration||g.inSwitch||V({},a.IllegalBreak),m.createBreakStatement(null)):H()?(g.inIteration||g.inSwitch||V({},a.IllegalBreak),m.createBreakStatement(null)):(y.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(g.labelSet,e)||V({},a.UnknownLabel,r.name)),ee(),null!==r||g.inIteration||g.inSwitch||V({},a.IllegalBreak),m.createBreakStatement(r))}(),i);case"continue":return m.markEnd(function(){var e,r=null;return Y("continue"),59===u.charCodeAt(l)?(z(),g.inIteration||V({},a.IllegalContinue),m.createContinueStatement(null)):H()?(g.inIteration||V({},a.IllegalContinue),m.createContinueStatement(null)):(y.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(g.labelSet,e)||V({},a.UnknownLabel,r.name)),ee(),null!==r||g.inIteration||V({},a.IllegalContinue),m.createContinueStatement(r))}(),i);case"debugger":return m.markEnd((Y("debugger"),ee(),m.createDebuggerStatement()),i);case"do":return m.markEnd((Y("do"),v=g.inIteration,g.inIteration=!0,d=Se(),g.inIteration=v,Y("while"),W("("),h=ye(),W(")"),Q(";")&&z(),m.createDoWhileStatement(d,h)),i);case"for":return m.markEnd(xe(),i);case"function":return m.markEnd(Ae(),i);case"if":return m.markEnd(function(){var e,t,r;return Y("if"),W("("),e=ye(),W(")"),t=Se(),Z("else")?(z(),r=Se()):r=null,m.createIfStatement(e,t,r)}(),i);case"return":return m.markEnd((c=null,Y("return"),g.inFunctionBody||X({},a.IllegalReturn),32===u.charCodeAt(l)&&k(u.charCodeAt(l+1))?(c=ye(),ee(),m.createReturnStatement(c)):H()?m.createReturnStatement(null):(Q(";")||Q("}")||y.type===t.EOF||(c=ye()),ee(),m.createReturnStatement(c))),i);case"switch":return m.markEnd(function(){var e,t,r,n,o;if(Y("switch"),W("("),e=ye(),W(")"),W("{"),t=[],Q("}"))return z(),m.createSwitchStatement(e,t);for(n=g.inSwitch,g.inSwitch=!0,o=!1;l<f&&!Q("}");)null===(r=Ee()).test&&(o&&V({},a.MultipleDefaultsInSwitch),o=!0),t.push(r);return g.inSwitch=n,W("}"),m.createSwitchStatement(e,t)}(),i);case"throw":return m.markEnd(function(){var e;return Y("throw"),H()&&V({},a.NewlineAfterThrow),e=ye(),ee(),m.createThrowStatement(e)}(),i);case"try":return m.markEnd(_e(),i);case"var":return m.markEnd((Y("var"),s=we(),ee(),m.createVariableDeclaration(s,"var")),i);case"while":return m.markEnd(function(){var e,t,r;return Y("while"),W("("),e=ye(),W(")"),r=g.inIteration,g.inIteration=!0,t=Se(),g.inIteration=r,m.createWhileStatement(e,t)}(),i);case"with":return m.markEnd(function(){var e,t;return p&&(F(),X({},a.StrictModeWith)),Y("with"),W("("),e=ye(),W(")"),t=Se(),m.createWithStatement(e,t)}(),i)}return(e=ye()).type===o.Identifier&&Q(":")?(z(),n="$"+e.name,Object.prototype.hasOwnProperty.call(g.labelSet,n)&&V({},a.Redeclaration,"Label",e.name),g.labelSet[n]=!0,r=Se(),delete g.labelSet[n],m.markEnd(m.createLabeledStatement(e,r),i)):(ee(),m.markEnd(m.createExpressionStatement(e),i))}function ke(){var e,r,n,i,s,c,d,h,v=[];for(h=y,W("{");l<f&&y.type===t.StringLiteral&&(r=y,e=Pe(),v.push(e),e.expression.type===o.Literal);)"use strict"===u.slice(r.start+1,r.end-1)?(p=!0,n&&X(n,a.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(i=g.labelSet,s=g.inIteration,c=g.inSwitch,d=g.inFunctionBody,g.labelSet={},g.inIteration=!1,g.inSwitch=!1,g.inFunctionBody=!0;l<f&&!Q("}")&&void 0!==(e=Pe());)v.push(e);return W("}"),g.labelSet=i,g.inIteration=s,g.inSwitch=c,g.inFunctionBody=d,m.markEnd(m.createBlockStatement(v),h)}function Ce(e){var t,r,n,o,i,s,c=[];if(W("("),!Q(")"))for(o={};l<f&&(r=y,t=ve(),i="$"+r.value,p?(P(r.value)&&(n=r,s=a.StrictParamName),Object.prototype.hasOwnProperty.call(o,i)&&(n=r,s=a.StrictParamDupe)):e||(P(r.value)?(e=r,s=a.StrictParamName):A(r.value)?(e=r,s=a.StrictReservedWord):Object.prototype.hasOwnProperty.call(o,i)&&(e=r,s=a.StrictParamDupe)),c.push(t),o[i]=!0,!Q(")"));)W(",");return W(")"),{params:c,stricted:n,firstRestricted:e,message:s}}function Ae(){var e,t,r,n,o,i,s,c,u,l;return l=y,Y("function"),n=y,e=ve(),p?P(n.value)&&X(n,a.StrictFunctionName):P(n.value)?(s=n,c=a.StrictFunctionName):A(n.value)&&(s=n,c=a.StrictReservedWord),t=(i=Ce(s)).params,o=i.stricted,s=i.firstRestricted,i.message&&(c=i.message),u=p,r=ke(),p&&s&&V(s,c),p&&o&&X(o,c),p=u,m.markEnd(m.createFunctionDeclaration(e,t,[],r),l)}function Pe(){if(y.type===t.Keyword)switch(y.value){case"const":case"let":return e=y.value,n=y,Y(e),r=we(e),ee(),m.markEnd(m.createVariableDeclaration(r,e),n);case"function":return Ae();default:return Se()}var e,r,n;if(y.type!==t.EOF)return Se()}function De(){var e,r;return F(),$(),r=y,p=!1,e=function(){for(var e,r,n,i=[];l<f&&(r=y).type===t.StringLiteral&&(e=Pe(),i.push(e),e.expression.type===o.Literal);)"use strict"===u.slice(r.start+1,r.end-1)?(p=!0,n&&X(n,a.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;l<f&&void 0!==(e=Pe());)i.push(e);return i}(),m.markEnd(m.createProgram(e),r)}function Oe(){var e,t,r,n=[];for(e=0;e<v.tokens.length;++e)r={type:(t=v.tokens[e]).type,value:t.value},v.range&&(r.range=t.range),v.loc&&(r.loc=t.loc),n.push(r);v.tokens=n}(r={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",r[t.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],o={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},a={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},c={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===o.Program&&e.body.length>0)){for(v.trailingComments.length>0?v.trailingComments[0].range[0]>=e.range[1]?(r=v.trailingComments,v.trailingComments=[]):v.trailingComments.length=0:v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=v.bottomRightStack[v.bottomRightStack.length-1].trailingComments,delete v.bottomRightStack[v.bottomRightStack.length-1].trailingComments);v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].range[0]>=e.range[0];)t=v.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):v.leadingComments.length>0&&v.leadingComments[v.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=v.leadingComments,v.leadingComments=[]),r&&(e.trailingComments=r),v.bottomRightStack.push(e)}},markEnd:function(e,t){return v.range&&(e.range=[t.start,l]),v.loc&&(e.loc=new J(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,l-h),this.postProcess(e)),v.attachComment&&this.processComment(e),e},postProcess:function(e){return v.source&&(e.loc.source=v.source),e},createArrayExpression:function(e){return{type:o.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:o.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?o.LogicalExpression:o.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:o.BlockStatement,body:e}},createBreakStatement:function(e){return{type:o.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:o.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:o.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:o.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:o.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:o.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:o.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:o.EmptyStatement}},createExpressionStatement:function(e){return{type:o.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:o.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:o.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:o.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:o.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:o.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:o.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:o.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:o.Literal,value:e.value,raw:u.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:o.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:o.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:o.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:o.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:o.Program,body:e}},createProperty:function(e,t,r){return{type:o.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:o.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:o.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:o.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:o.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:o.ThisExpression}},createThrowStatement:function(e){return{type:o.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:o.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:o.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:o.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:o.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:o.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:o.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:o.WithStatement,object:e,body:t}}},e.version="1.2.2",e.tokenize=function(e,r){var n;"string"==typeof e||e instanceof String||(e=String(e)),m=c,l=0,d=(u=e).length>0?1:0,h=0,f=u.length,y=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},(r=r||{}).tokens=!0,v.tokens=[],v.tokenize=!0,v.openParenToken=-1,v.openCurlyToken=-1,v.range="boolean"==typeof r.range&&r.range,v.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(v.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(v.errors=[]);try{if($(),y.type===t.EOF)return v.tokens;for(z();y.type!==t.EOF;)try{z()}catch(e){if(v.errors){v.errors.push(e);break}throw e}Oe(),n=v.tokens,void 0!==v.comments&&(n.comments=v.comments),void 0!==v.errors&&(n.errors=v.errors)}catch(e){throw e}finally{v={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=c,l=0,d=(u=e).length>0?1:0,h=0,f=u.length,y=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},void 0!==t&&(v.range="boolean"==typeof t.range&&t.range,v.loc="boolean"==typeof t.loc&&t.loc,v.attachComment="boolean"==typeof t.attachComment&&t.attachComment,v.loc&&null!==t.source&&void 0!==t.source&&(v.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(v.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(v.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(v.errors=[]),v.attachComment&&(v.range=!0,v.comments=[],v.bottomRightStack=[],v.trailingComments=[],v.leadingComments=[]));try{r=De(),void 0!==v.comments&&(r.comments=v.comments),void 0!==v.tokens&&(Oe(),r.tokens=v.tokens),void 0!==v.errors&&(r.errors=v.errors)}catch(e){throw e}finally{v={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),o)o.hasOwnProperty(e)&&(t[e]=o[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()}(void 0!==r?r:e.esprima={})}(this)},{}],1:[function(e,t,r){(function(n){var o=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(e,r,n,o,i,a,s){o.ast||(o.ast=t,t.initialize());var c=a.length-1;switch(i){case 1:return o.ast.set({expression:{type:"root",value:a[c]}}),o.ast.unshift(),o.ast.yield();case 2:return o.ast.set({expression:{type:"root",value:a[c-1]}}),o.ast.unshift(),o.ast.yield();case 3:return o.ast.unshift(),o.ast.yield();case 4:return o.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:a[c-1]}}),o.ast.unshift(),o.ast.yield();case 5:case 6:break;case 7:o.ast.set({operation:"member"}),o.ast.push();break;case 8:o.ast.set({operation:"subscript"}),o.ast.push();break;case 9:o.ast.set({scope:"child"});break;case 10:o.ast.set({scope:"descendant"});break;case 11:break;case 12:o.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:o.ast.set({expression:{type:"wildcard",value:a[c]}});break;case 15:o.ast.set({expression:{type:"identifier",value:a[c]}});break;case 16:o.ast.set({expression:{type:"script_expression",value:a[c]}});break;case 17:o.ast.set({expression:{type:"numeric_literal",value:parseInt(a[c])}});break;case 18:break;case 19:o.ast.set({scope:"child"});break;case 20:o.ast.set({scope:"descendant"});break;case 21:case 22:case 23:break;case 24:a[c].length>1?o.ast.set({expression:{type:"union",value:a[c]}}):this.$=a[c];break;case 25:this.$=[a[c]];break;case 26:this.$=a[c-2].concat(a[c]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(a[c])}},o.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:a[c]}},o.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:a[c]}},o.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:a[c]}},o.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:a[c]}},o.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:a[c]}},o.ast.set(this.$);break;case 33:case 34:this.$=a[c]}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,a="",s=0,c=0,u=0,p=2,l=1,d=o.slice.call(arguments,1);this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;function m(){var e;return"number"!=typeof(e=t.lexer.lex()||l)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,g,v,b,w,x,E,_,S,k={};;){if(v=r[r.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null==y&&(y=m()),b=i[v]&&i[v][y]),void 0===b||!b.length||!b[0]){var C="";for(x in S=[],i[v])this.terminals_[x]&&x>p&&S.push("'"+this.terminals_[x]+"'");C=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(y==l?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[y]||y,line:this.lexer.yylineno,loc:h,expected:S})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+y);switch(b[0]){case 1:r.push(y),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(b[1]),y=null,g?(y=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(E=this.productions_[b[1]][1],k.$=n[n.length-E],k._$={first_line:o[o.length-(E||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(E||1)].first_column,last_column:o[o.length-1].last_column},f&&(k._$.range=[o[o.length-(E||1)].range[0],o[o.length-1].range[1]]),void 0!==(w=this.performAction.apply(k,[a,c,s,this.yy,b[1],n,o].concat(d))))return w;E&&(r=r.slice(0,-1*E*2),n=n.slice(0,-1*E),o=o.slice(0,-1*E)),r.push(this.productions_[b[1]][0]),n.push(k.$),o.push(k._$),_=i[r[r.length-2]][r[r.length-1]],r.push(_);break;case 3:return!0}}return!0}},t={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(e){for(var t in e)this._node[t]=e[t];return this._node},node:function(e){return arguments.length&&(this._node=e),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var e=this._nodes;return this.initialize(),e}},r={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((r=this._input.match(this.rules[o[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,o[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,o[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return t.yytext=t.yytext.substr(1,t.yyleng-2),32;case 11:return t.yytext=t.yytext.substr(1,t.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function n(){this.yy={}}return e.lexer=r,n.prototype=e,e.Parser=n,new n}();void 0!==e&&void 0!==r&&(r.parser=o,r.Parser=o.Parser,r.parse=function(){return o.parse.apply(o,arguments)},r.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),n.exit(1));var o=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return r.parser.parse(o)},void 0!==t&&e.main===t&&r.main(n.argv.slice(1)))}).call(this,e("_process"))},{_process:14,fs:12,path:13}],2:[function(e,t,r){t.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(e,t,r){var n=e("./dict"),o=e("fs"),i={lex:{macros:{esc:"\\\\",int:n.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[n.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[n.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[n.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};o.readFileSync&&(i.moduleInclude=o.readFileSync(e.resolve("../include/module.js")),i.actionInclude=o.readFileSync(e.resolve("../include/action.js"))),t.exports=i},{"./dict":2,fs:12}],4:[function(e,t,r){var n=e("./aesprim"),o=e("./slice"),i=e("static-eval"),a=e("underscore").uniq,s=function(){return this.initialize.apply(this,arguments)};function c(t,r,o){var i=e("./index"),a=h(n.parse(r).body[0].expression,{"@":t.value}),s=o.replace(/\{\{\s*value\s*\}\}/g,a),c=i.nodes(t.value,s);return c.forEach((function(e){e.path=t.path.concat(e.path.slice(1))})),c}function u(e){return Array.isArray(e)}function p(e){return function(t,r,n,o){var i=t.value,a=t.path,s=[],c=function(t,i){var a;u(t)?(t.forEach((function(e,t){s.length>=o||n(t,e,r)&&s.push({path:i.concat(t),value:e})})),t.forEach((function(t,r){s.length>=o||e&&c(t,i.concat(r))}))):(a=t)&&!(a instanceof Array)&&a instanceof Object&&(this.keys(t).forEach((function(e){s.length>=o||n(e,t[e],r)&&s.push({path:i.concat(e),value:t[e]})})),this.keys(t).forEach((function(r){s.length>=o||e&&c(t[r],i.concat(r))})))}.bind(this);return c(i,a),s}}function l(e){return function(t,r,n){return this.descend(r,t.expression.value,e,n)}}function d(e){return function(t,r,n){return this.traverse(r,t.expression.value,e,n)}}function h(){try{return i.apply(this,arguments)}catch(e){}}function f(e){return e=e.filter((function(e){return e})),a(e,(function(e){return e.path.map((function(e){return String(e).replace("-","--")})).join("-")}))}function m(e){var t=String(e);return t.match(/^-?[0-9]+$/)?parseInt(t):null}s.prototype.initialize=function(){this.traverse=p(!0),this.descend=p()},s.prototype.keys=Object.keys,s.prototype.resolve=function(e){var t=[e.operation,e.scope,e.expression.type].join("-"),r=this._fns[t];if(!r)throw new Error("couldn't resolve key: "+t);return r.bind(this)},s.prototype.register=function(e,t){if(!t instanceof Function)throw new Error("handler must be a function");this._fns[e]=t},s.prototype._fns={"member-child-identifier":function(e,t){var r=e.expression.value,n=t.value;if(n instanceof Object&&r in n)return[{value:n[r],path:t.path.concat(r)}]},"member-descendant-identifier":d((function(e,t,r){return e==r})),"subscript-child-numeric_literal":l((function(e,t,r){return e===r})),"member-child-numeric_literal":l((function(e,t,r){return String(e)===String(r)})),"subscript-descendant-numeric_literal":d((function(e,t,r){return e===r})),"member-child-wildcard":l((function(){return!0})),"member-descendant-wildcard":d((function(){return!0})),"subscript-descendant-wildcard":d((function(){return!0})),"subscript-child-wildcard":l((function(){return!0})),"subscript-child-slice":function(e,t){if(u(t.value)){var r=e.expression.value.split(":").map(m),n=t.value.map((function(e,r){return{value:e,path:t.path.concat(r)}}));return o.apply(null,[n].concat(r))}},"subscript-child-union":function(e,t){var r=[];return e.expression.value.forEach((function(e){var n={operation:"subscript",scope:"child",expression:e.expression},o=this.resolve(n)(n,t);o&&(r=r.concat(o))}),this),f(r)},"subscript-descendant-union":function(t,r,n){var o=e(".."),i=this,a=[];return o.nodes(r,"$..*").slice(1).forEach((function(e){a.length>=n||t.expression.value.forEach((function(t){var r={operation:"subscript",scope:"child",expression:t.expression},n=i.resolve(r)(r,e);a=a.concat(n)}))})),f(a)},"subscript-child-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.descend(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-descendant-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.traverse(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$[{{value}}]")},"member-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$.{{value}}")},"member-descendant-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$..value")}},s.prototype._fns["subscript-child-string_literal"]=s.prototype._fns["member-child-identifier"],s.prototype._fns["member-descendant-numeric_literal"]=s.prototype._fns["subscript-descendant-string_literal"]=s.prototype._fns["member-descendant-identifier"],t.exports=s},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"static-eval":15,underscore:12}],5:[function(e,t,r){var n=e("assert"),o=e("./dict"),i=e("./parser"),a=e("./handlers"),c=function(){this.initialize.apply(this,arguments)};function u(e){return"[object String]"==Object.prototype.toString.call(e)}c.prototype.initialize=function(){this.parser=new i,this.handlers=new a},c.prototype.parse=function(e){return n.ok(u(e),"we need a path"),this.parser.parse(e)},c.prototype.parent=function(e,t){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path");var r=this.nodes(e,t)[0];return r.path.pop(),this.value(e,r.path)},c.prototype.apply=function(e,t,r){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),n.equal(s(r),"function","fn needs to be function");var o=this.nodes(e,t).sort((function(e,t){return t.path.length-e.path.length}));return o.forEach((function(t){var n=t.path.pop(),o=this.value(e,this.stringify(t.path)),i=t.value=r.call(e,o[n]);o[n]=i}),this),o},c.prototype.value=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),arguments.length>=3){var o=this.nodes(e,t).shift();if(!o)return this._vivify(e,t,r);var i=o.path.slice(-1).shift(),a=this.parent(e,this.stringify(o.path));a[i]=r}return this.query(e,this.stringify(t),1).shift()},c.prototype._vivify=function(e,t,r){var o=this;return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),function t(r,n){var i=r.pop(),a=o.value(e,r);a||(t(r.concat(),"string"==typeof i?{}:[]),a=o.value(e,r)),a[i]=n}(this.parser.parse(t).map((function(e){return e.expression.value})),r),this.query(e,t)[0]},c.prototype.query=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(u(t),"we need a path"),this.nodes(e,t,r).map((function(e){return e.value}))},c.prototype.paths=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),this.nodes(e,t,r).map((function(e){return e.path}))},c.prototype.nodes=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),0===r)return[];var o=this.parser.parse(t),i=this.handlers,a=[{path:["$"],value:e}],s=[];return o.length&&"root"==o[0].expression.type&&o.shift(),o.length?(o.forEach((function(e,t){if(!(s.length>=r)){var n=i.resolve(e),c=[];a.forEach((function(i){if(!(s.length>=r)){var a=n(e,i,r);t==o.length-1?s=s.concat(a||[]):c=c.concat(a||[])}})),a=c}})),r?s.slice(0,r):s):a},c.prototype.stringify=function(e){n.ok(e,"we need a path");var t="$",r={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return(e=this._normalize(e)).forEach((function(e){if("root"!=e.expression.type){var n,o=[e.scope,e.operation].join("-"),i=r[o];if(n="string_literal"==e.expression.type?JSON.stringify(e.expression.value):e.expression.value,!i)throw new Error("couldn't find template "+o);t+=i.replace(/{{value}}/,n)}})),t},c.prototype._normalize=function(e){if(n.ok(e,"we need a path"),"string"==typeof e)return this.parser.parse(e);if(Array.isArray(e)&&"string"==typeof e[0]){var t=[{expression:{type:"root",value:"$"}}];return e.forEach((function(e,r){if("$"!=e||0!==r)if("string"==typeof e&&e.match("^"+o.identifier+"$"))t.push({operation:"member",scope:"child",expression:{value:e,type:"identifier"}});else{var n="number"==typeof e?"numeric_literal":"string_literal";t.push({operation:"subscript",scope:"child",expression:{value:e,type:n}})}})),t}if(Array.isArray(e)&&"object"==s(e[0]))return e;throw new Error("couldn't understand path "+e)},c.Handlers=a,c.Parser=i;var p=new c;p.JSONPath=c,t.exports=p},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(e,t,r){var n=e("./grammar"),o=e("../generated/parser"),i=function(){var e=new o.Parser,t=e.parseError;return e.yy.parseError=function(){e.yy.ast&&e.yy.ast.initialize(),t.apply(e,arguments)},e};i.grammar=n,t.exports=i},{"../generated/parser":1,"./grammar":3}],7:[function(e,t,r){function n(e){return String(e).match(/^[0-9]+$/)?parseInt(e):Number.isFinite(e)?parseInt(e,10):0}t.exports=function(e,t,r,o){if("string"==typeof t)throw new Error("start cannot be a string");if("string"==typeof r)throw new Error("end cannot be a string");if("string"==typeof o)throw new Error("step cannot be a string");var i=e.length;if(0===o)throw new Error("step cannot be zero");if(o=o?n(o):1,r=r<0?i+r:r,t=n(0===(t=t<0?i+t:t)?0:t||(o>0?0:i-1)),r=n(0===r?0:r||(o>0?i:-1)),t=o>0?Math.max(0,t):Math.min(i,t),r=o>0?Math.min(r,i):Math.max(-1,r),o>0&&r<=t)return[];if(o<0&&t<=r)return[];for(var a=[],s=t;s!=r&&!(o<0&&s<=r||o>0&&s>=r);s+=o)a.push(e[s]);return a}},{}],8:[function(e,t,r){var n=e("util/"),o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,a=t.exports=p;function s(e,t){return n.isUndefined(t)?""+t:n.isNumber(t)&&!isFinite(t)||n.isFunction(t)||n.isRegExp(t)?t.toString():t}function c(e,t){return n.isString(e)?e.length<t?e:e.slice(0,t):e}function u(e,t,r,n,o){throw new a.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function p(e,t){e||u(e,!0,t,"==",a.ok)}function l(e,t){if(e===t)return!0;if(n.isBuffer(e)&&n.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return n.isDate(e)&&n.isDate(t)?e.getTime()===t.getTime():n.isRegExp(e)&&n.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:n.isObject(e)||n.isObject(t)?function(e,t){if(n.isNullOrUndefined(e)||n.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;var r=d(e),i=d(t);if(r&&!i||!r&&i)return!1;if(r)return l(e=o.call(e),t=o.call(t));var a,s,c=m(e),u=m(t);if(c.length!=u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!=u[s])return!1;for(s=c.length-1;s>=0;s--)if(!l(e[a=c[s]],t[a]))return!1;return!0}(e,t):e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function f(e,t,r,o){var i;n.isString(r)&&(o=r,r=null);try{t()}catch(e){i=e}if(o=(r&&r.name?" ("+r.name+").":".")+(o?" "+o:"."),e&&!i&&u(i,r,"Missing expected exception"+o),!e&&h(i,r)&&u(i,r,"Got unwanted exception"+o),e&&i&&r&&!h(i,r)||!e&&i)throw i}a.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return c(JSON.stringify(e.actual,s),128)+" "+e.operator+" "+c(JSON.stringify(e.expected,s),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=t.name,i=n.indexOf("\n"+o);if(i>=0){var a=n.indexOf("\n",i+1);n=n.substring(a+1)}this.stack=n}}},n.inherits(a.AssertionError,Error),a.fail=u,a.ok=p,a.equal=function(e,t,r){e!=t&&u(e,t,r,"==",a.equal)},a.notEqual=function(e,t,r){e==t&&u(e,t,r,"!=",a.notEqual)},a.deepEqual=function(e,t,r){l(e,t)||u(e,t,r,"deepEqual",a.deepEqual)},a.notDeepEqual=function(e,t,r){l(e,t)&&u(e,t,r,"notDeepEqual",a.notDeepEqual)},a.strictEqual=function(e,t,r){e!==t&&u(e,t,r,"===",a.strictEqual)},a.notStrictEqual=function(e,t,r){e===t&&u(e,t,r,"!==",a.notStrictEqual)},a.throws=function(e,t,r){f.apply(this,[!0].concat(o.call(arguments)))},a.doesNotThrow=function(e,t){f.apply(this,[!1].concat(o.call(arguments)))},a.ifError=function(e){if(e)throw e};var m=Object.keys||function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t}},{"util/":11}],9:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],10:[function(e,t,r){t.exports=function(e){return e&&"object"===s(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],11:[function(e,t,n){(function(t,r){var o=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])y(s)||!x(s)?a+=" "+s:a+=" "+c(s);return a},n.deprecate=function(e,o){if(b(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,a={};function c(e,t){var r={seen:[],stylize:p};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function p(e,t){return e}function l(e,t,r){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return v(o)||(o=l(e,o,r)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var a=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(t);if(0===a.length){if(S(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return d(t)}var u,p="",x=!1,k=["{","}"];return f(t)&&(x=!0,k=["[","]"]),S(t)&&(p=" [Function"+(t.name?": "+t.name:"")+"]"),w(t)&&(p=" "+RegExp.prototype.toString.call(t)),E(t)&&(p=" "+Date.prototype.toUTCString.call(t)),_(t)&&(p=" "+d(t)),0!==a.length||x&&0!=t.length?r<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=x?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)D(t,String(a))?i.push(h(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(e,t,r,n,o,!0))})),i}(e,t,r,s,a):a.map((function(n){return h(e,t,r,s,n,x)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,p,k)):k[0]+p+k[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),D(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=y(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return x(e)&&"[object RegExp]"===k(e)}function x(e){return"object"===s(e)&&null!==e}function E(e){return x(e)&&"[object Date]"===k(e)}function _(e){return x(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(b(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;a[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},n.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=function(e){return null==e},n.isNumber=g,n.isString=v,n.isSymbol=function(e){return"symbol"===s(e)},n.isUndefined=b,n.isRegExp=w,n.isObject=x,n.isDate=E,n.isError=_,n.isFunction=S,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===s(e)||void 0===e},n.isBuffer=e("./support/isBuffer");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":10,_process:14,inherits:9}],12:[function(e,t,r){},{}],13:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,o="/"===a.charAt(0))}return(o?"/":"")+(r=t(n(r.split("/"),(function(e){return!!e})),!o).join("/"))||"."},r.normalize=function(e){var i=r.isAbsolute(e),a="/"===o(e,-1);return(e=t(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),a=Math.min(o.length,i.length),s=a,c=0;c<a;c++)if(o[c]!==i[c]){s=c;break}var u=[];for(c=s;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},r.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===n&&(o=!1,n=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=a+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o=function(e,t,r){return e.substr(t,r)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,r){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,p=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?p=u.concat(p):d=-1,p.length&&f())}function f(){if(!l){var e=c(h);l=!0;for(var t=p.length;t;){for(u=p,p=[];++d<t;)u&&u[d].run();d=-1,t=p.length}u=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new m(e,t)),1!==p.length||l||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],15:[function(e,t,r){var n=e("escodegen").generate;t.exports=function(e,t){t||(t={});var r={},o=function e(o,i){if("Literal"===o.type)return o.value;if("UnaryExpression"===o.type){var a=e(o.argument);return"+"===o.operator?+a:"-"===o.operator?-a:"~"===o.operator?~a:"!"===o.operator?!a:r}if("ArrayExpression"===o.type){for(var s=[],c=0,u=o.elements.length;c<u;c++){if((g=e(o.elements[c]))===r)return r;s.push(g)}return s}if("ObjectExpression"===o.type){var p={};for(c=0;c<o.properties.length;c++){var l=null===(v=o.properties[c]).value?v.value:e(v.value);if(l===r)return r;p[v.key.value||v.key.name]=l}return p}if("BinaryExpression"===o.type||"LogicalExpression"===o.type){if((u=e(o.left))===r)return r;var d=e(o.right);if(d===r)return r;var h=o.operator;return"=="===h?u==d:"==="===h?u===d:"!="===h?u!=d:"!=="===h?u!==d:"+"===h?u+d:"-"===h?u-d:"*"===h?u*d:"/"===h?u/d:"%"===h?u%d:"<"===h?u<d:"<="===h?u<=d:">"===h?u>d:">="===h?u>=d:"|"===h?u|d:"&"===h?u&d:"^"===h?u^d:"&&"===h?u&&d:"||"===h?u||d:r}if("Identifier"===o.type)return{}.hasOwnProperty.call(t,o.name)?t[o.name]:r;if("ThisExpression"===o.type)return{}.hasOwnProperty.call(t,"this")?t.this:r;if("CallExpression"===o.type){var f=e(o.callee);if(f===r)return r;if("function"!=typeof f)return r;var m=o.callee.object?e(o.callee.object):r;m===r&&(m=null);var y=[];for(c=0,u=o.arguments.length;c<u;c++){var g;if((g=e(o.arguments[c]))===r)return r;y.push(g)}return f.apply(m,y)}var v;if("MemberExpression"===o.type)return(p=e(o.object))===r||"function"==typeof p?r:"Identifier"===o.property.type?p[o.property.name]:(v=e(o.property))===r?r:p[v];if("ConditionalExpression"===o.type)return(a=e(o.test))===r?r:e(a?o.consequent:o.alternate);if("ExpressionStatement"===o.type)return(a=e(o.expression))===r?r:a;if("ReturnStatement"===o.type)return e(o.argument);if("FunctionExpression"===o.type){var b=o.body.body,w={};for(Object.keys(t).forEach((function(e){w[e]=t[e]})),c=0;c<o.params.length;c++){var x=o.params[c];if("Identifier"!=x.type)return r;t[x.name]=null}for(var c in b)if(e(b[c])===r)return r;t=w;var E=Object.keys(t),_=E.map((function(e){return t[e]}));return Function(E.join(", "),"return "+n(o)).apply(null,_)}if("TemplateLiteral"===o.type){var S="";for(c=0;c<o.expressions.length;c++)S+=e(o.quasis[c]),S+=e(o.expressions[c]);return S+e(o.quasis[c])}if("TaggedTemplateExpression"===o.type){var k=e(o.tag),C=o.quasi,A=C.quasis.map(e),P=C.expressions.map(e);return k.apply(null,[A].concat(P))}return"TemplateElement"===o.type?o.value.cooked:r}(e);return o===r?void 0:o}},{escodegen:12}],jsonpath:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")},"object"===s(t)?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},9842:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=1e3,n=60*r,o=60*n,i=24*o;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,s){s=s||{};var c,u,p=t(e);if("string"===p&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===p&&isFinite(e))return s.long?(c=e,(u=Math.abs(c))>=i?a(c,u,i,"day"):u>=o?a(c,u,o,"hour"):u>=n?a(c,u,n,"minute"):u>=r?a(c,u,r,"second"):c+" ms"):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1249:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var r,n="",o=0,i=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){-1===c?(n="",o=0):o=(n=n.slice(0,c)).length-1-n.lastIndexOf("/"),i=s,a=0;continue}}else if(2===n.length||1===n.length){n="",o=0,i=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),o=s-i-1;i=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var o={resolve:function(){for(var e,t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===e&&(e=process.cwd()),a=e),r(a),0!==a.length&&(t=a+"/"+t,o=47===a.charCodeAt(0))}return t=n(t,!o),o?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(r(e),0===e.length)return".";var t=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!t)).length||t||(e="."),e.length>0&&o&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return r(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];r(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":o.normalize(e)},relative:function(e,t){if(r(e),r(t),e===t)return"";if((e=o.resolve(e))===(t=o.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var i=e.length,a=i-n,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var c=t.length-s,u=a<c?a:c,p=-1,l=0;l<=u;++l){if(l===u){if(c>u){if(47===t.charCodeAt(s+l))return t.slice(s+l+1);if(0===l)return t.slice(s+l)}else a>u&&(47===e.charCodeAt(n+l)?p=l:0===l&&(p=0));break}var d=e.charCodeAt(n+l);if(d!==t.charCodeAt(s+l))break;47===d&&(p=l)}var h="";for(l=n+p+1;l<=i;++l)l!==i&&47!==e.charCodeAt(l)||(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(s+p):(s+=p,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(r(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');r(e);var n,o=0,i=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!a){o=n+1;break}}else-1===c&&(a=!1,c=n+1),s>=0&&(u===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=c))}return o===i?i=c:-1===i&&(i=e.length),e.slice(o,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){o=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?"":e.slice(o,i)},extname:function(e){r(e);for(var t=-1,n=0,o=-1,i=!0,a=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===o&&(i=!1,o=s+1),46===c?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=s+1;break}}return-1===t||-1===o||0===a||1===a&&t===o-1&&t===n+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!==t(e))throw new TypeError('The "pathObject" argument must be of type Object. Received type '+t(e));return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){r(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,o=e.charCodeAt(0),i=47===o;i?(t.root="/",n=1):n=0;for(var a=-1,s=0,c=-1,u=!0,p=e.length-1,l=0;p>=n;--p)if(47!==(o=e.charCodeAt(p)))-1===c&&(u=!1,c=p+1),46===o?-1===a?a=p:1!==l&&(l=1):-1!==a&&(l=-1);else if(!u){s=p+1;break}return-1===a||-1===c||0===l||1===l&&a===c-1&&a===s+1?-1!==c&&(t.base=t.name=0===s&&i?e.slice(1,c):e.slice(s,c)):(0===s&&i?(t.name=e.slice(1,a),t.base=e.slice(1,c)):(t.name=e.slice(s,a),t.base=e.slice(s,c)),t.ext=e.slice(a,c)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o},4306:e=>{"use strict";function t(e,t){return null!=e&&t in Object(e)}function r(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function n(e,t,r){var n=e,o=null;r=void 0===r?t.length:r;for(var i=0;i<r;i++){var a=t[i];n&&(n=void 0===a.p?n[a.i]:n[a.p],i===r-1&&(o=n))}return o}function o(e,o){var i=r(o),a=i[i.length-1],s={parent:i.length>1?n(e,i,i.length-1):e,name:a.p||a.i,value:n(e,i)};return s.exists=t(s.parent,s.name),s}e.exports={hasProperty:t,getPathInfo:o,getPathValue:function(e,t){return o(e,t).value},setPathValue:function(e,t,n){return function(e,t,r){for(var n=e,o=r.length,i=null,a=0;a<o;a++){var s=null,c=null;if(i=r[a],a===o-1)n[s=void 0===i.p?i.i:i.p]=t;else if(void 0!==i.p&&n[i.p])n=n[i.p];else if(void 0!==i.i&&n[i.i])n=n[i.i];else{var u=r[a+1];s=void 0===i.p?i.i:i.p,c=void 0===u.p?[]:{},n[s]=c,n=n[s]}}}(e,n,r(t)),e}}},7807:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,n,o){r=r||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(r);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var p,l,d,h,f=e[u].replace(a,"%20"),m=f.indexOf(n);m>=0?(p=f.substr(0,m),l=f.substr(m+1)):(p=f,l=""),d=decodeURIComponent(p),h=decodeURIComponent(l),t(i,d)?Array.isArray(i[d])?i[d].push(h):i[d]=[i[d],h]:i[d]=h}return i}},6542:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){switch(t(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,o,i){return n=n||"&",o=o||"=",null===e&&(e=void 0),"object"===t(e)?Object.keys(e).map((function(t){var i=encodeURIComponent(r(t))+o;return Array.isArray(e[t])?e[t].map((function(e){return i+encodeURIComponent(r(e))})).join(n):i+encodeURIComponent(r(e[t]))})).join(n):i?encodeURIComponent(r(i))+o+encodeURIComponent(r(e)):""}},6406:(e,t,r)=>{"use strict";t.decode=t.parse=r(7807),t.encode=t.stringify=r(6542)},1582:e=>{var t;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind(globalThis):function(e){return(t||(t=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},2518:(e,t,r)=>{"use strict";var n=65536,o=r(8875).Buffer,i=r.g.crypto||r.g.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>n)for(var a=0;a<e;a+=n)i.getRandomValues(r.slice(a,a+n));else i.getRandomValues(r);return"function"==typeof t?process.nextTick((function(){t(null,r)})):r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},2392:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={};function n(e,t,n){n||(n=Error);var o=function(e){var r,n;function o(r,n,o){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,o))||this}return n=e,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(n);o.prototype.name=n.name,o.prototype.code=e,r[e]=o}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,r,n){var i,a,s,c,u;if("string"==typeof r&&(a="not ",r.substr(0,a.length)===a)?(i="must not be",r=r.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(o(r,"type"));else{var p=("number"!=typeof u&&(u=0),u+".".length>(c=e).length||-1===c.indexOf(".",u)?"argument":"property");s='The "'.concat(e,'" ').concat(p," ").concat(i," ").concat(o(r,"type"))}return s+". Received type ".concat(t(n))}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=r},5059:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var o=r(2262),i=r(5317);r(1842)(u,o);for(var a=n(i.prototype),s=0;s<a.length;s++){var c=a[s];u.prototype[c]||(u.prototype[c]=i.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||process.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5868:(e,t,r)=>{"use strict";e.exports=o;var n=r(3509);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(1842)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},2262:(e,t,r)=>{"use strict";var n;e.exports=S,S.ReadableState=_,r(4092).EventEmitter;var o,i=function(e,t){return e.listeners(t).length},a=r(7626),s=r(3423).Buffer,c=r.g.Uint8Array||function(){},u=r(1758);o=u&&u.debuglog?u.debuglog("stream"):function(){};var p,l,d,h=r(5473),f=r(8340),m=r(5724).getHighWaterMark,y=r(2392).q,g=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1842)(S,a);var x=f.errorOrDestroy,E=["error","close","destroy","pause","resume"];function _(e,t,o){n=n||r(5059),e=e||{},"boolean"!=typeof o&&(o=t instanceof n),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",o),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(4934).s),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function S(e){if(n=n||r(5059),!(this instanceof S))return new S(e);var t=this instanceof n;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function k(e,t,r,n,i){o("readableAddChunk",t);var a,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,u);else if(i||(a=function(e,t){var r,n;return n=t,s.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new g("chunk",["string","Buffer","Uint8Array"],t)),r}(u,t)),a)x(e,a);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)u.endEmitted?x(e,new w):C(e,u,t,!0);else if(u.ended)x(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?C(e,u,t,!1):T(e,u)):C(e,u,t,!1)}else n||(u.reading=!1,T(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),T(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=f.destroy,S.prototype._undestroy=f.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},S.prototype.unshift=function(e){return k(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){p||(p=r(4934).s);var t=new p(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(O,e))}function O(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function T(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(F,e,t))}function F(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){o("readable nexttick read 0"),e.read(0)}function R(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function L(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function q(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):D(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&L(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){x(this,new b("_read()"))},S.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?f:s;function s(){o("onend"),e.end()}n.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",(function t(i,a){o("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("drain",c),e.removeListener("error",l),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",f),r.removeListener("data",p),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,N(e))}}(r);e.on("drain",c);var u=!1;function p(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==q(n.pipes,e))&&!u&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function l(t){o("onerror",t),f(),e.removeListener("error",l),0===i(e,"error")&&x(e,t)}function d(){e.removeListener("finish",h),f()}function h(){o("onfinish"),e.removeListener("close",d),f()}function f(){o("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",l),e.once("close",d),e.once("finish",h),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var a=q(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?D(this):n.reading||process.nextTick(I,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(j,this),r},S.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(j,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(R,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=r(8816)),l(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=M,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===d&&(d=r(2229)),d(S,e,t)})},3509:(e,t,r)=>{"use strict";e.exports=p;var n=r(2392).q,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(5059);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function p(e){if(!(this instanceof p))return new p(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(1842)(p,c),p.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},p.prototype._transform=function(e,t,r){r(new o("_transform()"))},p.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},p.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},p.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},5317:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=S,S.WritableState=_;var i,a={deprecate:r(3327)},s=r(7626),c=r(3423).Buffer,u=r.g.Uint8Array||function(){},p=r(8340),l=r(5724).getHighWaterMark,d=r(2392).q,h=d.ERR_INVALID_ARG_TYPE,f=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,g=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=p.errorOrDestroy;function E(){}function _(e,t,i){o=o||r(5059),e=e||{},"boolean"!=typeof i&&(i=t instanceof o),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=l(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(process.nextTick(o,n),process.nextTick(O,e,t),e._writableState.errorEmitted=!0,x(e,n)):(o(n),e._writableState.errorEmitted=!0,x(e,n),O(e,t))}(e,r,n,t,o);else{var i=P(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),n?process.nextTick(C,e,r,i,o):C(e,r,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(e){var t=this instanceof(o=o||r(5059));if(!t&&!i.call(S,this))return new S(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function k(e,t,r,n,o,i,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var o=t.bufferedRequestCount,i=new Array(o),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,k(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,p=r.encoding,l=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,p,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function D(e,t){e._final((function(r){t.pendingcb--,r&&x(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=P(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(D,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(1842)(S,s),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===S&&e&&e._writableState instanceof _}})):i=function(e){return e instanceof this},S.prototype.pipe=function(){x(this,new y)},S.prototype.write=function(e,t,r){var n,o=this._writableState,i=!1,a=!o.objectMode&&(n=e,c.isBuffer(n)||n instanceof u);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new b;x(e,r),process.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new v:"string"==typeof r||t.objectMode||(o=new h("chunk",["string","Buffer"],r)),!o||(x(e,o),process.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,r,n,o,i){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,s,n,o,i);return u}(this,o,a,e,t,r)),i},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)}},8816:(e,t,r)=>{"use strict";var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(7696),a=Symbol("lastResolve"),s=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),p=Symbol("lastPromise"),l=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[p]=null,e[a]=null,e[s]=null,t(h(r,!1)))}}function m(e){process.nextTick(f,e)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(h(void 0,!0))}))}));var r,n=this[p];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(h(void 0,!0)):t[l](r,n)}),n)}}(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(h(o,!1));r=new Promise(this[l])}return this[p]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(h(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(g,(o(t={},d,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:e._readableState.endEmitted,writable:!0}),o(t,l,{value:function(e,t){var n=r[d].read();n?(r[p]=null,r[a]=null,r[s]=null,e(h(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[p]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[p]=null,r[a]=null,r[s]=null,t(e)),void(r[c]=e)}var n=r[a];null!==n&&(r[p]=null,r[a]=null,r[s]=null,n(h(void 0,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r}},5473:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(3423).Buffer,s=r(1758).inspect,c=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,o=a.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=o,n=s,a.prototype.copy.call(t,r,n),s+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,r),e}()},8340:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var i=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?i._writableState?i._writableState.errorEmitted?process.nextTick(r,i):(i._writableState.errorEmitted=!0,process.nextTick(t,i,e)):process.nextTick(t,i,e):o?(process.nextTick(r,i),o(e)):process.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},7696:(e,t,r)=>{"use strict";var n=r(2392).q.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||p()},u=t._writableState&&t._writableState.finished,p=function(){s=!1,u=!0,a||i.call(t)},l=t._readableState&&t._readableState.endEmitted,d=function(){a=!1,l=!0,s||i.call(t)},h=function(e){i.call(t,e)},f=function(){var e;return a&&!l?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},m=function(){t.req.on("finish",p)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",p),t.on("abort",f),t.req?m():t.on("request",m)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",d),t.on("finish",p),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",p),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",f)}}},2229:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},3e3:(e,t,r)=>{"use strict";var n,o=r(2392).q,i=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(7696)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);s=!0,i()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new a("pipe"))}}function u(e){e()}function p(e,t){return e.pipe(t)}function l(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=l(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var a=t.map((function(e,r){var i=r<t.length-1;return c(e,i,r>0,(function(e){n||(n=e),e&&a.forEach(u),i||(a.forEach(u),o(n))}))}));return t.reduce(p)}},5724:(e,t,r)=>{"use strict";var n=r(2392).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},7626:(e,t,r)=>{e.exports=r(4092).EventEmitter},6930:(e,t,r)=>{(t=e.exports=r(2262)).Stream=t,t.Readable=t,t.Writable=r(5317),t.Duplex=r(5059),t.Transform=r(3509),t.PassThrough=r(5868),t.finished=r(7696),t.pipeline=r(3e3)},8875:(e,t,r)=>{var n=r(3423),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=a),a.prototype=Object.create(o.prototype),i(o,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},8833:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(5419)("simple-peer"),u=r(5587),p=r(2518),l=r(6930),d=r(1582),h=r(5211),f=r(3423).Buffer,m=65536;function y(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(b,e);var t,r,l,g,v=(l=b,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(l);if(g){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function b(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),e=Object.assign({allowHalfOpen:!1},e),(t=v.call(this,e))._id=p(4).toString("hex").slice(0,7),t._debug("new peer %o",e),t.channelName=e.initiator?e.channelName||p(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||b.channelConfig,t.channelNegotiated=t.channelConfig.negotiated,t.config=Object.assign({},b.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.destroyed=!1,t.destroying=!1,t._connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localFamily=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"===n(e.wrtc)?e.wrtc:u(),!t._wrtc)throw"undefined"==typeof window?h(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):h(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!1,t._firstNegotiation=!0,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(e){return d((function(){return t.destroy(h(e,"ERR_PC_CONSTRUCTOR"))})),a(t)}return t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onconnectionstatechange=function(){t._onConnectionStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator||t.channelNegotiated?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t._debug("initial negotiation"),t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound),t}return t=b,(r=[{key:"address",value:function(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}},{key:"signal",value:function(e){var t=this;if(this.destroyed)throw h(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(h(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(h(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}},{key:"_addIceCandidate",value:function(e){var t=this,r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch((function(e){!r.address||r.address.endsWith(".local")?("Ignoring unsupported ICE candidate.",console.warn("Ignoring unsupported ICE candidate.")):t.destroy(h(e,"ERR_ADD_ICE_CANDIDATE"))}))}},{key:"send",value:function(e){this._channel.send(e)}},{key:"addTransceiver",value:function(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(h(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}},{key:"addStream",value:function(e){var t=this;this._debug("addStream()"),e.getTracks().forEach((function(r){t.addTrack(r,e)}))}},{key:"addTrack",value:function(e,t){this._debug("addTrack()");var r=this._senderMap.get(e)||new Map,n=r.get(t);if(n)throw n.removed?h(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):h(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}},{key:"replaceTrack",value:function(e,t,r){this._debug("replaceTrack()");var n=this._senderMap.get(e),o=n?n.get(r):null;if(!o)throw h(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null!=o.replaceTrack?o.replaceTrack(t):this.destroy(h(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}},{key:"removeTrack",value:function(e,t){this._debug("removeSender()");var r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw h(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(h(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}},{key:"removeStream",value:function(e){var t=this;this._debug("removeSenders()"),e.getTracks().forEach((function(r){t.removeTrack(r,e)}))}},{key:"_needsNegotiation",value:function(){var e=this;this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,d((function(){e._batchedNegotiation=!1,e.initiator||!e._firstNegotiation?(e._debug("starting batched negotiation"),e.negotiate()):e._debug("non-initiator initial negotiation request discarded"),e._firstNegotiation=!1})))}},{key:"negotiate",value:function(){var e=this;this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((function(){e._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}},{key:"destroy",value:function(e){this._destroy(e,(function(){}))}},{key:"_destroy",value:function(e,t){var r=this;this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),d((function(){if(r.destroyed=!0,r.destroying=!1,r._debug("destroy (error: %s)",e&&(e.message||e)),r.readable=r.writable=!1,r._readableState.ended||r.push(null),r._writableState.finished||r.end(),r._connected=!1,r._pcReady=!1,r._channelReady=!1,r._remoteTracks=null,r._remoteStreams=null,r._senderMap=null,clearInterval(r._closingInterval),r._closingInterval=null,clearInterval(r._interval),r._interval=null,r._chunk=null,r._cb=null,r._onFinishBound&&r.removeListener("finish",r._onFinishBound),r._onFinishBound=null,r._channel){try{r._channel.close()}catch(e){}r._channel.onmessage=null,r._channel.onopen=null,r._channel.onclose=null,r._channel.onerror=null}if(r._pc){try{r._pc.close()}catch(e){}r._pc.oniceconnectionstatechange=null,r._pc.onicegatheringstatechange=null,r._pc.onsignalingstatechange=null,r._pc.onicecandidate=null,r._pc.ontrack=null,r._pc.ondatachannel=null}r._pc=null,r._channel=null,e&&r.emit("error",e),r.emit("close"),t()})))}},{key:"_setupData",value:function(e){var t=this;if(!e.channel)return this.destroy(h(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=m),this.channelName=this._channel.label,this._channel.onmessage=function(e){t._onChannelMessage(e)},this._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},this._channel.onopen=function(){t._onChannelOpen()},this._channel.onclose=function(){t._onChannelClose()},this._channel.onerror=function(e){t.destroy(h(e,"ERR_DATA_CHANNEL"))};var r=!1;this._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(r&&t._onChannelClose(),r=!0):r=!1}),5e3)}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,r){if(this.destroyed)return r(h(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(h(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>m?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}},{key:"_onFinish",value:function(){var e=this;if(!this.destroyed){var t=function(){setTimeout((function(){return e.destroy()}),1e3)};this._connected?t():this.once("connect",t)}}},{key:"_startIceCompleteTimeout",value:function(){var e=this;this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),this.iceCompleteTimeout))}},{key:"_createOffer",value:function(){var e=this;this.destroyed||this._pc.createOffer(this.offerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=y(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var r=function(){if(!e.destroyed){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp})}};e._pc.setLocalDescription(t).then((function(){e._debug("createOffer success"),e.destroyed||(e.trickle||e._iceComplete?r():e.once("_iceComplete",r))})).catch((function(t){e.destroy(h(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(h(t,"ERR_CREATE_OFFER"))}))}},{key:"_requestMissingTransceivers",value:function(){var e=this;this._pc.getTransceivers&&this._pc.getTransceivers().forEach((function(t){t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))}},{key:"_createAnswer",value:function(){var e=this;this.destroyed||this._pc.createAnswer(this.answerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=y(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var r=function(){if(!e.destroyed){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp}),e.initiator||e._requestMissingTransceivers()}};e._pc.setLocalDescription(t).then((function(){e.destroyed||(e.trickle||e._iceComplete?r():e.once("_iceComplete",r))})).catch((function(t){e.destroy(h(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(h(t,"ERR_CREATE_ANSWER"))}))}},{key:"_onConnectionStateChange",value:function(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(h(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}},{key:"_onIceStateChange",value:function(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(h(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(h(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}},{key:"getStats",value:function(e){var t=this,r=function(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e};0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((function(t){var n=[];t.forEach((function(e){n.push(r(e))})),e(null,n)}),(function(t){return e(t)})):this._pc.getStats.length>0?this._pc.getStats((function(n){if(!t.destroyed){var o=[];n.result().forEach((function(e){var t={};e.names().forEach((function(r){t[r]=e.stat(r)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,o.push(r(t))})),e(null,o)}}),(function(t){return e(t)})):e(null,[])}},{key:"_maybeReady",value:function(){var e=this;this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),!this._connected&&!this._connecting&&this._pcReady&&this._channelReady&&(this._connecting=!0,function t(){e.destroyed||e.getStats((function(r,n){if(!e.destroyed){r&&(n=[]);var o={},i={},a={},s=!1;n.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(o[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)}));var c=function(t){s=!0;var r=i[t.localCandidateId];r&&(r.ip||r.address)?(e.localAddress=r.ip||r.address,e.localPort=Number(r.port)):r&&r.ipAddress?(e.localAddress=r.ipAddress,e.localPort=Number(r.portNumber)):"string"==typeof t.googLocalAddress&&(r=t.googLocalAddress.split(":"),e.localAddress=r[0],e.localPort=Number(r[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var n=o[t.remoteCandidateId];n&&(n.ip||n.address)?(e.remoteAddress=n.ip||n.address,e.remotePort=Number(n.port)):n&&n.ipAddress?(e.remoteAddress=n.ipAddress,e.remotePort=Number(n.portNumber)):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),e.remoteAddress=n[0],e.remotePort=Number(n[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)};if(n.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&c(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&c(e)})),s||Object.keys(a).length&&!Object.keys(i).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(r){return e.destroy(h(r,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var u=e._cb;e._cb=null,u(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){return e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}}))}())}},{key:"_onInterval",value:function(){!this._cb||!this._channel||this._channel.bufferedAmount>m||this._onChannelBufferedAmountLow()}},{key:"_onSignalingStateChange",value:function(){var e=this;this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}},{key:"_onIceCandidate",value:function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}},{key:"_onChannelMessage",value:function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=f.from(t)),this.push(t)}}},{key:"_onChannelBufferedAmountLow",value:function(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}},{key:"_onChannelOpen",value:function(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}},{key:"_onChannelClose",value:function(){this.destroyed||(this._debug("on channel close"),this.destroy())}},{key:"_onTrack",value:function(e){var t=this;this.destroyed||e.streams.forEach((function(r){t._debug("on track"),t.emit("track",e.track,r),t._remoteTracks.push({track:e.track,stream:r}),t._remoteStreams.some((function(e){return e.id===r.id}))||(t._remoteStreams.push(r),d((function(){t._debug("on stream"),t.emit("stream",r)})))}))}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],c.apply(null,e)}},{key:"bufferSize",get:function(){return this._channel&&this._channel.bufferedAmount||0}},{key:"connected",get:function(){return this._connected&&"open"===this._channel.readyState}}])&&o(t.prototype,r),b}(l.Duplex);g.WEBRTC_SUPPORT=!!u(),g.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},g.channelConfig={},e.exports=g},4934:(e,t,r)=>{"use strict";var n=r(8875).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=p,this.end=l,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function p(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4363:function(e,t){var r,n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(n="function"==typeof(r=function(){var e,t,r,n;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if("object"!==o(i)&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var a=[];for(var s in i)e.call(i,s)&&a.push(s);if(t)for(var c=0;c<n;c++)e.call(i,r[c])&&a.push(r[c]);return a})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var i={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},a={"*":!0};function s(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,(function(e){return"%"+e.substring(3)}))}function c(e){var t="";i[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var r="",n="",c=!0,u=!1,p=!1;"+"===t?c=!1:"."===t?(n=".",r="."):"/"===t?(n="/",r="/"):"#"===t?(n="#",c=!1):";"===t?(n=";",r=";",u=!0,p=!0):"?"===t?(n="?",r="&",u=!0):"&"===t&&(n="&",r="&",u=!0);for(var l=[],d=e.split(","),h=[],f={},m=0;m<d.length;m++){var y=d[m],g=null;if(-1!==y.indexOf(":")){var v=y.split(":");y=v[0],g=parseInt(v[1],10)}for(var b={};a[y.charAt(y.length-1)];)b[y.charAt(y.length-1)]=!0,y=y.substring(0,y.length-1);var w={truncate:g,name:y,suffices:b};h.push(w),f[y]=w,l.push(y)}var x=function(e){for(var t="",i=0,a=0;a<h.length;a++){var l=h[a],d=e(l.name);if(null==d||Array.isArray(d)&&0===d.length||"object"===o(d)&&0===Object.keys(d).length)i++;else if(t+=a===i?n:r||",",Array.isArray(d)){u&&(t+=l.name+"=");for(var f=0;f<d.length;f++)f>0&&(t+=l.suffices["*"]&&r||",",l.suffices["*"]&&u&&(t+=l.name+"=")),t+=c?encodeURIComponent(d[f]).replace(/!/g,"%21"):s(d[f])}else if("object"===o(d)){u&&!l.suffices["*"]&&(t+=l.name+"=");var m=!0;for(var y in d)m||(t+=l.suffices["*"]&&r||","),m=!1,t+=c?encodeURIComponent(y).replace(/!/g,"%21"):s(y),t+=l.suffices["*"]?"=":",",t+=c?encodeURIComponent(d[y]).replace(/!/g,"%21"):s(d[y])}else u&&(t+=l.name,p&&""===d||(t+="=")),null!=l.truncate&&(d=d.substring(0,l.truncate)),t+=c?encodeURIComponent(d).replace(/!/g,"%21"):s(d)}return t};return x.varNames=l,{prefix:n,substitution:x}}function u(e){if(!(this instanceof u))return new u(e);for(var t=e.split("{"),r=[t.shift()],n=[],o=[],i=[];t.length>0;){var a=t.shift(),s=a.split("}")[0],p=a.substring(s.length+1),l=c(s);o.push(l.substitution),n.push(l.prefix),r.push(p),i=i.concat(l.substitution.varNames)}this.fill=function(e){for(var t=r[0],n=0;n<o.length;n++)t+=(0,o[n])(e),t+=r[n+1];return t},this.varNames=i,this.template=e}u.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill((function(t){return e[t]}))}};var p=function(e,t,r,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||v("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};function l(e,t){if(e===t)return!0;if(e&&t&&"object"===o(e)&&"object"===o(t)){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!l(e[r],t[r]))return!1}else{var n;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(!l(e[n],t[n]))return!1}return!0}return!1}p.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},p.prototype.createError=function(e,t,r,n,o,i,a){var s=new _(e,t,r,n,o);return s.message=this.errorReporter(s,i,a),s},p.prototype.returnError=function(e){return e},p.prototype.collectError=function(e){return e&&this.errors.push(e),null},p.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},p.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(b.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),o=this.handleError(n);if(o)return o}return null},p.prototype.addFormat=function(e,t){if("object"===o(e)){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},p.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(b.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},p.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"===o(this.schemas[n])){r=this.schemas[n];var a=decodeURIComponent(i);if(""===a)return this.resolveRefs(r,t);if("/"!==a.charAt(0))return;for(var s=a.split("/").slice(1),c=0;c<s.length;c++){var u=s[c].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[u]){r=void 0;break}r=r[u]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},p.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"===o(e))for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"===o(e[n]))this.searchSchemas(e[n],t);else if("$ref"===n){var i=y(e[n]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}},p.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!==o(e)||"string"!=typeof e.id)return;e=(t=e).id}e===y(e)+"#"&&(e=y(e)),this.schemas[e]=t,delete this.missingMap[e],g(t,e),this.searchSchemas(t,e)},p.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},p.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},p.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},p.prototype.dropSchemas=function(){this.schemas={},this.reset()},p.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},p.prototype.validateAll=function(e,t,r,n,i){var a;if(!(t=this.resolveRefs(t)))return null;if(t instanceof _)return this.errors.push(t),t;var s,c=this.errors.length,u=null,p=null;if(this.checkRecursive&&e&&"object"===o(e)){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var l=e[this.validatedSchemasKey].indexOf(t);if(-1!==l)return this.errors=this.errors.concat(e[this.validationErrorsKey][l]),null}if(Object.isFrozen(e)&&-1!==(s=this.scannedFrozen.indexOf(e))){var d=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][d]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][u]=t,this.scannedFrozenValidationErrors[s][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}p=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][p]=t,e[this.validationErrorsKey][p]=[]}}var h=this.errors.length,f=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateHypermedia(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(a){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(f||h!==this.errors.length)for(;r&&r.length||n&&n.length;){var m=r&&r.length?""+r.pop():null,y=n&&n.length?""+n.pop():null;f&&(f=f.prefixWith(m,y)),this.prefixErrors(h,m,y)}return null!==u?this.scannedFrozenValidationErrors[s][u]=this.errors.slice(c):null!==p&&(e[this.validationErrorsKey][p]=this.errors.slice(c)),this.handleError(f)},p.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(b.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"===o(r)?this.createError(b.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},p.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if(void 0!==t[n])for(var i=this.definedKeywords[n],a=0;a<i.length;a++){var s=(0,i[a])(e,t[n],t,r);if("string"==typeof s||"number"==typeof s)return this.createError(b.KEYWORD_CUSTOM,{key:n,message:s},"","",null,e,t).prefixWith(null,n);if(s&&"object"===o(s)){var c=s.code;if("string"==typeof c){if(!b[c])throw new Error("Undefined error code (use defineError): "+c);c=b[c]}else"number"!=typeof c&&(c=b.KEYWORD_CUSTOM);var u="object"===o(s.message)?s.message:{key:n,message:s.message||"?"},p=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(c,u,s.dataPath||null,p,null,e,t)}}return null},p.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))||(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},p.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=o(e);null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var a=n[i];if(a===r||"integer"===a&&"number"===r&&e%1==0)return null}return this.createError(b.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},p.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++)if(l(e,t.enum[r]))return null;return this.createError(b.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},p.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var d=Math.pow(2,-51),h=1-d;function f(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function m(e,t){return t=f(t||""),e=f(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(r=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,n=[],r.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,(function(e){"/.."===e?n.pop():n.push(e)})),n.join("").replace(/^\//,"/"===r.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var r,n}function y(e){return e.split("#")[0]}function g(e,t){if(e&&"object"===o(e))if(void 0===t?t=e.id:"string"==typeof e.id&&(t=m(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)g(e[r],t);else for(var n in"string"==typeof e.$ref&&(e.$ref=m(t,e.$ref)),e)"enum"!==n&&g(e[n],t)}function v(e){var t=S[e=e||"en"];return function(e){var r=t[e.code]||E[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,(function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e}))}}p.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=d&&n<h)return this.createError(b.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},p.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(b.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(b.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(b.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(b.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},p.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(b.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},p.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},p.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(b.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(b.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},p.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(n=i[1],o=i[2]):n=t.pattern,r=new RegExp(n,o)}return r.test(e)?null:this.createError(b.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},p.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},p.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(b.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))||void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(b.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},p.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(l(e[r],e[n])){var o=this.createError(b.ARRAY_UNIQUE,{match1:r,match2:n},"","/uniqueItems",null,e,t);if(this.handleError(o))return o}return null},p.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(n=this.validateAll(e[o],t.items[o],[o],["items",o],r+"/"+o))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(b.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],r+"/"+o))return n}else for(o=0;o<e.length;o++)if(n=this.validateAll(e[o],t.items,[o],["items"],r+"/"+o))return n;return null},p.prototype.validateObject=function(e,t,r){return"object"!==o(e)||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},p.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(b.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))||void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(b.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},p.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var o=this.createError(b.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(o))return o}}return null},p.prototype.validateObjectProperties=function(e,t,r){var n;for(var o in e){var i=r+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(a=!0,n=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties)if(new RegExp(s).test(o)&&(a=!0,n=this.validateAll(e[o],t.patternProperties[s],[o],["patternProperties",s],i)))return n;if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(b.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},p.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(n=this.createError(b.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];if(void 0===e[s]&&(n=this.createError(b.OBJECT_DEPENDENCY_KEY,{key:o,missing:s},"","/"+a,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,i,[],["dependencies",o],r))return n}return null},p.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},p.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(n=this.validateAll(e,i,[],["allOf",o],r))return n}return null},p.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,o,i=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var s=!0,c=0;c<t.anyOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["anyOf",c],r);if(null===l&&p===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0);s=!1;continue}return null}l&&i.push(l.prefixWith(null,""+c).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),s?(i=i.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(b.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},p.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,o,i=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var c=0;c<t.oneOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["oneOf",c],r);if(null===l&&p===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,s),this.createError(b.ONE_OF_MULTIPLE,{index1:i,index2:c},"","/oneOf",null,e,t);if(i=c,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0)}}else l&&a.push(l)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===i?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(b.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},p.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,o,i=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===a&&0===s.length?this.createError(b.NOT_PASSED,{},"","/not",null,e,t):null},p.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var n,o=0;o<t.links.length;o++){var i=t.links[o];if("describedby"===i.rel){for(var a=new u(i.href),s=!0,c=0;c<a.varNames.length;c++)if(!(a.varNames[c]in e)){s=!1;break}if(s){var p={$ref:a.fillFromObject(e)};if(n=this.validateAll(e,p,[],["links",o],r))return n}}}};var b={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},w={};for(var x in b)w[b[x]]=x;var E={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function _(e,t,r,n,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}_.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_.prototype.name="ValidationError",_.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var S={};var k=function e(t){var r,n,o=new p,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){o.addFormat.apply(o,arguments)},language:function(e){return e?(S[e]||(e=e.split("-")[0]),!!S[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in b)t[r]&&!t[b[r]]&&(t[b[r]]=t[r]);var n=e.split("-")[0];if(S[n])for(r in S[e]=Object.create(S[n]),t)void 0===S[n][r]&&(S[n][r]=t[r]),S[e][r]=t[r];else S[e]=t,S[n]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,i,a){var s=v(r),c=new p(o,!1,n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,i,a);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t);var u=c.validateAll(e,t,null,null,"");return!u&&a&&(u=c.banUnknownProperties(e,t)),this.error=u,this.missing=c.missing,this.valid=null===u,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,i,a){var s=v(r),c=new p(o,!0,n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,i,a);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t),c.validateAll(e,t,null,null,""),a&&c.banUnknownProperties(e,t);var u={toString:function(){return this.valid?"valid":this.error.message}};return u.errors=c.errors,u.missing=c.missing,u.valid=0===u.errors.length,u},addSchema:function(){return o.addSchema.apply(o,arguments)},getSchema:function(){return o.getSchema.apply(o,arguments)},getSchemaMap:function(){return o.getSchemaMap.apply(o,arguments)},getSchemaUris:function(){return o.getSchemaUris.apply(o,arguments)},getMissingUris:function(){return o.getMissingUris.apply(o,arguments)},dropSchemas:function(){o.dropSchemas.apply(o,arguments)},defineKeyword:function(){o.defineKeyword.apply(o,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==b[e])throw new Error("Error already defined: "+e+" as "+b[e]);if(void 0!==w[t])throw new Error("Error code already used: "+w[t]+" as "+t);for(var n in b[e]=t,w[t]=e,E[e]=E[t]=r,S){var o=S[n];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){o.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:g,resolveUrl:m,getDocumentUri:y,errorCodes:b};return i.language(t||"en"),i}();return k.addLanguage("en-gb",E),k.tv4=k,k})?r.apply(t,[]):r)||(e.exports=n)},1108:function(e,t,r){var n,o,i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";var e="function"==typeof Promise,t="object"===("undefined"==typeof self?"undefined":a(self))?self:r.g,n="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,c="undefined"!=typeof WeakSet,u="undefined"!=typeof DataView,p=n&&void 0!==Symbol.iterator,l=n&&void 0!==Symbol.toStringTag,d=i&&"function"==typeof Set.prototype.entries,h=o&&"function"==typeof Map.prototype.entries,f=d&&Object.getPrototypeOf((new Set).entries()),m=h&&Object.getPrototypeOf((new Map).entries()),y=p&&"function"==typeof Array.prototype[Symbol.iterator],g=y&&Object.getPrototypeOf([][Symbol.iterator]()),v=p&&"function"==typeof String.prototype[Symbol.iterator],b=v&&Object.getPrototypeOf(""[Symbol.iterator]());return function(r){var n=a(r);if("object"!==n)return n;if(null===r)return"null";if(r===t)return"global";if(Array.isArray(r)&&(!1===l||!(Symbol.toStringTag in r)))return"Array";if("object"===("undefined"==typeof window?"undefined":a(window))&&null!==window){if("object"===a(window.location)&&r===window.location)return"Location";if("object"===a(window.document)&&r===window.document)return"Document";if("object"===a(window.navigator)){if("object"===a(window.navigator.mimeTypes)&&r===window.navigator.mimeTypes)return"MimeTypeArray";if("object"===a(window.navigator.plugins)&&r===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"===a(window.HTMLElement))&&r instanceof window.HTMLElement){if("BLOCKQUOTE"===r.tagName)return"HTMLQuoteElement";if("TD"===r.tagName)return"HTMLTableDataCellElement";if("TH"===r.tagName)return"HTMLTableHeaderCellElement"}}var p=l&&r[Symbol.toStringTag];if("string"==typeof p)return p;var d=Object.getPrototypeOf(r);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":i&&d===Set.prototype?"Set":o&&d===Map.prototype?"Map":c&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":u&&d===DataView.prototype?"DataView":o&&d===m?"Map Iterator":i&&d===f?"Set Iterator":y&&d===g?"Array Iterator":v&&d===b?"String Iterator":null===d?"Object":Object.prototype.toString.call(r).slice(8,-1)}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},4686:function(e,t){var r,n,o,i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){var n="[A-Za-z]",o="[0-9]",i=t(o,"[A-Fa-f]"),a=r(r("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+r("%[89A-Fa-f]"+i+"%"+i+i)+"|"+r("%"+i+i)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",s),u=e?"[\\uE000-\\uF8FF]":"[]",p=t(n,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r(n+t(n,o,"[\\+\\-\\.]")+"*"),d=r(r(a+"|"+t(p,s,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|"+o),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?"+o)),f=r(h+"\\."+h+"\\."+h+"\\."+h),m=r(i+"{1,4}"),y=r(r(m+"\\:"+m)+"|"+f),g=r(r(m+"\\:")+"{6}"+y),v=r("\\:\\:"+r(m+"\\:")+"{5}"+y),b=r(r(m)+"?\\:\\:"+r(m+"\\:")+"{4}"+y),w=r(r(r(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+r(m+"\\:")+"{3}"+y),x=r(r(r(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+r(m+"\\:")+"{2}"+y),E=r(r(r(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+y),_=r(r(r(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+y),S=r(r(r(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),k=r(r(r(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),C=r([g,v,b,w,x,E,_,S,k].join("|")),A=r(r(p+"|"+a)+"+"),P=(r(C+"\\%25"+A),r(C+r("\\%25|\\%(?!"+i+"{2})")+A)),D=r("[vV]"+i+"+\\."+t(p,s,"[\\:]")+"+"),O=r("\\["+r(P+"|"+C+"|"+D)+"\\]"),T=r(r(a+"|"+t(p,s))+"*"),F=r(O+"|"+f+"(?!"+T+")|"+T),j=r("[0-9]*"),I=r(r(d+"@")+"?"+F+r("\\:"+j)+"?"),R=r(a+"|"+t(p,s,"[\\:\\@]")),N=r(R+"*"),M=r(R+"+"),L=r(r(a+"|"+t(p,s,"[\\@]"))+"+"),B=r(r("\\/"+N)+"*"),q=r("\\/"+r(M+B)+"?"),U=r(L+B),z=r(M+B),$="(?!"+R+")",G=(r(B+"|"+q+"|"+U+"|"+z+"|"+$),r(r(R+"|"+t("[\\/\\?]",u))+"*")),J=r(r(R+"|[\\/\\?]")+"*"),H=r(r("\\/\\/"+I+B)+"|"+q+"|"+z+"|"+$),V=r(l+"\\:"+H+r("\\?"+G)+"?"+r("\\#"+J)+"?"),X=r(r("\\/\\/"+I+B)+"|"+q+"|"+U+"|"+$),K=r(X+r("\\?"+G)+"?"+r("\\#"+J)+"?");return r(V+"|"+K),r(l+"\\:"+H+r("\\?"+G)+"?"),r(r("\\/\\/("+r("("+d+")@")+"?("+F+")"+r("\\:("+j+")")+"?)")+"?("+B+"|"+q+"|"+z+"|"+$+")"),r("\\?("+G+")"),r("\\#("+J+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+F+")"+r("\\:("+j+")")+"?)")+"?("+B+"|"+q+"|"+U+"|"+$+")"),r("\\?("+G+")"),r("\\#("+J+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+F+")"+r("\\:("+j+")")+"?)")+"?("+B+"|"+q+"|"+z+"|"+$+")"),r("\\?("+G+")"),r("\\#("+J+")"),r("("+d+")@"),r("\\:("+j+")"),{NOT_SCHEME:new RegExp(t("[^]",n,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",p,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",p,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",p,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",p,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",p,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",p,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",p,s),"g"),UNRESERVED:new RegExp(p,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",p,c),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+C+")"+r(r("\\%25|\\%(?!"+i+"{2})")+"("+A+")")+"?\\]?$")}}var a=i(!1),s=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,p=36,l=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,y=String.fromCharCode;function g(e){throw new RangeError(f[e])}function v(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(h,".")).split("."),t).join(".");return n+o}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=p)e=m(e/35);return m(n+36*e/(e+38))},x=function(e){return v(e,(function(e){return d.test(e)?"xn--"+function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,n=128,o=0,i=72,a=!0,s=!1,c=void 0;try{for(var l,d=e[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var h=l.value;h<128&&t.push(y(h))}}catch(e){s=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw c}}var f=t.length,v=f;for(f&&t.push("-");v<r;){var x=u,E=!0,_=!1,S=void 0;try{for(var k,C=e[Symbol.iterator]();!(E=(k=C.next()).done);E=!0){var A=k.value;A>=n&&A<x&&(x=A)}}catch(e){_=!0,S=e}finally{try{!E&&C.return&&C.return()}finally{if(_)throw S}}var P=v+1;x-n>m((u-o)/P)&&g("overflow"),o+=(x-n)*P,n=x;var D=!0,O=!1,T=void 0;try{for(var F,j=e[Symbol.iterator]();!(D=(F=j.next()).done);D=!0){var I=F.value;if(I<n&&++o>u&&g("overflow"),I==n){for(var R=o,N=p;;N+=p){var M=N<=i?1:N>=i+26?26:N-i;if(R<M)break;var L=R-M,B=p-M;t.push(y(b(M+L%B,0))),R=m(L/B)}t.push(y(b(R,0))),i=w(o,P,v==f),o=0,++v}}}catch(e){O=!0,T=e}finally{try{!D&&j.return&&j.return()}finally{if(O)throw T}}++o,++n}return t.join("")}(e):e}))},E=function(e){return v(e,(function(e){return l.test(e)?function(e){var t,r=[],n=e.length,o=0,i=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var c=0;c<s;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var l=s>0?s+1:0;l<n;){for(var d=o,h=1,f=p;;f+=p){l>=n&&g("invalid-input");var y=(t=e.charCodeAt(l++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:p;(y>=p||y>m((u-o)/h))&&g("overflow"),o+=y*h;var v=f<=a?1:f>=a+26?26:f-a;if(y<v)break;var b=p-v;h>m(u/b)&&g("overflow"),h*=b}var x=r.length+1;a=w(o-d,x,0==d),m(o/x)>u-i&&g("overflow"),i+=m(o/x),o%=x,r.splice(o++,0,i)}return String.fromCodePoint.apply(String,r)}(e.slice(4).toLowerCase()):e}))},_={};function S(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function k(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&a)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function C(e,t){function r(e){var r=k(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,S).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,S).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,S).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,S).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,S).replace(t.PCT_ENCODED,o)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(A).join("."):e}function D(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),o=n[1],i=n[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),s=c(a,2),u=s[0],p=s[1],l=p?p.split(":").map(A):[],d=u.split(":").map(A),h=t.IPV4ADDRESS.test(d[d.length-1]),f=h?7:8,m=d.length-f,y=Array(f),g=0;g<f;++g)y[g]=l[g]||d[m+g]||"";h&&(y[f-1]=P(y[f-1],t));var v=y.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=y.slice(0,v.index),x=y.slice(v.index+v.length);b=w.join(":")+"::"+x.join(":")}else b=y.join(":");return i&&(b+="%"+i),b}return e}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,T=void 0==="".match(/(){0}/)[1];function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(O);if(o){T?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=D(P(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=_[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)C(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=x(r.host.replace(n.PCT_ENCODED,k).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}C(r,a)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function j(e,t){var r=!1!==t.iri?s:a,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(D(P(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var I=/^\.\.?\//,R=/^\/\.(\/|$)/,N=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function L(e){for(var t=[];e.length;)if(e.match(I))e=e.replace(I,"");else if(e.match(R))e=e.replace(R,"/");else if(e.match(N))e=e.replace(N,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:a,n=[],o=_[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?E(e.host):x(e.host.replace(r.PCT_ENCODED,k).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}C(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=j(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||o&&o.absolutePath||(c=L(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=F(B(e,r),r),t=F(B(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=L(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=L(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=L(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=L(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function U(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,k)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},$={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function G(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var J={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=G(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(G(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=c(r,2),o=n[0],i=n[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},H={scheme:"wss",domainHost:J.domainHost,parse:J.parse,serialize:J.serialize},V={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",W=r(r("%[EFef][0-9A-Fa-f]%"+K+K+"%"+K+K)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+K+K)+"|"+r("%"+K+K)),Y=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Q=new RegExp(X,"g"),Z=new RegExp(W,"g"),ee=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Y),"g"),te=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),re=te;function ne(e){var t=k(e);return t.match(Q)?t:e}var oe={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,i={},a=r.query.split("&"),s=0,c=a.length;s<c;++s){var u=a[s].split("=");switch(u[0]){case"to":for(var p=u[1].split(","),l=0,d=p.length;l<d;++l)n.push(p[l]);break;case"subject":r.subject=U(u[1],t);break;case"body":r.body=U(u[1],t);break;default:o=!0,i[U(u[0],t)]=U(u[1],t)}}o&&(r.headers=i)}r.query=void 0;for(var h=0,f=n.length;h<f;++h){var m=n[h].split("@");if(m[0]=U(m[0]),t.unicodeSupport)m[1]=U(m[1],t).toLowerCase();else try{m[1]=x(U(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=m.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var a=0,s=i.length;a<s;++a){var c=String(i[a]),u=c.lastIndexOf("@"),p=c.slice(0,u).replace(Z,ne).replace(Z,o).replace(ee,S),l=c.slice(u+1);try{l=t.iri?E(l):x(U(l,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[a]=p+"@"+l}n.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var f in d)d[f]!==V[f]&&h.push(f.replace(Z,ne).replace(Z,o).replace(te,S)+"="+d[f].replace(Z,ne).replace(Z,o).replace(re,S));return h.length&&(n.query=h.join("&")),n}},ie=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ie),n=e;if(r){var o=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),a=r[2],s=o+":"+(t.nid||i),c=_[s];n.nid=i,n.nss=a,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),i=_[o];i&&(e=i.serialize(e,t));var a=e,s=e.nss;return a.path=(n||t.nid)+":"+s,a}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ce={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(se)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};_[z.scheme]=z,_[$.scheme]=$,_[J.scheme]=J,_[H.scheme]=H,_[oe.scheme]=oe,_[ae.scheme]=ae,_[ce.scheme]=ce,e.SCHEMES=_,e.pctEncChar=S,e.pctDecChars=k,e.parse=F,e.removeDotSegments=L,e.serialize=B,e.resolveComponents=q,e.resolve=function(e,t,r){var n=function(e,t){var r={scheme:"null"};if(t)for(var n in t)r[n]=t[n];return r}(0,r);return B(q(F(e,n),F(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=B(F(e,t),t):"object"===n(e)&&(e=F(B(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=B(F(e,r),r):"object"===n(e)&&(e=B(e,r)),"string"==typeof t?t=B(F(t,r),r):"object"===n(t)&&(t=B(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,S)},e.unescapeComponent=U,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},1889:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(i){var a="object"==o(t)&&t&&!t.nodeType&&t,s="object"==o(e)&&e&&!e.nodeType&&e,c="object"==(void 0===r.g?"undefined":o(r.g))&&r.g;c.global!==c&&c.window!==c&&c.self!==c||(i=c);var u,p,l=2147483647,d=36,h=/^xn--/,f=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,v=String.fromCharCode;function b(e){throw RangeError(y[e])}function w(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function x(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+w((e=e.replace(m,".")).split("."),t).join(".")}function E(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function _(e){return w(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+v(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,r){var n=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;n+=d)e=g(e/35);return g(n+36*e/(e+38))}function C(e){var t,r,n,o,i,a,s,c,u,p,h,f=[],m=e.length,y=0,v=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&b("not-basic"),f.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<m;){for(i=y,a=1,s=d;o>=m&&b("invalid-input"),((c=(h=e.charCodeAt(o++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:d)>=d||c>g((l-y)/a))&&b("overflow"),y+=c*a,!(c<(u=s<=w?1:s>=w+26?26:s-w));s+=d)a>g(l/(p=d-u))&&b("overflow"),a*=p;w=k(y-i,t=f.length+1,0==i),g(y/t)>l-v&&b("overflow"),v+=g(y/t),y%=t,f.splice(y++,0,v)}return _(f)}function A(e){var t,r,n,o,i,a,s,c,u,p,h,f,m,y,w,x=[];for(f=(e=E(e)).length,t=128,r=0,i=72,a=0;a<f;++a)(h=e[a])<128&&x.push(v(h));for(n=o=x.length,o&&x.push("-");n<f;){for(s=l,a=0;a<f;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>g((l-r)/(m=n+1))&&b("overflow"),r+=(s-t)*m,t=s,a=0;a<f;++a)if((h=e[a])<t&&++r>l&&b("overflow"),h==t){for(c=r,u=d;!(c<(p=u<=i?1:u>=i+26?26:u-i));u+=d)w=c-p,y=d-p,x.push(v(S(p+w%y,0))),c=g(w/y);x.push(v(S(c,0))),i=k(r,m,n==o),r=0,++n}++r,++t}return x.join("")}if(u={version:"1.3.2",ucs2:{decode:E,encode:_},decode:C,encode:A,toASCII:function(e){return x(e,(function(e){return f.test(e)?"xn--"+A(e):e}))},toUnicode:function(e){return x(e,(function(e){return h.test(e)?C(e.slice(4).toLowerCase()):e}))}},"object"==o(r.amdO)&&r.amdO)void 0===(n=function(){return u}.call(t,r,t,e))||(e.exports=n);else if(a&&s)if(e.exports==a)s.exports=u;else for(p in u)u.hasOwnProperty(p)&&(a[p]=u[p]);else i.punycode=u}(this)},4546:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(1889),i=r(7504);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=w,t.resolve=function(e,t){return w(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?w(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=w(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(p),d=["%","/","?",";","#"].concat(l),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(6406);function w(e,t,r){if(e&&i.isObject(e)&&e instanceof a)return e;var n=new a;return n.parse(e,t,r),n}a.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+n(e));var a=e.indexOf("?"),c=-1!==a&&a<e.indexOf("#")?"?":"#",p=e.split(c);p[0]=p[0].replace(/\\/g,"/");var w=e=p.join(c);if(w=w.trim(),!r&&1===e.split("#").length){var x=u.exec(w);if(x)return this.path=w,this.href=w,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=s.exec(w);if(E){var _=(E=E[0]).toLowerCase();this.protocol=_,w=w.substr(E.length)}if(r||E||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===w.substr(0,2);!S||E&&g[E]||(w=w.substr(2),this.slashes=!0)}if(!g[E]&&(S||E&&!v[E])){for(var k,C,A=-1,P=0;P<h.length;P++)-1!==(D=w.indexOf(h[P]))&&(-1===A||D<A)&&(A=D);for(-1!==(C=-1===A?w.lastIndexOf("@"):w.lastIndexOf("@",A))&&(k=w.slice(0,C),w=w.slice(C+1),this.auth=decodeURIComponent(k)),A=-1,P=0;P<d.length;P++){var D;-1!==(D=w.indexOf(d[P]))&&(-1===A||D<A)&&(A=D)}-1===A&&(A=w.length),this.host=w.slice(0,A),w=w.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var T=this.hostname.split(/\./),F=(P=0,T.length);P<F;P++){var j=T[P];if(j&&!j.match(f)){for(var I="",R=0,N=j.length;R<N;R++)j.charCodeAt(R)>127?I+="x":I+=j[R];if(!I.match(f)){var M=T.slice(0,P),L=T.slice(P+1),B=j.match(m);B&&(M.push(B[1]),L.unshift(B[2])),L.length&&(w="/"+L.join(".")+w),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=o.toASCII(this.hostname));var q=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+q,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!y[_])for(P=0,F=l.length;P<F;P++){var z=l[P];if(-1!==w.indexOf(z)){var $=encodeURIComponent(z);$===z&&($=escape(z)),w=w.split(z).join($)}}var G=w.indexOf("#");-1!==G&&(this.hash=w.substr(G),w=w.slice(0,G));var J=w.indexOf("?");if(-1!==J?(this.search=w.substr(J),this.query=w.substr(J+1),t&&(this.query=b.parse(this.query)),w=w.slice(0,J)):t&&(this.search="",this.query={}),w&&(this.pathname=w),v[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var H=this.search||"";this.path=q+H}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(e){return this.resolveObject(w(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var p=c[u];"protocol"!==p&&(r[p]=e[p])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!v[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var h=l[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=w||b||r.host&&e.pathname,E=x,_=r.pathname&&r.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!v[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===_[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search))return S&&(r.hostname=r.host=_.shift(),(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift())),r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=_.slice(-1)[0],C=(r.host||e.host||_.length>1)&&("."===k||".."===k)||""===k,A=0,P=_.length;P>=0;P--)"."===(k=_[P])?_.splice(P,1):".."===k?(_.splice(P,1),A++):A&&(_.splice(P,1),A--);if(!x&&!E)for(;A--;A)_.unshift("..");!x||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),C&&"/"!==_.join("/").substr(-1)&&_.push("");var D,O=""===_[0]||_[0]&&"/"===_[0].charAt(0);return S&&(r.hostname=r.host=O?"":_.length?_.shift():"",(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift())),(x=x||r.host&&_.length)&&!O&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},7504:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===t(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},3327:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},8076:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>O,parse:()=>y,stringify:()=>p,v1:()=>m,v3:()=>k,v4:()=>C,v5:()=>D,validate:()=>s,version:()=>T});var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function i(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var l,d,h=0,f=0;const m=function(e,t,r){var n=t&&r||0,o=t||new Array(16),a=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:d;if(null==a||null==s){var c=e.random||(e.rng||i)();null==a&&(a=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=d=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:f+1,y=u-h+(m-f)/1e4;if(y<0&&void 0===e.clockseq&&(s=s+1&16383),(y<0||u>h)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,f=m,d=s;var g=(1e4*(268435455&(u+=122192928e5))+m)%4294967296;o[n++]=g>>>24&255,o[n++]=g>>>16&255,o[n++]=g>>>8&255,o[n++]=255&g;var v=u/4294967296*1e4&268435455;o[n++]=v>>>8&255,o[n++]=255&v,o[n++]=v>>>24&15|16,o[n++]=v>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var b=0;b<6;++b)o[n+b]=a[b];return t||p(o)},y=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function g(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return p(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function v(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function w(e,t,r,n,o,i){return b((a=b(b(t,e),b(n,i)))<<(s=o)|a>>>32-s,r);var a,s}function x(e,t,r,n,o,i,a){return w(t&r|~t&n,e,t,o,i,a)}function E(e,t,r,n,o,i,a){return w(t&n|r&~n,e,t,o,i,a)}function _(e,t,r,n,o,i,a){return w(t^r^n,e,t,o,i,a)}function S(e,t,r,n,o,i,a){return w(r^(t|~n),e,t,o,i,a)}const k=g("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,c=n,u=o,p=i;r=x(r,n,o,i,e[a],7,-680876936),i=x(i,r,n,o,e[a+1],12,-389564586),o=x(o,i,r,n,e[a+2],17,606105819),n=x(n,o,i,r,e[a+3],22,-1044525330),r=x(r,n,o,i,e[a+4],7,-176418897),i=x(i,r,n,o,e[a+5],12,1200080426),o=x(o,i,r,n,e[a+6],17,-1473231341),n=x(n,o,i,r,e[a+7],22,-45705983),r=x(r,n,o,i,e[a+8],7,1770035416),i=x(i,r,n,o,e[a+9],12,-1958414417),o=x(o,i,r,n,e[a+10],17,-42063),n=x(n,o,i,r,e[a+11],22,-1990404162),r=x(r,n,o,i,e[a+12],7,1804603682),i=x(i,r,n,o,e[a+13],12,-40341101),o=x(o,i,r,n,e[a+14],17,-1502002290),r=E(r,n=x(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=E(i,r,n,o,e[a+6],9,-1069501632),o=E(o,i,r,n,e[a+11],14,643717713),n=E(n,o,i,r,e[a],20,-373897302),r=E(r,n,o,i,e[a+5],5,-701558691),i=E(i,r,n,o,e[a+10],9,38016083),o=E(o,i,r,n,e[a+15],14,-660478335),n=E(n,o,i,r,e[a+4],20,-405537848),r=E(r,n,o,i,e[a+9],5,568446438),i=E(i,r,n,o,e[a+14],9,-1019803690),o=E(o,i,r,n,e[a+3],14,-187363961),n=E(n,o,i,r,e[a+8],20,1163531501),r=E(r,n,o,i,e[a+13],5,-1444681467),i=E(i,r,n,o,e[a+2],9,-51403784),o=E(o,i,r,n,e[a+7],14,1735328473),r=_(r,n=E(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=_(i,r,n,o,e[a+8],11,-2022574463),o=_(o,i,r,n,e[a+11],16,1839030562),n=_(n,o,i,r,e[a+14],23,-35309556),r=_(r,n,o,i,e[a+1],4,-1530992060),i=_(i,r,n,o,e[a+4],11,1272893353),o=_(o,i,r,n,e[a+7],16,-155497632),n=_(n,o,i,r,e[a+10],23,-1094730640),r=_(r,n,o,i,e[a+13],4,681279174),i=_(i,r,n,o,e[a],11,-358537222),o=_(o,i,r,n,e[a+3],16,-722521979),n=_(n,o,i,r,e[a+6],23,76029189),r=_(r,n,o,i,e[a+9],4,-640364487),i=_(i,r,n,o,e[a+12],11,-421815835),o=_(o,i,r,n,e[a+15],16,530742520),r=S(r,n=_(n,o,i,r,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=S(i,r,n,o,e[a+7],10,1126891415),o=S(o,i,r,n,e[a+14],15,-1416354905),n=S(n,o,i,r,e[a+5],21,-57434055),r=S(r,n,o,i,e[a+12],6,1700485571),i=S(i,r,n,o,e[a+3],10,-1894986606),o=S(o,i,r,n,e[a+10],15,-1051523),n=S(n,o,i,r,e[a+1],21,-2054922799),r=S(r,n,o,i,e[a+8],6,1873313359),i=S(i,r,n,o,e[a+15],10,-30611744),o=S(o,i,r,n,e[a+6],15,-1560198380),n=S(n,o,i,r,e[a+13],21,1309151649),r=S(r,n,o,i,e[a+4],6,-145523070),i=S(i,r,n,o,e[a+11],10,-1120210379),o=S(o,i,r,n,e[a+2],15,718787259),n=S(n,o,i,r,e[a+9],21,-343485551),r=b(r,s),n=b(n,c),o=b(o,u),i=b(i,p)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(v(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),C=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return p(n)};function A(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function P(e,t){return e<<t|e>>>32-t}const D=g("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),p=0;p<16;++p)u[p]=e[64*c+4*p]<<24|e[64*c+4*p+1]<<16|e[64*c+4*p+2]<<8|e[64*c+4*p+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<a;++l){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=s[l][h];for(var f=16;f<80;++f)d[f]=P(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var m=r[0],y=r[1],g=r[2],v=r[3],b=r[4],w=0;w<80;++w){var x=Math.floor(w/20),E=P(m,5)+A(x,y,g,v)+b+t[x]+d[w]>>>0;b=v,v=g,g=P(y,30)>>>0,y=m,m=E}r[0]=r[0]+m>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),O="00000000-0000-0000-0000-000000000000",T=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},5763:(e,t,r)=>{var n;try{n=r(3905)}catch(e){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(9622);function a(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(a,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?a:null,version:i}},9622:(e,t,r)=>{e.exports=r(2847).version},2599:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t),r.d(t,{Headers:()=>m,Request:()=>E,Response:()=>S,DOMException:()=>C,fetch:()=>A});var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==o&&o,i="URLSearchParams"in o,a="Symbol"in o&&"iterator"in Symbol,s="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(e){return!1}}(),c="FormData"in o,u="ArrayBuffer"in o;if(u)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&p.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a&&(t[Symbol.iterator]=function(){return t}),t}function m(e){this.map={},e instanceof m?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:c&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(v)}),this.text=function(){var e,t,r,n=y(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=g(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(e,t){e=d(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},m.prototype.delete=function(e){delete this.map[d(e)]},m.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},m.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},m.prototype.set=function(e,t){this.map[d(e)]=h(t)},m.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},m.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},m.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},m.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},a&&(m.prototype[Symbol.iterator]=m.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new m(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),x.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new m(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},w.call(E.prototype),w.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];S.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var C=o.DOMException;try{new C}catch(e){(C=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C}function A(e,t){return new Promise((function(r,i){var a=new E(e,t);if(a.signal&&a.signal.aborted)return i(new C("Aborted","AbortError"));var c=new XMLHttpRequest;function p(){c.abort()}c.onload=function(){var e,t,n={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new m,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;setTimeout((function(){r(new S(o,n))}),0)},c.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){i(new C("Aborted","AbortError"))}),0)},c.open(a.method,function(e){try{return""===e&&o.location.href?o.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&(s?c.responseType="blob":u&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!t||"object"!==n(t.headers)||t.headers instanceof m?a.headers.forEach((function(e,t){c.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){c.setRequestHeader(e,h(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",p),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",p)}),c.send(void 0===a._bodyInit?null:a._bodyInit)}))}A.polyfill=!0,o.fetch||(o.fetch=A,o.Headers=m,o.Request=E,o.Response=S)},8864:(e,t)=>{"use strict";t.MediaStream=window.MediaStream,t.MediaStreamTrack=window.MediaStreamTrack,t.RTCDataChannel=window.RTCDataChannel,t.RTCDataChannelEvent=window.RTCDataChannelEvent,t.RTCDtlsTransport=window.RTCDtlsTransport,t.RTCIceCandidate=window.RTCIceCandidate,t.RTCIceTransport=window.RTCIceTransport,t.RTCPeerConnection=window.RTCPeerConnection,t.RTCPeerConnectionIceEvent=window.RTCPeerConnectionIceEvent,t.RTCRtpReceiver=window.RTCRtpReceiver,t.RTCRtpSender=window.RTCRtpSender,t.RTCRtpTransceiver=window.RTCRtpTransceiver,t.RTCSctpTransport=window.RTCSctpTransport,t.RTCSessionDescription=window.RTCSessionDescription,t.getUserMedia=window.getUserMedia,t.mediaDevices=navigator.mediaDevices},3039:(e,t,r)=>{try{e.exports={base:r(9956),testcase:r(1415),testsuite:r(2186),testsuites:r(5823),expectations:r(119),testsfile:r(2774)}}catch(e){console.log("fbp-spec: Failed to load schemas",e)}},3375:e=>{"use strict";e.exports=JSON.parse('{"id":"/definition/","type":"object","properties":{"id":{"type":"string","format":"uuid"},"label":{"type":"string"},"address":{"type":"string"},"type":{"type":"string"},"protocol":{"type":"string"},"secret":{"type":"string"},"allCapabilities":{"$ref":"/shared/capabilities"},"capabilities":{"$ref":"/shared/capabilities"}},"required":["address"],"additionalProperties":true}')},7731:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","id":"graph.json","title":"FBP graph","description":"A graph of FBP processes and connections between them.\\nThis is the primary way of specifying FBP programs.\\n","name":"graph","type":"object","additionalProperties":false,"properties":{"caseSensitive":{"type":"boolean","description":"Whether the graph port identifiers should be treated as case-sensitive"},"properties":{"type":"object","description":"User-defined properties attached to the graph.","additionalProperties":true,"properties":{"name":{"type":"string","description":"Name of the graph"},"environment":{"type":"object","description":"Information about the execution environment for the graph","additionalProperties":true,"required":["type"],"properties":{"type":{"type":"string","description":"Runtime type the graph is for","example":"noflo-nodejs"},"content":{"type":"string","description":"HTML fixture for browser-based graphs"}}},"description":{"type":"string","description":"Graph description"},"icon":{"type":"string","description":"Name of the icon that can be used for depicting the graph"}}},"inports":{"type":["object","undefined"],"description":"Exported inports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph inport"},"y":{"type":"integer","description":"Y coordinate of a graph inport"}}}}}}},"outports":{"type":["object","undefined"],"description":"Exported outports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","required":[],"additionalProperties":true,"properties":{"x":{"type":"integer","description":"X coordinate of a graph outport"},"y":{"type":"integer","description":"Y coordinate of a graph outport"}}}}}}},"groups":{"type":"array","description":"List of groups of processes","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"nodes":{"type":"array","items":{"type":"string"}},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"description":{"type":"string"}}}}}},"processes":{"type":"object","description":"The processes of this graph.\\nEach process is an instance of a component.\\n","additionalProperties":false,"patternProperties":{"[a-zA-Z0-9_]+":{"type":"object","properties":{"component":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph node"},"y":{"type":"integer","description":"Y coordinate of a graph node"}}}}}}},"connections":{"type":"array","description":"Connections of the graph.\\nA connection either connects ports of two processes, or specifices an IIP as initial input packet to a port.\\n","items":{"type":"object","additionalProperties":false,"properties":{"src":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"tgt":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"data":{},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"route":{"type":"integer","description":"Route identifier of a graph edge"},"schema":{"type":"string","format":"uri","description":"JSON schema associated with a graph edge"},"secure":{"type":"boolean","description":"Whether edge data should be treated as secure"}}}}}}}}')},2847:e=>{"use strict";e.exports={version:"1.0.32"}},9956:e=>{"use strict";e.exports=JSON.parse('{"id":"base.json","$schema":"http://json-schema.org/draft-04/schema","title":"Base definitions","definitions":{"JsonPath":{"type":"string","description":"JsonPath, see http://goessner.net/articles/JsonPath/","format":"jsonpath","example":"products.book[2]"}}}')},119:e=>{"use strict";e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"Expectation list","description":"Array of Expectation","type":"array","items":{"$ref":"expectation.json"}}')},1415:e=>{"use strict";e.exports=JSON.parse('{"id":"testcase.json","$schema":"http://json-schema.org/draft-04/schema","title":"Testcase","description":"A single test case","type":"object","properties":{"name":{"type":"string","description":"Name of this testcase/scenario"},"assertion":{"type":"string","description":"Description of what this testcase asserts"},"inputs":{"description":"The inputs send to the fixture input ports, or a sequence of such inputs","oneOf":[{"type":"object"},{"type":"array","items":{"type":"object"}}]},"expect":{"description":"Expected data on fixture output ports.\\nCan either be an object, or a sequence of such objects.\\n","oneOf":[{"$ref":"outputdata.json"},{"type":"array","items":[{"$ref":"outputdata.json"}]}]},"timeout":{"type":"number","description":"Timeout (in milliseconds). Overrides that set in the suite","default":2000},"skip":{"type":"string","description":"Flag to skip testcase.\\nShould be a description of the reason for skipping.\\n"}},"required":["name","assertion","inputs","expect"]}')},2774:e=>{"use strict";e.exports=JSON.parse('{"id":"testsfile.json","$schema":"http://json-schema.org/draft-04/schema","title":"Tests file","description":"One or more suites","oneOf":[{"$ref":"testsuites.json"},{"$ref":"testsuite.json"}]}')},2186:e=>{"use strict";e.exports=JSON.parse('{"id":"testsuite.json","$schema":"http://json-schema.org/draft-04/schema","title":"Test suite","description":"A collection of test cases","type":["object"],"properties":{"topic":{"type":"string","description":"The component/graph under test","example":"MyComponent3"},"name":{"type":"string","description":"Name of this test suite. Topic is used if no name is provided.","default":""},"fixture":{"type":"object","description":"The graph fixture to run for each test case"},"cases":{"type":"array","description":"The test cases","items":{"$ref":"testcase.json"},"default":[]},"timeout":{"type":"number","description":"Timeout (in milliseconds) for setup and default for each test case.","default":2000},"skip":{"type":"string","description":"Flag to skip test suite (and all containing test cases).\\nShould be a description of the reason for skipping.\\n"}},"required":["topic"]}')},5823:e=>{"use strict";e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"TestSuite list","description":"Array of TestSuite","type":"array","items":{"$ref":"testsuite.json"}}')},2993:()=>{},1758:()=>{}},r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e={"fbp-spec":n(2142),chai:n(1032),"js-yaml":n(5767)},window&&(window.require=function(t){if(e[t])return e[t];throw new Error("Module ".concat(t," not available"))})})();