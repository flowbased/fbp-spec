!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=63)}([function(e,t,r){"use strict";var n=r(13),i=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],o=["scalar","sequence","mapping"];e.exports=function(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===i.indexOf(t))throw new n('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach(function(r){e[r].forEach(function(e){t[String(e)]=r})}),t}(t.styleAliases||null),-1===o.indexOf(this.kind))throw new n('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,r){"use strict";
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=r}},function(e,t,r){"use strict";var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,l=[],p=!1,h=-1;function d(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!p){var e=u(d);p=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,p=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||p||u(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=[];
/*!
 * Chai version
 */t.version="4.1.2",
/*!
 * Assertion Error
 */
t.AssertionError=r(45);
/*!
 * Utils for plugins (not exported)
 */
var i=r(105);t.use=function(e){return~n.indexOf(e)||(e(t,i),n.push(e)),t},
/*!
 * Utility Functions
 */
t.util=i;
/*!
 * Configuration
 */
var o=r(4);t.config=o;
/*!
 * Primary `Assertion` prototype
 */
var a=r(122);t.use(a);
/*!
 * Core Assertions
 */
var s=r(123);t.use(s);
/*!
 * Expect interface
 */
var u=r(124);t.use(u);
/*!
 * Should interface
 */
var c=r(125);t.use(c);
/*!
 * Assert interface
 */
var l=r(126);t.use(l)},function(e,t,r){"use strict";e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","inspect","toJSON"]}},function(e,t,r){"use strict";
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));for(var i in t.__flags||(t.__flags=Object.create(null)),r=3!==arguments.length||r,n)(r||"object"!==i&&"ssfi"!==i&&"lockSsfi"!==i&&"message"!=i)&&(t.__flags[i]=n[i])}},function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";(function(n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(76)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(2))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return void 0===e||null===e}e.exports.isNothing=i,e.exports.isObject=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:i(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,i,o;if(t)for(r=0,n=(o=Object.keys(t)).length;r<n;r+=1)e[i=o[r]]=t[i];return e}},function(e,t,r){"use strict";var n=r(8),i=r(13),o=r(0);function a(e,t,r){var n=[];return e.include.forEach(function(e){r=a(e,t,r)}),e[t].forEach(function(e){r.forEach(function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)}),r.push(e)}),r.filter(function(e,t){return-1===n.indexOf(t)})}function s(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=a(this,"implicit",[]),this.compiledExplicit=a(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}s.DEFAULT=null,s.create=function(){var e,t;switch(arguments.length){case 1:e=s.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new i("Wrong number of arguments for Schema.create function")}if(e=n.toArray(e),t=n.toArray(t),!e.every(function(e){return e instanceof s}))throw new i("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof o}))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new s({include:e,explicit:t})},e.exports=s},function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",a=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+n+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+a+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",i=o(e);for(var a in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+n(a,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var o=t[n];i[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:u,escapeQuotes:c,equal:r(32),ucs2length:r(151),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(l,"").replace(p,"").replace(h,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(d);r&&2==r.length&&(e=t?e.replace(m,"").replace(y,b):e.replace(f,"").replace(g,v));return(r=e.match(x))&&3===r.length?e.replace(w,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},toQuotedString:E,getPathExpr:function(e,t,r,n){return k(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=E(r?"/"+_(t):u(t));return k(e,n)},getData:function(e,t,r){var n,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!C.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(S)))throw new Error("Invalid JSON-pointer: "+e);if(n=+a[1],"#"==(i=a[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(o="data"+(t-n||""),!i)return o}for(var s=o,c=i.split("/"),l=0;l<c.length;l++){var p=c[l];p&&(o+=u(D(p)),s+=" && "+o)}return s},unescapeFragment:function(e){return D(decodeURIComponent(e))},unescapeJsonPointer:D,escapeFragment:function(e){return encodeURIComponent(_(e))},escapeJsonPointer:_};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function u(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var l=/else\s*{\s*}/g,p=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,h=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var d=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,g="return errors === 0;",v="validate.errors = null; return true;",y=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,b="return data;",x=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,w=/if \(rootData === undefined\) rootData = data;/;function E(e){return"'"+c(e)+"'"}var C=/^\/(?:[^~]|~0|~1)*$/,S=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function _(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function D(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";(function(e){var n,i;n=r(23),t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.randomString=function(e){var t,r,n,i,o;for(o="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0,i=e;0<=i?r<i:r>i;0<=i?++r:--r)t=Math.floor(Math.random()*n.length),o+=n.charAt(t);return o},t.asyncSeries=function(e,t,r){var n,i;return e=e.slice(0),i=[],(n=function(){var o;return 0===e.length?r(null,i):(o=e.shift(),t(o,function(e,t){return e?r(e):(i.push(t),n())}))})()},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},t.startsWith=function(e,t){return 0===e.indexOf(t)},i=function(e){return function(t){return new n(function(r,n){return setTimeout(n.bind(null,t),e)})}},t.retryUntil=function(e,t){var r,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;for(o=n.reject(new Error("retry starter")),r=0,a=u;0<=a?r<=a:r>=a;0<=a?++r:--r)o=o.catch(e).then(t).catch(i(s));return o}}).call(this,r(2))},function(e,t,r){"use strict"},function(e,t,r){"use strict";function n(e,t){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=n},function(e,t,r){"use strict";var n=r(9);e.exports=new n({include:[r(40)],implicit:[r(87),r(88)],explicit:[r(89),r(90),r(91),r(92)]})},function(e,t,r){"use strict";var n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();i=r(51),n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.definition=e,r.definition.capabilities||(r.definition.capabilities=[]),r.graph=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.EventEmitter),a(t,[{key:"setMain",value:function(e){this.graph=e}},{key:"getType",value:function(){return this.definition.protocol}},{key:"getAddress",value:function(){return this.definition.address}},{key:"canDo",value:function(e){return-1!==this.definition.capabilities.indexOf(e)}},{key:"isConnected",value:function(){return!1}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"reconnect",value:function(){return this.disconnect(),this.connect()}},{key:"start",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("start",{graph:this.graph.name||this.graph.properties.id})}},{key:"stop",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("stop",{graph:this.graph.name||this.graph.properties.id})}},{key:"setParentElement",value:function(e){}},{key:"getElement",value:function(){}},{key:"recvMessage",value:function(e){switch(this.emit("message",e),e.protocol){case"runtime":return this.recvRuntime(e.command,e.payload);case"graph":return this.recvGraph(e.command,e.payload);case"network":return this.recvNetwork(e.command,e.payload);case"component":return this.recvComponent(e.command,e.payload);case"trace":return this.recvTrace(e.command,e.payload)}}},{key:"recvRuntime",value:function(e,t){var r,n;if("runtime"===e){for(r in t)n=t[r],this.definition[r]=n;this.emit("capabilities",t.capabilities||[])}return this.emit("runtime",{command:e,payload:t})}},{key:"recvComponent",value:function(e,t){switch(e){case"error":return this.emit("network",{command:e,payload:t});default:return this.emit("component",{command:e,payload:t})}}},{key:"recvGraph",value:function(e,t){return this.emit("graph",{command:e,payload:t})}},{key:"recvNetwork",value:function(e,t){switch(e){case"started":return this.emit("execution",{running:null==t||null==t.running||t.running,started:null==t||!t.started||t.started});case"stopped":return this.emit("execution",{running:null!=t&&null!=t.running&&t.running,started:!(null==t||!t.started)&&t.started});case"status":return this.emit("execution",{running:t.running,started:t.started});case"icon":return this.emit("icon",t);default:return this.emit("network",{command:e,payload:t})}}},{key:"recvTrace",value:function(e,t){return this.emit("trace",{command:e,payload:t})}},{key:"sendRuntime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("runtime",e,t)}},{key:"sendGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("graph",e,t)}},{key:"sendNetwork",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("network",e,t)}},{key:"sendComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("component",e,t)}},{key:"sendTrace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("trace",e,t)}},{key:"send",value:function(e,t,r){}}]),t}(),e.exports=n},function(e,t,r){"use strict";(function(n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(184)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(2))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function a(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e}function s(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,n,i,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(s(r=this._events[e]))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(a(r))for(i=Array.prototype.slice.call(arguments,1),n=(c=r.slice()).length,u=0;u<n;u++)c[u].apply(this,i);return!0},i.prototype.addListener=function(e,t){var r;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var r,n,i,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";var n=r(9);e.exports=n.DEFAULT=new n({include:[r(14)],explicit:[r(93),r(94),r(95)]})},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(47),o=r(48),a=r(110),s=r(4);e.exports=function(e,t,r,n){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===r?2:r)};var u=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":n(e))&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,r,g){if(r&&"function"==typeof r.inspect&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var v=r.inspect(g,e);return"string"!=typeof v&&(v=c(e,v,g)),v}var y=function(e,t){switch(void 0===t?"undefined":n(t)){case"undefined":return e.stylize("undefined","undefined");case"string":var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,r);if(y)return y;if(u(r)){if("outerHTML"in r)return r.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(r);var b=document.createElementNS("http://www.w3.org/1999/xhtml","_");b.appendChild(r.cloneNode(!1));var x=b.innerHTML.replace("><",">"+r.innerHTML+"<");return b.innerHTML="",x}catch(e){}}var w,E,C=a(r),S=e.showHidden?o(r):C;if(0===S.length||f(r)&&(1===S.length&&"stack"===S[0]||2===S.length&&"description"===S[0]&&"stack"===S[1])){if("function"==typeof r)return E=(w=i(r))?": "+w:"",e.stylize("[Function"+E+"]","special");if(h(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(d(r))return e.stylize(Date.prototype.toUTCString.call(r),"date");if(f(r))return l(r)}var k,_="",D=!1,A=!1,P=["{","}"];if(function(e){return"object"===(void 0===e?"undefined":n(e))&&/\w+Array]$/.test(m(e))}(r)&&(A=!0,P=["[","]"]),function(e){return Array.isArray(e)||"object"===(void 0===e?"undefined":n(e))&&"[object Array]"===m(e)}(r)&&(D=!0,P=["[","]"]),"function"==typeof r&&(_=" [Function"+(E=(w=i(r))?": "+w:"")+"]"),h(r)&&(_=" "+RegExp.prototype.toString.call(r)),d(r)&&(_=" "+Date.prototype.toUTCString.call(r)),f(r))return l(r);if(0===S.length&&(!D||0==r.length))return P[0]+_+P[1];if(g<0)return h(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");if(e.seen.push(r),D)k=function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)Object.prototype.hasOwnProperty.call(t,String(a))?o.push(p(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}(e,r,g,C,S);else{if(A)return function(e){for(var t="[ ",r=0;r<e.length;++r){if(t.length>=s.truncateThreshold-7){t+="...";break}t+=e[r]+", "}-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]"));return t}(r);k=S.map(function(t){return p(e,r,g,C,t,D)})}return e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(k,_,P)}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i,o){var a,s,u=Object.getOwnPropertyDescriptor(t,i);if(u&&(u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special"))),n.indexOf(i)<0&&(a="["+i+"]"),s||(e.seen.indexOf(t[i])<0?(s=c(e,t[i],null===r?null:r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),void 0===a){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e){return"object"===(void 0===e?"undefined":n(e))&&"[object RegExp]"===m(e)}function d(e){return"object"===(void 0===e?"undefined":n(e))&&"[object Date]"===m(e)}function f(e){return"object"===(void 0===e?"undefined":n(e))&&"[object Error]"===m(e)}function m(e){return Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=r(4);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return n.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t,r){"use strict";r(4);var n=Object.getOwnPropertyDescriptor(function(){},"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,r){"use strict";var n=r(4),i=r(1),o=r(48),a=r(20),s=["__flags","__methods","_obj","assert"];function u(e,t,r){if(!r){r=[];for(var n=0;n<=e.length;n++)r[n]=[]}return r[e.length]&&r[e.length][t.length]||(0===e.length||0===t.length?r[e.length][t.length]=Math.max(e.length,t.length):r[e.length][t.length]=Math.min(u(e.slice(0,-1),t,r)+1,u(e,t.slice(0,-1),r)+1,u(e.slice(0,-1),t.slice(0,-1),r)+(e.slice(-1)===t.slice(-1)?0:1))),r[e.length][t.length]}e.exports=function(e,t){return a()?new Proxy(e,{get:function e(r,a){if("string"==typeof a&&-1===n.proxyExcludedKeys.indexOf(a)&&!Reflect.has(r,a)){if(t)throw Error("Invalid Chai property: "+t+"."+a+'. See docs for proper usage of "'+t+'".');var c=o(r).filter(function(e){return!Object.prototype.hasOwnProperty(e)&&-1===s.indexOf(e)}).sort(function(e,t){return u(a,e)-u(a,t)});throw c.length&&u(c[0],a)<4?Error("Invalid Chai property: "+a+'. Did you mean "'+c[0]+'"?'):Error("Invalid Chai property: "+a)}return-1!==s.indexOf(a)||i(r,"lockSsfi")||i(r,"ssfi",e),Reflect.get(r,a)}}):e}},function(e,t,r){"use strict";(function(r,n,i){var o,a,s,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){"object"==u(t)&&void 0!==e?e.exports=r():(a=[],void 0===(s="function"==typeof(o=r)?o.apply(t,a):o)||(e.exports=s))}(function(){var e,t,o;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,t,n){var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),a=e("./queue"),s=e("./util");function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function c(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function l(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function p(e){this._normalQueue._pushOne(e),this._queueTick()}u.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},u.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(e,t){t?(r.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),r.exit(2)):this.throwLater(e)},u.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(u.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?c.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},u.prototype.invoke=function(e,t,r){this._trampolineEnabled?l.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},u.prototype.settlePromises=function(e){this._trampolineEnabled?p.call(this,e):this._schedule(function(){e._settlePromises()})}):(u.prototype.invokeLater=c,u.prototype.invoke=l,u.prototype.settlePromises=p),u.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},u.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},t.exports=u,t.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){t.exports=function(e,t,r,n){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=r(o),l=new e(t);l._propagateFrom(this,1);var p=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:p,bindingPromise:c};p._then(t,a,void 0,l,h),c._then(s,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(p);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){var n;"undefined"!=typeof Promise&&(n=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,r){var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;r.isIdentifier;function i(e){return function(e,n){var i;if(null!=e&&(i=e[n]),"function"!=typeof i){var o="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=a;else if(n){var r=(void 0)(e);t=null!==r?r:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){t.exports=function(t,r,n,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=a(e).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){t.exports=function(t){var r=e("./util"),n=e("./es5").keys,i=r.tryCatch,o=r.errorObj;return function(e,a,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var p=e[l];if(p===Error||null!=p&&p.prototype instanceof Error){if(u instanceof p)return i(a).call(c,u)}else if("function"==typeof p){var h=i(p).call(c,u);if(h===o)return h;if(h)return i(a).call(c,u)}else if(r.isObject(u)){for(var d=n(p),f=0;f<d.length;++f){var m=d[f];if(p[m]!=u[m])continue e}return i(a).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(i())}function i(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,u=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,t,n){t.exports=function(t,n){var i,o,a,s=t._getDomain,c=t._async,l=e("./errors").Warning,p=e("./util"),h=p.canAttachTrace,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,g=null,v=null,y=!1,b=!(0==p.env("BLUEBIRD_DEBUG")),x=!(0==p.env("BLUEBIRD_WARNINGS")||!b&&!p.env("BLUEBIRD_WARNINGS")),w=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),E=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(x||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",i,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),q("unhandledRejection",o,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,r){return U(e,t,r||this)},t.onPossiblyUnhandledRejection=function(e){var t=s();o="function"==typeof e?null===t?e:p.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=s();i="function"==typeof e?null===t?e:p.domainBind(t,e):void 0};var C=function(){};t.longStackTraces=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&X()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;Q.longStackTraces=!0,C=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),c.enableTrampoline(),Q.longStackTraces=!1},t.prototype._captureStackTrace=B,t.prototype._attachExtraTrace=L,n.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return Q.longStackTraces&&X()};var S=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return p.global.dispatchEvent(e),function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!p.global.dispatchEvent(r)}}if("function"==typeof Event){e=new Event("CustomEvent");return p.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,!p.global.dispatchEvent(r)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!p.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),k=p.isNode?function(){return r.emit.apply(r,arguments)}:p.global?function(e){var t="on"+e.toLowerCase(),r=p.global[t];return!!r&&(r.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function _(e,t){return{promise:t}}var D={promiseCreated:_,promiseFulfilled:_,promiseRejected:_,promiseResolved:_,promiseCancelled:_,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:_},A=function(e){var t=!1;try{t=k.apply(null,arguments)}catch(e){c.throwLater(e),t=!0}var r=!1;try{r=S(e,D[e].apply(null,arguments))}catch(e){c.throwLater(e),r=!0}return r||t};function P(){return!1}function F(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+p.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function T(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?p.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function O(){return this._onCancelField}function j(e){this._onCancelField=e}function I(){this._cancellationParent=void 0,this._onCancelField=void 0}function N(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&C()),"warnings"in e){var r=e.warnings;Q.warnings=!!r,E=Q.warnings,p.isObject(r)&&"wForgottenReturn"in r&&(E=!!r.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Q.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=I,t.prototype._propagateFrom=N,t.prototype._onCancel=O,t.prototype._setOnCancel=j,t.prototype._attachCancellationCallback=T,t.prototype._execute=F,R=N,Q.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Q.monitoring?(Q.monitoring=!0,t.prototype._fireEvent=A):!e.monitoring&&Q.monitoring&&(Q.monitoring=!1,t.prototype._fireEvent=P)),t},t.prototype._fireEvent=P,t.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var R=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function M(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function B(){this._trace=new Y(this._peekContext())}function L(e,t){if(h(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=z(e);p.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),p.notEnumerableProp(e,"__stackCleaned__",!0)}}}function U(e,r,n){if(Q.warnings){var i,o=new l(e);if(r)n._attachExtraTrace(o);else if(Q.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=z(o);o.stack=a.message+"\n"+a.stack.join("\n")}A("warning",o)||J(o,"",!0)}}function $(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||g.test(n),o=i&&K(n);i&&!o&&(y&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function z(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||g.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:$(t)}}function J(e,t,r){if("undefined"!=typeof console){var n;if(p.isObject(e)){var i=e.stack;n=t+v(i,e)}else n=t+String(e);"function"==typeof a?a(n,r):"function"!=typeof console.log&&"object"!==u(console.log)||console.log(n)}}function q(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){c.throwLater(e)}"unhandledRejection"===e?A(e,r,n)||i||J(r,"Unhandled rejection "):A(e,n)}function V(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():p.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function X(){return"function"==typeof W}var K=function(){return!1},H=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function G(e){var t=e.match(H);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function Y(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);W(this,Y),t>32&&this.uncycle()}p.inherits(Y,Error),n.CapturedTrace=Y,Y.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;for(n=(e=this._length=n)-1;n>=0;--n){var o=t[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<e;++n){var a=r[t[n].stack];if(void 0!==a&&a!==n){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,c=n-2;c>=0;--c)t[c]._length=u,u++;return}}}},Y.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=z(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push($(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,o=t[i],a=-1,s=n.length-1;s>=0;--s)if(n[s]===o){a=s;break}for(s=a;s>=0;--s){var u=n[s];if(t[i]!==u)break;t.pop(),i--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),p.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),p.notEnumerableProp(e,"__stackCleaned__",!0)}};var W=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():V(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,g=e,v=t;var r=Error.captureStackTrace;return K=function(e){return d.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return g=/@/,v=t,y=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return"stack"in i||!n||"number"!=typeof Error.stackTraceLimit?(v=function(e,t){return"string"==typeof e?e:"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t||void 0===t.name||void 0===t.message?V(t):t.toString()},null):(g=e,v=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(e){console.warn(e)},p.isNode&&r.stderr.isTTY?a=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Q={warnings:x,longStackTraces:!1,cancellation:!1,monitoring:!1};return w&&t.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return R},boundValueFunction:function(){return M},checkForgottenReturns:function(e,t,r,n,i){if(void 0===e&&null!==t&&E){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),u=$(s),c=u.length-1;c>=0;--c){var l=u[c];if(!f.test(l)){var p=l.match(m);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(u.length>0){var h=u[0];for(c=0;c<s.length;++c)if(s[c]===h){c>0&&(a="\n"+s[c-1]);break}}}var d="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(d,!0,t)}},setBounds:function(e,t){if(X()){for(var r,n,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u)if(c=G(i[u])){r=c.fileName,a=c.line;break}for(u=0;u<o.length;++u){var c;if(c=G(o[u])){n=c.fileName,s=c.line;break}}a<0||s<0||!r||!n||r!==n||a>=s||(K=function(e){if(d.test(e))return!0;var t=G(e);return!!(t&&t.fileName===r&&a<=t.line&&t.line<=s)})}},warn:U,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),U(r)},CapturedTrace:Y,fireDomEvent:S,fireGlobalEvent:k}}},{"./errors":12,"./util":36}],10:[function(e,t,r){t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();return this.caught(r,function(){return n})}}},{}],11:[function(e,t,r){t.exports=function(e,t){var r=e.reduce,n=e.all;function i(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){var n,i,o=e("./es5"),a=o.freeze,s=e("./util"),u=s.inherits,c=s.notEnumerableProp;function l(e,t){function r(n){if(!(this instanceof r))return new r(n);c(this,"message","string"==typeof n?n:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(r,Error),r}var p=l("Warning","warning"),h=l("CancellationError","cancellation error"),d=l("TimeoutError","timeout error"),f=l("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(e){n=l("TypeError","type error"),i=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(f.prototype[m[g]]=Array.prototype[m[g]]);o.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(n=i.join("\n"))+"\n"}return v--,t},u(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:h,TimeoutError:d,OperationalError:y,RejectionError:y,AggregateError:f}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},{}],15:[function(e,t,r){t.exports=function(t,r,n){var i=e("./util"),o=t.CancellationError,a=i.errorObj,s=e("./catch_filter")(n);function u(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function p(){return d.call(this,this.promise._target()._settledValue())}function h(e){if(!l(this,e))return a.e=e,a}function d(e){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),e);if(u===n)return u;if(void 0!==u){i._setReturnedNonUndefined();var d=r(u,i);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new o("late cancellation observer");return i._attachExtraTrace(f),a.e=f,a}d.isPending()&&d._attachCancellationCallback(new c(this))}return d._then(p,h,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=e,a):(l(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new u(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,d,d)},t.prototype.tap=function(e){return this._passThrough(e,1,d)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,d);var n,o=new Array(r-1),a=0;for(n=0;n<r-1;++n){var u=arguments[n];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[a++]=u}o.length=a;var c=arguments[n];return this._passThrough(s(o,c,this),1,void 0,d)},u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){t.exports=function(t,r,n,i,o,a){var s=e("./errors").TypeError,u=e("./util"),c=u.errorObj,l=u.tryCatch,p=[];function h(e,r,i,o){if(a.cancellation()){var s=new t(n),u=this._finallyPromise=new t(n);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new t(n))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(h,o),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(e){var r=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(o instanceof t||null!==(o=function(e,r,n){for(var o=0;o<r.length;++o){n._pushContext();var a=l(r[o])(e);if(n._popContext(),a===c){n._pushContext();var s=t.reject(c.e);return n._popContext(),s}var u=i(a,n);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=h,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new n(void 0,void 0,r,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new s("expecting a function but got "+u.classString(e));p.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new h(e,this),i=n.promise();return n._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,r){t.exports=function(t,r,n,i,o,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var i=new r(n).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,r){t.exports=function(t,r,n,i,o,a){var s=t._getDomain,c=e("./util"),l=c.tryCatch,p=c.errorObj,h=t._async;function d(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var i=s();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function f(e,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+c.classString(r));var a=0;if(void 0!==i){if("object"!==(void 0===i?"undefined":u(i))||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));a=i.concurrency}return new d(e,r,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}c.inherits(d,r),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,r){var n=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(r<0){if(n[r=-1*r-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return n[r]=e,this._queue.push(r),!1;null!==s&&(s[r]=e);var c=this._promise,h=this._callback,d=c._boundValue();c._pushContext();var f=l(h).call(d,e,r,o),m=c._popContext();if(a.checkForgottenReturns(f,m,null!==s?"Promise.filter":"Promise.map",c),f===p)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof t){var v=(g=g._target())._bitField;if(0==(50397184&v))return u>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[r]=f}return++this._totalResolved>=o&&(null!==s?this._filter(n,s):this._resolve(n),!0)},d.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},d.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,o=0;o<r;++o)e[o]&&(n[i++]=t[o]);n.length=i,this._resolve(n)},d.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return f(this,e,t,null)},t.map=function(e,t,r,n){return f(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){t.exports=function(t,r,n,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var i=s(e).apply(this,arguments),a=n._popContext();return o.checkForgottenReturns(i,a,"Promise.method",n),n._resolveFromSyncValue(i),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var n,u=new t(r);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];n=a.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else n=s(e)();var p=u._popContext();return o.checkForgottenReturns(n,p,"Promise.try",u),u._resolveFromSyncValue(n),u},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){var n=e("./util"),i=n.maybeWrapAsError,o=e("./errors").OperationalError,a=e("./es5");var s=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&a.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=a.keys(e),i=0;i<r.length;++i){var u=r[i];s.test(u)||(t[u]=e[u])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var o=u(i(r));e._attachExtraTrace(o),e._reject(o)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){t.exports=function(t){var r=e("./util"),n=t._async,i=r.tryCatch,o=r.errorObj;function a(e,t){if(!r.isArray(e))return s.call(this,e,t);var a=i(t).apply(this._boundValue(),[null].concat(e));a===o&&n.throwLater(a.e)}function s(e,t){var r=this._boundValue(),a=void 0===e?i(t).call(r,null):i(t).call(r,null,e);a===o&&n.throwLater(a.e)}function u(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var a=i(t).call(this._boundValue(),e);a===o&&n.throwLater(a.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=s;void 0!==t&&Object(t).spread&&(r=a),this._then(r,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){t.exports=function(){var n=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new P.PromiseInspection(this._target())},o=function(e){return P.reject(new f(e))};function a(){}var s,u={},c=e("./util");s=c.isNode?function(){var e=r.domain;return void 0===e&&(e=null),e}:function(){return null},c.notEnumerableProp(P,"_getDomain",s);var l=e("./es5"),p=e("./async"),h=new p;l.defineProperty(P,"_async",{value:h});var d=e("./errors"),f=P.TypeError=d.TypeError;P.RangeError=d.RangeError;var m=P.CancellationError=d.CancellationError;P.TimeoutError=d.TimeoutError,P.OperationalError=d.OperationalError,P.RejectionError=d.OperationalError,P.AggregateError=d.AggregateError;var g=function(){},v={},y={},b=e("./thenables")(P,g),x=e("./promise_array")(P,g,b,o,a),w=e("./context")(P),E=w.create,C=e("./debuggability")(P,w),S=(C.CapturedTrace,e("./finally")(P,b,y)),k=e("./catch_filter")(y),_=e("./nodeback"),D=c.errorObj,A=c.tryCatch;function P(e){e!==g&&function(e,t){if(null==e||e.constructor!==P)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new f("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function F(e){this.promise._resolveCallback(e)}function T(e){this.promise._rejectCallback(e,!1)}function O(e){var t=new P(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var a=arguments[r];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));n[i++]=a}return n.length=i,e=arguments[r],this.then(void 0,k(n,e,this))}return this.then(void 0,e)},P.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},P.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(r+=", "+c.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},P.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},P.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},P.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},P.getNewLibraryCopy=t.exports,P.is=function(e){return e instanceof P},P.fromNode=P.fromCallback=function(e){var t=new P(g);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=A(e)(_(t,r));return n===D&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},P.all=function(e){return new x(e).promise()},P.cast=function(e){var t=b(e);return t instanceof P||((t=new P(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(e){var t=new P(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},P.setScheduler=function(e){if("function"!=typeof e)throw new f("expecting a function but got "+c.classString(e));return h.setScheduler(e)},P.prototype._then=function(e,t,r,n,i){var o=void 0!==i,a=o?i:new P(g),u=this._target(),l=u._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=s();if(0!=(50397184&l)){var d,f,v=u._settlePromiseCtx;0!=(33554432&l)?(f=u._rejectionHandler0,d=e):0!=(16777216&l)?(f=u._fulfillmentHandler0,d=t,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,f=new m("late cancellation observer"),u._attachExtraTrace(f),d=t),h.invoke(v,u,{handler:null===p?d:"function"==typeof d&&c.domainBind(p,d),promise:a,receiver:n,value:f})}else u._addCallbacks(e,t,a,n,p);return a},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},P.prototype._promiseAt=function(e){return this[4*e-4+2]},P.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},P.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(t,r,n,i,null)},P.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=u),this._addCallbacks(r,n,i,o,null)},P.prototype._addCallbacks=function(e,t,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:c.domainBind(i,t));else{var a=4*o-4;this[a+2]=r,this[a+3]=n,"function"==typeof e&&(this[a+0]=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:c.domainBind(i,t))}return this._setLength(o+1),o},P.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},P.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=b(e,this);if(!(r instanceof P))return this._fulfill(e);t&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new m("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(n())}},P.prototype._rejectCallback=function(e,t,r){var n=c.ensureErrorObject(e),i=n===e;if(!i&&!r&&C.warnings()){var o="a promise was rejected with a non-error: "+c.classString(e);this._warn(o,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},P.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},P.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0==(65536&i)){var o;n._pushContext(),t===v?r&&"number"==typeof r.length?o=A(e).apply(this._boundValue(),r):(o=D).e=new f("cannot .spread() a non-array: "+c.classString(r)):o=A(e).call(t,r);var a=n._popContext();0==(65536&(i=n._bitField))&&(o===y?n._reject(r):o===D?n._rejectCallback(o.e,!1):(C.checkForgottenReturns(o,a,"",n,this),n._resolveCallback(o)))}},P.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(e){this._rejectionHandler0=e},P.prototype._settlePromise=function(e,t,r,n){var o=e instanceof P,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(o&&e._invokeInternalOnCancel(),r instanceof S&&r.isFinallyHandler()?(r.cancelPromise=e,A(t).call(r,n)===D&&e._reject(D.e)):t===i?e._fulfill(i.call(r)):r instanceof a?r._promiseCancelled(e):o||e instanceof x?e._cancel():r.cancel()):"function"==typeof t?o?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof a?r._isResolved()||(0!=(33554432&s)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):o&&(u&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(n):e._reject(n))},P.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,i=e.value;"function"==typeof t?r instanceof P?this._settlePromiseFromHandler(t,n,i,r):t.call(n,i,r):r instanceof P&&r._reject(i)},P.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},P.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},P.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},P.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():h.settlePromises(this))}},P.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return h.fatalError(e,c.isNode);(65535&t)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},P.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},P.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new P(g),resolve:F,reject:T}},c.notEnumerableProp(P,"_makeSelfResolutionError",n),e("./method")(P,g,b,o,C),e("./bind")(P,g,b,C),e("./cancel")(P,x,o,C),e("./direct_resolve")(P),e("./synchronous_inspection")(P),e("./join")(P,x,b,g,h,s),P.Promise=P,P.version="3.5.1",e("./map.js")(P,x,o,b,g,C),e("./call_get.js")(P),e("./using.js")(P,o,b,E,g,C),e("./timers.js")(P,g,C),e("./generators.js")(P,o,g,b,a,C),e("./nodeify.js")(P),e("./promisify.js")(P,g),e("./props.js")(P,x,b,o),e("./race.js")(P,g,b,o),e("./reduce.js")(P,x,o,b,g,C),e("./settle.js")(P,x,C),e("./some.js")(P,x,o),e("./filter.js")(P,g),e("./each.js")(P,g),e("./any.js")(P),c.toFastProperties(P),c.toFastProperties(P.prototype),O({a:1}),O({b:2}),O({c:3}),O(1),O(function(){}),O(void 0),O(!1),O(new P(g)),C.setBounds(p.firstLineError,c.lastLineError),P}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){t.exports=function(t,r,n,i,o){var a=e("./util");a.isArray;function s(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(r,o){var s=n(this._values,this._promise);if(s instanceof t){var u=(s=s._target())._bitField;if(this._values=s,0==(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<r;++s){var u=n(e[s],i);a=u instanceof t?(u=u._target())._bitField:null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,r){t.exports=function(t,r){var n={},i=e("./util"),o=e("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,c=i.canEvaluate,l=e("./errors").TypeError,p={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!h.test(e)}function m(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function g(e,t,r){var n=i.getDataPropertyOrDefault(e,t+r,p);return!!n&&m(n)}function v(e,t,r,n){for(var o=i.inheritedDataKeys(e),a=[],s=0;s<o.length;++s){var u=o[s],c=e[u],p=n===d||d(u,c,e);"function"!=typeof c||m(c)||g(e,u,t)||!n(u,c,e,p)||a.push(u,c)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var o=i.replace(r,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(a,t,r),a}var y=function(e){return e.replace(/([$])/,"\\$")};var b=c?void 0:function(e,u,c,l,p,h){var d=function(){return this}(),f=e;function m(){var i=u;u===n&&(i=this);var c=new t(r);c._captureStackTrace();var l="string"==typeof f&&this!==d?this[f]:e,p=o(c,h);try{l.apply(i,a(arguments,p))}catch(e){c._rejectCallback(s(e),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof f&&(e=l),i.notEnumerableProp(m,"__isPromisified__",!0),m};function x(e,t,r,o,a){for(var s=new RegExp(y(t)+"$"),u=v(e,t,s,r),c=0,l=u.length;c<l;c+=2){var p=u[c],h=u[c+1],d=p+t;if(o===b)e[d]=b(p,n,p,h,t,a);else{var f=o(h,function(){return b(p,n,p,h,t,a)});i.notEnumerableProp(f,"__isPromisified__",!0),e[d]=f}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+i.classString(e));if(m(e))return e;var r=function(e,t,r){return b(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return i.copyDescriptors(e,r,f),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==(void 0===e?"undefined":u(e)))throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var o=t.filter;"function"!=typeof o&&(o=d);var a=t.promisifier;if("function"!=typeof a&&(a=b),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(e),c=0;c<s.length;++c){var p=e[s[c]];"constructor"!==s[c]&&i.isClass(p)&&(x(p.prototype,n,o,a,r),x(p,n,o,a,r))}return x(e,n,o,a,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){t.exports=function(t,r,n,i){var o,a=e("./util"),s=a.isObject,u=e("./es5");"function"==typeof Map&&(o=Map);var c=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var i=new Array(2*n.size);return n.forEach(r,i),i}}();function l(e){var t,r=!1;if(void 0!==o&&e instanceof o)t=c(e),r=!0;else{var n=u.keys(e),i=n.length;t=new Array(2*i);for(var a=0;a<i;++a){var s=n[a];t[a]=e[s],t[a+i]=s}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function p(e){var r,o=n(e);return s(o)?(r=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&r._propagateFrom(o,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,r),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new o,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],a=e[n];t.set(i,a)}return t}(this._values);else{r={};for(var n=this.length(),i=0,a=this.length();i<a;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return p(this)},t.props=function(e){return p(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){t.exports=function(t,r,n,i){var o=e("./util"),a=function(e){return e.then(function(t){return s(t,e)})};function s(e,s){var u=n(e);if(u instanceof t)return a(u);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var c=new t(r);void 0!==s&&c._propagateFrom(s,3);for(var l=c._fulfill,p=c._reject,h=0,d=e.length;h<d;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(l,p,void 0,c,null)}return c}t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,r){t.exports=function(t,r,n,i,o,a){var s=t._getDomain,u=e("./util"),c=u.tryCatch;function l(e,r,n,i){this.constructor$(e);var a=s();this._fn=null===a?r:u.domainBind(a,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function h(e,t,r,i){return"function"!=typeof t?n("expecting a function but got "+u.classString(t)):new l(e,t,r,i).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=i(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(e){var r,n=this.array,i=n._promise,o=c(n._fn);i._pushContext(),(r=void 0!==n._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var s=i._popContext();return a.checkForgottenReturns(r,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}u.inherits(l,r),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var r,n;this._values=e;var i=e.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var o={accum:null,value:e[n],index:n,length:i,array:this};r=r._then(d,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(p,p,void 0,r,this)},t.prototype.reduce=function(e,t){return h(this,e,t,null)},t.reduce=function(e,t,r,n){return h(e,t,r,n)}}},{"./util":36}],29:[function(e,t,o){var a,s=e("./util"),u=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,l=r.nextTick;a=s.isRecentNode?function(e){c.call(n,e)}:function(e){l.call(r,e)}}else if("function"==typeof u&&"function"==typeof u.resolve){var p=u.resolve();a=function(e){p.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),r=!1}).observe(n,t);return function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(e,t),r||(r=!0,n.classList.toggle("foo"))}}();t.exports=a},{"./util":36}],30:[function(e,t,r){t.exports=function(t,r,n){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,r),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},o.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){t.exports=function(t,r,n){var i=e("./util"),o=e("./errors").RangeError,a=e("./errors").AggregateError,s=i.isArray,u={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e),i=r.promise();return r.setHowMany(t),r.init(),i}i.inherits(c,r),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new a,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,r){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){t.exports=function(t,r){var n=e("./util"),i=n.errorObj,o=n.isObject;var a={}.hasOwnProperty;return function(e,s){if(o(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(u===i){s&&s._pushContext();var c=t.reject(u.e);return s&&s._popContext(),c}if("function"==typeof u)return function(e){try{return a.call(e,"_promise0")}catch(e){return!1}}(e)?(c=new t(r),e._then(c._fulfill,c._reject,void 0,c,null),c):function(e,o,a){var s=new t(r),u=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,l=n.tryCatch(o).call(e,function(e){s&&(s._resolveCallback(e),s=null)},function(e){s&&(s._rejectCallback(e,c,!0),s=null)});return c=!1,s&&l===i&&(s._rejectCallback(l.e,!0,!0),s=null),u}(e,u,s)}return e}}},{"./util":36}],34:[function(e,t,r){t.exports=function(t,r,n){var i=e("./util"),o=t.TimeoutError;function a(e){this.handle=e}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,i){var o,u;return void 0!==i?(o=t.resolve(i)._then(s,null,null,e,void 0),n.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(r),u=setTimeout(function(){o._fulfill()},+e),n.cancellation()&&o._setOnCancel(new a(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return u(e,this)};function c(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){var r,s;e=+e;var u=new a(setTimeout(function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,s)},e));return n.cancellation()?(s=this.then(),(r=s._then(c,l,void 0,u,void 0))._setOnCancel(u)):r=this._then(c,l,void 0,u,void 0),r}}},{"./util":36}],35:[function(e,t,r){t.exports=function(t,r,n,i,o,a){var s=e("./util"),u=e("./errors").TypeError,c=e("./util").inherits,l=s.errorObj,p=s.tryCatch,h={};function d(e){setTimeout(function(){throw e},0)}function f(e,r){var i=0,a=e.length,s=new t(o);return function o(){if(i>=a)return s._fulfill();var u=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(u instanceof t&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),e.promise)}catch(e){return d(e)}if(u instanceof t)return u._then(o,d,null,null,null)}o()}(),s}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function g(e,t,r){this.constructor$(e,t,r)}function v(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function y(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==h?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},c(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},y.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return r("expecting a function but got "+s.classString(o));var u=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,u=!1):(i=arguments,e--);for(var c=new y(e),h=0;h<e;++h){var d=i[h];if(m.isDisposer(d)){var g=d;(d=d.promise())._setDisposable(g)}else{var b=n(d);b instanceof t&&(d=b._then(v,null,null,{resources:c,index:h},void 0))}c[h]=d}var x=new Array(c.length);for(h=0;h<x.length;++h)x[h]=t.resolve(c[h]).reflect();var w=t.all(x).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return l.e=r.error(),l;if(!r.isFulfilled())return void w.cancel();e[t]=r.value()}E._pushContext(),o=p(o);var n=u?o.apply(void 0,e):o(e),i=E._popContext();return a.checkForgottenReturns(n,i,"Promise.using",E),n}),E=w.lastly(function(){var e=new t.PromiseInspection(w);return f(c,e)});return c.promise=E,E._setOnCancel(c),E},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(e,t,i){var o=e("./es5"),a="undefined"==typeof navigator,s={e:{}},c,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function p(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return s.e=e,s}}function h(e){return c=e,p}var d=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function m(e){return"function"==typeof e||"object"===(void 0===e?"undefined":u(e))&&null!==e}function g(e){return f(e)?new Error(A(e)):e}function v(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i}function y(e,t,r){if(!o.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function b(e,t,r){if(f(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(e,t,n),e}function x(e){throw e}var w=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(o.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var a;try{a=r(e)}catch(e){return n}for(var s=0;s<a.length;++s){var u=a[s];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&n.push(u)}}e=o.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var o in r)if(n.call(r,o))i.push(o);else{for(var a=0;a<e.length;++a)if(n.call(e[a],o))continue e;i.push(o)}return i}}(),E=/this\s*\.\s*\S+\s*=/;function C(e){try{if("function"==typeof e){var t=o.names(e.prototype),r=o.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=E.test(e+"")&&o.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}}function S(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e}var k=/^[a-z$_][a-z$_0-9]*$/i;function _(e){return k.test(e)}function D(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n}function A(e){try{return e+""}catch(e){return"[no string representation]"}}function P(e){return e instanceof Error||null!==e&&"object"===(void 0===e?"undefined":u(e))&&"string"==typeof e.message&&"string"==typeof e.name}function F(e){try{b(e,"isOperational",!0)}catch(e){}}function T(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function O(e){return P(e)&&o.propertyIsWritable(e,"stack")}var j="stack"in new Error?function(e){return O(e)?e:new Error(A(e))}:function(e){if(O(e))return e;try{throw new Error(A(e))}catch(e){return e}};function I(e){return{}.toString.call(e)}function N(e,t,r){for(var n=o.names(e),i=0;i<n.length;++i){var a=n[i];if(r(a))try{o.defineProperty(t,a,o.getDescriptor(e,a))}catch(e){}}}var R=function(e){return o.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var M="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};R=function(e){return o.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?M(e):null}}var B=void 0!==r&&"[object process]"===I(r).toLowerCase(),L=void 0!==r&&void 0!==r.env;function U(e){return L?r.env[e]:void 0}function $(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function z(e,t){return e.bind(t)}var J={isClass:C,isIdentifier:_,inheritedDataKeys:w,getDataPropertyOrDefault:y,thrower:x,isArray:o.isArray,asArray:R,notEnumerableProp:b,isPrimitive:f,isObject:m,isError:P,canEvaluate:a,errorObj:s,tryCatch:h,inherits:d,withAppended:v,maybeWrapAsError:g,toFastProperties:S,filledRange:D,toString:A,canAttachTrace:O,ensureErrorObject:j,originatesFromRejection:T,markAsOriginatingFromRejection:F,classString:I,copyDescriptors:N,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:B,hasEnvVariables:L,env:U,global:l,getNativePromise:$,domainBind:z};J.isRecentNode=J.isNode&&function(){var e=r.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),J.isNode&&J.toFastProperties(r);try{throw new Error}catch(e){J.lastLineError=e}t.exports=J},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(2),r(6),r(65).setImmediate)},function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=1e3,o=60*i,a=60*o,s=24*a,u=365.25*s;function c(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var r=void 0===e?"undefined":n(e);if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?function(e){return c(e,s,"day")||c(e,a,"hour")||c(e,o,"minute")||c(e,i,"second")||e+" ms"}(e):function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n,i,o,a,s,u,c,l;null!=("undefined"!=typeof window&&null!==window?window.jsyaml:void 0)&&(a=window.jsyaml),a||(a=r(39)),n=r(11),l=r(42),t.validate=function(e){var t,n,i,o;for(t in(o="undefined"!=typeof window&&null!==window?window.tv4:void 0)||(o=r(38)),o.reset(),l)i=l[t],o.addSchema(i.id,i);return(n=o.validateMultiple(e,"testsfile.json")).missing.length&&(n.passed=!1),n},c=function(e){return e.name||(e.name=e.topic),e.cases||(e.cases=[]),e},t.create=function(e){return c(e)},t.loadYAML=u=function(e){var t;return t=[],a.safeLoadAll(e,function(e){return t.push(c(e))}),t},s=function(e,t){var r;if(n.isBrowser())return(r=new XMLHttpRequest).addEventListener("load",function(){var e;return e=u(this.responseText),t(null,e)}),r.addEventListener("error",function(){return t(new Error("Failed to load "+e+": "+this.statusText))}),r.open("get",e,!0),r.send();throw new Error("fbpspec.testsuite: Loading over HTTP not supported on node.js")},i=function(e,t){var n,i,a,s,c;return s=r(12),c=r(104),s.statSync(e).isDirectory()?(a=function(){var t,r,n,o;for(o=[],t=0,r=(n=s.readdirSync(e)).length;t<r;t++)-1!==(i=n[t]).indexOf(".yaml")&&o.push(c.join(e,i));return o}(),o(a)):(n=s.readFileSync(e),u(n))},t.getSuitesSync=o=function(e){var t,r,n,o;for(Array.isArray(e)||(e=[e]),n=[],t=0,r=e.length;t<r;t++)o=e[t],n=n.concat(i(o));return n},t.getSuites=function(e,t){var r;return Array.isArray(e)||(e=[e]),r=function(e,t){return n.startsWith(e,"http://")?s(e,t):t(null,i(e))},n.asyncSeries(e,r,function(e,r){var n,i,o,a,s,u,c;if(e)return t(e);for(c=[],n=0,o=r.length;n<o;n++)for(i=0,a=(u=r[n]).length;i<a;i++)s=u[i],c.push(s);return t(null,c)})}},function(e,t,r){"use strict";var n=r(9);e.exports=new n({explicit:[r(80),r(81),r(82)]})},function(e,t,r){"use strict";(function(n){var i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,s){"object"===a(t)&&void 0!==e?e.exports=s():void 0===(o="function"==typeof(i=s)?i.call(t,r,t,e):i)||(e.exports=o)}(0,function(){var e="function"==typeof Promise,t="object"===("undefined"==typeof self?"undefined":a(self))?self:n,r="undefined"!=typeof Symbol,i="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,u="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,l=r&&void 0!==Symbol.iterator,p=r&&void 0!==Symbol.toStringTag,h=o&&"function"==typeof Set.prototype.entries,d=i&&"function"==typeof Map.prototype.entries,f=h&&Object.getPrototypeOf((new Set).entries()),m=d&&Object.getPrototypeOf((new Map).entries()),g=l&&"function"==typeof Array.prototype[Symbol.iterator],v=g&&Object.getPrototypeOf([][Symbol.iterator]()),y=l&&"function"==typeof String.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf(""[Symbol.iterator]()),x=8,w=-1;return function(r){var n=void 0===r?"undefined":a(r);if("object"!==n)return n;if(null===r)return"null";if(r===t)return"global";if(Array.isArray(r)&&(!1===p||!(Symbol.toStringTag in r)))return"Array";if("object"===("undefined"==typeof window?"undefined":a(window))&&null!==window){if("object"===a(window.location)&&r===window.location)return"Location";if("object"===a(window.document)&&r===window.document)return"Document";if("object"===a(window.navigator)){if("object"===a(window.navigator.mimeTypes)&&r===window.navigator.mimeTypes)return"MimeTypeArray";if("object"===a(window.navigator.plugins)&&r===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"===a(window.HTMLElement))&&r instanceof window.HTMLElement){if("BLOCKQUOTE"===r.tagName)return"HTMLQuoteElement";if("TD"===r.tagName)return"HTMLTableDataCellElement";if("TH"===r.tagName)return"HTMLTableHeaderCellElement"}}var l=p&&r[Symbol.toStringTag];if("string"==typeof l)return l;var h=Object.getPrototypeOf(r);return h===RegExp.prototype?"RegExp":h===Date.prototype?"Date":e&&h===Promise.prototype?"Promise":o&&h===Set.prototype?"Set":i&&h===Map.prototype?"Map":u&&h===WeakSet.prototype?"WeakSet":s&&h===WeakMap.prototype?"WeakMap":c&&h===DataView.prototype?"DataView":i&&h===m?"Map Iterator":o&&h===f?"Set Iterator":g&&h===v?"Array Iterator":y&&h===b?"String Iterator":null===h?"Object":Object.prototype.toString.call(r).slice(x,w)}})}).call(this,r(6))},function(e,t,r){"use strict";(function(n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(132)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(2))},function(e,t,r){"use strict";e.exports={component:{title:"Component protocol",description:"Protocol for handling the component registry.",output:{error:{id:"output/error",description:"Error response to a command on component protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},component:{id:"output/component",description:"Transmit the metadata about a component instance.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["component"]},payload:{required:["name","subgraph","inPorts","outPorts"],additionalProperties:!1,properties:{name:{type:"string",description:"component name in format that can be used in graphs. Should contain the component library prefix.",example:"my-project/MyComponent"},description:{type:"string",description:"textual description on what the component does"},icon:{type:"string",description:'Visual icon for the component, matching icon names in <a href="http://fortawesome.github.io/Font-Awesome/icons/">Font Awesome</a>'},subgraph:{type:"boolean",description:"boolean telling whether the component is a subgraph"},inPorts:{description:"list of input ports of the component",$ref:"/shared/port_definition"},outPorts:{description:"list of output ports of the component",$ref:"/shared/port_definition"}}}}}]},componentsready:{id:"output/componentsready",description:"Indication that a component listing has finished",properties:{protocol:{enum:["component"],type:"string",description:"type of protocol"},command:{enum:["componentsready"],description:"command to be executed",example:"addnode"},payload:{type:"integer",description:"number of components transmitted in this batch",example:42}}},source:{id:"output/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix",example:"MyComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"components-common"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"unit tests for the component"}}}}}]}},input:{list:{id:"input/list",description:"Request a list of currently available components. Will be responded with a set of `component` messages.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["list"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},getsource:{id:"input/getsource",description:"Request for the source code of a given component. Will be responded with a `source` message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["getsource"]},payload:{required:["name"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component to for which to get source code. Should contain the library prefix",example:"my-project/SomeComponent"},secret:{type:"string",description:"access token to authorize user"}}}}}]},source:{id:"input/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix.",example:"SomeComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"my-project"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"Unit tests for the component"},secret:{type:"string"}}}}}]}}},graph:{$schema:"http://json-schema.org/draft-04/schema#",title:"Graph protocol",description:"This protocol is utilized for communicating about graph changes in both directions.",output:{error:{id:"output/error",description:"Error response to a command on graph protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},clear:{id:"output/clear",description:"An empty graph was initialized",$ref:"../input/clear"},addnode:{id:"output/addnode",description:"Add node to a graph.",$ref:"../input/addnode"},removenode:{id:"output/removenode",description:"Remove a node from a graph.",$ref:"../input/removenode"},renamenode:{id:"output/renamenode",description:"Change the ID of a node in the graph",$ref:"../input/renamenode"},changenode:{id:"output/changenode",description:"Change the metadata associated to a node in the graph",$ref:"../input/changenode"},addedge:{id:"output/addedge",description:"Add an edge to the graph",$ref:"../input/addedge"},removeedge:{id:"output/removeedge",description:"Remove an edge from the graph",$ref:"../input/removeedge"},changeedge:{id:"output/changeedge",description:"Change an edge's metadata",$ref:"../input/changeedge"},addinitial:{id:"output/addinitial",description:"Add an IIP to the graph",$ref:"../input/addinitial"},removeinitial:{id:"output/removeinitial",description:"Remove an IIP from the graph",$ref:"../input/removeinitial"},addinport:{id:"output/addinport",description:"Add an exported inport to the graph.",$ref:"../input/addinport"},removeinport:{id:"output/removeinport",description:"Remove an exported port from the graph",$ref:"../input/removeinport"},renameinport:{id:"output/renameinport",description:"Rename an exported port in the graph",$ref:"../input/renameinport"},addoutport:{id:"output/addoutport",description:"Add an exported outport to the graph.",$ref:"../input/addoutport"},removeoutport:{id:"output/removeoutport",description:"Remove an exported port from the graph",$ref:"../input/removeoutport"},renameoutport:{id:"output/renameoutport",description:"Rename an exported port in the graph",$ref:"../input/renameoutport"},addgroup:{id:"output/addgroup",description:"Add a group to the graph",$ref:"../input/addgroup"},removegroup:{id:"output/removegroup",description:"Remove a group from the graph",$ref:"../input/removegroup"},renamegroup:{id:"output/renamegroup",description:"Rename a group in the graph.",$ref:"../input/renamegroup"},changegroup:{id:"output/changegroup",description:"Change a group's metadata",$ref:"../input/changegroup"}},input:{clear:{id:"input/clear",description:"Initialize an empty graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addnode:{id:"input/addnode",description:"Add node to a graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removenode:{id:"input/removenode",description:"Remove a node from a graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renamenode:{id:"input/renamenode",description:"Change the ID of a node in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changenode:{id:"input/changenode",description:"Change the metadata associated to a node in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addedge:{id:"input/addedge",description:"Add an edge to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{$ref:"/shared/port",description:"source node for the edge"},tgt:{$ref:"/shared/port",description:"target node for the edge"},metadata:{description:"Structure of key-value pairs for edge metadata",$ref:"/shared/metadata_edge"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeedge:{id:"input/removeedge",description:"Remove an edge from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changeedge:{id:"input/changeedge",description:"Change an edge's metadata",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},metadata:{description:"struct of key-value pairs for edge metadata",$ref:"/shared/metadata_edge"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addinitial:{id:"input/addinitial",description:"Add an IIP to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",$ref:"/shared/metadata_edge"},src:{description:"source data for the edge",$ref:"/shared/iip"},tgt:{description:"target node/port for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeinitial:{id:"input/removeinitial",description:"Remove an IIP from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",$ref:"/shared/iip"},tgt:{$ref:"/shared/port",description:"target node/port for the edge"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addinport:{id:"input/addinport",description:"Add an exported inport to the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{type:"string",description:"the exported name of the port"},node:{type:"string",description:"node identifier"},port:{type:"string",description:"internal port name"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeinport:{id:"input/removeinport",description:"Remove an exported port from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port to remove"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renameinport:{id:"input/renameinport",description:"Rename an exported port in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original exported port name"},to:{type:"string",description:"new exported port name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addoutport:{id:"input/addoutport",description:"Add an exported outport to the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port"},node:{type:"string",description:"node identifier"},port:{type:"string",description:"internal port name"},metadata:{description:"structure of key-value pairs for port metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeoutport:{id:"input/removeoutport",description:"Remove an exported port from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port to remove"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renameoutport:{id:"input/renameoutport",description:"Rename an exported port in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original exported port name"},to:{type:"string",description:"new exported port name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addgroup:{id:"input/addgroup",description:"Add a group to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group"},metadata:{description:"structure of key-value pairs for group metadata",$ref:"/shared/metadata_group"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removegroup:{id:"input/removegroup",description:"Remove a group from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renamegroup:{id:"input/renamegroup",description:"Rename a group in the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changegroup:{id:"input/changegroup",description:"Change a group's metadata",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",$ref:"/shared/metadata_group"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]}}},network:{$schema:"http://json-schema.org/draft-04/schema#",title:"Network protocol",description:"Protocol for starting and stopping FBP networks, and finding out about their state.",output:{stopped:{id:"output/stopped",description:"Inform that a given network has stopped.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["stopped"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was stopped"},uptime:{type:"number",description:"time the network was running, in seconds"},graph:{type:"string",description:"graph the action targets"},running:{type:"boolean",description:"whether or not network is currently running"},started:{type:"boolean",description:"whether or not network has been started"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},started:{id:"output/started",description:"Inform that a given network has been started.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["started"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was started"},graph:{type:"string",description:"graph the action targets"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"whether or not network is currently running"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},status:{id:"output/status",description:"Response to a getstatus message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["status"]},payload:{required:["running","graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},uptime:{type:"number",description:"time the network has been running, in seconds"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"boolean tells whether the network is running or not"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},output:{id:"output/output",description:"An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.'",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["output"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{type:"string",description:"contents of the output line"},type:{type:"string",enum:["message","previewurl"],description:"type of output, either message or previewurl"},url:{type:"string",format:"uri",description:"URL for an image generated by the runtime"}}}}}]},error:{id:"output/error",description:"An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.'",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["error"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{description:"contents of the error message",type:"string"},stack:{description:"stack trace",type:"string"},graph:{type:"string",description:"graph the action targets"}}}}}]},processerror:{id:"output/processerror",description:"When in debug mode, a network can signal an error happening inside a process.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["processerror"]},payload:{required:["id","error","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier of the node"},error:{type:"string",description:"error from the component"},graph:{type:"string",description:"graph the action targets"}}}}}]},icon:{id:"output/icon",description:"Icon of a component instance has changed.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["icon"]},payload:{required:["id","icon","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier of the node"},icon:{type:"string",description:"new icon for the component instance"},graph:{type:"string",description:"graph the action targets"}}}}}]},connect:{id:"output/connect",description:"Beginning of transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["connect"]},payload:{$ref:"/shared/network_event",additionalProperties:!1}}}]},begingroup:{id:"output/begingroup",description:"Beginning of a group (bracket IP) on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["begingroup"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,tgt:!0,src:!0,graph:!0,subgraph:!0}}]}}}]},data:{id:"output/data",description:"Data transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["data"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["data"],properties:{data:{description:"actual data being transmitted, encoded in a way that can be carried over the protocol transport"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"}}},{additionalProperties:!1,properties:{data:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},endgroup:{id:"output/endgroup",description:"Ending of a group (bracket IP) on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["endgroup"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},disconnect:{id:"output/disconnect",description:"End of transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["disconnect"]},payload:{$ref:"/shared/network_event",additionalProperties:!1}}}]},edges:{id:"output/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from runtime to UI.",$ref:"../input/edges"}},input:{start:{id:"input/start",description:"Start execution of a FBP network based on a given graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},getstatus:{id:"input/getstatus",description:"Get the current status of the runtime. The runtime should respond with a status message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["getstatus"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},stop:{id:"input/stop",description:"Stop execution of a FBP network based on a given graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},persist:{id:"input/persist",description:"Tells the runtime to persist the current state of graphs and components so that they are available between restarts. Requires the network:persist capability.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["persist"]},payload:{required:[],additionalProperties:!1,properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},debug:{id:"input/debug",description:"Set a network into debug mode",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["debug"]},payload:{additionalProperties:!1,required:["enable","graph"],properties:{enable:{description:"tells whether to put the network in debug mode",type:"boolean"},graph:{description:"graph the action targets",type:"string"},secret:{description:"access token to authorize the user",type:"string"}}}}}]},edges:{id:"input/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{graph:{description:"graph the action targets",type:"string"},edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"}}}},secret:{type:"string",description:"access token to authorize user"}}}}}]}}},runtime:{title:"Runtime protocol",description:"When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",input:{getruntime:{id:"input/getruntime",description:"Request the information about the runtime. When receiving this message the runtime should response with a runtime message. If the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["getruntime"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},packet:{id:"input/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{type:"string",description:"port name for the input or output port"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},graph:{type:"string",description:"graph the action targets"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},secret:{type:"string",description:"access token to authorize user"}}}}}]}},output:{error:{id:"output/error",description:"Error response to a command on runtime protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},ports:{id:"output/ports",description:"Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["ports"]},payload:{required:["graph","inPorts","outPorts"],additionalProperties:!1,properties:{graph:{type:"string",description:"ID of the currently configured main graph running on the runtime"},inPorts:{description:"list of input ports of the runtime",$ref:"/shared/port_definition"},outPorts:{description:"list of output ports of the runtime",$ref:"/shared/port_definition"}}}}}]},runtime:{id:"output/runtime",description:"Response from the runtime to the getruntime request.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["runtime"]},payload:{required:["version","capabilities","type"],additionalProperties:!1,properties:{id:{type:"string",description:"unique runtime ID. Must be a UUID, version 4",example:"f18a4924-9d4f-414d-a37c-cd24b39bba10"},label:{description:"Human-readable description of the runtime",type:"string"},version:{description:"version of the runtime protocol that the runtime supports",type:"string",example:"0.6"},allCapabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do. May include things not permitted for this client.",$ref:"/shared/capabilities"},capabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do for this client.",$ref:"/shared/capabilities"},graph:{description:"ID of the currently configured main graph running on the runtime, if any",type:"string",example:"service-main"},type:{description:"type of the runtime",type:"string",example:"microflo"},namespace:{description:"Library namespace of the project running on the runtime, if any. Must match that of components belonging to the (top-level) of project.",type:"string",example:"my-project-foo"},repository:{description:"Source-code repository URL of the project running on the runtime, if any",type:"string",example:"https://github.com/flowbased/fbp-protocol.git"},repositoryVersion:{description:"Unique version identifier of the source code of the project, if known. The version should be available in @repository.",type:"string",example:"0.6.3-8-g90edcfc"}}}}}]},packetsent:{id:"output/packetsent",description:"Confirmation that a packet has been sent",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["packetsent"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{type:"string",description:"port name for the input port"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},graph:{type:"string",description:"graph the action targeted"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"}}}}}]},packet:{id:"output/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",$ref:"../input/packet"}}},shared:{$schema:"http://json-schema.org/draft-04/schema#",title:"Shared",description:"Shared schema fragments",secret:{id:"secret",description:"access token to authorize the client",type:"string"},graph_id:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},message:{id:"message",description:"protocol message",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"}}},metadata_node:{id:"metadata_node",description:"structure of key-value pairs for graph node metadata",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},metadata_edge:{id:"metadata_edge",description:"structure of key-value pairs for graph edge metadata",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},metadata_group:{id:"metadata_group",description:"structure of key-value pairs for graph group metadata",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},port:{id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{type:"string",description:"node identifier"},port:{type:"string",description:"port name"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},port_definition:{id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{type:"string",description:"port name"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},iip:{id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},network_event:{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},graph:{type:"string",description:"graph the action targets"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{type:"string"}}}},capabilities:{id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}}},trace:{$schema:"http://json-schema.org/draft-04/schema#",title:"Trace protocol",description:"This protocol is utilized for triggering and transmitting [Flowtrace](https://github.com/flowbased/flowtrace)s",output:{start:{id:"output/start",description:"Tracing was started",$ref:"../input/start"},stop:{id:"output/stop",description:"Tracing was stopped",$ref:"../input/stop"},clear:{id:"output/clear",description:"Tracing buffer was cleared",$ref:"../input/clear"},dump:{id:"output/dump",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type","flowtrace"],additionalProperties:!1,properties:{graph:{$ref:"/shared/graph_id"},type:{description:"String describing type of trace.",type:"string",enum:["flowtrace.json"]},flowtrace:{description:"A Flowtrace file of `type`",type:"string"}}}}}]},error:{id:"output/error",description:"Error response to a command on trace protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]}},input:{start:{id:"input/start",description:"Enable/start tracing of a network.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{description:"Stop/disable tracing of a network.",id:"input/stop",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"}}}}}]},dump:{id:"input/dump",description:"Trigger dumping of the current tracing buffer, to return it back to server.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["secret","graph","type"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"},type:{description:"Type/format of trace to output",type:"string",enum:["flowtrace.json"]}}}}}]},clear:{id:"input/clear",description:"Clear current tracing buffer.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"}}}}}]}}}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(52),o=r(32),a=r(10),s=r(54),u=r(152);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,a,u=l.call(this,t,r);return u&&(i=u.schema,t=u.root,a=u.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,void 0,a):void 0!==i&&(o=f(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,a)),o}function l(e,t){var r=i.parse(t,!1,!0),n=g(r),o=m(this._getId(e.schema));if(n!==o){var a=y(n),u=this._refs[a];if("string"==typeof u)return function(e,t,r){var n=l.call(this,e,t);if(n){var i=n.schema,o=n.baseId;e=n.root;var a=this._getId(i);return a&&(o=b(o,a)),h.call(this,r,o,i,e)}}.call(this,e,u,r);if(u instanceof s)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[a])instanceof s))return;if(u.validate||this._compile(u),a==y(t))return{schema:u,root:e,baseId:o};e=u}if(!e.schema)return;o=m(this._getId(e.schema))}return h.call(this,r,o,e.schema,e)}e.exports=c,c.normalizeId=y,c.fullPath=m,c.url=b,c.ids=function(e){var t=y(this._getId(e)),r={"":t},n={"":m(t,!1)},s={},c=this;return u(e,{allKeys:!0},function(e,t,u,l,p,h,d){if(""!==t){var f=c._getId(e),m=r[l],g=n[l]+"/"+p;if(void 0!==d&&(g+="/"+("number"==typeof d?d:a.escapeFragment(d))),"string"==typeof f){f=m=y(m?i.resolve(m,f):f);var v=c._refs[f];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!o(e,v.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=y(g))if("#"==f[0]){if(s[f]&&!o(e,s[f]))throw new Error('id "'+f+'" resolves to more than one schema');s[f]=e}else c._refs[f]=g}r[t]=m,n[t]=g}}),s},c.inlineRef=f,c.schema=l;var p=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var i=e.hash.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(void 0===(r=r[s=a.unescapeFragment(s)]))break;var u;if(!p[s]&&((u=this._getId(r))&&(t=b(t,u)),r.$ref)){var c=b(t,r.$ref),h=l.call(this,n,c);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var d=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==(void 0===(r=t[i])?"undefined":n(r))&&!e(r))return!1}else for(var o in t){if("$ref"==o)return!1;if("object"==(void 0===(r=t[o])?"undefined":n(r))&&!e(r))return!1}return!0}(e):t?function e(t){var r,i=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==(void 0===(r=t[o])?"undefined":n(r))&&(i+=e(r)),i==1/0)return 1/0}else for(var a in t){if("$ref"==a)return 1/0;if(d[a])i++;else if("object"==(void 0===(r=t[a])?"undefined":n(r))&&(i+=e(r)+1),i==1/0)return 1/0}return i}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),g(i.parse(e,!1,!0))}function g(e){var t=e.protocol||"//"==e.href.slice(0,2)?"//":"";return(e.protocol||"")+t+(e.host||"")+(e.path||"")+"#"}var v=/#\/?$/;function y(e){return e?e.replace(v,""):""}function b(e,t){return t=y(t),i.resolve(e,t)}},function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;var a,s,u,c=n(t),l=n(r);if(c&&l){if((s=t.length)!=r.length)return!1;for(a=0;a<s;a++)if(!e(t[a],r[a]))return!1;return!0}if(c!=l)return!1;var p=t instanceof Date,h=r instanceof Date;if(p!=h)return!1;if(p&&h)return t.getTime()==r.getTime();var d=t instanceof RegExp,f=r instanceof RegExp;if(d!=f)return!1;if(d&&f)return t.toString()==r.toString();if(t instanceof Object&&r instanceof Object){var m=i(t);if((s=m.length)!==i(r).length)return!1;for(a=0;a<s;a++)if(!o.call(r,m[a]))return!1;for(a=0;a<s;a++)if(!e(t[u=m[a]],r[u]))return!1;return!0}return!1}},function(e,t,r){"use strict";var n=r(31);function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C,S=[].indexOf;u=r(11),v=r(67),C=r(26),p=r(43),h=r(37),d=r(130),c=r(7)("fbp-spec:runner"),o=r(23),l=function(e){var t;return t=r(7)("fbp-spec:runner:received"),e.on("signal",function(e){var r=e.protocol,n=e.command,i=e.payload;return t(r,n,i)})},E=function(e,t,r){var n,i,o,a,s,u,l,p,h;if(c("synthesizing fixture",e),!(n=t[e]))return r(new Error("Could not find component for topic: "+e));for("testee",(i={properties:{},inports:{},outports:{},processes:{},connections:[]}).processes.testee={component:e},o=0,s=(p=n.inPorts).length;o<s;o++)l=p[o].id,i.inports[l]={process:"testee",port:l};for(a=0,u=(h=n.outPorts).length;a<u;a++)l=h[a].id,i.outports[l]={process:"testee",port:l};return Object.keys(i.outports)<1?r(new Error("Component '"+e+"' used as fixture has no outports")):Object.keys(i.inports)<1?r(new Error("Component '"+e+"' used as fixture has no inports")):r(null,i)},f=function(e,t,r){var n;n=function(e){return null!=e.components&&"object"===i(e.components)&&Object.keys(e.components).length},function(t){if(n(e))return t(null);v.getComponents(e.client,function(r,n){return r?t(r):(e.components=n,t(null))})}(function(n){var i;if(n)return r(n);if(null==t.fixture)return E(t.topic,e.components,r);if("json"===t.fixture.type){try{i=JSON.parse(t.fixture.data)}catch(e){return r(e)}return r(null,i)}if("fbp"===t.fixture.type){try{i=h.parse(t.fixture.data)}catch(e){return r(e)}return i.properties||(i.properties={}),r(null,i)}return r(new Error("Unknown fixture type "+t.fixture.type))})},w=function(e,t,r,n,i){var a,s,u,c,l;u=e.observe(function(e){return"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t}),l=function(e){var t,r,n,i;for(n={},t=0,r=e.length;t<r;t++)n[(i=e[t]).payload.port]=i.payload.payload;return n},s=function(e){var r,i;return"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&(i=u.signals.slice(0,u.signals.indexOf(e)+1),r=l(i),Object.keys(r).length===Object.keys(n).length)))},a=function(e){return"network"===e.protocol&&"error"===e.command?!e.payload.graph||e.payload.graph===t:"network"===e.protocol&&"processerror"===e.command?!e.payload.graph||e.payload.graph===t:"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&("error"===e.payload.port&&void 0===n.error)))},c=o.promisify(v.sendPackets),o.resolve().then(function(){return c(e,t,r)}).then(function(){return u.until(s,a)}).then(function(e){return l(e)}).nodeify(i)},g=function(e){return e.cases.filter(function(e){return!e.skip}).length>0},a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.currentGraphId=null,this.components={},this.parentElement=null,this.options=r,null==this.options.connectTimeout&&(this.options.connectTimeout=5e3),null==this.options.commandTimeout&&(this.options.commandTimeout=3e3)}return n(e,[{key:"prepareClient",value:function(e){var t=this;null==this.client.protocol||null==this.client.address?e(null,this.client):o.resolve().then(function(){return d(t.client,{commandTimeout:t.options.commandTimeout})}).then(function(e){return t.client=e,t.parentElement&&"iframe"===e.definition.protocol&&e.transport.setParentElement(t.parentElement),e}).nodeify(e)}},{key:"connect",value:function(e){var t=this;c("connect"),this.prepareClient(function(r){var n,i,a;return r?e(r):(l(t.client),t.client.on("network",function(e){var t=e.command,r=e.payload;if("output"===t&&r.message)return console.log(r.message)}),500,n=Math.floor(t.options.connectTimeout/500),i=function(){return t.client.isConnected()?o.resolve():o.reject(new Error("Not connected to runtime"))},a=function(){return c("trying to connect"),t.client.connect()},u.retryUntil(a,i,500,n).then(function(){return t.checkCapabilities(["protocol:graph","protocol:network","protocol:runtime"])}).nodeify(e))})}},{key:"disconnect",value:function(e){var t,r=this;if(c("disconnect"),!(null!=(t=this.client)?t.isConnected():void 0))return e();o.resolve().then(function(){return r.client.disconnect()}).nodeify(e)}},{key:"checkCapabilities",value:function(e){var t,r,n,i,a;if(!this.client.isConnected())return o.reject(new Error("Not connected to runtime"));if(!(null!=(i=this.client.definition)&&null!=(a=i.capabilities)?a.length:void 0))return o.reject(new Error("Runtime provides no capabilities"));for(r=0,n=e.length;r<n;r++)if(t=e[r],-1===this.client.definition.capabilities.indexOf(t))return o.reject(new Error("Runtime doesn't provide "+t));return o.resolve()}},{key:"setupSuite",value:function(e,t){var r=this;return c("setup suite",'"'+e.name+'"'),g(e)?this.client.isConnected()?void f(this,e,function(e,n){if(e)return t(e);v.sendGraph(r.client,n,function(e,n){return r.currentGraphId=n,e?t(e):v.startNetwork(r.client,n,t)})}):t(new Error("Disconnected from runtime")):t(null)}},{key:"teardownSuite",value:function(e,t){return c("teardown suite",'"'+e.name+'"'),g(e)?this.client.isConnected()?void v.stopNetwork(this.client,this.currentGraphId,t):t(new Error("Disconnected from runtime")):t(null)}},{key:"runTest",value:function(e,t){var r,n,i,o,a,s,l,p=this;if(c("runtest",'"'+e.name+'"'),!this.client.isConnected())return t(new Error("Disconnected from runtime"));for(i=u.isArray(e.inputs)?e.inputs:[e.inputs],r=u.isArray(e.expect)?e.expect:[e.expect],l=[],n=o=0,a=i.length;0<=a?o<a:o>a;n=0<=a?++o:--o)l.push({inputs:i[n],expect:r[n]});s=function(e,t){return w(p.client,p.currentGraphId,e.inputs,e.expect,t)},u.asyncSeries(l,s,function(e,r){return e?t(e):(r.forEach(function(e,t){return l[t].actual=e}),t(null,l))})}}]),e}(),s=function(e){var t,r,n,i,o,a,s;return t=e.filter(function(e){return null!=e.actual}),n=e.filter(function(e){return null!=e.expect}),t.length<n.length?s={passed:!1,error:new Error("Only got "+actual.length+" output messages out of "+expect.length)}:(0===(o=(e=e.map(function(e){var t;e.error=null;try{p.expect(e.expect,e.actual)}catch(r){t=r,e.error=t}return e})).filter(function(e){return e.error})).length?s={passed:!0}:1===n.length?s={error:o[0].error}:n.length>1&&1===o.length?(i=e[a=e.findIndex(function(e){return e.error})],s={error:new Error("Expectation "+a+" of sequence failed: "+i.error.message)}):(r=e.map(function(e){var t;return(null!=(t=e.error)?t.message:void 0)||""}),s={error:new Error("Multiple failures in sequence: "+r)}),s)},x=function(e,t,r){var n,i;return t.skip?r(null,{passed:!0}):(i=u.isArray(t.inputs)?t.inputs:[t.inputs],n=u.isArray(t.expect)?t.expect:[t.expect],i.length!==n.length?r(null,{passed:!1,error:new Error("Test sequence length mismatch. Got "+i.length+" inputs and "+n.length+" expectations")}):void e.runTest(t,function(e,t){var n;return e?r(null,n={passed:!1,error:e}):((n=s(t)).error&&(n.passed=!1),r(null,n))}))},b=function(e,t,r,n){if(t.skip)return n(null,t);e.setupSuite(t,function(i){return c("setup suite",i),i?n(i,t):u.asyncSeries(t.cases,r,function(r){return c("testrun complete",r),e.teardownSuite(t,function(e){return c("teardown suite",e),n(e,t)})})})},t.getComponentSuites=function(e,t){v.getCapabilities(e.client,function(r,n){return r?t(r):S.call(n,"component:getsource")<0?t(null,[]):v.getComponentTests(e.client,function(e,r){var n;return e?t(e):(n=m(r),c("get component suites",r.length,n.length),t(null,n))})})},m=function(e){var t,r,n,i;for(t in n=[],e){i=e[t];try{r=C.loadYAML(i),n=n.concat(r)}catch(e){e;continue}}return n},y=function(e,t,r,n){var i,o,a;o=function(n,i){var o;return o=function(e){return r(t),i(e)},x(e,n,function(e,t){var r,i;for(r in t)i=t[r],n[r]=i;return n.error&&(n.error=n.error.message),c("ran test",'"testcase.name"',n.passed,e),o(null)})},i=function(t,r){return b(e,t,o,r)},c("running suites",function(){var e,r,n;for(n=[],e=0,r=t.length;e<r;e++)a=t[e],n.push(a.name);return n}()),u.asyncSeries(t,i,function(e){return n(e)})},t.Runner=a,t.runAll=y,t.runTestAndCheck=x},function(e,t,r){"use strict";(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function t(e,t){return null!=t&&e instanceof t}var n,i,o;try{n=Map}catch(e){n=function(){}}try{i=Set}catch(e){i=function(){}}try{o=Promise}catch(e){o=function(){}}function a(s,c,l,p,h){"object"===(void 0===c?"undefined":r(c))&&(l=c.depth,p=c.prototype,h=c.includeNonEnumerable,c=c.circular);var d=[],f=[],m=void 0!==e;return void 0===c&&(c=!0),void 0===l&&(l=1/0),function s(l,g){if(null===l)return null;if(0===g)return l;var v,y;if("object"!=(void 0===l?"undefined":r(l)))return l;if(t(l,n))v=new n;else if(t(l,i))v=new i;else if(t(l,o))v=new o(function(e,t){l.then(function(t){e(s(t,g-1))},function(e){t(s(e,g-1))})});else if(a.__isArray(l))v=[];else if(a.__isRegExp(l))v=new RegExp(l.source,u(l)),l.lastIndex&&(v.lastIndex=l.lastIndex);else if(a.__isDate(l))v=new Date(l.getTime());else{if(m&&e.isBuffer(l))return v=new e(l.length),l.copy(v),v;t(l,Error)?v=Object.create(l):void 0===p?(y=Object.getPrototypeOf(l),v=Object.create(y)):(v=Object.create(p),y=p)}if(c){var b=d.indexOf(l);if(-1!=b)return f[b];d.push(l),f.push(v)}for(var x in t(l,n)&&l.forEach(function(e,t){var r=s(t,g-1),n=s(e,g-1);v.set(r,n)}),t(l,i)&&l.forEach(function(e){var t=s(e,g-1);v.add(t)}),l){var w;y&&(w=Object.getOwnPropertyDescriptor(y,x)),w&&null==w.set||(v[x]=s(l[x],g-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(l);for(x=0;x<E.length;x++){var C=E[x];(!(k=Object.getOwnPropertyDescriptor(l,C))||k.enumerable||h)&&(v[C]=s(l[C],g-1),k.enumerable||Object.defineProperty(v,C,{enumerable:!1}))}}if(h){var S=Object.getOwnPropertyNames(l);for(x=0;x<S.length;x++){var k,_=S[x];(k=Object.getOwnPropertyDescriptor(l,_))&&k.enumerable||(v[_]=s(l[_],g-1),Object.defineProperty(v,_,{enumerable:!1}))}}return v}(s,l)}function s(e){return Object.prototype.toString.call(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"===(void 0===e?"undefined":r(e))&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"===(void 0===e?"undefined":r(e))&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"===(void 0===e?"undefined":r(e))&&"[object RegExp]"===s(e)},a.__getRegExpFlags=u,a}();"object"===r(t)&&t.exports&&(t.exports=n)}).call(this,r(36).Buffer,r(24)(e))},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(70),i=r(71),o=r(72);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var p=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){p=!1;break}if(p)return o}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function b(e,t,r,n){return z(U(t,e.length-r),e,r,n)}function x(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return x(e,t,r,n)}function E(e,t,r,n){return z($(t),e,r,n)}function C(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,c=e[i],l=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=p}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=_));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return p(null,e)},u.allocUnsafeSlow=function(e){return p(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,s=Math.min(o,a),c=this.slice(n,i),l=e.slice(t,r),p=0;p<s;++p)if(c[p]!==l[p]){o=c[p],a=l[p];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=L(e[o]);return i}function F(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function N(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,o){return o||N(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,o){return o||N(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:U(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(6))},function(e,t,r){"use strict";e.exports=function(){function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var n,i,o=arguments.length>1?arguments[1]:{},a=this,s={},u={start:ur},c=ur,l=function(){return a.getResult()},p="INPORT=",h={type:"literal",value:"INPORT=",description:'"INPORT="'},d=".",f={type:"literal",value:".",description:'"."'},m=":",g={type:"literal",value:":",description:'":"'},v=function(e,t,r){return a.registerInports(e,t,r)},y="OUTPORT=",b={type:"literal",value:"OUTPORT=",description:'"OUTPORT="'},x=function(e,t,r){return a.registerOutports(e,t,r)},w="DEFAULT_INPORT=",E={type:"literal",value:"DEFAULT_INPORT=",description:'"DEFAULT_INPORT="'},C=function(e){Mr=e},S="DEFAULT_OUTPORT=",k={type:"literal",value:"DEFAULT_OUTPORT=",description:'"DEFAULT_OUTPORT="'},_=function(e){Br=e},D=function(e){return a.registerAnnotation(e[0],e[1])},A=function(e){return a.registerEdges(e)},P=",",F={type:"literal",value:",",description:'","'},T=/^[\n\r\u2028\u2029]/,O={type:"class",value:"[\\n\\r\\u2028\\u2029]",description:"[\\n\\r\\u2028\\u2029]"},j="#",I={type:"literal",value:"#",description:'"#"'},N="->",R={type:"literal",value:"->",description:'"->"'},M=function(e,t){return[e,t]},B=function(e,t,r){return[{tgt:qr(t,e)},{src:Vr(t,r)}]},L=function(e,t){return{src:Vr(e,t)}},U=function(e,t){return{tgt:qr(t,e)}},$="'",z={type:"literal",value:"'",description:'"\'"'},J=function(e){return{data:e.join("")}},q=function(e){return{data:e}},V=function(e){return e},X=/^[a-zA-Z_]/,K={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},H=/^[a-zA-Z0-9_\-]/,G={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},Y=function(e){return zr(e)},W=function(e,t){return a.addNode(e,t),e},Q=function(e){return a.addAnonymousNode(e,or(Zt,Qt).start.offset)},Z="(",ee={type:"literal",value:"(",description:'"("'},te=/^[a-zA-Z\/\-0-9_]/,re={type:"class",value:"[a-zA-Z/\\-0-9_]",description:"[a-zA-Z/\\-0-9_]"},ne=")",ie={type:"literal",value:")",description:'")"'},oe=function(e,t){var r={};return r.comp=e?e.join(""):"",t&&(r.meta=t.join("").split(",")),r},ae=/^[a-zA-Z\/=_,0-9]/,se={type:"class",value:"[a-zA-Z/=_,0-9]",description:"[a-zA-Z/=_,0-9]"},ue=function(e){return e},ce="@",le={type:"literal",value:"@",description:'"@"'},pe=/^[a-zA-Z0-9\-_]/,he={type:"class",value:"[a-zA-Z0-9\\-_]",description:"[a-zA-Z0-9\\-_]"},de=/^[a-zA-Z0-9\-_ .]/,fe={type:"class",value:"[a-zA-Z0-9\\-_ \\.]",description:"[a-zA-Z0-9\\-_ \\.]"},me=function(e,t){return[e.join(""),t.join("")]},ge=function(e,t){return{port:o.caseSensitive?e:e.toLowerCase(),index:null!=t?t:void 0}},ve=function(e){return e},ye=/^[a-zA-Z.0-9_]/,be={type:"class",value:"[a-zA-Z.0-9_]",description:"[a-zA-Z.0-9_]"},xe=function(e){return zr(e)},we="[",Ee={type:"literal",value:"[",description:'"["'},Ce=/^[0-9]/,Se={type:"class",value:"[0-9]",description:"[0-9]"},ke="]",_e={type:"literal",value:"]",description:'"]"'},De=function(e){return parseInt(e.join(""))},Ae=/^[^\n\r\u2028\u2029]/,Pe={type:"class",value:"[^\\n\\r\\u2028\\u2029]",description:"[^\\n\\r\\u2028\\u2029]"},Fe=/^[\\]/,Te={type:"class",value:"[\\\\]",description:"[\\\\]"},Oe=/^[']/,je={type:"class",value:"[']",description:"[']"},Ie=function(){return"'"},Ne=/^[^']/,Re={type:"class",value:"[^']",description:"[^']"},Me=" ",Be={type:"literal",value:" ",description:'" "'},Le=function(e){return e},Ue="{",$e={type:"literal",value:"{",description:'"{"'},ze="}",Je={type:"literal",value:"}",description:'"}"'},qe={type:"other",description:"whitespace"},Ve=/^[ \t\n\r]/,Xe={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Ke="false",He={type:"literal",value:"false",description:'"false"'},Ge=function(){return!1},Ye="null",We={type:"literal",value:"null",description:'"null"'},Qe=function(){return null},Ze="true",et={type:"literal",value:"true",description:'"true"'},tt=function(){return!0},rt=function(e,t){return t},nt=function(e,t){var r,n={};for(n[e.name]=e.value,r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n},it=function(e){return null!==e?e:{}},ot=function(e,t){return{name:e,value:t}},at=function(e,t){return t},st=function(e,t){return[e].concat(t)},ut=function(e){return null!==e?e:[]},ct={type:"other",description:"number"},lt=function(){return parseFloat(t.substring(Zt,Qt))},pt=/^[1-9]/,ht={type:"class",value:"[1-9]",description:"[1-9]"},dt=/^[eE]/,ft={type:"class",value:"[eE]",description:"[eE]"},mt="-",gt={type:"literal",value:"-",description:'"-"'},vt="+",yt={type:"literal",value:"+",description:'"+"'},bt="0",xt={type:"literal",value:"0",description:'"0"'},wt={type:"other",description:"string"},Et=function(e){return e.join("")},Ct='"',St={type:"literal",value:'"',description:'"\\""'},kt="\\",_t={type:"literal",value:"\\",description:'"\\\\"'},Dt="/",At={type:"literal",value:"/",description:'"/"'},Pt="b",Ft={type:"literal",value:"b",description:'"b"'},Tt=function(){return"\b"},Ot="f",jt={type:"literal",value:"f",description:'"f"'},It=function(){return"\f"},Nt="n",Rt={type:"literal",value:"n",description:'"n"'},Mt=function(){return"\n"},Bt="r",Lt={type:"literal",value:"r",description:'"r"'},Ut=function(){return"\r"},$t="t",zt={type:"literal",value:"t",description:'"t"'},Jt=function(){return"\t"},qt="u",Vt={type:"literal",value:"u",description:'"u"'},Xt=function(e){return String.fromCharCode(parseInt(e,16))},Kt=function(e){return e},Ht=/^[^\0-\x1F"\\]/,Gt={type:"class",value:"[^\\0-\\x1F\\x22\\x5C]",description:"[^\\0-\\x1F\\x22\\x5C]"},Yt=/^[0-9a-f]/i,Wt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Qt=0,Zt=0,er=[{line:1,column:1,seenCR:!1}],tr=0,rr=[],nr=0;if("startRule"in o){if(!(o.startRule in u))throw new Error("Can't start parsing from rule \""+o.startRule+'".');c=u[o.startRule]}function ir(e){var r,n,i=er[e];if(i)return i;for(r=e-1;!er[r];)r--;for(i={line:(i=er[r]).line,column:i.column,seenCR:i.seenCR};r<e;)"\n"===(n=t.charAt(r))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return er[e]=i,i}function or(e,t){var r=ir(e),n=ir(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function ar(e){Qt<tr||(Qt>tr&&(tr=Qt,rr=[]),rr.push(e))}function sr(t,r,n,i){return null!==r&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==t?t:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}(t)+'"':"end of input")+" found."}(r,n),r,n,i)}function ur(){var e,t,r;for(e=Qt,t=[],r=cr();r!==s;)t.push(r),r=cr();return t!==s&&(Zt=e,t=l()),e=t}function cr(){var e,r,n,i,o,a,u,c,l;return e=Qt,(r=kr())!==s?(t.substr(Qt,7)===p?(n=p,Qt+=7):(n=s,0===nr&&ar(h)),n!==s&&(i=fr())!==s?(46===t.charCodeAt(Qt)?(o=d,Qt++):(o=s,0===nr&&ar(f)),o!==s&&(a=Er())!==s?(58===t.charCodeAt(Qt)?(u=m,Qt++):(u=s,0===nr&&ar(g)),u!==s&&(c=Er())!==s&&kr()!==s?((l=lr())===s&&(l=null),l!==s?(Zt=e,e=r=v(i,a,c)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=kr())!==s?(t.substr(Qt,8)===y?(n=y,Qt+=8):(n=s,0===nr&&ar(b)),n!==s&&(i=fr())!==s?(46===t.charCodeAt(Qt)?(o=d,Qt++):(o=s,0===nr&&ar(f)),o!==s&&(a=Er())!==s?(58===t.charCodeAt(Qt)?(u=m,Qt++):(u=s,0===nr&&ar(g)),u!==s&&(c=Er())!==s&&kr()!==s?((l=lr())===s&&(l=null),l!==s?(Zt=e,e=r=x(i,a,c)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=kr())!==s?(t.substr(Qt,15)===w?(n=w,Qt+=15):(n=s,0===nr&&ar(E)),n!==s&&(i=Er())!==s&&(o=kr())!==s?((a=lr())===s&&(a=null),a!==s?(Zt=e,e=r=C(i)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=kr())!==s?(t.substr(Qt,16)===S?(n=S,Qt+=16):(n=s,0===nr&&ar(k)),n!==s&&(i=Er())!==s&&(o=kr())!==s?((a=lr())===s&&(a=null),a!==s?(Zt=e,e=r=_(i)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=function(){var e,r,n,i,o,a,u;if(e=Qt,35===t.charCodeAt(Qt)?(r=j,Qt++):(r=s,0===nr&&ar(I)),r!==s)if(_r()!==s)if(64===t.charCodeAt(Qt)?(n=ce,Qt++):(n=s,0===nr&&ar(le)),n!==s){if(i=[],pe.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(he)),o!==s)for(;o!==s;)i.push(o),pe.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(he));else i=s;if(i!==s)if((o=_r())!==s){if(a=[],de.test(t.charAt(Qt))?(u=t.charAt(Qt),Qt++):(u=s,0===nr&&ar(fe)),u!==s)for(;u!==s;)a.push(u),de.test(t.charAt(Qt))?(u=t.charAt(Qt),Qt++):(u=s,0===nr&&ar(fe));else a=s;a!==s?(Zt=e,r=me(i,a),e=r):(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s}else Qt=e,e=s;else Qt=e,e=s;else Qt=e,e=s;return e}())!==s&&(n=pr())!==s?(Zt=e,e=r=D(r)):(Qt=e,e=s),e===s&&(e=Qt,(r=hr())!==s?((n=pr())===s&&(n=null),n!==s?e=r=[r,n]:(Qt=e,e=s)):(Qt=e,e=s),e===s&&(e=Qt,(r=kr())!==s&&(n=pr())!==s?e=r=[r,n]:(Qt=e,e=s),e===s&&(e=Qt,(r=kr())!==s&&(n=function e(){var r,n,i,o;return r=Qt,(n=function(){var e;return(e=dr())===s&&(e=function(){var e,t,r;return e=Qt,(t=fr())!==s?((r=wr())===s&&(r=null),r!==s?(Zt=e,t=L(t,r),e=t):(Qt=e,e=s)):(Qt=e,e=s),e}())===s&&(e=function(){var e,r,n,i;if(e=Qt,39===t.charCodeAt(Qt)?(r=$,Qt++):(r=s,0===nr&&ar(z)),r!==s){for(n=[],i=Sr();i!==s;)n.push(i),i=Sr();n!==s?(39===t.charCodeAt(Qt)?(i=$,Qt++):(i=s,0===nr&&ar(z)),i!==s?(Zt=e,r=J(n),e=r):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e===s&&(e=Qt,(r=function(){var e,t,r;return e=Qt,(t=Ar())!==s&&(r=Pr())!==s&&Ar()!==s?(Zt=e,t=Le(r),e=t):(Qt=e,e=s),e}())!==s&&(Zt=e,r=q(r)),e=r),e}()),e}())!==s&&kr()!==s?(t.substr(Qt,2)===N?(i=N,Qt+=2):(i=s,0===nr&&ar(R)),i!==s&&kr()!==s&&(o=e())!==s?(Zt=r,n=M(n,o),r=n):(Qt=r,r=s)):(Qt=r,r=s),r===s&&(r=function(){var e;return(e=function(){var e,t,r;return e=Qt,(t=xr())===s&&(t=null),t!==s&&(r=fr())!==s?(Zt=e,t=U(t,r),e=t):(Qt=e,e=s),e}())===s&&(e=dr()),e}()),r}())!==s&&(i=kr())!==s?((o=lr())===s&&(o=null),o!==s?(Zt=e,e=r=A(n)):(Qt=e,e=s)):(Qt=e,e=s)))))))),e}function lr(){var e,r,n,i,o;return e=Qt,(r=kr())!==s?(44===t.charCodeAt(Qt)?(n=P,Qt++):(n=s,0===nr&&ar(F)),n===s&&(n=null),n!==s?((i=hr())===s&&(i=null),i!==s?((o=pr())===s&&(o=null),o!==s?e=r=[r,n,i,o]:(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),e}function pr(){var e;return T.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(O)),e}function hr(){var e,r,n,i,o;if(e=Qt,(r=kr())!==s)if(35===t.charCodeAt(Qt)?(n=j,Qt++):(n=s,0===nr&&ar(I)),n!==s){for(i=[],o=Cr();o!==s;)i.push(o),o=Cr();i!==s?e=r=[r,n,i]:(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s;return e}function dr(){var e,t,r,n;return e=Qt,(t=xr())!==s&&(r=fr())!==s&&(n=wr())!==s?(Zt=e,e=t=B(t,r,n)):(Qt=e,e=s),e===s&&(e=Qt,(t=xr())===s&&(t=null),t!==s&&(r=function(){var e;return(e=gr())===s&&(e=vr()),e}())!==s?((n=wr())===s&&(n=null),n!==s?(Zt=e,e=t=B(t,r,n)):(Qt=e,e=s)):(Qt=e,e=s)),e}function fr(){var e,t;return e=Qt,(t=gr())!==s&&(Zt=e,t=V(t)),(e=t)===s&&(e=Qt,(t=mr())!==s&&(Zt=e,t=V(t)),(e=t)===s&&(e=Qt,(t=vr())!==s&&(Zt=e,t=V(t)),e=t)),e}function mr(){var e,r,n,i,o;if(e=Qt,r=Qt,X.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&ar(K)),n!==s){for(i=[],H.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(G));o!==s;)i.push(o),H.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(G));i!==s?r=n=[n,i]:(Qt=r,r=s)}else Qt=r,r=s;return r!==s&&(Zt=e,r=Y(r)),e=r}function gr(){var e,t,r;return e=Qt,(t=mr())!==s&&(r=yr())!==s?(Zt=e,e=t=W(t,r)):(Qt=e,e=s),e}function vr(){var e,t;return e=Qt,(t=yr())!==s&&(Zt=e,t=Q(t)),e=t}function yr(){var e,r,n,i,o;if(e=Qt,40===t.charCodeAt(Qt)?(r=Z,Qt++):(r=s,0===nr&&ar(ee)),r!==s){for(n=[],te.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(re));i!==s;)n.push(i),te.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(re));n===s&&(n=null),n!==s?((i=function(){var e,r,n,i;if(e=Qt,58===t.charCodeAt(Qt)?(r=m,Qt++):(r=s,0===nr&&ar(g)),r!==s){if(n=[],ae.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(se)),i!==s)for(;i!==s;)n.push(i),ae.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(se));else n=s;n!==s?(Zt=e,r=ue(n),e=r):(Qt=e,e=s)}else Qt=e,e=s;return e}())===s&&(i=null),i!==s?(41===t.charCodeAt(Qt)?(o=ne,Qt++):(o=s,0===nr&&ar(ie)),o!==s?(Zt=e,e=r=oe(n,i)):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e}function br(){var e,r,n;return e=Qt,(r=Er())!==s?((n=function(){var e,r,n,i;if(e=Qt,91===t.charCodeAt(Qt)?(r=we,Qt++):(r=s,0===nr&&ar(Ee)),r!==s){if(n=[],Ce.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(Se)),i!==s)for(;i!==s;)n.push(i),Ce.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=s,0===nr&&ar(Se));else n=s;n!==s?(93===t.charCodeAt(Qt)?(i=ke,Qt++):(i=s,0===nr&&ar(_e)),i!==s?(Zt=e,r=De(n),e=r):(Qt=e,e=s)):(Qt=e,e=s)}else Qt=e,e=s;return e}())===s&&(n=null),n!==s?(Zt=e,e=r=ge(r,n)):(Qt=e,e=s)):(Qt=e,e=s),e}function xr(){var e,t;return e=Qt,(t=br())!==s&&_r()!==s?(Zt=e,e=t=ve(t)):(Qt=e,e=s),e}function wr(){var e,t;return e=Qt,_r()!==s&&(t=br())!==s?(Zt=e,e=ve(t)):(Qt=e,e=s),e}function Er(){var e,r,n,i,o;if(e=Qt,r=Qt,X.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&ar(K)),n!==s){for(i=[],ye.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(be));o!==s;)i.push(o),ye.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=s,0===nr&&ar(be));i!==s?r=n=[n,i]:(Qt=r,r=s)}else Qt=r,r=s;return r!==s&&(Zt=e,r=xe(r)),e=r}function Cr(){var e;return Ae.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(Pe)),e}function Sr(){var e,r,n;return e=Qt,Fe.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&ar(Te)),r!==s?(Oe.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=s,0===nr&&ar(je)),n!==s?(Zt=e,e=r=Ie()):(Qt=e,e=s)):(Qt=e,e=s),e===s&&(Ne.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(Re))),e}function kr(){var e,r;for(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&ar(Be));r!==s;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&ar(Be));return e===s&&(e=null),e}function _r(){var e,r;if(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&ar(Be)),r!==s)for(;r!==s;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=s,0===nr&&ar(Be));else e=s;return e}function Dr(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(44===t.charCodeAt(Qt)?(n=P,Qt++):(n=s,0===nr&&ar(F)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}function Ar(){var e,r;for(nr++,e=[],Ve.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&ar(Xe));r!==s;)e.push(r),Ve.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=s,0===nr&&ar(Xe));return nr--,e===s&&(r=s,0===nr&&ar(qe)),e}function Pr(){var e;return(e=function(){var e,r;return e=Qt,t.substr(Qt,5)===Ke?(r=Ke,Qt+=5):(r=s,0===nr&&ar(He)),r!==s&&(Zt=e,r=Ge()),e=r}())===s&&(e=function(){var e,r;return e=Qt,t.substr(Qt,4)===Ye?(r=Ye,Qt+=4):(r=s,0===nr&&ar(We)),r!==s&&(Zt=e,r=Qe()),e=r}())===s&&(e=function(){var e,r;return e=Qt,t.substr(Qt,4)===Ze?(r=Ze,Qt+=4):(r=s,0===nr&&ar(et)),r!==s&&(Zt=e,r=tt()),e=r}())===s&&(e=function(){var e,r,n,i,o,a,u,c;if(e=Qt,(r=function(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(123===t.charCodeAt(Qt)?(n=Ue,Qt++):(n=s,0===nr&&ar($e)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}())!==s){if(n=Qt,(i=Fr())!==s){for(o=[],a=Qt,(u=Dr())!==s&&(c=Fr())!==s?(Zt=a,u=rt(i,c),a=u):(Qt=a,a=s);a!==s;)o.push(a),a=Qt,(u=Dr())!==s&&(c=Fr())!==s?(Zt=a,u=rt(i,c),a=u):(Qt=a,a=s);o!==s?(Zt=n,i=nt(i,o),n=i):(Qt=n,n=s)}else Qt=n,n=s;n===s&&(n=null),n!==s&&(i=function(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(125===t.charCodeAt(Qt)?(n=ze,Qt++):(n=s,0===nr&&ar(Je)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}())!==s?(Zt=e,r=it(n),e=r):(Qt=e,e=s)}else Qt=e,e=s;return e}())===s&&(e=function(){var e,r,n,i,o,a,u,c;if(e=Qt,(r=function(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(91===t.charCodeAt(Qt)?(n=we,Qt++):(n=s,0===nr&&ar(Ee)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}())!==s){if(n=Qt,(i=Pr())!==s){for(o=[],a=Qt,(u=Dr())!==s&&(c=Pr())!==s?(Zt=a,u=at(i,c),a=u):(Qt=a,a=s);a!==s;)o.push(a),a=Qt,(u=Dr())!==s&&(c=Pr())!==s?(Zt=a,u=at(i,c),a=u):(Qt=a,a=s);o!==s?(Zt=n,i=st(i,o),n=i):(Qt=n,n=s)}else Qt=n,n=s;n===s&&(n=null),n!==s&&(i=function(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(93===t.charCodeAt(Qt)?(n=ke,Qt++):(n=s,0===nr&&ar(_e)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}())!==s?(Zt=e,r=ut(n),e=r):(Qt=e,e=s)}else Qt=e,e=s;return e}())===s&&(e=function(){var e,r,n,i;return nr++,e=Qt,(r=Tr())===s&&(r=null),r!==s&&function(){var e,r,n,i;if((e=function(){var e;return 48===t.charCodeAt(Qt)?(e=bt,Qt++):(e=s,0===nr&&ar(xt)),e}())===s)if(e=Qt,(r=function(){var e;return pt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(ht)),e}())!==s){for(n=[],i=Nr();i!==s;)n.push(i),i=Nr();n!==s?e=r=[r,n]:(Qt=e,e=s)}else Qt=e,e=s;return e}()!==s?((n=function(){var e,r,n,i;if(e=Qt,(r=function(){var e;return 46===t.charCodeAt(Qt)?(e=d,Qt++):(e=s,0===nr&&ar(f)),e}())!==s){if(n=[],(i=Nr())!==s)for(;i!==s;)n.push(i),i=Nr();else n=s;n!==s?e=r=[r,n]:(Qt=e,e=s)}else Qt=e,e=s;return e}())===s&&(n=null),n!==s?((i=function(){var e,r,n,i,o;if(e=Qt,(r=function(){var e;return dt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(ft)),e}())!==s)if((n=Tr())===s&&(n=function(){var e;return 43===t.charCodeAt(Qt)?(e=vt,Qt++):(e=s,0===nr&&ar(yt)),e}()),n===s&&(n=null),n!==s){if(i=[],(o=Nr())!==s)for(;o!==s;)i.push(o),o=Nr();else i=s;i!==s?e=r=[r,n,i]:(Qt=e,e=s)}else Qt=e,e=s;else Qt=e,e=s;return e}())===s&&(i=null),i!==s?(Zt=e,r=lt(),e=r):(Qt=e,e=s)):(Qt=e,e=s)):(Qt=e,e=s),nr--,e===s&&(r=s,0===nr&&ar(ct)),e}())===s&&(e=Or()),e}function Fr(){var e,r,n;return e=Qt,(r=Or())!==s&&function(){var e,r,n,i;return e=Qt,(r=Ar())!==s?(58===t.charCodeAt(Qt)?(n=m,Qt++):(n=s,0===nr&&ar(g)),n!==s&&(i=Ar())!==s?e=r=[r,n,i]:(Qt=e,e=s)):(Qt=e,e=s),e}()!==s&&(n=Pr())!==s?(Zt=e,e=r=ot(r,n)):(Qt=e,e=s),e}function Tr(){var e;return 45===t.charCodeAt(Qt)?(e=mt,Qt++):(e=s,0===nr&&ar(gt)),e}function Or(){var e,t,r;if(nr++,e=Qt,Ir()!==s){for(t=[],r=jr();r!==s;)t.push(r),r=jr();t!==s&&(r=Ir())!==s?(Zt=e,e=Et(t)):(Qt=e,e=s)}else Qt=e,e=s;return nr--,e===s&&0===nr&&ar(wt),e}function jr(){var e,r,n,i,o,a,u,c,l;return(e=function(){var e;return Ht.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(Gt)),e}())===s&&(e=Qt,function(){var e;return 92===t.charCodeAt(Qt)?(e=kt,Qt++):(e=s,0===nr&&ar(_t)),e}()!==s?(34===t.charCodeAt(Qt)?(r=Ct,Qt++):(r=s,0===nr&&ar(St)),r===s&&(92===t.charCodeAt(Qt)?(r=kt,Qt++):(r=s,0===nr&&ar(_t)),r===s&&(47===t.charCodeAt(Qt)?(r=Dt,Qt++):(r=s,0===nr&&ar(At)),r===s&&(r=Qt,98===t.charCodeAt(Qt)?(n=Pt,Qt++):(n=s,0===nr&&ar(Ft)),n!==s&&(Zt=r,n=Tt()),(r=n)===s&&(r=Qt,102===t.charCodeAt(Qt)?(n=Ot,Qt++):(n=s,0===nr&&ar(jt)),n!==s&&(Zt=r,n=It()),(r=n)===s&&(r=Qt,110===t.charCodeAt(Qt)?(n=Nt,Qt++):(n=s,0===nr&&ar(Rt)),n!==s&&(Zt=r,n=Mt()),(r=n)===s&&(r=Qt,114===t.charCodeAt(Qt)?(n=Bt,Qt++):(n=s,0===nr&&ar(Lt)),n!==s&&(Zt=r,n=Ut()),(r=n)===s&&(r=Qt,116===t.charCodeAt(Qt)?(n=$t,Qt++):(n=s,0===nr&&ar(zt)),n!==s&&(Zt=r,n=Jt()),(r=n)===s&&(r=Qt,117===t.charCodeAt(Qt)?(n=qt,Qt++):(n=s,0===nr&&ar(Vt)),n!==s?(i=Qt,o=Qt,(a=Rr())!==s&&(u=Rr())!==s&&(c=Rr())!==s&&(l=Rr())!==s?o=a=[a,u,c,l]:(Qt=o,o=s),(i=o!==s?t.substring(i,Qt):o)!==s?(Zt=r,r=n=Xt(i)):(Qt=r,r=s)):(Qt=r,r=s))))))))),r!==s?(Zt=e,e=Kt(r)):(Qt=e,e=s)):(Qt=e,e=s)),e}function Ir(){var e;return 34===t.charCodeAt(Qt)?(e=Ct,Qt++):(e=s,0===nr&&ar(St)),e}function Nr(){var e;return Ce.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(Se)),e}function Rr(){var e;return Yt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=s,0===nr&&ar(Wt)),e}var Mr="IN",Br="OUT";delete(a=this).properties,delete a.inports,delete a.outports,delete a.groups,a.edges=[],i={};var Lr=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};a.validateContents=function(e,t){e.processes&&Object.keys(e.processes).forEach(function(t){if(!e.processes[t].component)throw new Error('Node "'+t+'" does not have a component defined')}),e.inports&&Object.keys(e.inports).forEach(function(t){var r=e.inports[t];if(!e.processes[r.process])throw new Error('Inport "'+t+'" is connected to an undefined target node "'+r.process+'"')}),e.outports&&Object.keys(e.outports).forEach(function(t){var r=e.outports[t];if(!e.processes[r.process])throw new Error('Outport "'+t+'" is connected to an undefined source node "'+r.process+'"')}),e.connections&&e.connections.forEach(function(t){if(t.tgt&&!e.processes[t.tgt.process]){if(t.data)throw new Error('IIP containing "'+t.data+'" is connected to an undefined target node "'+t.tgt.process+'"');throw new Error('Edge from "'+t.src.process+'" port "'+t.src.port+'" is connected to an undefined target node "'+t.tgt.process+'"')}if(t.src&&!e.processes[t.src.process])throw new Error('Edge to "'+t.tgt.process+'" port "'+t.tgt.port+'" is connected to an undefined source node "'+t.src.process+'"')})},a.serialize=function(e){var t,r,n,i,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C,S;for(c in null==o&&(o={}),s="string"==typeof e?JSON.parse(e):e,l=[],h="",n=function(e){return null!=s.processes[e].metadata&&(e=s.processes[e].metadata.label),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},r=function(e,t){return null!=t.process&&null!=s.processes[t.process].metadata?e=s.processes[t.process].metadata.label:null!=t.process&&(e=t.process),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},s.properties&&(s.properties.environment&&s.properties.environment.type&&(h+="# @runtime "+s.properties.environment.type+"\n"),Object.keys(s.properties).forEach(function(e){if(e.match(/^[a-zA-Z0-9\-_]+$/)){var t=s.properties[e];"string"==typeof t&&t.match(/^[a-zA-Z0-9\-_\s\.]+$/)&&(h+="# @"+e+" "+t+"\n")}})),f=s.inports)d=r(c,a=f[c]),c=s.caseSensitive?c:c.toUpperCase(),a.port=s.caseSensitive?a.port:a.port.toUpperCase(),h+="INPORT="+d+"."+a.port+":"+c+"\n";for(c in m=s.outports)p=m[c],d=r(c,a),c=s.caseSensitive?c:c.toUpperCase(),p.port=s.caseSensitive?p.port:p.port.toUpperCase(),h+="OUTPORT="+d+"."+p.port+":"+c+"\n";for(h+="\n",i=0,u=(g=s.connections).length;i<u;i++)null!=(t=g[i]).data?(C=s.caseSensitive?t.tgt.port:t.tgt.port.toUpperCase(),E=t.tgt.process,S=s.processes[E].component,w=n(E),Lr.call(l,S)<0&&(w+="("+S+")",l.push(S)),h+='"'+t.data+'" -> '+C+" "+w+"\n"):(b=s.caseSensitive?t.src.port:t.src.port.toUpperCase(),y=t.src.process,x=s.processes[y].component,v=n(y),Lr.call(l,x)<0&&(v+="("+x+")",l.push(x)),C=s.caseSensitive?t.tgt.port:t.tgt.port.toUpperCase(),E=t.tgt.process,S=s.processes[E].component,w=n(E),Lr.call(l,S)<0&&(w+="("+S+")",l.push(S)),h+=v+" "+b+" -> "+C+" "+w+"\n");return h},a.addNode=function(e,t){if(i[e]||(i[e]={}),t.comp&&(i[e].component=t.comp),t.meta){for(var r={},n=0;n<t.meta.length;n++){var o=t.meta[n].split("=");1===o.length&&(o=["routes",o[0]]);var a=o[0],s=o[1];"x"!==a&&"y"!==a||(s=parseFloat(s)),r[a]=s}i[e].metadata=r}};var Ur={},$r={};function zr(e){return e[0]+e[1].join("")}function Jr(e,t,r){o.caseSensitive||(r=r.toLowerCase());var n={process:e,port:t?t.port:r};return t&&null!=t.index&&(n.index=t.index),n}function qr(e,t){return Jr(e,t,Mr)}function Vr(e,t){return Jr(e,t,Br)}if(a.addAnonymousNode=function(e,t){if(!$r[t]){var r=e.comp.replace(/[^a-zA-Z0-9]+/,"_");Ur[r]=(Ur[r]||0)+1,$r[t]="_"+r+"_"+Ur[r],this.addNode($r[t],e)}return $r[t]},a.getResult=function(){var e={inports:a.inports||{},outports:a.outports||{},groups:a.groups||[],processes:i||{},connections:a.processEdges()};a.properties&&(e.properties=a.properties),e.caseSensitive=o.caseSensitive||!1;var t=a.validateSchema;if(void 0!==o.validateSchema&&(t=o.validateSchema),t){if(void 0===n)var n=r(38);var s=r(74),u=n.validateMultiple(e,s);if(!u.valid)throw new Error("fbp: Did not validate againt graph schema:\n"+JSON.stringify(u.errors,null,2))}return(void 0===o.validateContents||o.validateContents)&&a.validateContents(e),e},a.registerAnnotation=function(e,t){if(a.properties||(a.properties={}),"runtime"===e)return a.properties.environment={},void(a.properties.environment.type=t);a.properties[e]=t},a.registerInports=function(e,t,r){a.inports||(a.inports={}),o.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),a.inports[r]={process:e,port:t}},a.registerOutports=function(e,t,r){a.outports||(a.outports={}),o.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),a.outports[r]={process:e,port:t}},a.registerEdges=function(e){Array.isArray(e)&&e.forEach(function(e,t){a.edges.push(e)})},a.processEdges=function(){var e,t;e=function e(t,r){for(var n=-1,i=t?t.length:0,o=[];++n<i;){var a=t[n];a instanceof Array?Array.prototype.push.apply(o,r?a:e(a)):o.push(a)}return o}(a.edges),t=[];for(var r=1;r<e.length;r+=1)("src"in e[r-1]||"data"in e[r-1])&&"tgt"in e[r]&&(e[r-1].tgt=e[r].tgt,t.push(e[r-1]),r++);return t},(n=c())!==s&&Qt===t.length)return n;throw n!==s&&Qt<t.length&&ar({type:"end",description:"end of input"}),sr(null,rr,tr<t.length?t.charAt(tr):null,tr<t.length?or(tr,tr+1):or(tr,tr))}}}()},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=[],void 0===(o="function"==typeof(n=function(){Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!==(void 0===i?"undefined":a(i))&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in i)e.call(i,s)&&o.push(s);if(t)for(var u=0;u<n;u++)e.call(i,r[u])&&o.push(r[u]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);i<r;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var e={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},t={"*":!0};function r(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function n(n){var i="";e[n.charAt(0)]&&(i=n.charAt(0),n=n.substring(1));var o="",s="",u=!0,c=!1,l=!1;"+"===i?u=!1:"."===i?(s=".",o="."):"/"===i?(s="/",o="/"):"#"===i?(s="#",u=!1):";"===i?(s=";",o=";",c=!0,l=!0):"?"===i?(s="?",o="&",c=!0):"&"===i&&(s="&",o="&",c=!0);for(var p=[],h=n.split(","),d=[],f={},m=0;m<h.length;m++){var g=h[m],v=null;if(-1!==g.indexOf(":")){var y=g.split(":");g=y[0],v=parseInt(y[1],10)}for(var b={};t[g.charAt(g.length-1)];)b[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var x={truncate:v,name:g,suffices:b};d.push(x),f[g]=x,p.push(g)}var w=function(e){for(var t="",n=0,i=0;i<d.length;i++){var p=d[i],h=e(p.name);if(null===h||void 0===h||Array.isArray(h)&&0===h.length||"object"===(void 0===h?"undefined":a(h))&&0===Object.keys(h).length)n++;else if(t+=i===n?s:o||",",Array.isArray(h)){c&&(t+=p.name+"=");for(var f=0;f<h.length;f++)f>0&&(t+=p.suffices["*"]&&o||",",p.suffices["*"]&&c&&(t+=p.name+"=")),t+=u?encodeURIComponent(h[f]).replace(/!/g,"%21"):r(h[f])}else if("object"===(void 0===h?"undefined":a(h))){c&&!p.suffices["*"]&&(t+=p.name+"=");var m=!0;for(var g in h)m||(t+=p.suffices["*"]&&o||","),m=!1,t+=u?encodeURIComponent(g).replace(/!/g,"%21"):r(g),t+=p.suffices["*"]?"=":",",t+=u?encodeURIComponent(h[g]).replace(/!/g,"%21"):r(h[g])}else c&&(t+=p.name,l&&""===h||(t+="=")),null!=p.truncate&&(h=h.substring(0,p.truncate)),t+=u?encodeURIComponent(h).replace(/!/g,"%21"):r(h)}return t};return w.varNames=p,{prefix:s,substitution:w}}function i(e){if(!(this instanceof i))return new i(e);for(var t=e.split("{"),r=[t.shift()],o=[],a=[],s=[];t.length>0;){var u=t.shift(),c=u.split("}")[0],l=u.substring(c.length+1),p=n(c);a.push(p.substitution),o.push(p.prefix),r.push(l),s=s.concat(p.substitution.varNames)}this.fill=function(e){for(var t=r[0],n=0;n<a.length;n++){var i=a[n];t+=i(e),t+=r[n+1]}return t},this.varNames=s,this.template=e}i.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var o=function(e,t,r,n,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||f("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var o in e.definedKeywords)this.definedKeywords[o]=e.definedKeywords[o].slice(0)};function s(e,t){if(e===t)return!0;if(e&&t&&"object"===(void 0===e?"undefined":a(e))&&"object"===(void 0===t?"undefined":a(t))){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!s(e[r],t[r]))return!1}else{var n;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(!s(e[n],t[n]))return!1}return!0}return!1}o.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},o.prototype.createError=function(e,t,r,n,i,o,a){var s=new b(e,t,r,n,i);return s.message=this.errorReporter(s,o,a),s},o.prototype.returnError=function(e){return e},o.prototype.collectError=function(e){return e&&this.errors.push(e),null},o.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},o.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(m.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),i=this.handleError(n);if(i)return i}return null},o.prototype.addFormat=function(e,t){if("object"===(void 0===e?"undefined":a(e))){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},o.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(m.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},o.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"===a(this.schemas[n])){r=this.schemas[n];var o=decodeURIComponent(i);if(""===o)return this.resolveRefs(r,t);if("/"!==o.charAt(0))return;for(var s=o.split("/").slice(1),u=0;u<s.length;u++){var c=s[u].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[c]){r=void 0;break}r=r[c]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},o.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"===(void 0===e?"undefined":a(e)))for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"===a(e[n]))this.searchSchemas(e[n],t);else if("$ref"===n){var i=h(e[n]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}},o.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!==(void 0===e?"undefined":a(e))||"string"!=typeof e.id)return;e=(t=e).id}e===h(e)+"#"&&(e=h(e)),this.schemas[e]=t,delete this.missingMap[e],d(t,e),this.searchSchemas(t,e)},o.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},o.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},o.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},o.prototype.dropSchemas=function(){this.schemas={},this.reset()},o.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},o.prototype.validateAll=function(e,t,r,n,i){var o;if(!(t=this.resolveRefs(t)))return null;if(t instanceof b)return this.errors.push(t),t;var s,u=this.errors.length,c=null,l=null;if(this.checkRecursive&&e&&"object"===(void 0===e?"undefined":a(e))){if(o=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&-1!==(s=this.scannedFrozen.indexOf(e))){var h=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==h)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][h]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][c]=t,this.scannedFrozenValidationErrors[s][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}l=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][l]=t,e[this.validationErrorsKey][l]=[]}}var d=this.errors.length,f=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateHypermedia(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(o){for(;this.scanned.length;){var m=this.scanned.pop();delete m[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(f||d!==this.errors.length)for(;r&&r.length||n&&n.length;){var g=r&&r.length?""+r.pop():null,v=n&&n.length?""+n.pop():null;f&&(f=f.prefixWith(g,v)),this.prefixErrors(d,g,v)}return null!==c?this.scannedFrozenValidationErrors[s][c]=this.errors.slice(u):null!==l&&(e[this.validationErrorsKey][l]=this.errors.slice(u)),this.handleError(f)},o.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(m.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"===(void 0===r?"undefined":a(r))?this.createError(m.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},o.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if(void 0!==t[n])for(var i=this.definedKeywords[n],o=0;o<i.length;o++){var s=i[o],u=s(e,t[n],t,r);if("string"==typeof u||"number"==typeof u)return this.createError(m.KEYWORD_CUSTOM,{key:n,message:u},"","",null,e,t).prefixWith(null,n);if(u&&"object"===(void 0===u?"undefined":a(u))){var c=u.code;if("string"==typeof c){if(!m[c])throw new Error("Undefined error code (use defineError): "+c);c=m[c]}else"number"!=typeof c&&(c=m.KEYWORD_CUSTOM);var l="object"===a(u.message)?u.message:{key:n,message:u.message||"?"},p=u.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(c,l,u.dataPath||null,p,null,e,t)}}return null},o.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},o.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=void 0===e?"undefined":a(e);null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if(o===r||"integer"===o&&"number"===r&&e%1==0)return null}return this.createError(m.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},o.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++){var n=t.enum[r];if(s(e,n))return null}return this.createError(m.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},o.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var u=Math.pow(2,-51),c=1-u;function l(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function p(e,t){return t=l(t||""),e=l(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function h(e){return e.split("#")[0]}function d(e,t){if(e&&"object"===(void 0===e?"undefined":a(e)))if(void 0===t?t=e.id:"string"==typeof e.id&&(t=p(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)d(e[r],t);else for(var n in"string"==typeof e.$ref&&(e.$ref=p(t,e.$ref)),e)"enum"!==n&&d(e[n],t)}function f(e){var t=x[e=e||"en"];return function(e){var r=t[e.code]||y[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e})}}o.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=u&&n<c)return this.createError(m.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},o.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(m.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(m.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(m.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(m.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},o.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(m.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},o.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},o.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(m.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(m.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},o.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,i="",o=t.pattern.match(/^\/(.+)\/([img]*)$/);o?(n=o[1],i=o[2]):n=t.pattern,r=new RegExp(n,i)}return r.test(e)?null:this.createError(m.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},o.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},o.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(m.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(m.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},o.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(s(e[r],e[n])){var i=this.createError(m.ARRAY_UNIQUE,{match1:r,match2:n},"","/uniqueItems",null,e,t);if(this.handleError(i))return i}return null},o.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(n=this.validateAll(e[i],t.items[i],[i],["items",i],r+"/"+i))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(m.ARRAY_ADDITIONAL_ITEMS,{},"/"+i,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],r+"/"+i))return n}else for(i=0;i<e.length;i++)if(n=this.validateAll(e[i],t.items,[i],["items"],r+"/"+i))return n;return null},o.prototype.validateObject=function(e,t,r){return"object"!==(void 0===e?"undefined":a(e))||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},o.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(m.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(m.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},o.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var i=this.createError(m.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(i))return i}}return null},o.prototype.validateObjectProperties=function(e,t,r){var n;for(var i in e){var o=r+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(a=!0,n=this.validateAll(e[i],t.properties[i],[i],["properties",i],o)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(i)&&(a=!0,n=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],o)))return n}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(m.OBJECT_ADDITIONAL_PROPERTIES,{key:i},"","/additionalProperties",null,e,t).prefixWith(i,null),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],o))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},o.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i];if("string"==typeof o){if(void 0===e[o]&&(n=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:o},"","",null,e,t).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var s=o[a];if(void 0===e[s]&&(n=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:s},"","/"+a,null,e,t).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,o,[],["dependencies",i],r))return n}return null},o.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},o.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,i=0;i<t.allOf.length;i++){var o=t.allOf[i];if(n=this.validateAll(e,o,[],["allOf",i],r))return n}return null},o.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],l=this.errors.length,p=this.validateAll(e,c,[],["anyOf",u],r);if(null===p&&l===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0);s=!1;continue}return null}p&&o.push(p.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),s?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(m.ANY_OF_MISSING,{},"","/anyOf",o,e,t)):void 0},o.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,i,o=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],l=this.errors.length,p=this.validateAll(e,c,[],["oneOf",u],r);if(null===p&&l===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MULTIPLE,{index1:o,index2:u},"","/oneOf",null,e,t);if(o=u,this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0)}}else p&&a.push(p)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},o.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,i,o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===a&&0===s.length?this.createError(m.NOT_PASSED,{},"","/not",null,e,t):null},o.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var n,o=0;o<t.links.length;o++){var a=t.links[o];if("describedby"===a.rel){for(var s=new i(a.href),u=!0,c=0;c<s.varNames.length;c++)if(!(s.varNames[c]in e)){u=!1;break}if(u){var l=s.fillFromObject(e),p={$ref:l};if(n=this.validateAll(e,p,[],["links",o],r))return n}}}};var m={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},g={};for(var v in m)g[m[v]]=v;var y={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function b(e,t,r,n,i){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=i||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,b.prototype.name="ValidationError",b.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var x={},w=function e(t){var r,n,i=new o,a={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){i.addFormat.apply(i,arguments)},language:function(e){return e?(x[e]||(e=e.split("-")[0]),!!x[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in m)t[r]&&!t[m[r]]&&(t[m[r]]=t[r]);var n=e.split("-")[0];if(x[n])for(r in x[e]=Object.create(x[n]),t)void 0===x[n][r]&&(x[n][r]=t[r]),x[e][r]=t[r];else x[e]=t,x[n]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,a,s){var u=f(r),c=n?function(e,t,r){return n(e,t,r)||u(e,t,r)}:u,l=new o(i,!1,c,a,s);"string"==typeof t&&(t={$ref:t}),l.addSchema("",t);var p=l.validateAll(e,t,null,null,"");return!p&&s&&(p=l.banUnknownProperties(e,t)),this.error=p,this.missing=l.missing,this.valid=null===p,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,a,s){var u=f(r),c=n?function(e,t,r){return n(e,t,r)||u(e,t,r)}:u,l=new o(i,!0,c,a,s);"string"==typeof t&&(t={$ref:t}),l.addSchema("",t),l.validateAll(e,t,null,null,""),s&&l.banUnknownProperties(e,t);var p={toString:function(){return this.valid?"valid":this.error.message}};return p.errors=l.errors,p.missing=l.missing,p.valid=0===p.errors.length,p},addSchema:function(){return i.addSchema.apply(i,arguments)},getSchema:function(){return i.getSchema.apply(i,arguments)},getSchemaMap:function(){return i.getSchemaMap.apply(i,arguments)},getSchemaUris:function(){return i.getSchemaUris.apply(i,arguments)},getMissingUris:function(){return i.getMissingUris.apply(i,arguments)},dropSchemas:function(){i.dropSchemas.apply(i,arguments)},defineKeyword:function(){i.defineKeyword.apply(i,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==m[e])throw new Error("Error already defined: "+e+" as "+m[e]);if(void 0!==g[t])throw new Error("Error code already used: "+g[t]+" as "+t);for(var n in m[e]=t,g[t]=e,y[e]=y[t]=r,x){var i=x[n];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){i.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:d,resolveUrl:p,getDocumentUri:h,errorCodes:m};return a.language(t||"en"),a}();return w.addLanguage("en-gb",y),w.tv4=w,w})?n.apply(t,i):n)||(e.exports=o)},function(e,t,r){"use strict";var n=r(77);e.exports=n},function(e,t,r){"use strict";var n=r(9);e.exports=new n({include:[r(41)]})},function(e,t,r){"use strict";var n=r(9);e.exports=new n({include:[r(27)],implicit:[r(83),r(84),r(85),r(86)]})},function(e,t,r){"use strict";var n;try{e.exports={base:r(98),testcase:r(99),testsuite:r(100),testsuites:r(101),expectations:r(102),testsfile:r(103)}}catch(e){n=e,console.log("fbp-spec: Failed to load schemas",n)}},function(e,t,r){"use strict";var n,i,o,a,s,u,c;a=r(7)("fbp-spec:expectation"),i=r(44),n=r(127),o=r(11),c={type:function(e,t){return i.expect(e).to.be.a(t)},equals:function(e,t){return i.expect(e).to.eql(t)},above:function(e,t){return i.expect(e).to.be.above(t)},below:function(e,t){return i.expect(e).to.be.below(t)},haveKeys:function(e,t){return i.expect(e).to.have.keys(t)},includeKeys:function(e,t){return i.expect(e).to.include.keys(t)},contains:function(e,t){return i.expect(e).to.contain(t)},noterror:function(e,t){if(null!=e?e.message:void 0)throw e}},u=function(e){var t,r,n,i;for(n in e)if(t=e[n],"path"!==n&&(r=c[n]))return(i=function(e){return r(e,t)}).toString=function(){return n+" "+t},i;throw new Error("fbp-spec: No operator matching "+Object.keys(e)+". Available: "+Object.keys(c))},s=function(e,t){var r,i;if(i={flatten:!0},e.path){if(a("extracting JSONPath from",e.path,t),!(r=n.eval(t,e.path,i)).length)throw new Error("expected JSONPath '"+e.path+"' to match data in "+JSON.stringify(t))}else r=[t];return a("matching against",r),r},t.expect=function(e,t){var r,n,i,c,l,p,h,d,f,m,g,v;for(o.isArray(e)||(e=[e]),v=[],p=0,h=e.length;p<h;p++)n=e[p],v.push(function(){var e;for(m in e=[],n)i=n[m],l=i,o.isArray(l)||(l=[l]),e.push(function(){var e,n,i;for(i=[],e=0,n=l.length;e<n;e++){if(c=l[e],a("checking port for expectation",m,c),void 0===(r=t[m]))throw new Error("No data received on port "+m);g=u(c),f=s(c,r),i.push(function(){var e,t,r;for(r=[],e=0,t=f.length;e<t;e++)d=f[e],a("checking against predicate",d,g.toString()),r.push(g(d));return r}())}return i}());return e}());return v},t.noError=function(e){return i.expect(e).to.not.exist}},function(e,t,r){"use strict";e.exports=r(3)},function(e,t,r){"use strict";
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */function n(){var e=[].slice.call(arguments);function t(t,r){Object.keys(r).forEach(function(n){~e.indexOf(n)||(t[n]=r[n])})}return function(){for(var e=[].slice.call(arguments),r=0,n={};r<e.length;r++)t(n,e[r]);return n}}function i(e,t,r){var o=n("name","message","stack","constructor","toJSON")(t||{});for(var a in this.message=e||"Unspecified AssertionError",this.showDiff=!1,o)this[a]=o[a];if(r=r||i,Error.captureStackTrace)Error.captureStackTrace(this,r);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */
e.exports=i,i.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
i.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
i.prototype.constructor=i,i.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t,r){"use strict";
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,r){"use strict";var n=Function.prototype.toString,i=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var r=n.call(e).match(i);r&&(t=r[1])}else t=e.name;return t}},function(e,t,r){"use strict";
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e){var t=Object.getOwnPropertyNames(e);function r(e){-1===t.indexOf(e)&&t.push(e)}for(var n=Object.getPrototypeOf(e);null!==n;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return t}},function(e,t,r){"use strict";
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */var n=r(19),i=r(4);e.exports=function(e){var t=n(e),r=Object.prototype.toString.call(e);if(i.truncateThreshold&&t.length>=i.truncateThreshold){if("[object Function]"===r)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===r)return"[ Array("+e.length+") ]";if("[object Object]"===r){var o=Object.keys(e);return"{ Object ("+(o.length>2?o.splice(0,2).join(", ")+", ...":o.join(", "))+") }"}return t}return t}},function(e,t,r){"use strict";
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}},function(e,t,r){"use strict";(function(t){var n,i,o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a=function(){return!(void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node"))},n=r(17).EventEmitter,a()||(o=r(29)("fbp-protocol-client:platform"),i=function(e){function t(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i=r(134).client,a.client=new i,a.connection=null,a.client.on("connectFailed",function(e){return a.emit("error",e)}),a.client.on("connect",function(e){return a.connection&&o("WARNING: multiple connections for one NodeWebSocketClient"),a.connection=e,e.on("error",function(e){return a.connection=null,a.emit("error",e)}),e.on("close",function(){return a.connection=null,a.emit("close")}),e.on("message",function(e){return e.data=e.utf8Data,a.emit("message",e)}),a.emit("open")}),a.client.connect(e,n),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),u(t,[{key:"addEventListener",value:function(e,t,r,n){return this.on(e,t)}},{key:"close",value:function(){if(this.connection)return this.connection.close(),this.connection=null}},{key:"send",value:function(e){return this.connection.sendUTF(e)}}]),t}()),e.exports={isBrowser:a,EventEmitter:n,WebSocket:a()?window.WebSocket:i}}).call(this,r(2))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(142),o=r(143);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=x,t.resolve=function(e,t){return x(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?x(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=x(e));return e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(l),h=["%","/","?",";","#"].concat(p),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(144);function x(e,t,r){if(e&&o.isObject(e)&&e instanceof a)return e;var n=new a;return n.parse(e,t,r),n}a.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":n(e)));var a=e.indexOf("?"),u=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(u);l[0]=l[0].replace(/\\/g,"/");var x=e=l.join(u);if(x=x.trim(),!r&&1===e.split("#").length){var w=c.exec(x);if(w)return this.path=x,this.href=x,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=s.exec(x);if(E){var C=(E=E[0]).toLowerCase();this.protocol=C,x=x.substr(E.length)}if(r||E||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===x.substr(0,2);!S||E&&v[E]||(x=x.substr(2),this.slashes=!0)}if(!v[E]&&(S||E&&!y[E])){for(var k,_,D=-1,A=0;A<d.length;A++){-1!==(P=x.indexOf(d[A]))&&(-1===D||P<D)&&(D=P)}-1!==(_=-1===D?x.lastIndexOf("@"):x.lastIndexOf("@",D))&&(k=x.slice(0,_),x=x.slice(_+1),this.auth=decodeURIComponent(k)),D=-1;for(A=0;A<h.length;A++){var P;-1!==(P=x.indexOf(h[A]))&&(-1===D||P<D)&&(D=P)}-1===D&&(D=x.length),this.host=x.slice(0,D),x=x.slice(D),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var T=this.hostname.split(/\./),O=(A=0,T.length);A<O;A++){var j=T[A];if(j&&!j.match(f)){for(var I="",N=0,R=j.length;N<R;N++)j.charCodeAt(N)>127?I+="x":I+=j[N];if(!I.match(f)){var M=T.slice(0,A),B=T.slice(A+1),L=j.match(m);L&&(M.push(L[1]),B.unshift(L[2])),B.length&&(x="/"+B.join(".")+x),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var U=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+U,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!g[C])for(A=0,O=p.length;A<O;A++){var z=p[A];if(-1!==x.indexOf(z)){var J=encodeURIComponent(z);J===z&&(J=escape(z)),x=x.split(z).join(J)}}var q=x.indexOf("#");-1!==q&&(this.hash=x.substr(q),x=x.slice(0,q));var V=x.indexOf("?");if(-1!==V?(this.search=x.substr(V),this.query=x.substr(V+1),t&&(this.query=b.parse(this.query)),x=x.slice(0,V)):t&&(this.search="",this.query={}),x&&(this.pathname=x),y[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var X=this.search||"";this.path=U+X}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(e){return this.resolveObject(x(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(o.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var p=Object.keys(e),h=0;h<p.length;h++){var d=p[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||v[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",g=r.search||"";r.path=m+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=x||b||r.host&&e.pathname,E=w,C=r.pathname&&r.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===C[0]?C[0]=r.host:C.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===C[0])),x)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,C=f;else if(f.length)C||(C=[]),C.pop(),C=C.concat(f),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(S)r.hostname=r.host=C.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift());return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!C.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=C.slice(-1)[0],_=(r.host||e.host||C.length>1)&&("."===k||".."===k)||""===k,D=0,A=C.length;A>=0;A--)"."===(k=C[A])?C.splice(A,1):".."===k?(C.splice(A,1),D++):D&&(C.splice(A,1),D--);if(!w&&!E)for(;D--;D)C.unshift("..");!w||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),_&&"/"!==C.join("/").substr(-1)&&C.push("");var P,F=""===C[0]||C[0]&&"/"===C[0].charAt(0);S&&(r.hostname=r.host=F?"":C.length?C.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift()));return(w=w||r.host&&C.length)&&!F&&C.unshift(""),C.length?r.pathname=C.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";var n=r(10);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&function(e){return function(t){return function(r,n){var i={key:r,value:t[r]},o={key:n,value:t[n]};return e(i,o)}}}(t.cmp),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==(void 0===t?"undefined":n(t)))return JSON.stringify(t);var a,s;if(Array.isArray(t)){for(s="[",a=0;a<t.length;a++)a&&(s+=","),s+=e(t[a])||"null";return s+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=o.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(s="",a=0;a<c.length;a++){var l=c[a],p=e(t[l]);p&&(s&&(s+=","),s+=JSON.stringify(l)+":"+p)}return o.splice(u,1),"{"+s+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.isTop){if(i){e.async=!0;var s="es7"==e.opts.async;e.yieldAwait=s?"await":"yield"}n+=" var validate = ",i?s?n+=" (async function ":("*"!=e.opts.async&&(n+="co.wrap"),n+="(function* "):n+=" (function ",n+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+a+" */ ")}if("boolean"==typeof e.schema||!o&&!e.schema.$ref){var u=e.level,c=e.dataLevel,l=e.schema["false schema"],p=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",d=!e.opts.allErrors,f="data"+(c||""),m="valid"+u;if(!1===e.schema){e.isTop?d=!0:n+=" var "+m+" = false; ",(W=W||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var g=n;n=W.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+m+" = true; ";return e.isTop&&(n+=" }); return validate; "),n}if(e.isTop){var v=e.isTop;u=e.level=0,c=e.dataLevel=0,f="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{u=e.level,f="data"+((c=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+u+" = errors;"}m="valid"+u,d=!e.opts.allErrors;var y,b="",x="",w=e.schema.type,E=Array.isArray(w);if(E&&1==w.length&&(w=w[0],E=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(w){if(e.opts.coerceTypes)var C=e.util.coerceToTypes(e.opts.coerceTypes,w);var S=e.RULES.types[w];if(C||E||!0===S||S&&!Q(S)){p=e.schemaPath+".type",h=e.errSchemaPath+"/type",p=e.schemaPath+".type",h=e.errSchemaPath+"/type";var k=E?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[k](w,f,!0)+") { ",C){var _="dataType"+u,D="coerced"+u;n+=" var "+_+" = typeof "+f+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+_+" == 'object' && Array.isArray("+f+")) "+_+" = 'array'; "),n+=" var "+D+" = undefined; ";var A="",P=C;if(P)for(var F,T=-1,O=P.length-1;T<O;)F=P[T+=1],T&&(n+=" if ("+D+" === undefined) { ",A+="}"),"array"==e.opts.coerceTypes&&"array"!=F&&(n+=" if ("+_+" == 'array' && "+f+".length == 1) { "+D+" = "+f+" = "+f+"[0]; "+_+" = typeof "+f+";  } "),"string"==F?n+=" if ("+_+" == 'number' || "+_+" == 'boolean') "+D+" = '' + "+f+"; else if ("+f+" === null) "+D+" = ''; ":"number"==F||"integer"==F?(n+=" if ("+_+" == 'boolean' || "+f+" === null || ("+_+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==F&&(n+=" && !("+f+" % 1)"),n+=")) "+D+" = +"+f+"; "):"boolean"==F?n+=" if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+D+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+D+" = true; ":"null"==F?n+=" if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+D+" = null; ":"array"==e.opts.coerceTypes&&"array"==F&&(n+=" if ("+_+" == 'string' || "+_+" == 'number' || "+_+" == 'boolean' || "+f+" == null) "+D+" = ["+f+"]; ");n+=" "+A+" if ("+D+" === undefined) {   ",(W=W||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=W.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var j=c?"data"+(c-1||""):"parentData",I=c?e.dataPathArr[c]:"parentDataProperty";n+=" "+f+" = "+D+"; ",c||(n+="if ("+j+" !== undefined)"),n+=" "+j+"["+I+"] = "+D+"; } "}else{(W=W||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=W.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!o)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(n+=" } if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",x+="}");else{e.opts.v5&&e.schema.patternGroups&&e.logger.warn('keyword "patternGroups" is deprecated and disabled. Use option patternGroups: true to enable.');var N=e.RULES;if(N)for(var R=-1,M=N.length-1;R<M;)if(Q(S=N[R+=1])){if(S.type&&(n+=" if ("+e.util.checkDataType(S.type,f)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==S.type&&e.schema.properties){l=e.schema.properties;var B=Object.keys(l);if(B)for(var L,U=-1,$=B.length-1;U<$;){if(void 0!==(J=l[L=B[U+=1]]).default)n+="  if ("+(V=f+e.util.getProperty(L))+" === undefined) "+V+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(J.default)+" ":n+=" "+JSON.stringify(J.default)+" ",n+="; "}}else if("array"==S.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){T=-1;for(var J,q=z.length-1;T<q;){var V;if(void 0!==(J=z[T+=1]).default)n+="  if ("+(V=f+"["+T+"]")+" === undefined) "+V+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(J.default)+" ":n+=" "+JSON.stringify(J.default)+" ",n+="; "}}}var X=S.rules;if(X)for(var K,H=-1,G=X.length-1;H<G;)if(Z(K=X[H+=1])){var Y=K.code(e,K.keyword,S.type);Y&&(n+=" "+Y+" ",d&&(b+="}"))}if(d&&(n+=" "+b+" ",b=""),S.type&&(n+=" } ",w&&w===S.type&&!C)){n+=" else { ";var W;p=e.schemaPath+".type",h=e.errSchemaPath+"/type";(W=W||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=W.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}d&&(n+=" if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",x+="}")}}function Q(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return d&&(n+=" "+x+" "),v?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }); return validate;"):n+=" var "+m+" = errors === errs_"+u+";",n=e.util.cleanUpCode(n),v&&(n=e.util.finalCleanUpCode(n,i)),n}},function(e,t,r){"use strict";var n=Array.prototype.slice;function i(e){var t=this,r=n.call(arguments,1);return new Promise(function(n,i){if("function"==typeof e&&(e=e.apply(t,r)),!e||"function"!=typeof e.next)return n(e);function s(t){var r;try{r=e.next(t)}catch(e){return i(e)}c(r)}function u(t){var r;try{r=e.throw(t)}catch(e){return i(e)}c(r)}function c(e){if(e.done)return n(e.value);var r=o.call(t,e.value);return r&&a(r)?r.then(s,u):u(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}s()})}function o(e){return e?a(e)?e:function(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||s(t.prototype))}(e)||s(e)?i.call(this,e):"function"==typeof e?function(e){var t=this;return new Promise(function(r,i){e.call(t,function(e,t){if(e)return i(e);arguments.length>2&&(t=n.call(arguments,1)),r(t)})})}.call(this,e):Array.isArray(e)?function(e){return Promise.all(e.map(o,this))}.call(this,e):function(e){return Object==e.constructor}(e)?function(e){for(var t=new e.constructor,r=Object.keys(e),n=[],i=0;i<r.length;i++){var s=r[i],u=o.call(this,e[s]);u&&a(u)?c(u,s):t[s]=e[s]}return Promise.all(n).then(function(){return t});function c(e,r){t[r]=void 0,n.push(e.then(function(e){t[r]=e}))}}.call(this,e):e:e}function a(e){return"function"==typeof e.then}function s(e){return"function"==typeof e.next&&"function"==typeof e.throw}e.exports=i.default=i.co=i,i.wrap=function(e){return t.__generatorFunction__=e,t;function t(){return i.call(this,e.apply(this,arguments))}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s;var d="maximum"==t,f=d?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,v=d?"<":">",y=d?">":"<",b=void 0;if(g){var x=e.util.getData(m.$data,a,e.dataPathArr),w="exclusive"+o,E="exclType"+o,C="exclIsNumber"+o,S="' + "+(D="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+x+"; ",i+=" var "+w+"; var "+E+" = typeof "+(x="schemaExcl"+o)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var k;b=f;(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var _=i;i=k.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+E+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+x+" "+v+"= "+n+") ? "+p+" "+y+"= "+x+" : "+p+" "+y+" "+n+" ) : ( ("+w+" = "+x+" === true) ? "+p+" "+y+"= "+n+" : "+p+" "+y+" "+n+" ) || "+p+" !== "+p+") { var op"+o+" = "+w+" ? '"+v+"' : '"+v+"=';"}else{S=v;if((C="number"==typeof m)&&h){var D="'"+S+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+m+" "+v+"= "+n+" ? "+p+" "+y+"= "+m+" : "+p+" "+y+" "+n+" ) || "+p+" !== "+p+") { "}else{C&&void 0===s?(w=!0,b=f,c=e.errSchemaPath+"/"+f,n=m,y+="="):(C&&(n=Math[d?"min":"max"](m,s)),m===(!C||n)?(w=!0,b=f,c=e.errSchemaPath+"/"+f,y+="="):(w=!1,S+="="));D="'"+S+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+p+" "+y+" "+n+" || "+p+" !== "+p+") { "}}b=b||t,(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+D+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";_=i;return i=k.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+p+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var d=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"less",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s;var d="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+d+" "+n+") { ";var f=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+p+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var d=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"less",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";var n;r(11),n=r(7)("fbp-spec:subprocess"),t.start=function(e,t,i){var o,a,s,u,c;try{s=r(12)}catch(e){return i(e)}return null==t.timeout&&(t.timeout=300),u=!1,c="","","sh",o=["-c",e],a=s.spawn("sh",o),n("spawned","'sh "+o.join(" ")+"'"),n("waiting for output"),a.on("error",function(e){return i(e)}),a.stdout.on("data",function(e){if(e=e.toString(),e,n("sub stdout",e),!u)return n("got output, transitioning to started"),u=!0,setTimeout(i,100)}),a.stderr.on("data",function(e){if(e=e.toString(),c+=e,n("sub stderr",e),!u)return n("got stderr, failing"),u=!0,i(new Error("Subprocess wrote on stderr: '"+c+"'"))}),setTimeout(function(){if(!u)return n("timeout waiting for output, assuming started"),u=!0,i(null)},t.timeout),a}},function(e,t,r){"use strict";var n={"fbp-spec":r(64),chai:r(44),"js-yaml":r(39)};window&&(window.require=function(e){if(n[e])return n[e];throw new Error("Module "+e+" not available")})},function(e,t,r){"use strict";var n;n=function(t){return t=t.replace(".json",""),e.exports.schema[t]},e.exports={runner:r(34),subprocess:r(62),mocha:r(186),testsuite:r(26),schema:r(42),getSchema:n,ui:{}}},function(e,t,r){"use strict";(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(66),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,r(6))},function(e,t,r){"use strict";(function(e,t){!function(e,r){if(!e.setImmediate){var n,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var r=s.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return o[i]=a,n(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{c(e),a=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,r(6),r(2))},function(e,t,r){"use strict";var n,i,o,a;a=r(68),i=r(11),o=r(7)("fbp-spec:protocol"),n=r(23),t.sendGraph=function(e,r,s){var u;if(!1,!r)return s(new Error("Graph not defined"));(u=r.name||r.properties.id)||(u="fixture."+i.randomString(10)),r.name=u,r instanceof a.Graph?(o("sendgraph",u),n.resolve().then(function(){return e.protocol.graph.send(r,!1)}).then(function(){return u}).nodeify(s)):a.graph.loadJSON(r,function(r,n){return r?s(r):t.sendGraph(e,n,s)})},t.startNetwork=function(e,t,r){o("startnetwork",t),n.resolve().then(function(){return e.protocol.network.start({graph:t})}).nodeify(r)},t.stopNetwork=function(e,t,r){o("stopnetwork",t),n.resolve().then(function(){return e.protocol.network.stop({graph:t})}).nodeify(r)},t.sendPackets=function(e,t,r,i){o("sendpackets",t,r),n.all(Object.keys(r).map(function(n){return e.protocol.runtime.packet({event:"data",port:n,payload:r[n],graph:t})})).nodeify(i)},t.getComponents=function(e,t){o("get components"),n.resolve().then(function(){return e.protocol.component.list()}).then(function(e){var t,r,n,i;for(r={},n=0,i=e.length;n<i;n++)r[(t=e[n]).name]=t;return r}).nodeify(t)},t.getCapabilities=function(e,t){var r,i;if(null!=(r=e.definition)&&null!=(i=r.capabilities)?i.length:void 0)return t(null,r.capabilities);n.resolve().then(function(){return e.protocol.runtime.getruntime()}).then(function(e){return e.capabilities}).nodeify(t)},t.getComponentTests=function(e,t){o("get component tests"),n.resolve().then(function(){return e.protocol.component.list()}).then(function(t){return n.all(t.map(function(t){return e.protocol.component.getsource({name:t.name})}))}).then(function(e){var t,r,n,i;for(i={},t=0,r=e.length;t<r;t++)(n=e[t]).tests&&(i[n.library?n.library+"/"+n.name:n.name]=n.tests);return i}).nodeify(t)}},function(e,t,r){"use strict";t.graph=r(69),t.Graph=t.graph.Graph,t.journal=r(75),t.Journal=t.journal.Journal},function(e,t,r){"use strict";var n,i,o,a,s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var l=r(17);n=l.EventEmitter,o=r(35),s=r(73),i=function(){var e=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.setMaxListeners(0),n.name=e,n.properties={},n.nodes=[],n.edges=[],n.initializers=[],n.inports={},n.outports={},n.groups=[],n.transaction={id:null,depth:0},n.caseSensitive=r.caseSensitive||!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),c(t,[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=o(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,i;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=o(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(i=t[n])?this.inports[e].metadata[n]=i:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,i;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=o(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(i=t[n])?this.outports[e].metadata[n]=i:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,i,o;for(this.checkTransactionStart(),n=0,i=(o=this.groups).length;n<i;n++)(r=o[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,i;for(this.checkTransactionStart(),r=0,n=(i=this.groups).length;r<n;r++)(t=i[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,i,a,s,u,c;for(this.checkTransactionStart(),i=0,s=(u=this.groups).length;i<s;i++)if((n=u[i])&&n.name===e){for(a in r=o(n.metadata),t)null!=(c=t[a])?n.metadata[a]=c:delete n.metadata[a];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,i,o,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C,S,k,_;if(y=this.getNode(e)){for(this.checkTransactionStart(),_=[],n=0,c=(w=this.edges).length;n<c;n++)(t=w[n]).from.node!==y.id&&t.to.node!==y.id||_.push(t);for(a=0,l=_.length;a<l;a++)t=_[a],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(_=[],s=0,p=(E=this.initializers).length;s<p;s++)(o=E[s]).to.node===y.id&&_.push(o);for(u=0,h=_.length;u<h;u++)o=_[u],this.removeInitial(o.to.node,o.to.port);for(x in _=[],C=this.inports)C[x].process===e&&_.push(x);for(g=0,d=_.length;g<d;g++)x=_[g],this.removeInport(x);for(x in _=[],S=this.outports)S[x].process===e&&_.push(x);for(v=0,f=_.length;v<f;v++)x=_[v],this.removeOutport(x);for(b=0,m=(k=this.groups).length;b<m;b++)(r=k[b])&&-1!==(i=r.nodes.indexOf(e))&&r.nodes.splice(i,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(y)&&this.nodes.splice(this.nodes.indexOf(y),1),this.emit("removeNode",y),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,i;for(t=0,r=(i=this.nodes).length;t<r;t++)if((n=i[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,i,o,a,s,u,c,l,p,h,d,f,m,g,v,y,b;if(this.checkTransactionStart(),h=this.getNode(e)){for(h.id=t,i=0,c=(m=this.edges).length;i<c;i++)(r=m[i])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(s=0,l=(g=this.initializers).length;s<l;s++)(o=g[s])&&o.to.node===e&&(o.to.node=t);for(f in v=this.inports)(d=v[f]).process===e&&(d.process=t);for(f in y=this.outports)(d=y[f]).process===e&&(d.process=t);for(u=0,p=(b=this.groups).length;u<p;u++)(n=b[u])&&-1!==(a=n.nodes.indexOf(e))&&(n.nodes[a]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,i,a;if(i=this.getNode(e)){for(n in this.checkTransactionStart(),r=o(i.metadata),i.metadata||(i.metadata={}),t)null!=(a=t[n])?i.metadata[n]=a:delete i.metadata[n];return this.emit("changeNode",i,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var i,o,a,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),o=0,a=(s=this.edges).length;o<a;o++)if((i=s[o]).from.node===e&&i.from.port===t&&i.to.node===r&&i.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),i={from:{node:e,port:t},to:{node:r,port:n},metadata:u},this.edges.push(i),this.emit("addEdge",i),this.checkTransactionEnd(),i}},{key:"addEdgeIndex",value:function(e,t,r,n,i,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),i=this.getPortName(i),null===o&&(o=void 0),null===r&&(r=void 0),s||(s={}),this.checkTransactionStart(),a={from:{node:e,port:t,index:r},to:{node:n,port:i,index:o},metadata:s},this.edges.push(a),this.emit("addEdge",a),this.checkTransactionEnd(),a}},{key:"removeEdge",value:function(e,t,r,n){var i,o,a,s,u,c,l,p,h,d,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(a=o=0,c=(h=this.edges).length;o<c;a=++o)(i=h[a]).from.node===e&&i.from.port===t&&i.to.node===r&&i.to.port===n?(this.setEdgeMetadata(i.from.node,i.from.port,i.to.node,i.to.port,{}),m.push(i)):f.push(i);else for(a=s=0,l=(d=this.edges).length;s<l;a=++s)(i=d[a]).from.node===e&&i.from.port===t||i.to.node===e&&i.to.port===t?(this.setEdgeMetadata(i.from.node,i.from.port,i.to.node,i.to.port,{}),m.push(i)):f.push(i);for(this.edges=f,u=0,p=m.length;u<p;u++)i=m[u],this.emit("removeEdge",i);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var i,o,a,s,u;for(t=this.getPortName(t),n=this.getPortName(n),a=o=0,s=(u=this.edges).length;o<s;a=++o)if((i=u[a])&&i.from.node===e&&i.from.port===t&&i.to.node===r&&i.to.port===n)return i;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,i){var a,s,u,c;if(s=this.getEdge(e,t,r,n)){for(u in this.checkTransactionStart(),a=o(s.metadata),s.metadata||(s.metadata={}),i)null!=(c=i[u])?s.metadata[u]=c:delete s.metadata[u];return this.emit("changeEdge",s,a,i),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var i;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addInitialIndex",value:function(e,t,r,n,i){var o;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r,index:n},metadata:i},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var i;if(i=this.inports[t])return this.addInitialIndex(e,i.process,i.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,i,o,a,s,u,c,l;for(t=this.getPortName(t),this.checkTransactionStart(),l=[],c=[],i=n=0,a=(u=this.initializers).length;n<a;i=++n)(r=u[i]).to.node===e&&r.to.port===t?l.push(r):c.push(r);for(this.initializers=c,o=0,s=l.length;o<s;o++)r=l[o],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,i,o,a,s,u,c,l,p,h,d,f,m;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},r="digraph {\n",i=0,c=(d=this.nodes).length;i<c;i++)r+="    "+e((h=d[i]).id)+" [label="+h.id+" shape=box]\n";for(o=s=0,l=(f=this.initializers).length;s<l;o=++s)r+="    data"+o+" [label=\"'"+("function"==typeof(a=f[o]).from.data?"Function":a.from.data)+"'\" shape=plaintext]\n",r+="    data"+o+" -> "+e(a.to.node)+"[headlabel="+t(a.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";for(u=0,p=(m=this.edges).length;u<p;u++)r+="    "+e((n=m[u]).from.node)+" -> "+e(n.to.node)+"[taillabel="+t(n.from.port)+" headlabel="+t(n.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";return r+="}"}},{key:"toYUML",value:function(){var e,t,r,n,i,o,a,s,u;for(u=[],t=0,i=(a=this.initializers).length;t<i;t++)r=a[t],u.push("(start)["+r.to.port+"]->("+r.to.node+")");for(n=0,o=(s=this.edges).length;n<o;n++)e=s[n],u.push("("+e.from.node+")["+e.from.port+"]->("+e.to.node+")");return u.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,i,o,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C,S,k;for(g in s={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(s.properties.name=this.name),y=this.properties)k=y[g],s.properties[g]=k;for(v in b=this.inports)m=b[v],s.inports[v]=m;for(v in x=this.outports)m=x[v],s.outports[v]=m;for(i=0,l=(w=this.groups).length;i<l;i++)n={name:(r=w[i]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),s.groups.push(n);for(a=0,p=(E=this.nodes).length;a<p;a++)f=E[a],s.processes[f.id]={component:f.component},f.metadata&&(s.processes[f.id].metadata=f.metadata);for(u=0,h=(C=this.edges).length;u<h;u++)e={src:{process:(t=C[u]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),s.connections.push(e);for(c=0,d=(S=this.initializers).length;c<d;c++)o=S[c],s.connections.push({data:o.from.data,tgt:{process:o.to.node,port:o.to.port,index:o.to.index}});return s}},{key:"save",value:function(e,t){var n;return s.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e+=".json"),r(12).writeFile(e,n,"utf-8",function(r,n){return r?t(r):t(null,e)}))}}]),t}();return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(void 0),t.Graph=i,t.createGraph=function(e,t){return new i(e,t)},t.loadJSON=function(e,t){var r,n,o,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(m in"string"==typeof e&&(e=JSON.parse(e)),e.properties||(e.properties={}),e.processes||(e.processes={}),e.connections||(e.connections=[]),r=e.caseSensitive||!1,(a=new i(e.properties.name,{caseSensitive:r})).startTransaction("loadJSON",S),f={},v=e.properties)C=v[m],"name"!==m&&(f[m]=C);for(c in a.setProperties(f),y=e.processes)(o=y[c]).metadata||(o.metadata={}),a.addNode(c,o.component,o.metadata);for(u=0,p=(b=e.connections).length;u<p;u++)S=(n=b[u]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?a.addEdge(n.src.process,a.getPortName(n.src.port),n.tgt.process,a.getPortName(n.tgt.port),S):a.addEdgeIndex(n.src.process,a.getPortName(n.src.port),n.src.index,n.tgt.process,a.getPortName(n.tgt.port),n.tgt.index,S):"number"==typeof n.tgt.index?a.addInitialIndex(n.data,n.tgt.process,a.getPortName(n.tgt.port),n.tgt.index,S):a.addInitial(n.data,n.tgt.process,a.getPortName(n.tgt.port),S);if(e.inports)for(g in x=e.inports)d=x[g],a.addInport(g,d.process,a.getPortName(d.port),d.metadata);if(e.outports)for(g in w=e.outports)d=w[g],a.addOutport(g,d.process,a.getPortName(d.port),d.metadata);if(e.groups)for(l=0,h=(E=e.groups).length;l<h;l++)s=E[l],a.addGroup(s.name,s.nodes,s.metadata||{});return a.endTransaction("loadJSON"),t(null,a)},t.loadFBP=function(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{i=r(37).parse(e,{caseSensitive:a})}catch(e){return n(e)}return t.loadJSON(i,n,o)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load "+e+": HTTP "+r.status)):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!s.isBrowser())return r(12).readFile(e,"utf-8",function(r,i){var a;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,{},o):(a=JSON.parse(i),t.loadJSON(a,n,{}))});t.loadHTTP(e,function(r,o){var a;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,i):(a=JSON.parse(o),t.loadJSON(a,n,i))})},u=function(e){var t,r,n,i,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w;for(n=0,c=(m=o(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=o(e.outports))g[f],e.removeOutport(f);for(f in v=o(e.inports))v[f],e.removeInport(f);for(e.setProperties({}),a=0,l=(y=o(e.initializers).reverse()).length;a<l;a++)i=y[a],e.removeInitial(i.to.node,i.to.port);for(s=0,p=(b=o(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(w=[],u=0,h=(x=o(e.nodes).reverse()).length;u<h;u++)d=x[u],w.push(e.removeNode(d.id));return w},a=function(e,t){var r,n,i,o,a,s,c,l,p,h,d,f,m,g,v,y,b,x,w,E,C;for(u(e),i=0,l=(v=t.nodes).length;i<l;i++)f=v[i],e.addNode(f.id,f.component,f.metadata);for(a=0,p=(y=t.edges).length;a<p;a++)r=y[a],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(s=0,h=(b=t.initializers).length;s<h;s++)o=b[s],e.addInitial(o.from.data,o.to.node,o.to.port,o.metadata);for(g in e.setProperties(t.properties),x=t.inports)m=x[g],e.addInport(g,m.process,m.port,m.metadata);for(g in w=t.outports)m=w[g],e.addOutport(g,m.process,m.port,m.metadata);for(C=[],c=0,d=(E=t.groups).length;c<d;c++)n=E[c],C.push(e.addGroup(n.name,n.nodes,n.metadata));return C},t.equivalent=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=a},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=c(e),n=r[0],a=r[1],s=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,a)),u=0,l=a>0?n-4:n,p=0;p<l;p+=4)t=i[e.charCodeAt(p)]<<18|i[e.charCodeAt(p+1)]<<12|i[e.charCodeAt(p+2)]<<6|i[e.charCodeAt(p+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;2===a&&(t=i[e.charCodeAt(p)]<<2|i[e.charCodeAt(p+1)]>>4,s[u++]=255&t);1===a&&(t=i[e.charCodeAt(p)]<<10|i[e.charCodeAt(p+1)]<<4|i[e.charCodeAt(p+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t);return s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(p(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(l(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,r){"use strict";t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,p=r?i-1:0,h=r?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+p],p+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+p],p+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,p=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*u-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+d]=255&a,d+=f,a/=256,c-=8);e[r+d-f]|=128*m}},function(e,t,r){"use strict";var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,r){"use strict";(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(2))},function(e){e.exports={$schema:"http://json-schema.org/draft-04/schema",id:"graph.json",title:"FBP graph",description:"A graph of FBP processes and connections between them.\nThis is the primary way of specifying FBP programs.\n",name:"graph",type:"object",additionalProperties:!1,properties:{caseSensitive:{type:"boolean",description:"Whether the graph port identifiers should be treated as case-sensitive"},properties:{type:"object",description:"User-defined properties attached to the graph.",additionalProperties:!0,properties:{name:{type:"string",description:"Name of the graph"},environment:{type:"object",description:"Information about the execution environment for the graph",additionalProperties:!0,required:["type"],properties:{type:{type:"string",description:"Runtime type the graph is for",example:"noflo-nodejs"},content:{type:"string",description:"HTML fixture for browser-based graphs"}}},description:{type:"string",description:"Graph description"},icon:{type:"string",description:"Name of the icon that can be used for depicting the graph"}}},inports:{type:["object","undefined"],description:"Exported inports of the graph",additionalProperties:!0,patternProperties:{"[a-z0-9]+":{type:"object",properties:{process:{type:"string"},port:{type:"string"},metadata:{type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph inport"},y:{type:"integer",description:"Y coordinate of a graph inport"}}}}}}},outports:{type:["object","undefined"],description:"Exported outports of the graph",additionalProperties:!0,patternProperties:{"[a-z0-9]+":{type:"object",properties:{process:{type:"string"},port:{type:"string"},metadata:{type:"object",required:[],additionalProperties:!0,properties:{x:{type:"integer",description:"X coordinate of a graph outport"},y:{type:"integer",description:"Y coordinate of a graph outport"}}}}}}},groups:{type:"array",description:"List of groups of processes",items:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},nodes:{type:"array",items:{type:"string"}},metadata:{type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string"}}}}}},processes:{type:"object",description:"The processes of this graph.\nEach process is an instance of a component.\n",additionalProperties:!1,patternProperties:{"[a-zA-Z0-9_]+":{type:"object",properties:{component:{type:"string"},metadata:{type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph node"},y:{type:"integer",description:"Y coordinate of a graph node"}}}}}}},connections:{type:"array",description:"Connections of the graph.\nA connection either connects ports of two processes, or specifices an IIP as initial input packet to a port.\n",items:{type:"object",additionalProperties:!1,properties:{src:{type:"object",additionalProperties:!1,properties:{process:{type:"string"},port:{type:"string"},index:{type:"integer"}}},tgt:{type:"object",additionalProperties:!1,properties:{process:{type:"string"},port:{type:"string"},index:{type:"integer"}}},data:{},metadata:{type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph edge"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph edge"},secure:{type:"boolean",description:"Whether edge data should be treated as secure"}}}}}}}}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,c,l,p,h,d,f=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},m=r(17);s=m.EventEmitter,h=r(35),d=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return t.id+"("+t.component+")";case"removeNode":return"DEL "+t.id+"("+t.component+")";case"renameNode":return"RENAME "+t.oldId+" "+t.newId;case"changeNode":return"META "+t.id;case"addEdge":return t.from.node+" "+t.from.port+" -> "+t.to.port+" "+t.to.node;case"removeEdge":return t.from.node+" "+t.from.port+" -X> "+t.to.port+" "+t.to.node;case"changeEdge":return"META "+t.from.node+" "+t.from.port+" -> "+t.to.port+" "+t.to.node;case"addInitial":return"'"+t.from.data+"' -> "+t.to.port+" "+t.to.node;case"removeInitial":return"'"+t.from.data+"' -X> "+t.to.port+" "+t.to.node;case"startTransaction":return">>> "+e.rev+": "+t.id;case"endTransaction":return"<<< "+e.rev+": "+t.id;case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP "+t.name;case"renameGroup":return"RENAME GROUP "+t.oldName+" "+t.newName;case"removeGroup":return"DEL GROUP "+t.name;case"changeGroup":return"META GROUP "+t.name;case"addInport":return"INPORT "+t.name;case"removeInport":return"DEL INPORT "+t.name;case"renameInport":return"RENAME INPORT "+t.oldId+" "+t.newId;case"changeInport":return"META INPORT "+t.name;case"addOutport":return"OUTPORT "+t.name;case"removeOutport":return"DEL OUTPORT "+t.name;case"renameOutport":return"RENAME OUTPORT "+t.oldId+" "+t.newId;case"changeOutport":return"META OUTPORT "+t.name;default:throw new Error("Unknown journal entry: "+e.cmd)}},p=function(e,t){var r,n,i;for(r in n={},e)i=e[r],n[r]=null;for(r in t)i=t[r],n[r]=i;return n},c=function(){var e=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.graph=e,r.lastRevision=0,r}return a(t,s),n(t,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),t}();return e.prototype.lastRevision=0,e}.call(void 0),l=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.transactions=[],r}return a(t,c),n(t,[{key:"putTransaction",value:function(e,r){return function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putTransaction",this).call(this,e,r),this.transactions[e]=r}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),t}(),u=function(){var e=function(e){function t(e,r,n){var a,s,u,c,p,h,d,f,m,g,v,y,b,x,w,E,C,S,k,_;i(this,t);var D=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(D.startTransaction=D.startTransaction.bind(D),D.endTransaction=D.endTransaction.bind(D),D.graph=e,D.entries=[],D.subscribed=!0,D.store=n||new l(D.graph),0===D.store.transactions.length){for(D.currentRevision=-1,D.startTransaction("initial",r),c=0,d=(x=D.graph.nodes).length;c<d;c++)b=x[c],D.appendCommand("addNode",b);for(h=0,f=(w=D.graph.edges).length;h<f;h++)a=w[h],D.appendCommand("addEdge",a);for(v=0,m=(E=D.graph.initializers).length;v<m;v++)u=E[v],D.appendCommand("addInitial",u);for(p in Object.keys(D.graph.properties).length>0&&D.appendCommand("changeProperties",D.graph.properties,{}),C=D.graph.inports)_=C[p],D.appendCommand("addInport",{name:p,port:_});for(p in S=D.graph.outports)_=S[p],D.appendCommand("addOutport",{name:p,port:_});for(y=0,g=(k=D.graph.groups).length;y<g;y++)s=k[y],D.appendCommand("addGroup",s);D.endTransaction("initial",r)}else D.currentRevision=D.store.lastRevision;return D.graph.on("addNode",function(e){return D.appendCommand("addNode",e)}),D.graph.on("removeNode",function(e){return D.appendCommand("removeNode",e)}),D.graph.on("renameNode",function(e,t){var r;return r={oldId:e,newId:t},D.appendCommand("renameNode",r)}),D.graph.on("changeNode",function(e,t){return D.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})}),D.graph.on("addEdge",function(e){return D.appendCommand("addEdge",e)}),D.graph.on("removeEdge",function(e){return D.appendCommand("removeEdge",e)}),D.graph.on("changeEdge",function(e,t){return D.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})}),D.graph.on("addInitial",function(e){return D.appendCommand("addInitial",e)}),D.graph.on("removeInitial",function(e){return D.appendCommand("removeInitial",e)}),D.graph.on("changeProperties",function(e,t){return D.appendCommand("changeProperties",{new:e,old:t})}),D.graph.on("addGroup",function(e){return D.appendCommand("addGroup",e)}),D.graph.on("renameGroup",function(e,t){return D.appendCommand("renameGroup",{oldName:e,newName:t})}),D.graph.on("removeGroup",function(e){return D.appendCommand("removeGroup",e)}),D.graph.on("changeGroup",function(e,t){return D.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})}),D.graph.on("addExport",function(e){return D.appendCommand("addExport",e)}),D.graph.on("removeExport",function(e){return D.appendCommand("removeExport",e)}),D.graph.on("addInport",function(e,t){return D.appendCommand("addInport",{name:e,port:t})}),D.graph.on("removeInport",function(e,t){return D.appendCommand("removeInport",{name:e,port:t})}),D.graph.on("renameInport",function(e,t){return D.appendCommand("renameInport",{oldId:e,newId:t})}),D.graph.on("changeInport",function(e,t,r){return D.appendCommand("changeInport",{name:e,new:t.metadata,old:r})}),D.graph.on("addOutport",function(e,t){return D.appendCommand("addOutport",{name:e,port:t})}),D.graph.on("removeOutport",function(e,t){return D.appendCommand("removeOutport",{name:e,port:t})}),D.graph.on("renameOutport",function(e,t){return D.appendCommand("renameOutport",{oldId:e,newId:t})}),D.graph.on("changeOutport",function(e,t,r){return D.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})}),D.graph.on("startTransaction",function(e,t){return D.startTransaction(e,t)}),D.graph.on("endTransaction",function(e,t){return D.endTransaction(e,t)}),D}return a(t,s),n(t,[{key:"startTransaction",value:function(e,r){if(f(this,t),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:r},this.currentRevision)}}},{key:"endTransaction",value:function(e,r){if(f(this,t),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:r},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:h(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,p(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,p(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,p(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,p(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,p(t.old,t.new));default:throw new Error("Unknown journal entry: "+e.cmd)}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,p(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,p(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,p(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,p(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,p(t.new,t.old));default:throw new Error("Unknown journal entry: "+e.cmd)}}},{key:"moveToRevision",value:function(e){var t,r,n,i,o,a,s,u,c,l,p,h,d;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(c=i=l=this.currentRevision+1,p=e;l<=p?i<=p:i>=p;c=l<=p?++i:--i)for(o=0,a=(h=this.store.fetchTransaction(c)).length;o<a;o++)r=h[o],this.executeEntry(r);else for(c=s=this.currentRevision,d=e+1;s>=d;c=s+=-1)for(n=u=(t=this.store.fetchTransaction(c)).length-1;u>=0;n=u+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,i,o,a,s,u,c,l;for(s=[],u=i=c=e|=0,l=t|=this.store.lastRevision;c<=l?i<l:i>l;u=c<=l?++i:--i)for(o=0,a=(r=this.store.fetchTransaction(u)).length;o<a;o++)n=r[o],s.push(d(n));return s.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,i,o,a,s,u,c;for(r=[],s=i=e|=0,u=t|=this.store.lastRevision;i<u;s=i+=1)for(o=0,a=(c=this.store.fetchTransaction(s)).length;o<a;o++)n=c[o],r.push(d(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(12).writeFile(e+".json",n,"utf-8",function(r,n){if(r)throw r;return t(e)})}}]),t}();return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(void 0),t.Journal=u,t.JournalStore=c,t.MemoryJournalStore=l},function(e,t,r){"use strict";var n;function i(e){function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var o=a[u];r=i.call(e,o),a.splice(u,1),u--}return r}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(25),t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var n=r(78),i=r(97);function o(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=r(0),e.exports.Schema=r(9),e.exports.FAILSAFE_SCHEMA=r(27),e.exports.JSON_SCHEMA=r(41),e.exports.CORE_SCHEMA=r(40),e.exports.DEFAULT_SAFE_SCHEMA=r(14),e.exports.DEFAULT_FULL_SCHEMA=r(18),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=i.dump,e.exports.safeDump=i.safeDump,e.exports.YAMLException=r(13),e.exports.MINIMAL_SCHEMA=r(27),e.exports.SAFE_SCHEMA=r(14),e.exports.DEFAULT_SCHEMA=r(18),e.exports.scan=o("scan"),e.exports.parse=o("parse"),e.exports.compose=o("compose"),e.exports.addConstructor=o("addConstructor")},function(e,t,r){"use strict";var n=r(8),i=r(13),o=r(79),a=r(14),s=r(18),u=Object.prototype.hasOwnProperty,c=1,l=2,p=3,h=4,d=1,f=2,m=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/[\x85\u2028\u2029]/,y=/[,\[\]\{\}]/,b=/^(?:!|!!|![a-z\-]+!)$/i,x=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(e){return 10===e||13===e}function E(e){return 9===e||32===e}function C(e){return 9===e||32===e||10===e||13===e}function S(e){return 44===e||91===e||93===e||123===e||125===e}function k(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function _(e){return 120===e?2:117===e?4:85===e?8:0}function D(e){return 48<=e&&e<=57?e-48:-1}function A(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function P(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var F=new Array(256),T=new Array(256),O=0;O<256;O++)F[O]=A(O)?1:0,T[O]=A(O);function j(e,t){return new i(t,new o(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function I(e,t){throw j(e,t)}function N(e,t){e.onWarning&&e.onWarning.call(null,j(e,t))}var R={YAML:function(e,t,r){var n,i,o;null!==e.version&&I(e,"duplication of %YAML directive"),1!==r.length&&I(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&I(e,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),o=parseInt(n[2],10),1!==i&&I(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&N(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,i;2!==r.length&&I(e,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],b.test(n)||I(e,"ill-formed tag handle (first argument) of the TAG directive"),u.call(e.tagMap,n)&&I(e,'there is a previously declared suffix for "'+n+'" tag handle'),x.test(i)||I(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=i}};function M(e,t,r,n){var i,o,a,s;if(t<r){if(s=e.input.slice(t,r),n)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||I(e,"expected valid JSON character");else g.test(s)&&I(e,"the stream contains non-printable characters");e.result+=s}}function B(e,t,r,i){var o,a,s,c;for(n.isObject(r)||I(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,c=(o=Object.keys(r)).length;s<c;s+=1)a=o[s],u.call(t,a)||(t[a]=r[a],i[a]=!0)}function L(e,t,r,n,i,o,a,s){var c,l;if(i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(o))for(c=0,l=o.length;c<l;c+=1)B(e,t,o[c],r);else B(e,t,o,r);else e.json||u.call(r,i)||!u.call(t,i)||(e.line=a||e.line,e.position=s||e.position,I(e,"duplicated mapping key")),t[i]=o,delete r[i];return t}function U(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):I(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function $(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);0!==i;){for(;E(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!w(i))break;for(U(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&N(e,"deficient indentation"),n}function z(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!C(t)))}function J(e,t){1===t?e.result+=" ":t>1&&(e.result+=n.repeat("\n",t-1))}function q(e,t){var r,n,i=e.tag,o=e.anchor,a=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),n=e.input.charCodeAt(e.position);0!==n&&45===n&&C(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,$(e,!0,-1)&&e.lineIndent<=t)a.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,K(e,t,p,!1,!0),a.push(e.result),$(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)I(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function V(e){var t,r,n,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&I(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,r="!!",i=e.input.charCodeAt(++e.position)):r="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(n=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):I(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!C(i);)33===i&&(a?I(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),b.test(r)||I(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),y.test(n)&&I(e,"tag suffix cannot contain flow indicator characters")}return n&&!x.test(n)&&I(e,"tag name cannot contain such characters: "+n),o?e.tag=n:u.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:I(e,'undeclared tag handle "'+r+'"'),!0}function X(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&I(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!C(r)&&!S(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&I(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function K(e,t,r,i,o){var a,s,g,v,y,b,x,A,O=1,j=!1,N=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=g=h===r||p===r,i&&$(e,!0,-1)&&(j=!0,e.lineIndent>t?O=1:e.lineIndent===t?O=0:e.lineIndent<t&&(O=-1)),1===O)for(;V(e)||X(e);)$(e,!0,-1)?(j=!0,g=a,e.lineIndent>t?O=1:e.lineIndent===t?O=0:e.lineIndent<t&&(O=-1)):g=!1;if(g&&(g=j||o),1!==O&&h!==r||(x=c===r||l===r?t:t+1,A=e.position-e.lineStart,1===O?g&&(q(e,A)||function(e,t,r){var n,i,o,a,s,u=e.tag,c=e.anchor,p={},d={},f=null,m=null,g=null,v=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),s=e.input.charCodeAt(e.position);0!==s;){if(n=e.input.charCodeAt(e.position+1),o=e.line,a=e.position,63!==s&&58!==s||!C(n)){if(!K(e,r,l,!1,!0))break;if(e.line===o){for(s=e.input.charCodeAt(e.position);E(s);)s=e.input.charCodeAt(++e.position);if(58===s)C(s=e.input.charCodeAt(++e.position))||I(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(L(e,p,d,f,m,null),f=m=g=null),y=!0,v=!1,i=!1,f=e.tag,m=e.result;else{if(!y)return e.tag=u,e.anchor=c,!0;I(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,e.anchor=c,!0;I(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(v&&(L(e,p,d,f,m,null),f=m=g=null),y=!0,v=!0,i=!0):v?(v=!1,i=!0):I(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,s=n;if((e.line===o||e.lineIndent>t)&&(K(e,t,h,!0,i)&&(v?m=e.result:g=e.result),v||(L(e,p,d,f,m,g,o,a),f=m=g=null),$(e,!0,-1),s=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==s)I(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&L(e,p,d,f,m,null),y&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=p),y}(e,A,x))||function(e,t){var r,n,i,o,a,s,u,l,p,h,d=!0,f=e.tag,m=e.anchor,g={};if(91===(h=e.input.charCodeAt(e.position)))i=93,s=!1,n=[];else{if(123!==h)return!1;i=125,s=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),h=e.input.charCodeAt(++e.position);0!==h;){if($(e,!0,t),(h=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=f,e.anchor=m,e.kind=s?"mapping":"sequence",e.result=n,!0;d||I(e,"missed comma between flow collection entries"),l=u=p=null,o=a=!1,63===h&&C(e.input.charCodeAt(e.position+1))&&(o=a=!0,e.position++,$(e,!0,t)),r=e.line,K(e,t,c,!1,!0),l=e.tag,u=e.result,$(e,!0,t),h=e.input.charCodeAt(e.position),!a&&e.line!==r||58!==h||(o=!0,h=e.input.charCodeAt(++e.position),$(e,!0,t),K(e,t,c,!1,!0),p=e.result),s?L(e,n,g,l,u,p):o?n.push(L(e,null,g,l,u,p)):n.push(u),$(e,!0,t),44===(h=e.input.charCodeAt(e.position))?(d=!0,h=e.input.charCodeAt(++e.position)):d=!1}I(e,"unexpected end of the stream within a flow collection")}(e,x)?N=!0:(s&&function(e,t){var r,i,o,a,s=d,u=!1,c=!1,l=t,p=0,h=!1;if(124===(a=e.input.charCodeAt(e.position)))i=!1;else{if(62!==a)return!1;i=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)d===s?s=43===a?m:f:I(e,"repeat of a chomping mode identifier");else{if(!((o=D(a))>=0))break;0===o?I(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?I(e,"repeat of an indentation width identifier"):(l=t+o-1,c=!0)}if(E(a)){do{a=e.input.charCodeAt(++e.position)}while(E(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!w(a)&&0!==a)}for(;0!==a;){for(U(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),w(a))p++;else{if(e.lineIndent<l){s===m?e.result+=n.repeat("\n",u?1+p:p):s===d&&u&&(e.result+="\n");break}for(i?E(a)?(h=!0,e.result+=n.repeat("\n",u?1+p:p)):h?(h=!1,e.result+=n.repeat("\n",p+1)):0===p?u&&(e.result+=" "):e.result+=n.repeat("\n",p):e.result+=n.repeat("\n",u?1+p:p),u=!0,c=!0,p=0,r=e.position;!w(a)&&0!==a;)a=e.input.charCodeAt(++e.position);M(e,r,e.position,!1)}}return!0}(e,x)||function(e,t){var r,n,i;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(M(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,i=e.position}else w(r)?(M(e,n,i,!0),J(e,$(e,!1,t)),n=i=e.position):e.position===e.lineStart&&z(e)?I(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);I(e,"unexpected end of the stream within a single quoted scalar")}(e,x)||function(e,t){var r,n,i,o,a,s;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return M(e,r,e.position,!0),e.position++,!0;if(92===s){if(M(e,r,e.position,!0),w(s=e.input.charCodeAt(++e.position)))$(e,!1,t);else if(s<256&&F[s])e.result+=T[s],e.position++;else if((a=_(s))>0){for(i=a,o=0;i>0;i--)(a=k(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:I(e,"expected hexadecimal character");e.result+=P(o),e.position++}else I(e,"unknown escape sequence");r=n=e.position}else w(s)?(M(e,r,n,!0),J(e,$(e,!1,t)),r=n=e.position):e.position===e.lineStart&&z(e)?I(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}I(e,"unexpected end of the stream within a double quoted scalar")}(e,x)?N=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!C(n)&&!S(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&I(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||I(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],$(e,!0,-1),!0}(e)?function(e,t,r){var n,i,o,a,s,u,c,l,p=e.kind,h=e.result;if(C(l=e.input.charCodeAt(e.position))||S(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(C(n=e.input.charCodeAt(e.position+1))||r&&S(n)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==l;){if(58===l){if(C(n=e.input.charCodeAt(e.position+1))||r&&S(n))break}else if(35===l){if(C(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&z(e)||r&&S(l))break;if(w(l)){if(s=e.line,u=e.lineStart,c=e.lineIndent,$(e,!1,-1),e.lineIndent>=t){a=!0,l=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=u,e.lineIndent=c;break}}a&&(M(e,i,o,!1),J(e,e.line-s),i=o=e.position,a=!1),E(l)||(o=e.position+1),l=e.input.charCodeAt(++e.position)}return M(e,i,o,!1),!!e.result||(e.kind=p,e.result=h,!1)}(e,x,c===r)&&(N=!0,null===e.tag&&(e.tag="?")):(N=!0,null===e.tag&&null===e.anchor||I(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===O&&(N=g&&q(e,A))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(v=0,y=e.implicitTypes.length;v<y;v+=1)if((b=e.implicitTypes[v]).resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else u.call(e.typeMap[e.kind||"fallback"],e.tag)?(b=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&b.kind!==e.kind&&I(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result)?(e.result=b.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):I(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):I(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||N}function H(e){var t,r,n,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&($(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!C(i);)i=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&I(e,"directive name must not be less than one character in length");0!==i;){for(;E(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!w(i));break}if(w(i))break;for(t=e.position;0!==i&&!C(i);)i=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==i&&U(e),u.call(R,r)?R[r](e,r,n):N(e,'unknown document directive "'+r+'"')}$(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,$(e,!0,-1)):a&&I(e,"directives end mark is expected"),K(e,e.lineIndent-1,h,!1,!0),$(e,!0,-1),e.checkLineBreaks&&v.test(e.input.slice(o,e.position))&&N(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&z(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,$(e,!0,-1)):e.position<e.length-1&&I(e,"end of the stream or a document separator is expected")}function G(e,t){e=String(e),t=t||{},0!==e.length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new function(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||s,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}(e,t);for(r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)H(r);return r.documents}function Y(e,t,r){var n,i,o=G(e,r);for(n=0,i=o.length;n<i;n+=1)t(o[n])}function W(e,t){var r=G(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new i("expected a single document in the stream, but found more")}}e.exports.loadAll=Y,e.exports.load=W,e.exports.safeLoadAll=function(e,t,r){Y(e,t,n.extend({schema:a},r))},e.exports.safeLoad=function(e,t){return W(e,n.extend({schema:a},t))}},function(e,t,r){"use strict";var n=r(8);function i(e,t,r,n,i){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=i}i.prototype.getSnippet=function(e,t){var r,i,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",i=this.position;i>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){r=" ... ",i+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(i,a),n.repeat(" ",e)+r+s+o+"\n"+n.repeat(" ",e+this.position-i+r.length)+"^"},i.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},e.exports=i},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(8),i=r(0);function o(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function a(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r=e.length,n=0,i=!1;if(!r)return!1;if("-"!==(t=e[n])&&"+"!==t||(t=e[++n]),"0"===t){if(n+1===r)return!0;if("b"===(t=e[++n])){for(n++;n<r;n++)if("_"!==(t=e[n])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(n++;n<r;n++)if("_"!==(t=e[n])){if(!o(e.charCodeAt(n)))return!1;i=!0}return i&&"_"!==t}for(;n<r;n++)if("_"!==(t=e[n])){if(!a(e.charCodeAt(n)))return!1;i=!0}return i&&"_"!==t}if("_"===t)return!1;for(;n<r;n++)if("_"!==(t=e[n])){if(":"===t)break;if(!s(e.charCodeAt(n)))return!1;i=!0}return!(!i||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(n)))},construct:function(e){var t,r,n=e,i=1,o=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?i*parseInt(n.slice(2),2):"x"===n[1]?i*parseInt(n,16):i*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),n=0,r=1,o.forEach(function(e){n+=e*r,r*=60}),i*n):i*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,r){"use strict";var n=r(8),i=r(0),o=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var a=/^[-+]?[0-9]+e/;e.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!o.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,i;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){i.unshift(parseFloat(e,10))}),t=0,n=1,i.forEach(function(e){t+=e*n,n*=60}),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(e))return"-0.0";return r=e.toString(10),a.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(0),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==i.exec(e)||null!==o.exec(e))},construct:function(e){var t,r,n,a,s,u,c,l,p=0,h=null;if(null===(t=i.exec(e))&&(t=o.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(s=+t[4],u=+t[5],c=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(h=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(h=-h)),l=new Date(Date.UTC(r,n,a,s,u,c,p)),h&&l.setTime(l.getTime()-h),l},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,r){"use strict";var n;try{n=r(36).Buffer}catch(e){}var i=r(0),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new i("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,i=e.length,a=o;for(r=0;r<i;r++)if(!((t=a.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,i=e.replace(/[\r\n=]/g,""),a=i.length,s=o,u=0,c=[];for(t=0;t<a;t++)t%4==0&&t&&(c.push(u>>16&255),c.push(u>>8&255),c.push(255&u)),u=u<<6|s.indexOf(i.charAt(t));return 0==(r=a%4*6)?(c.push(u>>16&255),c.push(u>>8&255),c.push(255&u)):18===r?(c.push(u>>10&255),c.push(u>>2&255)):12===r&&c.push(u>>4&255),n?n.from?n.from(c):new n(c):c},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n="",i=0,a=e.length,s=o;for(t=0;t<a;t++)t%3==0&&t&&(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]),i=(i<<8)+e[t];return 0==(r=a%3)?(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]):2===r?(n+=s[i>>10&63],n+=s[i>>4&63],n+=s[i<<2&63],n+=s[64]):1===r&&(n+=s[i>>2&63],n+=s[i<<4&63],n+=s[64],n+=s[64]),n}})},function(e,t,r){"use strict";var n=r(0),i=Object.prototype.hasOwnProperty,o=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,a,s,u=[],c=e;for(t=0,r=c.length;t<r;t+=1){if(n=c[t],s=!1,"[object Object]"!==o.call(n))return!1;for(a in n)if(i.call(n,a)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==u.indexOf(a))return!1;u.push(a)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(0),i=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,o,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],"[object Object]"!==i.call(n))return!1;if(1!==(o=Object.keys(n)).length)return!1;a[t]=[o[0],n[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1)n=a[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}})},function(e,t,r){"use strict";var n=r(0),i=Object.prototype.hasOwnProperty;e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(i.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,r){"use strict";var n=r(0);e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,r){"use strict";var n;try{n=r(96)}catch(e){"undefined"!=typeof window&&(n=window.esprima)}var i=r(0);e.exports=new i("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=n.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&"FunctionExpression"===r.body[0].expression.type}catch(e){return!1}},construct:function(e){var t,r="("+e+")",i=n.parse(r,{range:!0}),o=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach(function(e){o.push(e.name)}),t=i.body[0].expression.body.range,new Function(o,r.slice(t[0]+1,t[1]-1))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,r){"use strict";(function(e){var r,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,s){"object"===o(t)&&"object"===o(e)?e.exports=s():(n=[],void 0===(i="function"==typeof(r=s)?r.apply(t,n):r)||(e.exports=i))}(0,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){var n=r(1),i=r(3),o=r(11),a=r(15);t.parse=function(e,t,r){var a,s=null,u=function(e,t){r&&r(e,t),s&&s.visit(e,t)},c="function"==typeof r?u:null,l=!1;if(t){l="boolean"==typeof t.comment&&t.comment;var p="boolean"==typeof t.attachComment&&t.attachComment;(l||p)&&((s=new n.CommentHandler).attach=p,t.comment=!0,c=u)}var h=(a=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,c):new i.Parser(e,t,c)).parseProgram();return l&&(h.comments=s.comments),a.config.tokens&&(h.tokens=a.tokens),a.config.tolerant&&(h.errors=a.errorHandler.errors),h},t.tokenize=function(e,t,r){var n,i=new a.Tokenizer(e,t);n=[];try{for(;;){var o=i.getNextToken();if(!o)break;r&&(o=r(o)),n.push(o)}}catch(e){i.errorHandler.tolerate(e)}return i.errorHandler.tolerant&&(n.errors=i.errors()),n};var s=r(2);t.Syntax=s.Syntax,t.version="3.1.3"},function(e,t,r){var n=r(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],i=this.leading.length-1;i>=0;--i){var o=this.leading[i];t.end.offset>=o.start&&(r.unshift(o.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e,t){var r=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var i=this.trailing[n];i.start>=t.end.offset&&r.unshift(i.comment)}return this.trailing.length=0,r}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var a=o.node.trailingComments[0];a&&a.range[0]>=t.end.offset&&(r=o.node.trailingComments,delete o.node.trailingComments)}return r},e.prototype.findLeadingComments=function(e,t){for(var r,n=[];this.stack.length>0;){if(!((a=this.stack[this.stack.length-1])&&a.start>=t.start.offset))break;r=this.stack.pop().node}if(r){for(var i=(r.leadingComments?r.leadingComments.length:0)-1;i>=0;--i){var o=r.leadingComments[i];o.range[1]<=t.start.offset&&(n.unshift(o),r.leadingComments.splice(i,1))}return r.leadingComments&&0===r.leadingComments.length&&delete r.leadingComments,n}for(i=this.leading.length-1;i>=0;--i){var a;(a=this.leading[i]).start<=t.start.offset&&(n.unshift(a.comment),this.leading.splice(i,1))}return n},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(e,t),i=this.findLeadingComments(e,t);i.length>0&&(e.leadingComments=i),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var i={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=r,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){"LineComment"===e.type?this.visitComment(e,t):"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){var n=r(4),i=r(5),o=r(6),a=r(7),s=r(8),u=r(2),c=r(10),l=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new s.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.sourceType=t&&"module"===t.sourceType?"module":"script",this.lookahead=null,this.hasLineTerminator=!1,this.context={allowIn:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:"module"===this.sourceType},this.tokens=[],this.startMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0},this.lastMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0},this.nextToken(),this.lastMarker={index:this.scanner.index,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.prototype.slice.call(arguments,1),o=e.replace(/%(\d)/g,function(e,t){return n.assert(t<i.length,"Message reference must be in range"),i[t]}),a=this.lastMarker.index,s=this.lastMarker.lineNumber,u=this.lastMarker.index-this.lastMarker.lineStart+1;throw this.errorHandler.createError(a,s,u,o)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.prototype.slice.call(arguments,1),o=e.replace(/%(\d)/g,function(e,t){return n.assert(t<i.length,"Message reference must be in range"),i[t]}),a=this.lastMarker.index,s=this.scanner.lineNumber,u=this.lastMarker.index-this.lastMarker.lineStart+1;this.errorHandler.tolerateError(a,s,u,o)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||i.Messages.UnexpectedToken;if(e?(t||(n=e.type===a.Token.EOF?i.Messages.UnexpectedEOS:e.type===a.Token.Identifier?i.Messages.UnexpectedIdentifier:e.type===a.Token.NumericLiteral?i.Messages.UnexpectedNumber:e.type===a.Token.StringLiteral?i.Messages.UnexpectedString:e.type===a.Token.Template?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,e.type===a.Token.Keyword&&(this.scanner.isFutureReservedWord(e.value)?n=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=i.Messages.StrictReservedWord))),r=e.type===a.Token.Template?e.value.raw:e.value):r="ILLEGAL",n=n.replace("%0",r),e&&"number"==typeof e.lineNumber){var o=e.start,s=e.lineNumber,u=e.start-this.lastMarker.lineStart+1;return this.errorHandler.createError(o,s,u,n)}o=this.lastMarker.index,s=this.lastMarker.lineNumber,u=o-this.lastMarker.lineStart+1;return this.errorHandler.createError(o,s,u,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var i={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,i)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t;return t={type:a.TokenName[e.type],value:this.getTokenRaw(e)},this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),e.regex&&(t.regex=e.regex),t},e.prototype.nextToken=function(){var e,t=this.lookahead;return this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart,e=this.scanner.lex(),this.hasLineTerminator=!(!t||!e)&&t.lineNumber!==e.lineNumber,e&&this.context.strict&&e.type===a.Token.Identifier&&this.scanner.isStrictModeReservedWord(e.value)&&(e.type=a.Token.Keyword),this.lookahead=e,this.config.tokens&&e.type!==a.Token.EOF&&this.tokens.push(this.convertToken(e)),t},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart}},e.prototype.startNode=function(e){return{index:e.start,line:e.lineNumber,column:e.start-e.lineStart}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();t.type===a.Token.Punctuator&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;e.type===a.Token.Punctuator&&","===e.value?this.nextToken():e.type===a.Token.Punctuator&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();t.type===a.Token.Keyword&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return this.lookahead.type===a.Token.Punctuator&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return this.lookahead.type===a.Token.Keyword&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return this.lookahead.type===a.Token.Identifier&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(this.lookahead.type!==a.Token.Punctuator)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===a.Token.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.lineNumber=this.startMarker.lineNumber,this.lastMarker.lineStart=this.startMarker.lineStart)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case a.Token.Identifier:"module"===this.sourceType&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.finalize(n,new c.Identifier(this.nextToken().value));break;case a.Token.NumericLiteral:case a.Token.StringLiteral:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new c.Literal(t.value,r));break;case a.Token.BooleanLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,(t=this.nextToken()).value="true"===t.value,r=this.getTokenRaw(t),e=this.finalize(n,new c.Literal(t.value,r));break;case a.Token.NullLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,(t=this.nextToken()).value=null,r=this.getTokenRaw(t),e=this.finalize(n,new c.Literal(t.value,r));break;case a.Token.Template:e=this.parseTemplateLiteral();break;case a.Token.Punctuator:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new c.RegexLiteral(t.value,r,t.regex));break;default:this.throwUnexpectedToken(this.nextToken())}break;case a.Token.Keyword:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(n,new c.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(n,new c.ThisExpression)):this.matchKeyword("class")?e=this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new c.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var r=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new c.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,r},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!1;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new c.FunctionExpression(null,r.params,n,!1))},e.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),t=this.nextToken(),r=null;switch(t.type){case a.Token.StringLiteral:case a.Token.NumericLiteral:this.context.strict&&t.octal&&this.tolerateUnexpectedToken(t,i.Messages.StrictOctalLiteral);var n=this.getTokenRaw(t);r=this.finalize(e,new c.Literal(t.value,n));break;case a.Token.Identifier:case a.Token.BooleanLiteral:case a.Token.NullLiteral:case a.Token.Keyword:r=this.finalize(e,new c.Identifier(t.value));break;case a.Token.Punctuator:"["===t.value?(r=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):this.throwUnexpectedToken(t);break;default:this.throwUnexpectedToken(t)}return r},e.prototype.isPropertyKey=function(e,t){return e.type===u.Syntax.Identifier&&e.name===t||e.type===u.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r,n,o=this.createNode(),s=this.lookahead,u=!1,l=!1,p=!1;s.type===a.Token.Identifier?(this.nextToken(),r=this.finalize(o,new c.Identifier(s.value))):this.match("*")?this.nextToken():(u=this.match("["),r=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(s.type===a.Token.Identifier&&"get"===s.value&&h)t="get",u=this.match("["),r=this.parseObjectPropertyKey(),this.context.allowYield=!1,n=this.parseGetterMethod();else if(s.type===a.Token.Identifier&&"set"===s.value&&h)t="set",u=this.match("["),r=this.parseObjectPropertyKey(),n=this.parseSetterMethod();else if(s.type===a.Token.Punctuator&&"*"===s.value&&h)t="init",u=this.match("["),r=this.parseObjectPropertyKey(),n=this.parseGeneratorMethod(),l=!0;else if(r||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":"))!u&&this.isPropertyKey(r,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),n=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))n=this.parsePropertyMethodFunction(),l=!0;else if(s.type===a.Token.Identifier){var d=this.finalize(o,new c.Identifier(s.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),p=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);n=this.finalize(o,new c.AssignmentPattern(d,f))}else p=!0,n=d}else this.throwUnexpectedToken(this.nextToken());return this.finalize(o,new c.Property(t,r,u,n,l,p))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new c.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r={raw:t.value.raw,cooked:t.value.cooked};return this.finalize(e,new c.TemplateElement(r,t.tail))},e.prototype.parseTemplateElement=function(){this.lookahead.type!==a.Token.Template&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r={raw:t.value.raw,cooked:t.value.cooked};return this.finalize(e,new c.TemplateElement(r,t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new c.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case u.Syntax.Identifier:case u.Syntax.MemberExpression:case u.Syntax.RestElement:case u.Syntax.AssignmentPattern:break;case u.Syntax.SpreadElement:e.type=u.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case u.Syntax.ArrayExpression:e.type=u.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case u.Syntax.ObjectExpression:e.type=u.Syntax.ObjectPattern;for(t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case u.Syntax.AssignmentExpression:e.type=u.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[]};else{var t=this.lookahead,r=[];if(this.match("..."))e=this.parseRestElement(r),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[e]};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var i=[];for(this.context.isAssignmentTarget=!1,i.push(e);this.startMarker.index<this.scanner.length&&this.match(",");){if(this.nextToken(),this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(r)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var o=0;o<i.length;o++)this.reinterpretExpressionAsPattern(i[o]);n=!0,e={type:"ArrowParameterPlaceHolder",params:i}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new c.SequenceExpression(i)))}if(!n){if(this.expect(")"),this.match("=>")&&(e.type===u.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:"ArrowParameterPlaceHolder",params:[e]}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===u.Syntax.SequenceExpression)for(o=0;o<e.expressions.length;o++)this.reinterpretExpressionAsPattern(e.expressions[o]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",params:e.type===u.Syntax.SequenceExpression?e.expressions:[e]}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;this.expectCommaSeparator()}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return e.type===a.Token.Identifier||e.type===a.Token.Keyword||e.type===a.Token.BooleanLiteral||e.type===a.Token.NullLiteral},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new c.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert("new"===r.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===a.Token.Identifier&&this.context.inFunctionBody&&"target"===this.lookahead.value){var i=this.parseIdentifierName();e=new c.MetaProperty(r,i)}else this.throwUnexpectedToken(this.lookahead);else{var o=this.isolateCoverGrammar(this.parseLeftHandSideExpression),s=this.match("(")?this.parseArguments():[];e=new c.NewExpression(o,s),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new c.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var n=this.parseIdentifierName();e=this.finalize(this.startNode(t),new c.StaticMemberExpression(e,n))}else if(this.match("(")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var i=this.parseArguments();e=this.finalize(this.startNode(t),new c.CallExpression(e,i))}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),e=this.finalize(this.startNode(t),new c.ComputedMemberExpression(e,n))}else{if(this.lookahead.type!==a.Token.Template||!this.lookahead.head)break;var o=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new c.TaggedTemplateExpression(e,o))}return this.context.allowIn=r,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new c.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new c.ComputedMemberExpression(t,r))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");r=this.parseIdentifierName();t=this.finalize(e,new c.StaticMemberExpression(t,r))}else{if(this.lookahead.type!==a.Token.Template||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new c.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(r,new c.UpdateExpression(n.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===a.Token.Punctuator&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var s=this.nextToken().value;o=!1;e=this.finalize(this.startNode(t),new c.UpdateExpression(s,e,o))}return e},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new c.UnaryExpression(r.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===u.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==u.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new c.BinaryExpression("**",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return e.type===a.Token.Punctuator?this.operatorPrecedence[t]||0:e.type===a.Token.Keyword&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),r.prec=n,this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],o=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),s=[o,r,a];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;s.length>2&&n<=s[s.length-2].prec;){a=s.pop();var u=s.pop().value;o=s.pop(),i.pop();var l=this.startNode(i[i.length-1]);s.push(this.finalize(l,new c.BinaryExpression(u,o,a)))}(r=this.nextToken()).prec=n,s.push(r),i.push(this.lookahead),s.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=s.length-1;for(t=s[p],i.pop();p>1;){l=this.startNode(i.pop());t=this.finalize(l,new c.BinaryExpression(s[p-1].value,s[p-2],t)),p-=2}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(":");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new c.ConditionalExpression(t,n,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case u.Syntax.Identifier:this.validateParam(e,t,t.name);break;case u.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case u.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case u.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case u.Syntax.YieldExpression:break;default:n.assert(t.type===u.Syntax.ObjectPattern,"Invalid type");for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e];switch(e.type){case u.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":r=e.params;break;default:return null}t={paramSet:{}};for(var n=0;n<r.length;++n){(o=r[n]).type===u.Syntax.AssignmentPattern&&o.right.type===u.Syntax.YieldExpression&&(o.right.argument&&this.throwUnexpectedToken(this.lookahead),o.right.type=u.Syntax.Identifier,o.right.name="yield",delete o.right.argument,delete o.right.delegate),this.checkPatternParam(t,o),r[n]=o}if(this.context.strict||!this.context.allowYield)for(n=0;n<r.length;++n){var o;(o=r[n]).type===u.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var a=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(a,t.message)}return{params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if("ArrowParameterPlaceHolder"===(e=this.parseConditionalExpression()).type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=this.reinterpretAsCoverFormalsList(e);if(n){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var o=this.context.strict,a=this.context.allowYield;this.context.allowYield=!0;var s=this.startNode(t);this.expect("=>");var l=this.match("{")?this.parseFunctionSourceElements():this.isolateCoverGrammar(this.parseAssignmentExpression),p=l.type!==u.Syntax.BlockStatement;this.context.strict&&n.firstRestricted&&this.throwUnexpectedToken(n.firstRestricted,n.message),this.context.strict&&n.stricted&&this.tolerateUnexpectedToken(n.stricted,n.message),e=this.finalize(s,new c.ArrowFunctionExpression(n.params,l,p)),this.context.strict=o,this.context.allowYield=a}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===u.Syntax.Identifier){var h=e;this.scanner.isRestrictedWord(h.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(h.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),r=this.nextToken();var d=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new c.AssignmentExpression(r.value,e,d)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);this.startMarker.index<this.scanner.length&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new c.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e=null;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===a.Token.Keyword)switch(this.lookahead.value){case"export":"module"!==this.sourceType&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":"module"!==this.sourceType&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new c.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):(!t.inFor&&n.type!==u.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new c.VariableDeclarator(n,o))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.index,t=this.scanner.lineNumber,r=this.scanner.lineStart;this.collectComments();var n=this.scanner.lex();return this.scanner.index=e,this.scanner.lineNumber=t,this.scanner.lineStart=r,n.type===a.Token.Identifier||n.type===a.Token.Punctuator&&"["===n.value||n.type===a.Token.Punctuator&&"{"===n.value||n.type===a.Token.Keyword&&"let"===n.value||n.type===a.Token.Keyword&&"yield"===n.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert("let"===r||"const"===r,"Lexical declaration must be either let or const");var i=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new c.VariableDeclaration(i,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect("...");var n=this.parsePattern(e,t);return this.finalize(r,new c.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect("[");for(var n=[];!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new c.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,i=this.createNode(),o=!1,s=!1;if(this.lookahead.type===a.Token.Identifier){var u=this.lookahead;r=this.parseVariableIdentifier();var l=this.finalize(i,new c.Identifier(u.value));if(this.match("=")){e.push(u),s=!0,this.nextToken();var p=this.parseAssignmentExpression();n=this.finalize(this.startNode(u),new c.AssignmentPattern(l,p))}else this.match(":")?(this.expect(":"),n=this.parsePatternWithDefault(e,t)):(e.push(u),s=!0,n=l)}else o=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),n=this.parsePatternWithDefault(e,t);return this.finalize(i,new c.Property("init",r,o,n,!1,s))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new c.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match("[")?r=this.parseArrayPattern(e,t):this.match("{")?r=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.UnexpectedToken),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var o=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,n=this.finalize(this.startNode(r),new c.AssignmentPattern(n,o))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return r.type===a.Token.Keyword&&"yield"===r.value?(this.context.strict&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord),this.context.allowYield||this.throwUnexpectedToken(r)):r.type!==a.Token.Identifier?this.context.strict&&r.type===a.Token.Keyword&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):(this.context.strict||"let"!==r.value||"var"!==e)&&this.throwUnexpectedToken(r):"module"===this.sourceType&&r.type===a.Token.Identifier&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new c.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var");this.context.strict&&r.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var n=null;return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===u.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new c.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new c.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new c.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new c.ExpressionStatement(t))},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword("if"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new c.EmptyStatement)):(this.expect(")"),e=this.parseStatement(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseStatement())),this.finalize(t,new c.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();return this.expect(")"),this.match(";")&&this.nextToken(),this.finalize(e,new c.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new c.EmptyStatement);else{this.expect(")");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new c.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,o=null,a=null,s=!0,l=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var p=this.context.allowIn;this.context.allowIn=!1;var h=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=p,1===h.length&&this.matchKeyword("in")){var d=h[0];d.init&&(d.id.type===u.Syntax.ArrayPattern||d.id.type===u.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new c.VariableDeclaration(h,"var")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new c.VariableDeclaration(h,"var")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,s=!1):(n=this.finalize(n,new c.VariableDeclaration(h,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){n=this.createNode();var f=this.nextToken().value;if(this.context.strict||"in"!==this.lookahead.value){p=this.context.allowIn;this.context.allowIn=!1;h=this.parseBindingList(f,{inFor:!0});this.context.allowIn=p,1===h.length&&null===h[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new c.VariableDeclaration(h,f)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new c.VariableDeclaration(h,f)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,s=!1):(this.consumeSemicolon(),n=this.finalize(n,new c.VariableDeclaration(h,f)))}else n=this.finalize(n,new c.Identifier(f)),this.nextToken(),e=n,t=this.parseExpression(),n=null}else{var m=this.lookahead;p=this.context.allowIn;if(this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=p,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==u.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==u.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,s=!1;else{if(this.match(",")){for(var g=[n];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new c.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(a=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new c.EmptyStatement);else{this.expect(")");var v=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=v}return void 0===e?this.finalize(l,new c.ForStatement(n,o,a,r)):s?this.finalize(l,new c.ForInStatement(e,t,r)):this.finalize(l,new c.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(this.lookahead.type===a.Token.Identifier&&!this.hasLineTerminator){var r="$"+(t=this.parseVariableIdentifier()).name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(i.Messages.UnknownLabel,t.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new c.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(this.lookahead.type===a.Token.Identifier&&!this.hasLineTerminator){var r="$"+(t=this.parseVariableIdentifier()).name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(i.Messages.UnknownLabel,t.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new c.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==a.Token.EOF?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(e,new c.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e=this.createNode();this.expectKeyword("with"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.parseStatement();return this.finalize(e,new c.WithStatement(t,r))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(t,new c.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],o=!1;for(this.expect("{");!this.match("}");){var a=this.parseSwitchCase();null===a.test&&(o&&this.throwError(i.Messages.MultipleDefaultsInSwitch),o=!0),n.push(a)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new c.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===u.Syntax.Identifier&&this.match(":")){this.nextToken();var n=r,o="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,o)&&this.throwError(i.Messages.Redeclaration,"Label",n.name),this.context.labelSet[o]=!0;var a=this.parseStatement();delete this.context.labelSet[o],e=new c.LabeledStatement(n,a)}else this.consumeSemicolon(),e=new c.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new c.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},o=0;o<t.length;o++){var a="$"+t[o].value;Object.prototype.hasOwnProperty.call(n,a)&&this.tolerateError(i.Messages.DuplicateBinding,t[o].value),n[a]=!0}this.context.strict&&r.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var s=this.parseBlock();return this.finalize(e,new c.CatchClause(r,s))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new c.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new c.DebuggerStatement)},e.prototype.parseStatement=function(){var e=null;switch(this.lookahead.type){case a.Token.BooleanLiteral:case a.Token.NullLiteral:case a.Token.NumericLiteral:case a.Token.StringLiteral:case a.Token.Template:case a.Token.RegularExpression:e=this.parseExpressionStatement();break;case a.Token.Punctuator:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case a.Token.Identifier:e=this.parseLabelledStatement();break;case a.Token.Keyword:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,i=this.context.inSwitch,o=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.startMarker.index<this.scanner.length&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=i,this.context.inFunctionBody=o,this.finalize(e,new c.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new c.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);return e.params.push(r),!this.match(")")},e.prototype.parseFormalParameters=function(e){var t;if(t={params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};this.startMarker.index<this.scanner.length&&this.parseFormalParameter(t);)this.expect(",");return this.expect(")"),{params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode();this.expectKeyword("function");var r,n=this.match("*");n&&this.nextToken();var o=null,a=null;if(!e||!this.match("(")){var s=this.lookahead;o=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(s.value)&&this.tolerateUnexpectedToken(s,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(s.value)?(a=s,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(s.value)&&(a=s,r=i.Messages.StrictReservedWord)}var u=this.context.allowYield;this.context.allowYield=!n;var l=this.parseFormalParameters(a),p=l.params,h=l.stricted;a=l.firstRestricted,l.message&&(r=l.message);var d=this.context.strict,f=this.parseFunctionSourceElements();return this.context.strict&&a&&this.throwUnexpectedToken(a,r),this.context.strict&&h&&this.tolerateUnexpectedToken(h,r),this.context.strict=d,this.context.allowYield=u,this.finalize(t,new c.FunctionDeclaration(o,p,f,n))},e.prototype.parseFunctionExpression=function(){var e=this.createNode();this.expectKeyword("function");var t,r=this.match("*");r&&this.nextToken();var n,o=null,a=this.context.allowYield;if(this.context.allowYield=!r,!this.match("(")){var s=this.lookahead;o=this.context.strict||r||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(s.value)&&this.tolerateUnexpectedToken(s,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(s.value)?(n=s,t=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(s.value)&&(n=s,t=i.Messages.StrictReservedWord)}var u=this.parseFormalParameters(n),l=u.params,p=u.stricted;n=u.firstRestricted,u.message&&(t=u.message);var h=this.context.strict,d=this.parseFunctionSourceElements();return this.context.strict&&n&&this.throwUnexpectedToken(n,t),this.context.strict&&p&&this.tolerateUnexpectedToken(p,t),this.context.strict=h,this.context.allowYield=a,this.finalize(e,new c.FunctionExpression(o,l,d,r))},e.prototype.parseDirective=function(){var e=this.lookahead,t=null,r=this.createNode(),n=this.parseExpression();return n.type===u.Syntax.Literal&&(t=this.getTokenRaw(e).slice(1,-1)),this.consumeSemicolon(),this.finalize(r,t?new c.Directive(n,t):new c.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(r.type!==a.Token.StringLiteral)break;var n=this.parseDirective();t.push(n);var o=n.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case a.Token.Identifier:case a.Token.StringLiteral:case a.Token.BooleanLiteral:case a.Token.NullLiteral:case a.Token.NumericLiteral:case a.Token.Keyword:return!0;case a.Token.Punctuator:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode();this.expect("("),this.expect(")");var t={params:[],stricted:null,firstRestricted:null,message:null},r=this.context.allowYield;this.context.allowYield=!1;var n=this.parsePropertyMethod(t);return this.context.allowYield=r,this.finalize(e,new c.FunctionExpression(null,t.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t={params:[],firstRestricted:null,paramSet:{}},r=this.context.allowYield;this.context.allowYield=!1,this.expect("("),this.match(")")?this.tolerateUnexpectedToken(this.lookahead):this.parseFormalParameter(t),this.expect(")");var n=this.parsePropertyMethod(t);return this.context.allowYield=r,this.finalize(e,new c.FunctionExpression(null,t.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new c.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case a.Token.Punctuator:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case a.Token.Keyword:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new c.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t,r,n,o=this.lookahead,s=this.createNode(),u=!1,l=!1,p=!1;this.match("*")?this.nextToken():(u=this.match("["),"static"===(r=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(o=this.lookahead,p=!0,u=this.match("["),this.match("*")?this.nextToken():r=this.parseObjectPropertyKey()));var h=this.qualifiedPropertyName(this.lookahead);return o.type===a.Token.Identifier?"get"===o.value&&h?(t="get",u=this.match("["),r=this.parseObjectPropertyKey(),this.context.allowYield=!1,n=this.parseGetterMethod()):"set"===o.value&&h&&(t="set",u=this.match("["),r=this.parseObjectPropertyKey(),n=this.parseSetterMethod()):o.type===a.Token.Punctuator&&"*"===o.value&&h&&(t="init",u=this.match("["),r=this.parseObjectPropertyKey(),n=this.parseGeneratorMethod(),l=!0),!t&&r&&this.match("(")&&(t="init",n=this.parsePropertyMethodFunction(),l=!0),t||this.throwUnexpectedToken(this.lookahead),"init"===t&&(t="method"),u||(p&&this.isPropertyKey(r,"prototype")&&this.throwUnexpectedToken(o,i.Messages.StaticPrototype),!p&&this.isPropertyKey(r,"constructor")&&("method"===t&&l&&!n.generator||this.throwUnexpectedToken(o,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(o,i.Messages.DuplicateConstructor):e.value=!0,t="constructor")),this.finalize(s,new c.MethodDefinition(r,u,n,t,p))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new c.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=e&&this.lookahead.type!==a.Token.Identifier?null:this.parseVariableIdentifier(),i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=r,this.finalize(t,new c.ClassDeclaration(n,i,o))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=this.lookahead.type===a.Token.Identifier?this.parseVariableIdentifier():null,n=null;this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new c.ClassExpression(r,n,i))},e.prototype.parseProgram=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();this.startMarker.index<this.scanner.length;)t.push(this.parseStatementListItem());return this.finalize(e,new c.Program(t,this.sourceType))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();this.lookahead.type!==a.Token.StringLiteral&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return this.lookahead.type===a.Token.Identifier?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new c.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new c.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new c.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var r=[];if(this.lookahead.type===a.Token.StringLiteral)e=this.parseModuleSpecifier();else{if(this.match("{")?r=r.concat(this.parseNamedImports()):this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(r.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.match("{")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new c.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new c.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new c.ExportDefaultDeclaration(r))}else if(this.matchKeyword("class")){r=this.parseClassDeclaration(!0);e=this.finalize(t,new c.ExportDefaultDeclaration(r))}else{this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value);r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),e=this.finalize(t,new c.ExportDefaultDeclaration(r))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new c.ExportAllDeclaration(o))}else if(this.lookahead.type===a.Token.Keyword){r=void 0;switch(this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new c.ExportNamedDeclaration(r,[],null))}else{var s=[],u=null,l=!1;for(this.expect("{");!this.match("}");)l=l||this.matchKeyword("default"),s.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),u=this.parseModuleSpecifier(),this.consumeSemicolon();else if(l){n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}else this.consumeSemicolon();e=this.finalize(t,new c.ExportNamedDeclaration(null,s,u))}return e},e}();t.Parser=l},function(e,t){t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){t.Messages={UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer"}},function(e,t){var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,"column",{value:t}))}finally{return r}},e.prototype.createError=function(e,t,r,n){var i="Line "+t+": "+n,o=this.constructError(i,r);return o.index=e,o.lineNumber=t,o.description=n,o},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var i=this.createError(e,t,r,n);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=r},function(e,t){!function(e){e[e.BooleanLiteral=1]="BooleanLiteral",e[e.EOF=2]="EOF",e[e.Identifier=3]="Identifier",e[e.Keyword=4]="Keyword",e[e.NullLiteral=5]="NullLiteral",e[e.NumericLiteral=6]="NumericLiteral",e[e.Punctuator=7]="Punctuator",e[e.StringLiteral=8]="StringLiteral",e[e.RegularExpression=9]="RegularExpression",e[e.Template=10]="Template"}(t.Token||(t.Token={}));var r=t.Token;t.TokenName={},t.TokenName[r.BooleanLiteral]="Boolean",t.TokenName[r.EOF]="<end>",t.TokenName[r.Identifier]="Identifier",t.TokenName[r.Keyword]="Keyword",t.TokenName[r.NullLiteral]="Null",t.TokenName[r.NumericLiteral]="Numeric",t.TokenName[r.Punctuator]="Punctuator",t.TokenName[r.StringLiteral]="String",t.TokenName[r.RegularExpression]="RegularExpression",t.TokenName[r.Template]="Template"},function(e,t,r){var n=r(4),i=r(5),o=r(9),a=r(7);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function u(e){return"01234567".indexOf(e)}var c=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(){this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,i.Messages.UnexpectedTokenIllegal)},e.prototype.skipSingleLineComment=function(e){var t,r,n;for(this.trackComment&&(t=[],r=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(i)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var a={multiLine:!1,slice:[r+e,this.index-1],range:[r,this.index-1],loc:n};t.push(a)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t}}if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart};a={multiLine:!1,slice:[r+e,this.index],range:[r,this.index],loc:n};t.push(a)}return t},e.prototype.skipMultiLineComment=function(){var e,t,r;for(this.trackComment&&(e=[],t=this.index-2,r={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[t+2,this.index-2],range:[t,this.index],loc:r};e.push(i)}return e}++this.index}else++this.index}if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart};i={multiLine:!0,slice:[t+2,this.index],range:[t,this.index],loc:r};e.push(i)}return this.tolerateUnexpectedToken(),e},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(r))++this.index;else if(o.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2;n=this.skipMultiLineComment();this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3;n=this.skipSingleLineComment(3);this.trackComment&&(e=e.concat(n))}else{if(60!==r)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4;n=this.skipSingleLineComment(4);this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);if(r>=56320&&r<=57343)t=1024*(t-55296)+r-56320+65536}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return"";r=16*r+s(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=o.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):(t=(e=this.scanHexEscape("u")).charCodeAt(0),e&&"\\"!==e&&o.Character.isIdentifierStart(t)||this.throwUnexpectedToken()),r=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)r+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):(t=(e=this.scanHexEscape("u")).charCodeAt(0),e&&"\\"!==e&&o.Character.isIdentifierPart(t)||this.throwUnexpectedToken()),r+=e);return r},e.prototype.octalToDecimal=function(e){var t="0"!==e,r=u(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+u(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+u(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e=this.index,t=92===this.source.charCodeAt(e)?this.getComplexIdentifier():this.getIdentifier();return{type:1===t.length?a.Token.Identifier:this.isKeyword(t)?a.Token.Keyword:"null"===t?a.Token.NullLiteral:"true"===t||"false"===t?a.Token.BooleanLiteral:a.Token.Identifier,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanPunctuator=function(){var e={type:a.Token.Punctuator,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index},t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e.start&&this.throwUnexpectedToken(),e.end=this.index,e.value=t,e},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:a.Token.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:a.Token.NumericLiteral,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:a.Token.NumericLiteral,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:a.Token.NumericLiteral,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var r=!1,i="";!this.eof();){var s=this.source[this.index++];if(s===t){t="";break}if("\\"===s)if((s=this.source[this.index++])&&o.Character.isLineTerminator(s.charCodeAt(0)))++this.lineNumber,"\r"===s&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(s){case"u":case"x":if("{"===this.source[this.index])++this.index,i+=this.scanUnicodeCodePointEscape();else{var u=this.scanHexEscape(s);u||this.throwUnexpectedToken(),i+=u}break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;case"8":case"9":i+=s,this.tolerateUnexpectedToken();break;default:if(s&&o.Character.isOctalDigit(s.charCodeAt(0))){var c=this.octalToDecimal(s);r=c.octal||r,i+=String.fromCharCode(c.code)}else i+=s}else{if(o.Character.isLineTerminator(s.charCodeAt(0)))break;i+=s}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:a.Token.StringLiteral,value:i,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],s=!1,u=2;for(++this.index;!this.eof();){var c=this.source[this.index++];if("`"===c){u=1,s=!0,t=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=c}else if("\\"===c)if(c=this.source[this.index++],o.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":case"x":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var l=this.index,p=this.scanHexEscape(c);p?e+=p:(this.index=l,e+=c)}break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===c?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=c}else o.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=c}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:a.Token.Template,value:{cooked:e,raw:this.source.slice(r+1,this.index-u)},head:n,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&n.throwUnexpectedToken(i.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(r)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],r=!1,a=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){a=!0;break}"["===e&&(r=!0)}return a||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}},e.prototype.scanRegExpFlags=function(){for(var e="",t="";!this.eof();){var r=this.source[this.index];if(!o.Character.isIdentifierPart(r.charCodeAt(0)))break;if(++this.index,"\\"!==r||this.eof())t+=r,e+=r;else if("u"===(r=this.source[this.index])){++this.index;var n=this.index;if(r=this.scanHexEscape("u"))for(t+=r,e+="\\u";n<this.index;++n)e+=this.source[n];else this.index=n,t+="u",e+="\\u";this.tolerateUnexpectedToken()}else e+="\\",this.tolerateUnexpectedToken()}return{value:t,literal:e}},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags(),n=this.testRegExp(t.value,r.value);return{type:a.Token.RegularExpression,value:n,literal:t.literal+r.literal,regex:{pattern:t.value,flags:r.value},lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:a.Token.EOF,lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=c},function(e,t){var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){var n=r(2),i=function(){return function(e){this.type=n.Syntax.ArrayExpression,this.elements=e}}();t.ArrayExpression=i;var o=function(){return function(e){this.type=n.Syntax.ArrayPattern,this.elements=e}}();t.ArrayPattern=o;var a=function(){return function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r}}();t.ArrowFunctionExpression=a;var s=function(){return function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r}}();t.AssignmentExpression=s;var u=function(){return function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t}}();t.AssignmentPattern=u;var c=function(){return function(e,t,r){var i="||"===e||"&&"===e;this.type=i?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r}}();t.BinaryExpression=c;var l=function(){return function(e){this.type=n.Syntax.BlockStatement,this.body=e}}();t.BlockStatement=l;var p=function(){return function(e){this.type=n.Syntax.BreakStatement,this.label=e}}();t.BreakStatement=p;var h=function(){return function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t}}();t.CallExpression=h;var d=function(){return function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t}}();t.CatchClause=d;var f=function(){return function(e){this.type=n.Syntax.ClassBody,this.body=e}}();t.ClassBody=f;var m=function(){return function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r}}();t.ClassDeclaration=m;var g=function(){return function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r}}();t.ClassExpression=g;var v=function(){return function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t}}();t.ComputedMemberExpression=v;var y=function(){return function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r}}();t.ConditionalExpression=y;var b=function(){return function(e){this.type=n.Syntax.ContinueStatement,this.label=e}}();t.ContinueStatement=b;var x=function(){return function(){this.type=n.Syntax.DebuggerStatement}}();t.DebuggerStatement=x;var w=function(){return function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t}}();t.Directive=w;var E=function(){return function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t}}();t.DoWhileStatement=E;var C=function(){return function(){this.type=n.Syntax.EmptyStatement}}();t.EmptyStatement=C;var S=function(){return function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e}}();t.ExportAllDeclaration=S;var k=function(){return function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e}}();t.ExportDefaultDeclaration=k;var _=function(){return function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r}}();t.ExportNamedDeclaration=_;var D=function(){return function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e}}();t.ExportSpecifier=D;var A=function(){return function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e}}();t.ExpressionStatement=A;var P=function(){return function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1}}();t.ForInStatement=P;var F=function(){return function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r}}();t.ForOfStatement=F;var T=function(){return function(e,t,r,i){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=i}}();t.ForStatement=T;var O=function(){return function(e,t,r,i){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=i,this.expression=!1}}();t.FunctionDeclaration=O;var j=function(){return function(e,t,r,i){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=i,this.expression=!1}}();t.FunctionExpression=j;var I=function(){return function(e){this.type=n.Syntax.Identifier,this.name=e}}();t.Identifier=I;var N=function(){return function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r}}();t.IfStatement=N;var R=function(){return function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t}}();t.ImportDeclaration=R;var M=function(){return function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e}}();t.ImportDefaultSpecifier=M;var B=function(){return function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e}}();t.ImportNamespaceSpecifier=B;var L=function(){return function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t}}();t.ImportSpecifier=L;var U=function(){return function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t}}();t.LabeledStatement=U;var $=function(){return function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t}}();t.Literal=$;var z=function(){return function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t}}();t.MetaProperty=z;var J=function(){return function(e,t,r,i,o){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=i,this.static=o}}();t.MethodDefinition=J;var q=function(){return function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t}}();t.NewExpression=q;var V=function(){return function(e){this.type=n.Syntax.ObjectExpression,this.properties=e}}();t.ObjectExpression=V;var X=function(){return function(e){this.type=n.Syntax.ObjectPattern,this.properties=e}}();t.ObjectPattern=X;var K=function(){return function(e,t){this.type=n.Syntax.Program,this.body=e,this.sourceType=t}}();t.Program=K;var H=function(){return function(e,t,r,i,o,a){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=i,this.kind=e,this.method=o,this.shorthand=a}}();t.Property=H;var G=function(){return function(e,t,r){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex=r}}();t.RegexLiteral=G;var Y=function(){return function(e){this.type=n.Syntax.RestElement,this.argument=e}}();t.RestElement=Y;var W=function(){return function(e){this.type=n.Syntax.ReturnStatement,this.argument=e}}();t.ReturnStatement=W;var Q=function(){return function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e}}();t.SequenceExpression=Q;var Z=function(){return function(e){this.type=n.Syntax.SpreadElement,this.argument=e}}();t.SpreadElement=Z;var ee=function(){return function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t}}();t.StaticMemberExpression=ee;var te=function(){return function(){this.type=n.Syntax.Super}}();t.Super=te;var re=function(){return function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t}}();t.SwitchCase=re;var ne=function(){return function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t}}();t.SwitchStatement=ne;var ie=function(){return function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t}}();t.TaggedTemplateExpression=ie;var oe=function(){return function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t}}();t.TemplateElement=oe;var ae=function(){return function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t}}();t.TemplateLiteral=ae;var se=function(){return function(){this.type=n.Syntax.ThisExpression}}();t.ThisExpression=se;var ue=function(){return function(e){this.type=n.Syntax.ThrowStatement,this.argument=e}}();t.ThrowStatement=ue;var ce=function(){return function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r}}();t.TryStatement=ce;var le=function(){return function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0}}();t.UnaryExpression=le;var pe=function(){return function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r}}();t.UpdateExpression=pe;var he=function(){return function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t}}();t.VariableDeclaration=he;var de=function(){return function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t}}();t.VariableDeclarator=de;var fe=function(){return function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t}}();t.WhileStatement=fe;var me=function(){return function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t}}();t.WithStatement=me;var ge=function(){return function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t}}();t.YieldExpression=ge},function(e,t,r){var n,i=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=r(9),a=r(7),s=r(3),u=r(12),c=r(13),l=r(10),p=r(14);function h(e){var t;switch(e.type){case c.JSXSyntax.JSXIdentifier:t=e.name;break;case c.JSXSyntax.JSXNamespacedName:var r=e;t=h(r.namespace)+":"+h(r.name);break;case c.JSXSyntax.JSXMemberExpression:var n=e;t=h(n.object)+"."+h(n.property)}return t}!function(e){e[e.Identifier=100]="Identifier",e[e.Text=101]="Text"}(n||(n={})),a.TokenName[n.Identifier]="JSXIdentifier",a.TokenName[n.Text]="JSXText";var d=function(e){function t(t,r,n){e.call(this,t,r,n)}return i(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.lineNumber,this.scanner.lineStart=this.startMarker.lineStart},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",r=!0,n=!1,i=!1,a=!1;!this.scanner.eof()&&r&&!n;){var s=this.scanner.source[this.scanner.index];if(s===e)break;if(n=";"===s,t+=s,++this.scanner.index,!n)switch(t.length){case 2:i="#"===s;break;case 3:i&&(r=(a="x"===s)||o.Character.isDecimalDigit(s.charCodeAt(0)),i=i&&!a);break;default:r=(r=r&&!(i&&!o.Character.isDecimalDigit(s.charCodeAt(0))))&&!(a&&!o.Character.isHexDigit(s.charCodeAt(0)))}}if(r&&n&&t.length>2){var c=t.substr(1,t.length-2);i&&c.length>1?t=String.fromCharCode(parseInt(c.substr(1),10)):a&&c.length>2?t=String.fromCharCode(parseInt("0"+c.substr(1),16)):i||a||!u.XHTMLEntities[c]||(t=u.XHTMLEntities[c])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e){var t=this.scanner.source[this.scanner.index++];return{type:a.Token.Punctuator,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(34===e||39===e){for(var r=this.scanner.index,i=this.scanner.source[this.scanner.index++],s="";!this.scanner.eof();){if((l=this.scanner.source[this.scanner.index++])===i)break;s+="&"===l?this.scanXHTMLEntity(i):l}return{type:a.Token.StringLiteral,value:s,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:r,end:this.scanner.index}}if(46===e){var u=this.scanner.source.charCodeAt(this.scanner.index+1),c=this.scanner.source.charCodeAt(this.scanner.index+2);t=46===u&&46===c?"...":".",r=this.scanner.index;return this.scanner.index+=t.length,{type:a.Token.Punctuator,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:r,end:this.scanner.index}}if(96===e)return{type:a.Token.Template,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(o.Character.isIdentifierStart(e)&&92!==e){r=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var l=this.scanner.source.charCodeAt(this.scanner.index);if(o.Character.isIdentifierPart(l)&&92!==l)++this.scanner.index;else{if(45!==l)break;++this.scanner.index}}var p=this.scanner.source.slice(r,this.scanner.index);return{type:n.Identifier,value:p,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:r,end:this.scanner.index}}this.scanner.throwUnexpectedToken()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,o.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart;var i={type:n.Text,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(i)),i},t.prototype.peekJSXToken=function(){var e=this.scanner.index,t=this.scanner.lineNumber,r=this.scanner.lineStart;this.scanner.scanComments();var n=this.lexJSX();return this.scanner.index=e,this.scanner.lineNumber=t,this.scanner.lineStart=r,n},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();t.type===a.Token.Punctuator&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return t.type===a.Token.Punctuator&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return t.type!==n.Identifier&&this.throwUnexpectedToken(t),this.finalize(e,new p.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=t;this.expectJSX(":");var n=this.parseJSXIdentifier();t=this.finalize(e,new p.JSXNamespacedName(r,n))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t;this.expectJSX(".");var o=this.parseJSXIdentifier();t=this.finalize(e,new p.JSXMemberExpression(i,o))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=r;this.expectJSX(":");var i=this.parseJSXIdentifier();e=this.finalize(t,new p.JSXNamespacedName(n,i))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();t.type!==a.Token.StringLiteral&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new p.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new p.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new p.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new p.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new p.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new p.JSXOpeningElement(r,i,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.finalize(e,new p.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new p.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),i=this.finalize(t,new p.JSXText(r.value,n));e.push(i)}if("{"!==this.scanner.source[this.scanner.index])break;var o=this.parseJSXExpressionContainer();e.push(o)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===c.JSXSyntax.JSXOpeningElement){var i=n;if(i.selfClosing){var o=this.finalize(r,new p.JSXElement(i,[],null));e.children.push(o)}else t.push(e),e={node:r,opening:i,closing:null,children:[]}}if(n.type===c.JSXSyntax.JSXClosingElement){e.closing=n;var a=h(e.opening.name);if(a!==h(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",a),!(t.length>0))break;o=this.finalize(e.node,new p.JSXElement(e.opening,e.children,e.closing));(e=t.pop()).children.push(o)}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=i.children,n=i.closing}return this.finalize(e,new p.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t}(s.Parser);t.JSXParser=d},function(e,t){t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t){t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){var n=r(13),i=function(){return function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e}}();t.JSXClosingElement=i;var o=function(){return function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r}}();t.JSXElement=o;var a=function(){return function(){this.type=n.JSXSyntax.JSXEmptyExpression}}();t.JSXEmptyExpression=a;var s=function(){return function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e}}();t.JSXExpressionContainer=s;var u=function(){return function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e}}();t.JSXIdentifier=u;var c=function(){return function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t}}();t.JSXMemberExpression=c;var l=function(){return function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t}}();t.JSXAttribute=l;var p=function(){return function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t}}();t.JSXNamespacedName=p;var h=function(){return function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r}}();t.JSXOpeningElement=h;var d=function(){return function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e}}();t.JSXSpreadAttribute=d;var f=function(){return function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t}}();t.JSXText=f},function(e,t,r){var n=r(8),i=r(6),o=r(7),a=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var r=this.values[this.paren-1];t="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":if(t=!1,"function"===this.values[this.curly-3]){var n=this.values[this.curly-4];t=!!n&&!this.beforeFunctionExpression(n)}else if("function"===this.values[this.curly-4]){var i=this.values[this.curly-5];t=!i||!this.beforeFunctionExpression(i)}}return t},e.prototype.push=function(e){e.type===o.Token.Punctuator||e.type===o.Token.Keyword?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),s=function(){function e(e,t){this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=!!t&&("boolean"==typeof t.tolerant&&t.tolerant),this.scanner=new n.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&("boolean"==typeof t.comment&&t.comment),this.trackRange=!!t&&("boolean"==typeof t.range&&t.range),this.trackLoc=!!t&&("boolean"==typeof t.loc&&t.loc),this.buffer=[],this.reader=new a}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=void 0,i=this.scanner.source.slice(r.slice[0],r.slice[1]);n={type:r.multiLine?"BlockComment":"LineComment",value:i},this.trackRange&&(n.range=r.range),this.trackLoc&&(n.loc=r.loc),this.buffer.push(n)}if(!this.scanner.eof()){var a=void 0;this.trackLoc&&(a={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var s=void 0;s="/"===this.scanner.source[this.scanner.index]?this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.scanPunctuator():this.scanner.lex(),this.reader.push(s);var u=void 0;u={type:o.TokenName[s.type],value:this.scanner.source.slice(s.start,s.end)},this.trackRange&&(u.range=[s.start,s.end]),this.trackLoc&&(a.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},u.loc=a),s.regex&&(u.regex=s.regex),this.buffer.push(u)}}return this.buffer.shift()},e}();t.Tokenizer=s}])})}).call(this,r(24)(e))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(8),o=r(13),a=r(18),s=r(14),u=Object.prototype.toString,c=Object.prototype.hasOwnProperty,l=9,p=10,h=32,d=33,f=34,m=35,g=37,v=38,y=39,b=42,x=44,w=45,E=58,C=62,S=63,k=64,_=91,D=93,A=96,P=123,F=124,T=125,O={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},j=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function I(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+i.repeat("0",n-t.length)+t}function N(e){this.schema=e.schema||a,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=i.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,i,o,a,s,u;if(null===t)return{};for(r={},i=0,o=(n=Object.keys(t)).length;i<o;i+=1)a=n[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(u=e.compiledTypeMap.fallback[a])&&c.call(u.styleAliases,s)&&(s=u.styleAliases[s]),r[a]=s;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function R(e,t){for(var r,n=i.repeat(" ",t),o=0,a=-1,s="",u=e.length;o<u;)-1===(a=e.indexOf("\n",o))?(r=e.slice(o),o=u):(r=e.slice(o,a+1),o=a+1),r.length&&"\n"!==r&&(s+=n),s+=r;return s}function M(e,t){return"\n"+i.repeat(" ",e.indent*t)}function B(e){return e===h||e===l}function L(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function U(e){return L(e)&&65279!==e&&e!==x&&e!==_&&e!==D&&e!==P&&e!==T&&e!==E&&e!==m}var $=1,z=2,J=3,q=4,V=5;function X(e,t,r,n,i){var o,a,s=!1,u=!1,c=-1!==n,l=-1,h=function(e){return L(e)&&65279!==e&&!B(e)&&e!==w&&e!==S&&e!==E&&e!==x&&e!==_&&e!==D&&e!==P&&e!==T&&e!==m&&e!==v&&e!==b&&e!==d&&e!==F&&e!==C&&e!==y&&e!==f&&e!==g&&e!==k&&e!==A}(e.charCodeAt(0))&&!B(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(!L(a=e.charCodeAt(o)))return V;h=h&&U(a)}else{for(o=0;o<e.length;o++){if((a=e.charCodeAt(o))===p)s=!0,c&&(u=u||o-l-1>n&&" "!==e[l+1],l=o);else if(!L(a))return V;h=h&&U(a)}u=u||c&&o-l-1>n&&" "!==e[l+1]}return s||u?" "===e[0]&&r>9?V:u?q:J:h&&!i(e)?$:z}function K(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==j.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,r),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),s=n||e.flowLevel>-1&&r>=e.flowLevel;switch(X(t,s,e.indent,a,function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)})){case $:return t;case z:return"'"+t.replace(/'/g,"''")+"'";case J:return"|"+H(t,e.indent)+G(R(t,i));case q:return">"+H(t,e.indent)+G(R(function(e,t){var r,n,i=/(\n+)([^\n]*)/g,o=function(){var r=e.indexOf("\n");return r=-1!==r?r:e.length,i.lastIndex=r,Y(e.slice(0,r),t)}(),a="\n"===e[0]||" "===e[0];for(;n=i.exec(e);){var s=n[1],u=n[2];r=" "===u[0],o+=s+(a||r||""===u?"":"\n")+Y(u,t),a=r}return o}(t,a),i));case V:return'"'+function(e){for(var t,r,n="",i=0;i<e.length;i++)t=e.charCodeAt(i),r=O[t],n+=!r&&L(t)?e[i]:r||I(t);return n}(t)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function H(e,t){var r=" "===e[0]?String(t):"",n="\n"===e[e.length-1];return r+(n&&("\n"===e[e.length-2]||"\n"===e)?"+":n?"":"-")+"\n"}function G(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Y(e,t){if(""===e||" "===e[0])return e;for(var r,n,i=/ [^ ]/g,o=0,a=0,s=0,u="";r=i.exec(e);)(s=r.index)-o>t&&(n=a>o?a:s,u+="\n"+e.slice(o,n),o=n+1),a=s;return u+="\n",e.length-o>t&&a>o?u+=e.slice(o,a)+"\n"+e.slice(a+1):u+=e.slice(o),u.slice(1)}function W(e,t,r){var i,a,s,l,p,h;for(s=0,l=(a=r?e.explicitTypes:e.implicitTypes).length;s<l;s+=1)if(((p=a[s]).instanceOf||p.predicate)&&(!p.instanceOf||"object"===(void 0===t?"undefined":n(t))&&t instanceof p.instanceOf)&&(!p.predicate||p.predicate(t))){if(e.tag=r?p.tag:"?",p.represent){if(h=e.styleMap[p.tag]||p.defaultStyle,"[object Function]"===u.call(p.represent))i=p.represent(t,h);else{if(!c.call(p.represent,h))throw new o("!<"+p.tag+'> tag resolver accepts not "'+h+'" style');i=p.represent[h](t,h)}e.dump=i}return!0}return!1}function Q(e,t,r,n,i,a){e.tag=null,e.dump=r,W(e,r,!1)||W(e,r,!0);var s=u.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var c,l,h="[object Object]"===s||"[object Array]"===s;if(h&&(l=-1!==(c=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&t>0)&&(i=!1),l&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(h&&l&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===s)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var i,a,s,u,c,l,h="",d=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new o("sortKeys must be a boolean or a function");for(i=0,a=f.length;i<a;i+=1)l="",n&&0===i||(l+=M(e,t)),u=r[s=f[i]],Q(e,t+1,s,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&p===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=M(e,t)),Q(e,t+1,u,!0,c)&&(e.dump&&p===e.dump.charCodeAt(0)?l+=":":l+=": ",h+=l+=e.dump));e.tag=d,e.dump=h||"{}"}(e,t,e.dump,i),l&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,r){var n,i,o,a,s,u="",c=e.tag,l=Object.keys(r);for(n=0,i=l.length;n<i;n+=1)s="",0!==n&&(s+=", "),a=r[o=l[n]],Q(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+": ",Q(e,t,a,!1,!1)&&(u+=s+=e.dump));e.tag=c,e.dump="{"+u+"}"}(e,t,e.dump),l&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===s)n&&0!==e.dump.length?(!function(e,t,r,n){var i,o,a="",s=e.tag;for(i=0,o=r.length;i<o;i+=1)Q(e,t+1,r[i],!0,!0)&&(n&&0===i||(a+=M(e,t)),e.dump&&p===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=s,e.dump=a||"[]"}(e,t,e.dump,i),l&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,r){var n,i,o="",a=e.tag;for(n=0,i=r.length;n<i;n+=1)Q(e,t,r[n],!1,!1)&&(0!==n&&(o+=", "),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),l&&(e.dump="&ref_"+c+" "+e.dump));else{if("[object String]"!==s){if(e.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&K(e,e.dump,t,a)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function Z(e,t){var r,i,o=[],a=[];for(function e(t,r,i){var o,a,s;if(null!==t&&"object"===(void 0===t?"undefined":n(t)))if(-1!==(a=r.indexOf(t)))-1===i.indexOf(a)&&i.push(a);else if(r.push(t),Array.isArray(t))for(a=0,s=t.length;a<s;a+=1)e(t[a],r,i);else for(o=Object.keys(t),a=0,s=o.length;a<s;a+=1)e(t[o[a]],r,i)}(e,o,a),r=0,i=a.length;r<i;r+=1)t.duplicates.push(o[a[r]]);t.usedDuplicates=new Array(i)}function ee(e,t){var r=new N(t=t||{});return r.noRefs||Z(e,r),Q(r,0,e,!0,!0)?r.dump+"\n":""}e.exports.dump=ee,e.exports.safeDump=function(e,t){return ee(e,i.extend({schema:s},t))}},function(e){e.exports={id:"base.json",$schema:"http://json-schema.org/draft-04/schema",title:"Base definitions",definitions:{JsonPath:{type:"string",description:"JsonPath, see http://goessner.net/articles/JsonPath/",format:"jsonpath",example:"products.book[2]"}}}},function(e){e.exports={id:"testcase.json",$schema:"http://json-schema.org/draft-04/schema",title:"Testcase",description:"A single test case",type:"object",properties:{name:{type:"string",description:"Name of this testcase/scenario"},assertion:{type:"string",description:"Description of what this testcase asserts"},inputs:{description:"The inputs send to the fixture input ports, or a sequence of such inputs",oneOf:[{type:"object"},{type:"array",items:{type:"object"}}]},expect:{description:"Expected data on fixture output ports.\nCan either be an object, or a sequence of such objects.\n",oneOf:[{$ref:"outputdata.json"},{type:"array",items:[{$ref:"outputdata.json"}]}]},timeout:{type:"number",description:"Timeout (in milliseconds). Overrides that set in the suite",default:2e3},skip:{type:"string",description:"Flag to skip testcase.\nShould be a description of the reason for skipping.\n"}},required:["name","assertion","inputs","expect"]}},function(e){e.exports={id:"testsuite.json",$schema:"http://json-schema.org/draft-04/schema",title:"Test suite",description:"A collection of test cases",type:["object"],properties:{topic:{type:"string",description:"The component/graph under test",example:"MyComponent3"},name:{type:"string",description:"Name of this test suite. Topic is used if no name is provided.",default:""},fixture:{type:"object",description:"The graph fixture to run for each test case"},cases:{type:"array",description:"The test cases",items:{$ref:"testcase.json"},default:[]},timeout:{type:"number",description:"Timeout (in milliseconds) for setup and default for each test case.",default:2e3},skip:{type:"string",description:"Flag to skip test suite (and all containing test cases).\nShould be a description of the reason for skipping.\n"}},required:["topic"]}},function(e){e.exports={id:"testsuites.json",$schema:"http://json-schema.org/draft-04/schema",title:"TestSuite list",description:"Array of TestSuite",type:"array",items:{$ref:"testsuite.json"}}},function(e){e.exports={id:"testsuites.json",$schema:"http://json-schema.org/draft-04/schema",title:"Expectation list",description:"Array of Expectation",type:"array",items:{$ref:"expectation.json"}}},function(e){e.exports={id:"testsfile.json",$schema:"http://json-schema.org/draft-04/schema",title:"Tests file",description:"One or more suites",oneOf:[{$ref:"testsuites.json"},{$ref:"testsuite.json"}]}},function(e,t,r){"use strict";(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return n.exec(e).slice(1)};function o(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return t=r(o(t.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(o(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(2))},function(e,t,r){"use strict";
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */var n=r(106);
/*!
 * test utility
 */t.test=r(107),
/*!
 * type utility
 */
t.type=r(28),
/*!
 * expectTypes utility
 */
t.expectTypes=r(108),
/*!
 * message utility
 */
t.getMessage=r(109),
/*!
 * actual utility
 */
t.getActual=r(46),
/*!
 * Inspect util
 */
t.inspect=r(19),
/*!
 * Object Display util
 */
t.objDisplay=r(49),
/*!
 * Flag utility
 */
t.flag=r(1),
/*!
 * Flag transferring utility
 */
t.transferFlags=r(5),
/*!
 * Deep equal utility
 */
t.eql=r(111),
/*!
 * Deep path info
 */
t.getPathInfo=n.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=n.hasProperty,
/*!
 * Function name
 */
t.getName=r(47),
/*!
 * add Property
 */
t.addProperty=r(112),
/*!
 * add Method
 */
t.addMethod=r(113),
/*!
 * overwrite Property
 */
t.overwriteProperty=r(114),
/*!
 * overwrite Method
 */
t.overwriteMethod=r(115),
/*!
 * Add a chainable method
 */
t.addChainableMethod=r(116),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=r(117),
/*!
 * Compare by inspect method
 */
t.compareByInspect=r(118),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=r(50),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=r(119),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=r(120),
/*!
 * Proxify util
 */
t.proxify=r(22),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=r(21),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=r(20),
/*!
 * isNaN method
 */
t.isNaN=r(121)},function(e,t,r){"use strict";function n(e,t){return void 0!==e&&null!==e&&t in Object(e)}function i(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}})}function o(e,t,r){var n=e,i=null;r=void 0===r?t.length:r;for(var o=0;o<r;o++){var a=t[o];n&&(n=void 0===a.p?n[a.i]:n[a.p],o===r-1&&(i=n))}return i}function a(e,t){var r=i(t),a=r[r.length-1],s={parent:r.length>1?o(e,r,r.length-1):e,name:a.p||a.i,value:o(e,r)};return s.exists=n(s.parent,s.name),s}e.exports={hasProperty:n,getPathInfo:a,getPathValue:function(e,t){return a(e,t).value},setPathValue:function(e,t,r){return function(e,t,r){for(var n=e,i=r.length,o=null,a=0;a<i;a++){var s=null,u=null;if(o=r[a],a===i-1)n[s=void 0===o.p?o.i:o.p]=t;else if(void 0!==o.p&&n[o.p])n=n[o.p];else if(void 0!==o.i&&n[o.i])n=n[o.i];else{var c=r[a+1];s=void 0===o.p?o.i:o.p,u=void 0===c.p?[]:{},n[s]=u,n=n[s]}}}(e,r,i(t)),e}}},function(e,t,r){"use strict";
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */var n=r(1);e.exports=function(e,t){var r=n(e,"negate"),i=t[0];return r?!i:i}},function(e,t,r){"use strict";
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(45),i=r(1),o=r(28);e.exports=function(e,t){var r=i(e,"message"),a=i(e,"ssfi");r=r?r+": ":"",e=i(e,"object"),(t=t.map(function(e){return e.toLowerCase()})).sort();var s=t.map(function(e,r){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&r===t.length-1?"or ":"")+n+" "+e}).join(", "),u=o(e).toLowerCase();if(!t.some(function(e){return u===e}))throw new n(r+"object tested must be "+s+", but "+u+" given",void 0,a)}},function(e,t,r){"use strict";
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */var n=r(1),i=r(46),o=(r(19),r(49));e.exports=function(e,t){var r=n(e,"negate"),a=n(e,"object"),s=t[3],u=i(e,t),c=r?t[2]:t[1],l=n(e,"message");return"function"==typeof c&&(c=c()),c=(c=c||"").replace(/#\{this\}/g,function(){return o(a)}).replace(/#\{act\}/g,function(){return o(u)}).replace(/#\{exp\}/g,function(){return o(s)}),l?l+": "+c:c}},function(e,t,r){"use strict";
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e){var t=[];for(var r in e)t.push(r);return t}},function(e,t,r){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(28);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var a="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function s(e,t,r){if(!r||v(e)||v(t))return null;var n=r.get(e);if(n){var i=n.get(t);if("boolean"==typeof i)return i}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function u(e,t,r,n){if(r&&!v(e)&&!v(t)){var i=r.get(e);i?i.set(t,n):((i=new a).set(t,n),r.set(e,i))}}
/*!
 * Primary Export
 */function c(e,t,r){if(r&&r.comparator)return p(e,t,r);var n=l(e,t);return null!==n?n:p(e,t,r)}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!v(e)&&!v(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function p(e,t,r){(r=r||{}).memoize=!1!==r.memoize&&(r.memoize||new a);var n=r&&r.comparator,o=s(e,t,r.memoize);if(null!==o)return o;var p=s(t,e,r.memoize);if(null!==p)return p;if(n){var v=n(e,t);if(!1===v||!0===v)return u(e,t,r.memoize,v),v;var y=l(e,t);if(null!==y)return y}var b=i(e);if(b!==i(t))return u(e,t,r.memoize,!1),!1;u(e,t,r.memoize,!0);var x=function(e,t,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,n);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){return d(m(e),m(t),r)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,n);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return h(e,t,n);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){var n=g(e),i=g(t);if(n.length&&n.length===i.length)return n.sort(),i.sort(),!1!==d(n,i)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,r,n){var i=r.length;if(0===i)return!0;for(var o=0;o<i;o+=1)if(!1===c(e[r[o]],t[r[o]],n))return!1;return!0}(e,t,n,r);var o=f(e),a=f(t);if(o.length&&o.length===a.length)return o.sort(),a.sort(),d(o,a,r);if(0===n.length&&0===o.length&&0===i.length&&0===a.length)return!0;return!1}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,n)}}(e,t,b,r);return u(e,t,r.memoize,x),x}function h(e,t,r){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],i=[];return e.forEach(function(e,t){n.push([e,t])}),t.forEach(function(e,t){i.push([e,t])}),d(n.sort(),i.sort(),r)}
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function d(e,t,r){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var i=-1;++i<n;)if(!1===c(e[i],t[i],r))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */
function f(e){if(function(e){return"undefined"!=typeof Symbol&&"object"===(void 0===e?"undefined":n(e))&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return m(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function m(e){for(var t=e.next(),r=[t.value];!1===t.done;)t=e.next(),r.push(t.value);return r}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function g(e){var t=[];for(var r in e)t.push(r);return t}function v(e){return null===e||"object"!==(void 0===e?"undefined":n(e))}e.exports=c,e.exports.MemoizeMap=a},function(e,t,r){"use strict";
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(3),i=r(1),o=r(20),a=r(5);e.exports=function(e,t,r){r=void 0===r?function(){}:r,Object.defineProperty(e,t,{get:function e(){o()||i(this,"lockSsfi")||i(this,"ssfi",e);var t=r.call(this);if(void 0!==t)return t;var s=new n.Assertion;return a(this,s),s},configurable:!0})}},function(e,t,r){"use strict";
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(21),i=r(3),o=r(1),a=r(22),s=r(5);e.exports=function(e,t,r){var u=function e(){o(this,"lockSsfi")||o(this,"ssfi",e);var t=r.apply(this,arguments);if(void 0!==t)return t;var n=new i.Assertion;return s(this,n),n};n(u,t,!1),e[t]=a(u,t)}},function(e,t,r){"use strict";
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(3),i=r(1),o=r(20),a=r(5);e.exports=function(e,t,r){var s=Object.getOwnPropertyDescriptor(e,t),u=function(){};s&&"function"==typeof s.get&&(u=s.get),Object.defineProperty(e,t,{get:function e(){o()||i(this,"lockSsfi")||i(this,"ssfi",e);var t=i(this,"lockSsfi");i(this,"lockSsfi",!0);var s=r(u).call(this);if(i(this,"lockSsfi",t),void 0!==s)return s;var c=new n.Assertion;return a(this,c),c},configurable:!0})}},function(e,t,r){"use strict";
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(21),i=r(3),o=r(1),a=r(22),s=r(5);e.exports=function(e,t,r){var u=e[t],c=function(){throw new Error(t+" is not a function")};u&&"function"==typeof u&&(c=u);var l=function e(){o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var n=r(c).apply(this,arguments);if(o(this,"lockSsfi",t),void 0!==n)return n;var a=new i.Assertion;return s(this,a),a};n(l,t,!1),e[t]=a(l,t)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(21),o=r(3),a=r(1),s=r(22),u=r(5),c="function"==typeof Object.setPrototypeOf,l=function(){},p=Object.getOwnPropertyNames(l).filter(function(e){var t=Object.getOwnPropertyDescriptor(l,e);return"object"!==(void 0===t?"undefined":n(t))||!t.configurable}),h=Function.prototype.call,d=Function.prototype.apply;
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */e.exports=function(e,t,r,n){"function"!=typeof n&&(n=function(){});var l={method:r,chainingBehavior:n};e.__methods||(e.__methods={}),e.__methods[t]=l,Object.defineProperty(e,t,{get:function(){l.chainingBehavior.call(this);var r=function e(){a(this,"lockSsfi")||a(this,"ssfi",e);var t=l.method.apply(this,arguments);if(void 0!==t)return t;var r=new o.Assertion;return u(this,r),r};if(i(r,t,!0),c){var n=Object.create(this);n.call=h,n.apply=d,Object.setPrototypeOf(r,n)}else{Object.getOwnPropertyNames(e).forEach(function(t){if(-1===p.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}})}return u(this,r),s(r)},configurable:!0})}},function(e,t,r){"use strict";
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(3),i=r(5);e.exports=function(e,t,r,o){var a=e.__methods[t],s=a.chainingBehavior;a.chainingBehavior=function(){var e=o(s).call(this);if(void 0!==e)return e;var t=new n.Assertion;return i(this,t),t};var u=a.method;a.method=function(){var e=r(u).apply(this,arguments);if(void 0!==e)return e;var t=new n.Assertion;return i(this,t),t}}},function(e,t,r){"use strict";
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */var n=r(19);e.exports=function(e,t){return n(e)<n(t)?-1:1}},function(e,t,r){"use strict";
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */var n=r(50);e.exports=function(e){return Object.keys(e).concat(n(e))}},function(e,t,r){"use strict";var n=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function i(e){var t="";if(void 0===e.name){var r=String(e).match(n);r&&(t=r[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var r="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(r):"string"==typeof t&&-1!==r.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=i(e.constructor):"function"==typeof e&&(t=i(e).trim()||i(new e)),t}}},function(e,t,r){"use strict";
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,r){"use strict";
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(4);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var r=e.AssertionError,i=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */
function o(e,r,n,a){return i(this,"ssfi",n||o),i(this,"lockSsfi",a),i(this,"object",e),i(this,"message",r),t.proxify(this)}e.Assertion=o,Object.defineProperty(o,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=e}}),Object.defineProperty(o,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=e}}),o.addProperty=function(e,r){t.addProperty(this.prototype,e,r)},o.addMethod=function(e,r){t.addMethod(this.prototype,e,r)},o.addChainableMethod=function(e,r,n){t.addChainableMethod(this.prototype,e,r,n)},o.overwriteProperty=function(e,r){t.overwriteProperty(this.prototype,e,r)},o.overwriteMethod=function(e,r){t.overwriteMethod(this.prototype,e,r)},o.overwriteChainableMethod=function(e,r,n){t.overwriteChainableMethod(this.prototype,e,r,n)},o.prototype.assert=function(e,o,a,s,u,c){var l=t.test(this,arguments);if(!1!==c&&(c=!0),void 0===s&&void 0===u&&(c=!1),!0!==n.showDiff&&(c=!1),!l){o=t.getMessage(this,arguments);var p=t.getActual(this,arguments);throw new r(o,{actual:p,expected:s,showDiff:c},n.includeStack?this.assert:i(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(o.prototype,"_obj",{get:function(){return i(this,"object")},set:function(e){i(this,"object",e)}})}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t){var r=e.Assertion,i=e.AssertionError,o=t.flag;function a(e,r){r&&o(this,"message",r),e=e.toLowerCase();var n=o(this,"object"),i=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(n).toLowerCase(),"expected #{this} to be "+i+e,"expected #{this} not to be "+i+e)}function s(e,r){return t.isNaN(e)&&t.isNaN(r)||e===r}function u(){o(this,"contains",!0)}function c(e,n){n&&o(this,"message",n);var a=o(this,"object"),u=t.type(a).toLowerCase(),c=o(this,"message"),l=o(this,"negate"),p=o(this,"ssfi"),h=o(this,"deep"),d=h?"deep ":"";c=c?c+": ":"";var f=!1;switch(u){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(h)throw new i(c+"unable to use .deep.include with WeakSet",void 0,p);f=a.has(e);break;case"map":var m=h?t.eql:s;a.forEach(function(t){f=f||m(t,e)});break;case"set":h?a.forEach(function(r){f=f||t.eql(r,e)}):f=a.has(e);break;case"array":f=h?a.some(function(r){return t.eql(r,e)}):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new i(c+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+u+" given",void 0,p);var g=Object.keys(e),v=null,y=0;if(g.forEach(function(n){var s=new r(a);if(t.transferFlags(this,s,!0),o(s,"lockSsfi",!0),l&&1!==g.length)try{s.property(n,e[n])}catch(e){if(!t.checkError.compatibleConstructor(e,i))throw e;null===v&&(v=e),y++}else s.property(n,e[n])},this),l&&g.length>1&&y===g.length)throw v;return}this.assert(f,"expected #{this} to "+d+"include "+t.inspect(e),"expected #{this} to not "+d+"include "+t.inspect(e))}function l(){var e=o(this,"object"),r=t.type(e);this.assert("Arguments"===r,"expected #{this} to be arguments but got "+r,"expected #{this} to not be arguments")}function p(e,t){t&&o(this,"message",t);var r=o(this,"object");if(o(this,"deep"))return this.eql(e);this.assert(e===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function h(e,r){r&&o(this,"message",r),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function d(e,n){n&&o(this,"message",n);var a=o(this,"object"),s=o(this,"doLength"),u=o(this,"message"),c=u?u+": ":"",l=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(s&&new r(a,u,l,!0).to.have.property("length"),s||"date"!==p||"date"===h)if("number"===h||!s&&"number"!==p)if(s||"date"===p||"number"===p)d=!1;else{errorMessage=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date"}else errorMessage=c+"the argument to above must be a number";else errorMessage=c+"the argument to above must be a date";if(d)throw new i(errorMessage,void 0,l);if(s){var f=a.length;this.assert(f>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,f)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function f(e,n){n&&o(this,"message",n);var a=o(this,"object"),s=o(this,"doLength"),u=o(this,"message"),c=u?u+": ":"",l=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(s&&new r(a,u,l,!0).to.have.property("length"),s||"date"!==p||"date"===h)if("number"===h||!s&&"number"!==p)if(s||"date"===p||"number"===p)d=!1;else{errorMessage=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date"}else errorMessage=c+"the argument to least must be a number";else errorMessage=c+"the argument to least must be a date";if(d)throw new i(errorMessage,void 0,l);if(s){var f=a.length;this.assert(f>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,f)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function m(e,n){n&&o(this,"message",n);var a=o(this,"object"),s=o(this,"doLength"),u=o(this,"message"),c=u?u+": ":"",l=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(s&&new r(a,u,l,!0).to.have.property("length"),s||"date"!==p||"date"===h)if("number"===h||!s&&"number"!==p)if(s||"date"===p||"number"===p)d=!1;else{errorMessage=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date"}else errorMessage=c+"the argument to below must be a number";else errorMessage=c+"the argument to below must be a date";if(d)throw new i(errorMessage,void 0,l);if(s){var f=a.length;this.assert(f<e,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,f)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function g(e,n){n&&o(this,"message",n);var a=o(this,"object"),s=o(this,"doLength"),u=o(this,"message"),c=u?u+": ":"",l=o(this,"ssfi"),p=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(s&&new r(a,u,l,!0).to.have.property("length"),s||"date"!==p||"date"===h)if("number"===h||!s&&"number"!==p)if(s||"date"===p||"number"===p)d=!1;else{errorMessage=c+"expected "+("string"===p?"'"+a+"'":a)+" to be a number or a date"}else errorMessage=c+"the argument to most must be a number";else errorMessage=c+"the argument to most must be a date";if(d)throw new i(errorMessage,void 0,l);if(s){var f=a.length;this.assert(f<=e,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,f)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function v(e,r){r&&o(this,"message",r);var n=o(this,"object"),a=o(this,"ssfi"),s=o(this,"message");try{var u=n instanceof e}catch(r){if(r instanceof TypeError)throw new i((s=s?s+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,a);throw r}var c=t.getName(e);null===c&&(c="an unnamed constructor"),this.assert(u,"expected #{this} to be an instance of "+c,"expected #{this} to not be an instance of "+c)}function y(e,r,n){n&&o(this,"message",n);var a=o(this,"nested"),s=o(this,"own"),u=o(this,"message"),c=o(this,"object"),l=o(this,"ssfi");if(a&&s)throw new i((u=u?u+": ":"")+'The "nested" and "own" flags cannot be combined.',void 0,l);if(null===c||void 0===c)throw new i((u=u?u+": ":"")+"Target cannot be null or undefined.",void 0,l);var p,h=o(this,"deep"),d=o(this,"negate"),f=a?t.getPathInfo(c,e):null,m=a?f.value:c[e],g="";h&&(g+="deep "),s&&(g+="own "),a&&(g+="nested "),g+="property ",p=s?Object.prototype.hasOwnProperty.call(c,e):a?f.exists:t.hasProperty(c,e),d&&1!==arguments.length||this.assert(p,"expected #{this} to have "+g+t.inspect(e),"expected #{this} to not have "+g+t.inspect(e)),arguments.length>1&&this.assert(p&&(h?t.eql(r,m):r===m),"expected #{this} to have "+g+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+g+t.inspect(e)+" of #{act}",r,m),o(this,"object",m)}function b(e,t,r){o(this,"own",!0),y.apply(this,arguments)}function x(e,r,n){"string"==typeof r&&(n=r,r=null),n&&o(this,"message",n);var i=o(this,"object"),a=Object.getOwnPropertyDescriptor(Object(i),e);a&&r?this.assert(t.eql(r,a),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(r)+", got "+t.inspect(a),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(r),r,a,!0):this.assert(a,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",a)}function w(){o(this,"doLength",!0)}function E(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new r(n,i,a,!0).to.have.property("length");var s=n.length;this.assert(s==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,s)}function C(e,t){t&&o(this,"message",t);var r=o(this,"object");this.assert(e.exec(r),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function S(e){var r,a=o(this,"object"),s=t.type(a),u=t.type(e),c=o(this,"ssfi"),l=o(this,"deep"),p="",h=!0,d=o(this,"message"),f=(d=d?d+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===s||"Set"===s)p=l?"deeply ":"",m=[],a.forEach(function(e,t){m.push(t)}),"Array"!==u&&(e=Array.prototype.slice.call(arguments));else{switch(m=t.getOwnEnumerableProperties(a),u){case"Array":if(arguments.length>1)throw new i(f,void 0,c);break;case"Object":if(arguments.length>1)throw new i(f,void 0,c);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map(function(e){return"symbol"===(void 0===e?"undefined":n(e))?e:String(e)})}if(!e.length)throw new i(d+"keys required",void 0,c);var m,g=e.length,v=o(this,"any"),y=o(this,"all"),b=e;if(v||y||(y=!0),v&&(h=b.some(function(e){return m.some(function(r){return l?t.eql(e,r):e===r})})),y&&(h=b.every(function(e){return m.some(function(r){return l?t.eql(e,r):e===r})}),o(this,"contains")||(h=h&&e.length==m.length)),g>1){var x=(e=e.map(function(e){return t.inspect(e)})).pop();y&&(r=e.join(", ")+", and "+x),v&&(r=e.join(", ")+", or "+x)}else r=t.inspect(e[0]);r=(g>1?"keys ":"key ")+r,r=(o(this,"contains")?"contain ":"have ")+r,this.assert(h,"expected #{this} to "+p+r,"expected #{this} to not "+p+r,b.slice(0).sort(t.compareByInspect),m.sort(t.compareByInspect),!0)}function k(e,n,i){i&&o(this,"message",i);var a,s=o(this,"object"),u=o(this,"ssfi"),c=o(this,"message"),l=o(this,"negate")||!1;new r(s,c,u,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(n=e,e=null);try{s()}catch(e){a=e}var p=void 0===e&&void 0===n,h=Boolean(e&&n),d=!1,f=!1;if(p||!p&&!l){var m="an error";e instanceof Error?m="#{exp}":e&&(m=t.checkError.getConstructorName(e)),this.assert(a,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),a instanceof Error?a.toString():"string"==typeof a?a:a&&t.checkError.getConstructorName(a))}if(e&&a){if(e instanceof Error)t.checkError.compatibleInstance(a,e)===l&&(h&&l?d=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a&&!l?" but #{act} was thrown":""),e.toString(),a.toString()));t.checkError.compatibleConstructor(a,e)===l&&(h&&l?d=!0:this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),a instanceof Error?a.toString():a&&t.checkError.getConstructorName(a)))}if(a&&void 0!==n&&null!==n){var g="including";n instanceof RegExp&&(g="matching"),t.checkError.compatibleMessage(a,n)===l&&(h&&l?f=!0:this.assert(l,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",n,t.checkError.getMessage(a)))}d&&f&&this.assert(l,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),a instanceof Error?a.toString():a&&t.checkError.getConstructorName(a)),o(this,"object",a)}function _(e,r){r&&o(this,"message",r);var n=o(this,"object"),i=o(this,"itself"),a="function"!=typeof n||i?n[e]:n.prototype[e];this.assert("function"==typeof a,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function D(e,r){r&&o(this,"message",r);var n=e(o(this,"object"));this.assert(n,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),n)}function A(e,t,n){n&&o(this,"message",n);var a=o(this,"object"),s=o(this,"message"),u=o(this,"ssfi");if(new r(a,s,u,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new i((s=s?s+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,u);this.assert(Math.abs(a-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function P(e,t,n){n&&o(this,"message",n);var i,a=o(this,"object"),s=o(this,"message"),u=o(this,"ssfi");new r(a,s,u,!0).is.a("function"),t?(new r(e,s,u,!0).to.have.property(t),i=e[t]):(new r(e,s,u,!0).is.a("function"),i=e()),a();var c=void 0===t||null===t?e():e[t],l=void 0===t||null===t?i:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",c),o(this,"deltaBehavior","change"),o(this,"realDelta",c!==i),this.assert(i!==c,"expected "+l+" to change","expected "+l+" to not change")}function F(e,t,n){n&&o(this,"message",n);var i,a=o(this,"object"),s=o(this,"message"),u=o(this,"ssfi");new r(a,s,u,!0).is.a("function"),t?(new r(e,s,u,!0).to.have.property(t),i=e[t]):(new r(e,s,u,!0).is.a("function"),i=e()),new r(i,s,u,!0).is.a("number"),a();var c=void 0===t||null===t?e():e[t],l=void 0===t||null===t?i:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",c),o(this,"deltaBehavior","increase"),o(this,"realDelta",c-i),this.assert(c-i>0,"expected "+l+" to increase","expected "+l+" to not increase")}function T(e,t,n){n&&o(this,"message",n);var i,a=o(this,"object"),s=o(this,"message"),u=o(this,"ssfi");new r(a,s,u,!0).is.a("function"),t?(new r(e,s,u,!0).to.have.property(t),i=e[t]):(new r(e,s,u,!0).is.a("function"),i=e()),new r(i,s,u,!0).is.a("number"),a();var c=void 0===t||null===t?e():e[t],l=void 0===t||null===t?i:"."+t;o(this,"deltaMsgObj",l),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",c),o(this,"deltaBehavior","decrease"),o(this,"realDelta",i-c),this.assert(c-i<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does"].forEach(function(e){r.addProperty(e)}),r.addProperty("not",function(){o(this,"negate",!0)}),r.addProperty("deep",function(){o(this,"deep",!0)}),r.addProperty("nested",function(){o(this,"nested",!0)}),r.addProperty("own",function(){o(this,"own",!0)}),r.addProperty("ordered",function(){o(this,"ordered",!0)}),r.addProperty("any",function(){o(this,"any",!0),o(this,"all",!1)}),r.addProperty("all",function(){o(this,"all",!0),o(this,"any",!1)}),r.addChainableMethod("an",a),r.addChainableMethod("a",a),r.addChainableMethod("include",c,u),r.addChainableMethod("contain",c,u),r.addChainableMethod("contains",c,u),r.addChainableMethod("includes",c,u),r.addProperty("ok",function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),r.addProperty("true",function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))}),r.addProperty("false",function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))}),r.addProperty("null",function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),r.addProperty("undefined",function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),r.addProperty("NaN",function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),r.addProperty("exist",function(){var e=o(this,"object");this.assert(null!==e&&void 0!==e,"expected #{this} to exist","expected #{this} to not exist")}),r.addProperty("empty",function(){var e,r=o(this,"object"),n=o(this,"ssfi"),a=o(this,"message");switch(a=a?a+": ":"",t.type(r).toLowerCase()){case"array":case"string":e=r.length;break;case"map":case"set":e=r.size;break;case"weakmap":case"weakset":throw new i(a+".empty was passed a weak collection",void 0,n);case"function":var s=a+".empty was passed a function "+t.getName(r);throw new i(s.trim(),void 0,n);default:if(r!==Object(r))throw new i(a+".empty was passed non-string primitive "+t.inspect(r),void 0,n);e=Object.keys(r).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")}),r.addProperty("arguments",l),r.addProperty("Arguments",l),r.addMethod("equal",p),r.addMethod("equals",p),r.addMethod("eq",p),r.addMethod("eql",h),r.addMethod("eqls",h),r.addMethod("above",d),r.addMethod("gt",d),r.addMethod("greaterThan",d),r.addMethod("least",f),r.addMethod("gte",f),r.addMethod("below",m),r.addMethod("lt",m),r.addMethod("lessThan",m),r.addMethod("most",g),r.addMethod("lte",g),r.addMethod("within",function(e,n,a){a&&o(this,"message",a);var s=o(this,"object"),u=o(this,"doLength"),c=o(this,"message"),l=c?c+": ":"",p=o(this,"ssfi"),h=t.type(s).toLowerCase(),d=t.type(e).toLowerCase(),f=t.type(n).toLowerCase(),m=!0,g="date"===d&&"date"===f?e.toUTCString()+".."+n.toUTCString():e+".."+n;if(u&&new r(s,c,p,!0).to.have.property("length"),u||"date"!==h||"date"===d&&"date"===f)if("number"===d&&"number"===f||!u&&"number"!==h)if(u||"date"===h||"number"===h)m=!1;else{errorMessage=l+"expected "+("string"===h?"'"+s+"'":s)+" to be a number or a date"}else errorMessage=l+"the arguments to within must be numbers";else errorMessage=l+"the arguments to within must be dates";if(m)throw new i(errorMessage,void 0,p);if(u){var v=s.length;this.assert(v>=e&&v<=n,"expected #{this} to have a length within "+g,"expected #{this} to not have a length within "+g)}else this.assert(s>=e&&s<=n,"expected #{this} to be within "+g,"expected #{this} to not be within "+g)}),r.addMethod("instanceof",v),r.addMethod("instanceOf",v),r.addMethod("property",y),r.addMethod("ownProperty",b),r.addMethod("haveOwnProperty",b),r.addMethod("ownPropertyDescriptor",x),r.addMethod("haveOwnPropertyDescriptor",x),r.addChainableMethod("length",E,w),r.addChainableMethod("lengthOf",E,w),r.addMethod("match",C),r.addMethod("matches",C),r.addMethod("string",function(e,n){n&&o(this,"message",n);var i=o(this,"object"),a=o(this,"message"),s=o(this,"ssfi");new r(i,a,s,!0).is.a("string"),this.assert(~i.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),r.addMethod("keys",S),r.addMethod("key",S),r.addMethod("throw",k),r.addMethod("throws",k),r.addMethod("Throw",k),r.addMethod("respondTo",_),r.addMethod("respondsTo",_),r.addProperty("itself",function(){o(this,"itself",!0)}),r.addMethod("satisfy",D),r.addMethod("satisfies",D),r.addMethod("closeTo",A),r.addMethod("approximately",A),r.addMethod("members",function(e,n){n&&o(this,"message",n);var i=o(this,"object"),a=o(this,"message"),s=o(this,"ssfi");new r(i,a,s,!0).to.be.an("array"),new r(e,a,s,!0).to.be.an("array");var u,c,l,p=o(this,"contains"),h=o(this,"ordered");p?(c="expected #{this} to be "+(u=h?"an ordered superset":"a superset")+" of #{exp}",l="expected #{this} to not be "+u+" of #{exp}"):(c="expected #{this} to have the same "+(u=h?"ordered members":"members")+" as #{exp}",l="expected #{this} to not have the same "+u+" as #{exp}");var d=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,r,n,i){if(!n){if(e.length!==t.length)return!1;t=t.slice()}return e.every(function(e,o){if(i)return r?r(e,t[o]):e===t[o];if(!r){var a=t.indexOf(e);return-1!==a&&(n||t.splice(a,1),!0)}return t.some(function(i,o){return!!r(e,i)&&(n||t.splice(o,1),!0)})})}(e,i,d,p,h),c,l,e,i,!0)}),r.addMethod("oneOf",function(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),a=o(this,"ssfi");new r(e,i,a,!0).to.be.an("array"),this.assert(e.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,n)}),r.addMethod("change",P),r.addMethod("changes",P),r.addMethod("increase",F),r.addMethod("increases",F),r.addMethod("decrease",T),r.addMethod("decreases",T),r.addMethod("by",function(e,t){t&&o(this,"message",t);var r,n=o(this,"deltaMsgObj"),i=o(this,"initialDeltaValue"),a=o(this,"finalDeltaValue"),s=o(this,"deltaBehavior"),u=o(this,"realDelta");r="change"===s?Math.abs(a-i)===Math.abs(e):u===Math.abs(e),this.assert(r,"expected "+n+" to "+s+" by "+e,"expected "+n+" to not "+s+" by "+e)}),r.addProperty("extensible",function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")}),r.addProperty("sealed",function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")}),r.addProperty("frozen",function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")}),r.addProperty("finite",function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")})}},function(e,t,r){"use strict";
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t){e.expect=function(t,r){return new e.Assertion(t,r)},e.expect.fail=function(t,r,n,i){throw n=n||"expect.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:i},e.expect.fail)}}},function(e,t,r){"use strict";
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t){var r=e.Assertion;function n(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)},configurable:!0});var t={fail:function(r,n,i,o){throw i=i||"should.fail()",new e.AssertionError(i,{actual:r,expected:n,operator:o},t.fail)},equal:function(e,t,n){new r(e,n).to.equal(t)},Throw:function(e,t,n,i){new r(e,i).to.Throw(t,n)},exist:function(e,t){new r(e,t).to.exist},not:{}};return t.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},t.not.Throw=function(e,t,n,i){new r(e,i).to.not.Throw(t,n)},t.not.exist=function(e,t){new r(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=n,e.Should=n}},function(e,t,r){"use strict";
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var r=e.Assertion,n=t.flag,i=e.assert=function(t,n){new r(null,null,e.assert,!0).assert(t,n,"[ negation message unavailable ]")};
/*!
   * Module export.
   */i.fail=function(t,r,n,o){throw n=n||"assert.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:o},i.fail)},i.isOk=function(e,t){new r(e,t,i.isOk,!0).is.ok},i.isNotOk=function(e,t){new r(e,t,i.isNotOk,!0).is.not.ok},i.equal=function(e,t,o){var a=new r(e,o,i.equal,!0);a.assert(t==n(a,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},i.notEqual=function(e,t,o){var a=new r(e,o,i.notEqual,!0);a.assert(t!=n(a,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},i.strictEqual=function(e,t,n){new r(e,n,i.strictEqual,!0).to.equal(t)},i.notStrictEqual=function(e,t,n){new r(e,n,i.notStrictEqual,!0).to.not.equal(t)},i.deepEqual=i.deepStrictEqual=function(e,t,n){new r(e,n,i.deepEqual,!0).to.eql(t)},i.notDeepEqual=function(e,t,n){new r(e,n,i.notDeepEqual,!0).to.not.eql(t)},i.isAbove=function(e,t,n){new r(e,n,i.isAbove,!0).to.be.above(t)},i.isAtLeast=function(e,t,n){new r(e,n,i.isAtLeast,!0).to.be.least(t)},i.isBelow=function(e,t,n){new r(e,n,i.isBelow,!0).to.be.below(t)},i.isAtMost=function(e,t,n){new r(e,n,i.isAtMost,!0).to.be.most(t)},i.isTrue=function(e,t){new r(e,t,i.isTrue,!0).is.true},i.isNotTrue=function(e,t){new r(e,t,i.isNotTrue,!0).to.not.equal(!0)},i.isFalse=function(e,t){new r(e,t,i.isFalse,!0).is.false},i.isNotFalse=function(e,t){new r(e,t,i.isNotFalse,!0).to.not.equal(!1)},i.isNull=function(e,t){new r(e,t,i.isNull,!0).to.equal(null)},i.isNotNull=function(e,t){new r(e,t,i.isNotNull,!0).to.not.equal(null)},i.isNaN=function(e,t){new r(e,t,i.isNaN,!0).to.be.NaN},i.isNotNaN=function(e,t){new r(e,t,i.isNotNaN,!0).not.to.be.NaN},i.exists=function(e,t){new r(e,t,i.exists,!0).to.exist},i.notExists=function(e,t){new r(e,t,i.notExists,!0).to.not.exist},i.isUndefined=function(e,t){new r(e,t,i.isUndefined,!0).to.equal(void 0)},i.isDefined=function(e,t){new r(e,t,i.isDefined,!0).to.not.equal(void 0)},i.isFunction=function(e,t){new r(e,t,i.isFunction,!0).to.be.a("function")},i.isNotFunction=function(e,t){new r(e,t,i.isNotFunction,!0).to.not.be.a("function")},i.isObject=function(e,t){new r(e,t,i.isObject,!0).to.be.a("object")},i.isNotObject=function(e,t){new r(e,t,i.isNotObject,!0).to.not.be.a("object")},i.isArray=function(e,t){new r(e,t,i.isArray,!0).to.be.an("array")},i.isNotArray=function(e,t){new r(e,t,i.isNotArray,!0).to.not.be.an("array")},i.isString=function(e,t){new r(e,t,i.isString,!0).to.be.a("string")},i.isNotString=function(e,t){new r(e,t,i.isNotString,!0).to.not.be.a("string")},i.isNumber=function(e,t){new r(e,t,i.isNumber,!0).to.be.a("number")},i.isNotNumber=function(e,t){new r(e,t,i.isNotNumber,!0).to.not.be.a("number")},i.isFinite=function(e,t){new r(e,t,i.isFinite,!0).to.be.finite},i.isBoolean=function(e,t){new r(e,t,i.isBoolean,!0).to.be.a("boolean")},i.isNotBoolean=function(e,t){new r(e,t,i.isNotBoolean,!0).to.not.be.a("boolean")},i.typeOf=function(e,t,n){new r(e,n,i.typeOf,!0).to.be.a(t)},i.notTypeOf=function(e,t,n){new r(e,n,i.notTypeOf,!0).to.not.be.a(t)},i.instanceOf=function(e,t,n){new r(e,n,i.instanceOf,!0).to.be.instanceOf(t)},i.notInstanceOf=function(e,t,n){new r(e,n,i.notInstanceOf,!0).to.not.be.instanceOf(t)},i.include=function(e,t,n){new r(e,n,i.include,!0).include(t)},i.notInclude=function(e,t,n){new r(e,n,i.notInclude,!0).not.include(t)},i.deepInclude=function(e,t,n){new r(e,n,i.deepInclude,!0).deep.include(t)},i.notDeepInclude=function(e,t,n){new r(e,n,i.notDeepInclude,!0).not.deep.include(t)},i.nestedInclude=function(e,t,n){new r(e,n,i.nestedInclude,!0).nested.include(t)},i.notNestedInclude=function(e,t,n){new r(e,n,i.notNestedInclude,!0).not.nested.include(t)},i.deepNestedInclude=function(e,t,n){new r(e,n,i.deepNestedInclude,!0).deep.nested.include(t)},i.notDeepNestedInclude=function(e,t,n){new r(e,n,i.notDeepNestedInclude,!0).not.deep.nested.include(t)},i.ownInclude=function(e,t,n){new r(e,n,i.ownInclude,!0).own.include(t)},i.notOwnInclude=function(e,t,n){new r(e,n,i.notOwnInclude,!0).not.own.include(t)},i.deepOwnInclude=function(e,t,n){new r(e,n,i.deepOwnInclude,!0).deep.own.include(t)},i.notDeepOwnInclude=function(e,t,n){new r(e,n,i.notDeepOwnInclude,!0).not.deep.own.include(t)},i.match=function(e,t,n){new r(e,n,i.match,!0).to.match(t)},i.notMatch=function(e,t,n){new r(e,n,i.notMatch,!0).to.not.match(t)},i.property=function(e,t,n){new r(e,n,i.property,!0).to.have.property(t)},i.notProperty=function(e,t,n){new r(e,n,i.notProperty,!0).to.not.have.property(t)},i.propertyVal=function(e,t,n,o){new r(e,o,i.propertyVal,!0).to.have.property(t,n)},i.notPropertyVal=function(e,t,n,o){new r(e,o,i.notPropertyVal,!0).to.not.have.property(t,n)},i.deepPropertyVal=function(e,t,n,o){new r(e,o,i.deepPropertyVal,!0).to.have.deep.property(t,n)},i.notDeepPropertyVal=function(e,t,n,o){new r(e,o,i.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},i.ownProperty=function(e,t,n){new r(e,n,i.ownProperty,!0).to.have.own.property(t)},i.notOwnProperty=function(e,t,n){new r(e,n,i.notOwnProperty,!0).to.not.have.own.property(t)},i.ownPropertyVal=function(e,t,n,o){new r(e,o,i.ownPropertyVal,!0).to.have.own.property(t,n)},i.notOwnPropertyVal=function(e,t,n,o){new r(e,o,i.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},i.deepOwnPropertyVal=function(e,t,n,o){new r(e,o,i.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},i.notDeepOwnPropertyVal=function(e,t,n,o){new r(e,o,i.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},i.nestedProperty=function(e,t,n){new r(e,n,i.nestedProperty,!0).to.have.nested.property(t)},i.notNestedProperty=function(e,t,n){new r(e,n,i.notNestedProperty,!0).to.not.have.nested.property(t)},i.nestedPropertyVal=function(e,t,n,o){new r(e,o,i.nestedPropertyVal,!0).to.have.nested.property(t,n)},i.notNestedPropertyVal=function(e,t,n,o){new r(e,o,i.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},i.deepNestedPropertyVal=function(e,t,n,o){new r(e,o,i.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},i.notDeepNestedPropertyVal=function(e,t,n,o){new r(e,o,i.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},i.lengthOf=function(e,t,n){new r(e,n,i.lengthOf,!0).to.have.lengthOf(t)},i.hasAnyKeys=function(e,t,n){new r(e,n,i.hasAnyKeys,!0).to.have.any.keys(t)},i.hasAllKeys=function(e,t,n){new r(e,n,i.hasAllKeys,!0).to.have.all.keys(t)},i.containsAllKeys=function(e,t,n){new r(e,n,i.containsAllKeys,!0).to.contain.all.keys(t)},i.doesNotHaveAnyKeys=function(e,t,n){new r(e,n,i.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},i.doesNotHaveAllKeys=function(e,t,n){new r(e,n,i.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},i.hasAnyDeepKeys=function(e,t,n){new r(e,n,i.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},i.hasAllDeepKeys=function(e,t,n){new r(e,n,i.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},i.containsAllDeepKeys=function(e,t,n){new r(e,n,i.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},i.doesNotHaveAnyDeepKeys=function(e,t,n){new r(e,n,i.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},i.doesNotHaveAllDeepKeys=function(e,t,n){new r(e,n,i.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},i.throws=function(e,t,o,a){("string"==typeof t||t instanceof RegExp)&&(o=t,t=null);var s=new r(e,a,i.throws,!0).to.throw(t,o);return n(s,"object")},i.doesNotThrow=function(e,t,n,o){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new r(e,o,i.doesNotThrow,!0).to.not.throw(t,n)},i.operator=function(o,a,s,u){var c;switch(a){case"==":c=o==s;break;case"===":c=o===s;break;case">":c=o>s;break;case">=":c=o>=s;break;case"<":c=o<s;break;case"<=":c=o<=s;break;case"!=":c=o!=s;break;case"!==":c=o!==s;break;default:throw u=u?u+": ":u,new e.AssertionError(u+'Invalid operator "'+a+'"',void 0,i.operator)}var l=new r(c,u,i.operator,!0);l.assert(!0===n(l,"object"),"expected "+t.inspect(o)+" to be "+a+" "+t.inspect(s),"expected "+t.inspect(o)+" to not be "+a+" "+t.inspect(s))},i.closeTo=function(e,t,n,o){new r(e,o,i.closeTo,!0).to.be.closeTo(t,n)},i.approximately=function(e,t,n,o){new r(e,o,i.approximately,!0).to.be.approximately(t,n)},i.sameMembers=function(e,t,n){new r(e,n,i.sameMembers,!0).to.have.same.members(t)},i.notSameMembers=function(e,t,n){new r(e,n,i.notSameMembers,!0).to.not.have.same.members(t)},i.sameDeepMembers=function(e,t,n){new r(e,n,i.sameDeepMembers,!0).to.have.same.deep.members(t)},i.notSameDeepMembers=function(e,t,n){new r(e,n,i.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},i.sameOrderedMembers=function(e,t,n){new r(e,n,i.sameOrderedMembers,!0).to.have.same.ordered.members(t)},i.notSameOrderedMembers=function(e,t,n){new r(e,n,i.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},i.sameDeepOrderedMembers=function(e,t,n){new r(e,n,i.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},i.notSameDeepOrderedMembers=function(e,t,n){new r(e,n,i.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},i.includeMembers=function(e,t,n){new r(e,n,i.includeMembers,!0).to.include.members(t)},i.notIncludeMembers=function(e,t,n){new r(e,n,i.notIncludeMembers,!0).to.not.include.members(t)},i.includeDeepMembers=function(e,t,n){new r(e,n,i.includeDeepMembers,!0).to.include.deep.members(t)},i.notIncludeDeepMembers=function(e,t,n){new r(e,n,i.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},i.includeOrderedMembers=function(e,t,n){new r(e,n,i.includeOrderedMembers,!0).to.include.ordered.members(t)},i.notIncludeOrderedMembers=function(e,t,n){new r(e,n,i.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},i.includeDeepOrderedMembers=function(e,t,n){new r(e,n,i.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},i.notIncludeDeepOrderedMembers=function(e,t,n){new r(e,n,i.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},i.oneOf=function(e,t,n){new r(e,n,i.oneOf,!0).to.be.oneOf(t)},i.changes=function(e,t,n,o){3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.changes,!0).to.change(t,n)},i.changesBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.changesBy,!0).to.change(t,n).by(o)},i.doesNotChange=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.doesNotChange,!0).to.not.change(t,n)},i.changesButNotBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.changesButNotBy,!0).to.change(t,n).but.not.by(o)},i.increases=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.increases,!0).to.increase(t,n)},i.increasesBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.increasesBy,!0).to.increase(t,n).by(o)},i.doesNotIncrease=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.doesNotIncrease,!0).to.not.increase(t,n)},i.increasesButNotBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.increasesButNotBy,!0).to.increase(t,n).but.not.by(o)},i.decreases=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.decreases,!0).to.decrease(t,n)},i.decreasesBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.decreasesBy,!0).to.decrease(t,n).by(o)},i.doesNotDecrease=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new r(e,o,i.doesNotDecrease,!0).to.not.decrease(t,n)},i.doesNotDecreaseBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);return new r(e,a,i.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(o)},i.decreasesButNotBy=function(e,t,n,o,a){if(4===arguments.length&&"function"==typeof t){var s=o;o=n,a=s}else 3===arguments.length&&(o=n,n=null);new r(e,a,i.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(o)},
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */
i.ifError=function(e){if(e)throw e},i.isExtensible=function(e,t){new r(e,t,i.isExtensible,!0).to.be.extensible},i.isNotExtensible=function(e,t){new r(e,t,i.isNotExtensible,!0).to.not.be.extensible},i.isSealed=function(e,t){new r(e,t,i.isSealed,!0).to.be.sealed},i.isNotSealed=function(e,t){new r(e,t,i.isNotSealed,!0).to.not.be.sealed},i.isFrozen=function(e,t){new r(e,t,i.isFrozen,!0).to.be.frozen},i.isNotFrozen=function(e,t){new r(e,t,i.isNotFrozen,!0).to.not.be.frozen},i.isEmpty=function(e,t){new r(e,t,i.isEmpty,!0).to.be.empty},i.isNotEmpty=function(e,t){new r(e,t,i.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,r){return i[r]=i[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__,require,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(require){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var isNode=void 0!==module&&!!module.exports,allowedResultTypes=["value","path","parent","parentProperty","all"],vm=isNode?__webpack_require__(128):{runInNewContext:function runInNewContext(expr,context){return eval(Object.keys(context).reduce(function(e,t){return"var "+t+"="+JSON.stringify(context[t]).replace(/\u2028|\u2029/g,function(e){return"\\u202"+("\u2028"===e?"8":"9")})+";"+e},expr))}};function push(e,t){return(e=e.slice()).push(t),e}function unshift(e,t){return(t=t.slice()).unshift(e),t}function JSONPath(e,t,r,n){if(!(this instanceof JSONPath))try{return new JSONPath(e,t,r,n)}catch(e){if(!e.avoidNew)throw e;return e.value}var i=(e=e||{}).hasOwnProperty("json")&&e.hasOwnProperty("path");if(this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType&&e.resultType.toLowerCase()||"value",this.flatten=e.flatten||!1,this.wrap=!e.hasOwnProperty("wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||null,this.otherTypeCallback=e.otherTypeCallback||function(){throw"You must supply an otherTypeCallback callback option with the @other() operator."},!1!==e.autostart){var o=this.evaluate({path:i?e.path:t,json:i?e.json:r});if(!o||"object"!==(void 0===o?"undefined":_typeof(o)))throw{avoidNew:!0,value:o,message:"JSONPath should not be called with 'new' (it prevents return of (unwrapped) scalar values)"};return o}}JSONPath.prototype.evaluate=function(e,t,r,n){var i=this,o=this.flatten,a=this.wrap,s=this.parent,u=this.parentProperty;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===(void 0===e?"undefined":_typeof(e))){if(!e.path)throw"You must supply a 'path' property when providing an object argument to JSONPath.evaluate().";t=e.hasOwnProperty("json")?e.json:t,o=e.hasOwnProperty("flatten")?e.flatten:o,this.currResultType=e.hasOwnProperty("resultType")?e.resultType:this.currResultType,this.currSandbox=e.hasOwnProperty("sandbox")?e.sandbox:this.currSandbox,a=e.hasOwnProperty("wrap")?e.wrap:a,this.currPreventEval=e.hasOwnProperty("preventEval")?e.preventEval:this.currPreventEval,r=e.hasOwnProperty("callback")?e.callback:r,this.currOtherTypeCallback=e.hasOwnProperty("otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,s=e.hasOwnProperty("parent")?e.parent:s,u=e.hasOwnProperty("parentProperty")?e.parentProperty:u,e=e.path}if(s=s||null,u=u||null,Array.isArray(e)&&(e=JSONPath.toPathString(e)),e&&t&&-1!==allowedResultTypes.indexOf(this.currResultType)){this._obj=t;var c=JSONPath.toPathArray(e);"$"===c[0]&&c.length>1&&c.shift();var l=this._trace(c,t,["$"],s,u,r);return(l=l.filter(function(e){return e&&!e.isParentSelector})).length?1!==l.length||a||Array.isArray(l[0].value)?l.reduce(function(e,t){var r=i._getPreferredOutput(t);return o&&Array.isArray(r)?e=e.concat(r):e.push(r),e},[]):this._getPreferredOutput(l[0]):a?[]:void 0}},JSONPath.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":return e.path=JSONPath.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return JSONPath.toPathString(e[t])}},JSONPath.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path=JSONPath.toPathString(e.path),t(n,r,e)}},JSONPath.prototype._trace=function(e,t,r,n,i,o){var a,s=this;if(!e.length)return a={path:r,value:t,parent:n,parentProperty:i},this._handleCallback(a,o,"value"),a;var u=e[0],c=e.slice(1),l=[];function p(e){l=l.concat(e)}if(t&&t.hasOwnProperty(u))p(this._trace(c,t[u],push(r,u),t,u,o));else if("*"===u)this._walk(u,c,t,r,n,i,o,function(e,t,r,n,i,o,a,u){p(s._trace(unshift(e,r),n,i,o,a,u))});else if(".."===u)p(this._trace(c,t,r,n,i,o)),this._walk(u,c,t,r,n,i,o,function(e,t,r,n,i,o,a,u){"object"===_typeof(n[e])&&p(s._trace(unshift(t,r),n[e],push(i,e),n,e,u))});else if("("===u[0]){if(this.currPreventEval)throw"Eval [(expr)] prevented in JSONPath expression.";p(this._trace(unshift(this._eval(u,t,r[r.length-1],r.slice(0,-1),n,i),c),t,r,n,i,o))}else{if("^"===u)return r.length?{path:r.slice(0,-1),expr:c,isParentSelector:!0}:[];if("~"===u)return a={path:push(r,u),value:i,parent:n,parentProperty:null},this._handleCallback(a,o,"property"),a;if("$"===u)p(this._trace(c,t,r,null,null,o));else if(0===u.indexOf("?(")){if(this.currPreventEval)throw"Eval [?(expr)] prevented in JSONPath expression.";this._walk(u,c,t,r,n,i,o,function(e,t,r,n,i,o,a,u){s._eval(t.replace(/^\?\((.*?)\)$/,"$1"),n[e],e,i,o,a)&&p(s._trace(unshift(e,r),n,i,o,a,u))})}else if(u.indexOf(",")>-1){var h,d;for(h=u.split(","),d=0;d<h.length;d++)p(this._trace(unshift(h[d],c),t,r,n,i,o))}else if("@"===u[0]){var f=!1,m=u.slice(1,-2);switch(m){case"boolean":case"string":case"undefined":case"function":(void 0===t?"undefined":_typeof(t))===m&&(f=!0);break;case"number":(void 0===t?"undefined":_typeof(t))===m&&isFinite(t)&&(f=!0);break;case"nonFinite":"number"!=typeof t||isFinite(t)||(f=!0);break;case"object":t&&(void 0===t?"undefined":_typeof(t))===m&&(f=!0);break;case"array":Array.isArray(t)&&(f=!0);break;case"other":f=this.currOtherTypeCallback(t,r,n,i);break;case"integer":t!==+t||!isFinite(t)||t%1||(f=!0);break;case"null":null===t&&(f=!0)}if(f)return a={path:r,value:t,parent:n,parentProperty:i},this._handleCallback(a,o,"value"),a}else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(u)&&p(this._slice(u,c,t,r,n,i,o))}return l.reduce(function(e,r){return e.concat(r.isParentSelector?s._trace(r.expr,t,r.path,n,i,o):r)},[])},JSONPath.prototype._walk=function(e,t,r,n,i,o,a,s){var u,c,l;if(Array.isArray(r))for(u=0,c=r.length;u<c;u++)s(u,e,t,r,n,i,o,a);else if("object"===(void 0===r?"undefined":_typeof(r)))for(l in r)r.hasOwnProperty(l)&&s(l,e,t,r,n,i,o,a)},JSONPath.prototype._slice=function(e,t,r,n,i,o,a){if(Array.isArray(r)){var s,u=r.length,c=e.split(":"),l=c[0]&&parseInt(c[0],10)||0,p=c[1]&&parseInt(c[1],10)||u,h=c[2]&&parseInt(c[2],10)||1;l=l<0?Math.max(0,l+u):Math.min(u,l),p=p<0?Math.max(0,p+u):Math.min(u,p);var d=[];for(s=l;s<p;s+=h)d=d.concat(this._trace(unshift(s,t),r,n,i,o,a));return d}},JSONPath.prototype._eval=function(e,t,r,n,i,o){if(!this._obj||!t)return!1;e.indexOf("@parentProperty")>-1&&(this.currSandbox._$_parentProperty=o,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.indexOf("@parent")>-1&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/g,"_$_parent")),e.indexOf("@property")>-1&&(this.currSandbox._$_property=r,e=e.replace(/@property/g,"_$_property")),e.indexOf("@path")>-1&&(this.currSandbox._$_path=JSONPath.toPathString(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.indexOf("@")>-1&&(this.currSandbox._$_v=t,e=e.replace(/@/g,"_$_v"));try{return vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},JSONPath.cache={},JSONPath.toPathString=function(e){var t,r,n=e,i="$";for(t=1,r=n.length;t<r;t++)i+=/~|@.*\(\)/.test(n[t])?n[t]:/^[0-9*]+$/.test(n[t])?"["+n[t]+"]":"['"+n[t]+"']";return i},JSONPath.toPathArray=function(e){var t=JSONPath.cache;if(t[e])return t[e];var r=[],n=e.replace(/@(?:null|boolean|number|string|array|object|integer|undefined|nonFinite|function|other)\(\)/g,";$&;").replace(/~/g,";~;").replace(/[\['](\??\(.*?\))[\]']/g,function(e,t){return"[#"+(r.push(t)-1)+"]"}).replace(/\['([^'\]]*)'\]/g,function(e,t){return"['"+t.replace(/\./g,"%@%")+"']"}).replace(/'?\.'?(?![^\[]*\])|\['?/g,";").replace(/%@%/g,".").replace(/(?:;)?(\^+)(?:;)?/g,function(e,t){return";"+t.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?r[t[1]]:e});return t[e]=n,t[e]},JSONPath.eval=function(e,t,r){return JSONPath(r,t,e)},__WEBPACK_AMD_DEFINE_RESULT__=function(){return JSONPath}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(void 0===require?null:require)},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},indexOf=__webpack_require__(129),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),a=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"===(void 0===e?"undefined":_typeof(e))&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},function(e,t,r){"use strict";var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(131),o=r(17).EventEmitter,a=r(30),s=r(141),u=s.timedPromise,c=s.addressToProtocol,l=r(147),p=l.canSend,h=l.canReceive,d=r(148)(),f=r(183),m=r(185),g=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.definition=e;var o=i.getTransport(e.protocol);return n.transport=new o(n.definition),n.options=r,n.options.connectionTimeout||(n.options.connectionTimeout=1e3),n.options.commandTimeout||(n.options.commandTimeout=1e3),n.options.skipPermissions||(n.options.skipPermissions=!1),n.options.skipValidation||(n.options.skipValidation=!1),n.prepareCommands(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),n(t,[{key:"validate",value:function(e,t){var r=this;return d(e,t).catch(function(e){return r.options.skipValidation?(r.protocolError(e),Promise.resolve(t)):Promise.reject(e)})}},{key:"isConnected",value:function(){return this.transport.isConnected()}},{key:"connect",value:function(){var e=this;return u(function(t,r){if(e.isConnected())t(e.definition);else{var n=null,i=function i(o){"runtime"===o.command?(e.transport.removeListener("error",n),e.validate("/runtime/output/runtime",o).then(function(){e.prepareAdapter(o.payload.version),t(e.definition),e.emit("connected",e.definition),e.transport.once("disconnected",function(){e.emit("disconnected",e.definition)})},function(t){e.transport.disconnect(),r(t)})):e.transport.once("runtime",i)};n=function(t){var n=t;t instanceof Error||(n=new Error("Connection to "+e.definition.address+" failed")),e.transport.removeListener("runtime",i),e.transport.disconnect(),r(n)},e.transport.once("runtime",i),e.transport.once("error",n),e.transport.connect()}},this.options.connectionTimeout,"Connection to "+this.definition.address+" timed out")}},{key:"disconnect",value:function(){var e=this;return new Promise(function(t){e.isConnected()?(e.transport.once("disconnected",function(){t(null)}),e.transport.disconnect()):t(null)})}},{key:"observe",value:function(e){return f(this,e)}},{key:"signal",value:function(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}},{key:"protocolError",value:function(e){this.emit("protocolError",e)}},{key:"canSend",value:function(e,t){var r=this;return new Promise(function(n,i){r.options.skipPermissions?n(null):p(e,t,r.definition.capabilities)?n(null):i(new Error("Not permitted to send "+e+":"+t+" messages"))})}},{key:"canReceive",value:function(e,t){var r=this;return new Promise(function(n,i){r.options.skipPermissions?n(null):h(e,t,r.definition.capabilities)?n(null):i(new Error("Not permitted to receive "+e+":"+t+" messages"))})}},{key:"prepareCommands",value:function(){var e=this;this.protocol={},Object.keys(a).forEach(function(t){if(a[t].input){var r={};Object.keys(a[t].input).forEach(function(n){r[n]=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.secret=e.definition.secret,e.validate("/"+t+"/"+a[t].input[n].id,{protocol:t,command:n,payload:r}).then(function(){return new Promise(function(t,r){e.adapter||r(new Error("FBP client must be connected to the runtime before sending commands")),t(null)})}).then(function(){return e.canSend(t,n)}).then(function(){return e.adapter.send(t,n,r)})}}),e.protocol[t]=r}}),this.protocol.graph.send=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.name||t.properties.id,i=t.properties,o=t.nodes,a=t.edges,s=t.initializers,u=t.inports,c=t.outports;return e.protocol.graph.clear({id:n,name:t.name,main:r,library:i.library||i.project||e.definition.namespace,icon:i.icon||"",description:i.description||""}).then(function(){return Promise.all(o.map(function(t){return e.protocol.graph.addnode({id:t.id,component:t.component,metadata:t.metadata,graph:n})}))}).then(function(){return Promise.all(a.map(function(t){return e.protocol.graph.addedge({src:t.from,tgt:t.to,metadata:t.metadata,graph:n})}))}).then(function(){return Promise.all(s.map(function(t){return e.protocol.graph.addinitial({src:t.from,tgt:t.to,metadata:t.metadata,graph:n})}))}).then(function(){return Promise.all(Object.keys(u).map(function(t){return e.protocol.graph.addinport({public:t,node:u[t].process,port:u[t].port,graph:n})}))}).then(function(){return Promise.all(Object.keys(c).map(function(t){return e.protocol.graph.addoutport({public:t,node:c[t].process,port:c[t].port,graph:n})}))}).then(function(){return t})}}},{key:"prepareAdapter",value:function(e){if(!this.adapter){var t=Number.parseFloat(e);if(!(t<=.9))throw new Error("Unsupported FBP protocol version "+e);this.adapter=m(this,t)}}}]),t}();e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,n){d("/definition/",e).then(function(){var o=e;o.protocol=o.protocol||c(o.address),o.protocol?i.transports[o.protocol]?r(new g(o,t)):n(new Error("Unsupported FBP transport "+o.protocol)):n(new Error("Runtime connection protocol is required"))},n)})}},function(e,t,r){"use strict";r(29)("fbp-protocol-client");t.transports={websocket:r(133),iframe:r(137),opener:r(138),webrtc:r(139),base:r(15)},t.connection=r(140),t.getTransport=function(e){return t.transports[e]}},function(e,t,r){"use strict";function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var o=a[u];r=i.call(e,o),a.splice(u,1),u--}return r}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(25),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,a,s,u=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};o=r(15),s=r(51),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleError=r.handleError.bind(r),r.handleMessage=r.handleMessage.bind(r),r.connecting=!1,r.connection=null,r.protocol="noflo",r.buffer=[],r.container=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"getElement",value:function(){var e,t;return this.container?this.container:(this.container=document.createElement("div"),this.container.classList.add("preview-container"),e=document.createElement("pre"),t=document.createElement("img"),this.container.appendChild(t),this.container.appendChild(e),this.on("network",function(r){var n,i,o;if("output"===r.command)return null!=(i=r.payload).type&&"previewurl"===i.type&&(o=i.url.indexOf(!0)?"&":"?",t.src=i.url+o+"timestamp="+(new Date).getTime()),null!=i.message?(n=i.message.replace(/[\u00A0-\u99999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"}),e.innerHTML+=n+"\n",e.scrollTop=e.scrollHeight):void 0}),this.on("disconnected",function(){return e.innerHTML=""}),this.container)}},{key:"isConnected",value:function(){return this.connection&&!1===this.connecting}},{key:"connect",value:function(){var e=this;if(!this.connection&&!this.connecting)return this.protocol?this.connection=new s.WebSocket(this.getAddress(),this.protocol):this.connection=new s.WebSocket(this.getAddress()),this.connection.addEventListener("open",function(){return e.connecting=!1,e.sendRuntime("getruntime",{}),e.emit("status",{online:!0,label:"connected"}),e.emit("connected"),e.flush()},!1),this.connection.addEventListener("message",this.handleMessage,!1),this.connection.addEventListener("error",this.handleError,!1),this.connection.addEventListener("close",function(){return e.connection=null,e.emit("status",{online:!1,label:"disconnected"}),e.emit("disconnected")},!1),this.connecting=!0}},{key:"disconnect",value:function(){if(this.connection)return this.connecting=!1,this.connection.close()}},{key:"send",value:function(e,t,r){if(this.connecting)this.buffer.push({protocol:e,command:t,payload:r});else if(this.connection)return this.connection.send(JSON.stringify({protocol:e,command:t,payload:r}))}},{key:"handleError",value:function(e){var r=this;return u(this,t),"noflo"===this.protocol?(delete this.protocol,this.connecting=!1,this.connection=null,void setTimeout(function(){return r.connect()},1)):(this.emit("error",e),this.connection=null,this.connecting=!1)}},{key:"handleMessage",value:function(e){var r;return u(this,t),r=JSON.parse(e.data),this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(t=0,r=(n=this.buffer).length;t<r;t++)e=n[t],this.send(e.protocol,e.command,e.payload);return this.buffer=[]}}]),t}(),e.exports=a},function(e,t,r){"use strict";var n=function(){return this}(),i=n.WebSocket||n.MozWebSocket,o=r(135);function a(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(a,e,{get:function(){return i[e]}})}),e.exports={w3cwebsocket:i?a:null,version:o}},function(e,t,r){"use strict";e.exports=r(136).version},function(e){e.exports={_from:"websocket@^1.0.8",_id:"websocket@1.0.26",_inBundle:!1,_integrity:"sha512-fjcrYDPIQxpTnqFQ9JjxUQcdvR89MFAOjPBlF+vjOt49w/XW4fJknUoMz/mDIn2eK1AdslVojcaOxOqyZZV8rw==",_location:"/websocket",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"websocket@^1.0.8",name:"websocket",escapedName:"websocket",rawSpec:"^1.0.8",saveSpec:null,fetchSpec:"^1.0.8"},_requiredBy:["#DEV:/","/fbp-protocol","/fbp-protocol-client"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.26.tgz",_shasum:"a03a01299849c35268c83044aa919c6374be8194",_spec:"websocket@^1.0.8",_where:"/home/travis/build/flowbased/fbp-spec/node_modules/fbp-protocol",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"Iaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.26"}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0};var a,s,u=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};a=r(15),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.updateIframe=r.updateIframe.bind(r),r.onLoaded=r.onLoaded.bind(r),r.onMessage=r.onMessage.bind(r),r.origin=window.location.origin,r.connecting=!1,r.connected=!1,r.buffer=[],r.iframe=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),i(t,[{key:"getElement",value:function(){return this.iframe}},{key:"isConnected",value:function(){return this.connected}},{key:"setMain",value:function(e){if(this.graph&&this.graph.removeListener("changeProperties",this.updateIframe),!e)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMain",this).call(this,e);e.on("changeProperties",this.updateIframe),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMain",this).call(this,e),this.updateIframe()}},{key:"setParentElement",value:function(e){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.appendChild(this.iframe)}},{key:"connect",value:function(){if(!this.iframe)throw new Error("Unable to connect without a parent element");return this.iframe.addEventListener("load",this.onLoaded,!1),this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),this.iframe.setAttribute("src",this.getAddress()),this.iframe.id="preview-iframe",window.addEventListener("message",this.onMessage,!1)}},{key:"updateIframe",value:function(){var e;if(u(this,t),this.iframe&&this.graph&&(e=this.graph.properties.environment)&&e.content)return this.send("iframe","setcontent",e.content)}},{key:"disconnect",value:function(){return this.iframe&&this.iframe.removeEventListener("load",this.onLoaded,!1),this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"onLoaded",value:function(){var e,r=this;return u(this,t),this.once("capabilities",function(){return e&&clearTimeout(e),r.connecting=!1,r.connected=!0,r.emit("status",{online:!0,label:"connected"}),r.emit("connected"),r.updateIframe(),r.flush()}),this.postMessage("runtime","getruntime",{}),e=setTimeout(function(){return r.postMessage("runtime","getruntime",{})},500)}},{key:"send",value:function(e,t,r){if(!this.connecting)return this.postMessage(e,t,r);this.buffer.push({protocol:e,command:t,payload:r})}},{key:"postMessage",value:function(e,t,r){var n;if(n=this.iframe.contentWindow){try{if("about:blank"===n.location.href)return;if(-1!==n.location.href.indexOf("chrome-extension://"))throw new Error("Use * for IFRAME communications in a Chrome app")}catch(i){return i,void n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}return n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),n.location.href)}}},{key:"onMessage",value:function(e){var r;if(u(this,t),!e.source||e.source===this.iframe.contentWindow)return r="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.postMessage(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=s},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,a;o=r(15),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onMessage=r.onMessage.bind(r),r.connecting=!1,r.connected=!1,r.buffer=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){return this.connected}},{key:"setParentElement",value:function(e){}},{key:"connect",value:function(){var e=this;return this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),window.addEventListener("message",this.onMessage,!1),this.once("capabilities",function(){return e.connecting=!1,e.connected=!0,e.emit("status",{online:!0,label:"connected"}),e.emit("connected"),e.flush()}),this.postMessage("runtime","getruntime",{}),setTimeout(function(){return e.postMessage("runtime","getruntime",{})},500)}},{key:"updateIframe",value:function(){}},{key:"disconnect",value:function(){return this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"send",value:function(e,t,r){if(!this.connecting)return this.postMessage(e,t,r);this.buffer.push({protocol:e,command:t,payload:r})}},{key:"postMessage",value:function(e,t,r){if(window.opener)return window.opener.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}},{key:"onMessage",value:function(e){var r;if(function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,t),!e.source||e.source===this.iframe.contentWindow)return r="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.postMessage(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=a},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,a,s,u=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};o=r(15),s=r(29)("fbp-protocol-client:webrtc"),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleError=r.handleError.bind(r),r.handleMessage=r.handleMessage.bind(r),r.peer=null,r.connecting=!1,r.connection=null,r.protocol="webrtc",r.buffer=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){return null!==this.connection}},{key:"connect",value:function(){var e,t,r,n,i=this;if(!this.connection&&!this.connecting)return-1!==(e=this.getAddress()).indexOf("#")?(n=e.split("#")[0],t=e.split("#")[1]):(n="https://api.flowhub.io",t=e),r={room:t,debug:!0,channels:{chat:!0},signaller:n,capture:!1,constraints:!1,expectedLocalStreams:0},this.peer=RTC(r),this.peer.on("channel:opened:chat",function(e,t){return i.connection=t,i.connection.onmessage=function(e){return s("message",e.data),i.handleMessage(e.data)},i.connecting=!1,i.sendRuntime("getruntime",{}),i.emit("status",{online:!0,label:"connected"}),i.emit("connected"),i.flush()}),this.peer.on("channel:closed:chat",function(e,t){return t.onmessage=null,i.connection=null,i.emit("status",{online:!1,label:"disconnected"}),i.emit("disconnected")}),this.connecting=!0}},{key:"disconnect",value:function(){if(this.connection)return this.connecting=!1,this.connection.close(),this.connection=null,this.emit("disconnected")}},{key:"send",value:function(e,t,r){var n;if(n={protocol:e,command:t,payload:r},this.connecting)this.buffer.push(n);else if(this.connection)return s("send",n),this.connection.send(JSON.stringify(n))}},{key:"handleError",value:function(e){return u(this,t),this.connection=null,this.connecting=!1}},{key:"handleMessage",value:function(e){var r;return u(this,t),r=JSON.parse(e),this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.send(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=a},function(e,t,r){"use strict";t.sendGraph=function(e,t,r,n){var i,o,a,s,u,c,l,p,h,d,f,m,g,v,y,b,x,w,E;if((null!=(g=e.properties.environment)?g.type:void 0)&&"all"!==(v=e.properties.environment.type)&&v!==t.definition.type)return r(new Error("Graph type "+e.properties.environment.type+" doesn't match runtime type "+t.definition.type));if(!t.canDo("protocol:graph"))return r(new Error("Runtime doesn't support graph protocol"));for(o=e.name||e.properties.id,t.sendGraph("clear",{id:o,name:e.name,main:n,library:e.properties.project,icon:e.properties.icon||"",description:e.properties.description||""}),a=0,l=(y=e.nodes).length;a<l;a++)d=y[a],t.sendGraph("addnode",{id:d.id,component:d.component,metadata:d.metadata,graph:o});for(u=0,p=(b=e.edges).length;u<p;u++)i=b[u],t.sendGraph("addedge",{src:{node:i.from.node,port:i.from.port},tgt:{node:i.to.node,port:i.to.port},metadata:i.metadata,graph:o});for(c=0,h=(x=e.initializers).length;c<h;c++)s=x[c],t.sendGraph("addinitial",{src:{data:s.from.data},tgt:{node:s.to.node,port:s.to.port},metadata:s.metadata,graph:o});if(e.inports)for(m in w=e.inports)f=w[m],t.sendGraph("addinport",{public:m,node:f.process,port:f.port,graph:o});if(e.outports)for(m in E=e.outports)f=E[m],t.sendGraph("addoutport",{public:m,node:f.process,port:f.port,graph:o});return r()}},function(e,t,r){"use strict";var n=r(52).parse;t.addressToProtocol=function(e){var t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Request timed out";return Promise.race([new Promise(e),new Promise(function(e,n){setTimeout(function(){n(new Error(r))},t)})])}},function(e,t,r){"use strict";(function(e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){var s="object"==o(t)&&t&&!t.nodeType&&t,u="object"==o(e)&&e&&!e.nodeType&&e,c="object"==(void 0===n?"undefined":o(n))&&n;c.global!==c&&c.window!==c&&c.self!==c||(a=c);var l,p,h=2147483647,d=36,f=1,m=26,g=38,v=700,y=72,b=128,x="-",w=/^xn--/,E=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-f,_=Math.floor,D=String.fromCharCode;function A(e){throw RangeError(S[e])}function P(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function F(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+P((e=e.replace(C,".")).split("."),t).join(".")}function T(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function O(e){return P(e,function(e){var t="";return e>65535&&(t+=D((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function j(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d}function I(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function N(e,t,r){var n=0;for(e=r?_(e/v):e>>1,e+=_(e/t);e>k*m>>1;n+=d)e=_(e/k);return _(n+(k+1)*e/(e+g))}function R(e){var t,r,n,i,o,a,s,u,c,l,p=[],g=e.length,v=0,w=b,E=y;for((r=e.lastIndexOf(x))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&A("not-basic"),p.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(o=v,a=1,s=d;i>=g&&A("invalid-input"),((u=j(e.charCodeAt(i++)))>=d||u>_((h-v)/a))&&A("overflow"),v+=u*a,!(u<(c=s<=E?f:s>=E+m?m:s-E));s+=d)a>_(h/(l=d-c))&&A("overflow"),a*=l;E=N(v-o,t=p.length+1,0==o),_(v/t)>h-w&&A("overflow"),w+=_(v/t),v%=t,p.splice(v++,0,w)}return O(p)}function M(e){var t,r,n,i,o,a,s,u,c,l,p,g,v,w,E,C=[];for(g=(e=T(e)).length,t=b,r=0,o=y,a=0;a<g;++a)(p=e[a])<128&&C.push(D(p));for(n=i=C.length,i&&C.push(x);n<g;){for(s=h,a=0;a<g;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>_((h-r)/(v=n+1))&&A("overflow"),r+=(s-t)*v,t=s,a=0;a<g;++a)if((p=e[a])<t&&++r>h&&A("overflow"),p==t){for(u=r,c=d;!(u<(l=c<=o?f:c>=o+m?m:c-o));c+=d)E=u-l,w=d-l,C.push(D(I(l+E%w,0))),u=_(E/w);C.push(D(I(u,0))),o=N(r,v,n==i),r=0,++n}++r,++t}return C.join("")}if(l={version:"1.3.2",ucs2:{decode:T,encode:O},decode:R,encode:M,toASCII:function(e){return F(e,function(e){return E.test(e)?"xn--"+M(e):e})},toUnicode:function(e){return F(e,function(e){return w.test(e)?R(e.slice(4).toLowerCase()):e})}},"object"==o(r(53))&&r(53))void 0===(i=function(){return l}.call(t,r,t,e))||(e.exports=i);else if(s&&u)if(e.exports==s)u.exports=l;else for(p in l)l.hasOwnProperty(p)&&(s[p]=l[p]);else a.punycode=l}(void 0)}).call(this,r(24)(e),r(6))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(145),t.encode=t.stringify=r(146)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var p,h,d,f,m=e[l].replace(s,"%20"),g=m.indexOf(r);g>=0?(p=m.substr(0,g),h=m.substr(g+1)):(p=m,h=""),d=decodeURIComponent(p),f=decodeURIComponent(h),n(a,d)?i(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){switch(void 0===e?"undefined":n(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":n(e))?a(s(e),function(n){var s=encodeURIComponent(i(n))+r;return o(e[n])?a(e[n],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[n]))}).join(t):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";var n=r(30);function i(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n.shared.capabilities.items._enumDescriptions.filter(function(n){return r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf(e+":"+t):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf(e+":"+t)}).map(function(e){return e.name})}t.canSend=function(e,t,r){if("runtime"===e&&"getruntime"===t)return!0;var n=i(e,t,!0);return r.filter(function(e){return-1!==n.indexOf(e)}).length>0},t.canReceive=function(e,t,r){if("runtime"===e&&"runtime"===t)return!0;var n=i(e,t,!1);return r.filter(function(e){return-1!==n.indexOf(e)}).length>0}},function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(149),o=r(181),a=r(30),s=r(182);e.exports=function(){var e=new i({extendRefs:!0});return e.addMetaSchema(o),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(a).forEach(function(t){a[t].id="/"+t+"/",e.addSchema(a[t])}),e.addSchema(s),function(t,r){return new Promise(function(i,o){var a=t.slice(1).split("/"),s=n(a,3),u=s[0],c=s[1],l=s[2];if(!c)return e.validate(t,r)?void i(r):void o(new Error("Runtime definition "+e.errorsText()));var p=r;p.protocol=u,e.validate(t,p)?i(r):o("input"!==c?new Error("Runtime sent invalid payload for "+u+":"+l+": "+e.errorsText()):new Error("Client sent invalid payload for "+u+":"+l+": "+e.errorsText()))})}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(150),o=r(31),a=r(153),s=r(54),u=r(55),c=r(154),l=r(155),p=r(174),h=r(175),d=r(10),f=r(57);e.exports=x,x.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);return!0===r.$async?"*"==this._opts.async?f(i):i:(this.errors=r.errors,i)},x.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},x.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return _(this,t=o.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,n,!0),this},x.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},x.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==(void 0===t?"undefined":n(t))?e._getId(t)||t:e.getSchema(v)?v:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i,o=this._formats.uri;this._formats.uri="function"==typeof o?this._schemaUriFormatFunc:this._schemaUriFormat;try{i=this.validate(r,e)}finally{this._formats.uri=o}if(!i&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return i},x.prototype.getSchema=function(e){var t=w(this,e);switch(void 0===t?"undefined":n(t)){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var n=r.schema,a=r.root,u=r.baseId,c=i.call(e,n,a,void 0,u);return e._fragments[t]=new s({ref:t,fragment:!0,schema:n,root:a,baseId:u,validate:c}),c}}(this,e)}},x.prototype.removeSchema=function(e){if(e instanceof RegExp)return E(this,this._schemas,e),E(this,this._refs,e),this;switch(void 0===e?"undefined":n(e)){case"undefined":return E(this,this._schemas),E(this,this._refs),this._cache.clear(),this;case"string":var t=w(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var a=this._getId(e);a&&(a=o.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},x.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},x.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)},x.prototype._addSchema=function(e,t,r,i){if("object"!=(void 0===e?"undefined":n(e))&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,u=a?a(e):e,c=this._cache.get(u);if(c)return c;i=i||!1!==this._opts.addUsedSchema;var l=o.normalizeId(this._getId(e));l&&i&&_(this,l);var p,h=!1!==this._opts.validateSchema&&!t;h&&!(p=l&&l==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=o.ids.call(this,e),f=new s({id:l,schema:e,localRefs:d,cacheKey:u,meta:r});"#"!=l[0]&&i&&(this._refs[l]=f);this._cache.put(u,f),h&&p&&this.validateSchema(e,!0);return f},x.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=i.call(this,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function o(){var t=e.validate,r=t.apply(null,arguments);return o.errors=t.errors,r}},x.prototype.compileAsync=r(176);var m=r(177);x.prototype.addKeyword=m.add,x.prototype.getKeyword=m.get,x.prototype.removeKeyword=m.remove;var g=r(33);x.ValidationError=g.Validation,x.MissingRefError=g.MissingRef,x.$dataMetaSchema=p;var v="http://json-schema.org/draft-06/schema",y=["removeAdditional","useDefaults","coerceTypes"],b=["/properties"];function x(e){if(!(this instanceof x))return new x(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:D,warn:D,error:D};else{if(void 0===t&&(t=console),!("object"==(void 0===t?"undefined":n(t))&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format);var t=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(e){return t.test(e)},this._cache=e.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"$id":return S;case"id":return C;default:return k}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=u),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<y.length;r++)delete t[y[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(179),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(180);e._opts.$data&&(n=p(n,b));e.addMetaSchema(n,v,!0),e._refs["http://json-schema.org/schema"]=v}(this),"object"==n(e.meta)&&this.addMetaSchema(e.meta),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this),e.patternGroups&&h(this)}function w(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function E(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function C(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function S(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function k(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function _(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function D(){}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(31),o=r(10),a=r(33),s=r(55),u=r(56),c=r(57),l=o.ucs2length,p=r(32),h=a.Validation;function d(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,b,x){var w=this,E=this._opts,C=[void 0],S={},k=[],_={},D=[],A={},P=[];r=r||{schema:t,refVal:C,refs:S};var F=function(e,t,r){var n=d.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}.call(this,t,r,x);var T=this._compilations[F.index];if(F.compiling)return T.callValidate=function e(){var t=T.validate;var r=t.apply(null,arguments);e.errors=t.errors;return r};var O=this._formats;var j=this.RULES;try{var I=R(t,r,b,x);T.validate=I;var N=T.callValidate;return N&&(N.schema=I.schema,N.errors=null,N.refs=I.refs,N.refVal=I.refVal,N.root=I.root,N.$async=I.$async,E.sourceCode&&(N.source=I.source)),I}finally{(function(e,t,r){var n=d.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}).call(this,t,r,x)}function R(t,n,s,d){var b=!n||n&&n.schema==t;if(n.schema!=r.schema)return e.call(w,t,n,s,d);var x,_=!0===t.$async,A=u({isTop:!0,schema:t,isRoot:b,baseId:d,root:n,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:j,validate:u,util:o,resolve:i,resolveRef:M,usePattern:U,useDefault:$,useCustomRule:z,opts:E,formats:O,logger:w.logger,self:w});A=y(C,g)+y(k,f)+y(D,m)+y(P,v)+A,E.processCode&&(A=E.processCode(A));try{var F=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",A);x=F(w,j,O,r,C,D,P,c,p,l,h),C[0]=x}catch(e){throw w.logger.error("Error compiling schema, function code:",A),e}return x.schema=t,x.errors=null,x.refs=S,x.refVal=C,x.root=b?x:n,_&&(x.$async=!0),!0===E.sourceCode&&(x.source={code:A,patterns:k,defaults:D}),x}function M(t,n,o){n=i.url(t,n);var a,s,u=S[n];if(void 0!==u)return L(a=C[u],s="refVal["+u+"]");if(!o&&r.refs){var c=r.refs[n];if(void 0!==c)return a=r.refVal[c],s=B(n,a),L(a,s)}s=B(n);var l=i.call(w,R,r,n);if(void 0===l){var p=b&&b[n];p&&(l=i.inlineRef(p,E.inlineRefs)?p:e.call(w,p,r,b,t))}if(void 0!==l)return function(e,t){var r=S[e];C[r]=t}(n,l),L(l,s);!function(e){delete S[e]}(n)}function B(e,t){var r=C.length;return C[r]=t,S[e]=r,"refVal"+r}function L(e,t){return"object"==(void 0===e?"undefined":n(e))||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&e.$async}}function U(e){var t=_[e];return void 0===t&&(t=_[e]=k.length,k[t]=e),"pattern"+t}function $(e){switch(void 0===e?"undefined":n(e)){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=A[t];return void 0===r&&(r=A[t]=D.length,D[r]=e),"default"+r}}function z(e,t,r,n){var i=e.definition.validateSchema;if(i&&!1!==w._opts.validateSchema){var o=i(t);if(!o){var a="keyword schema is invalid: "+w.errorsText(i.errors);if("log"!=w._opts.validateSchema)throw new Error(a);w.logger.error(a)}}var s,u=e.definition.compile,c=e.definition.inline,l=e.definition.macro;if(u)s=u.call(w,t,r,n);else if(l)s=l.call(w,t,r,n),!1!==E.validateSchema&&w.validateSchema(s,!0);else if(c)s=c.call(w,n,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var p=P.length;return P[p]=s,{code:"customRule"+p,validate:s}}}},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,a,s,u,c,l,p,h){if(a&&"object"==(void 0===a?"undefined":n(a))&&!Array.isArray(a))for(var d in r(a,s,u,c,l,p,h),a){var f=a[d];if(Array.isArray(f)){if(d in i.arrayKeywords)for(var m=0;m<f.length;m++)e(t,r,f[m],s+"/"+d+"/"+m,u,s,d,a,m)}else if(d in i.propsKeywords){if(f&&"object"==(void 0===f?"undefined":n(f)))for(var g in f)e(t,r,f[g],s+"/"+d+"/"+o(g),u,s,d,a,g)}else(d in i.keywords||t.allKeys&&!(d in i.skipKeywords))&&e(t,r,f,s+"/"+d,u,s,d,a)}}(t,r,e,"",e)};function o(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(10),i=/^\d\d\d\d-(\d\d)-(\d\d)$/,o=[0,31,29,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,s=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,p=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function f(e){return e="full"==e?"full":"fast",n.copy(f[e])}function m(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2];return r>=1&&r<=12&&n>=1&&n<=o[r]}function g(e,t){var r=e.match(a);if(!r)return!1;var n=r[1],i=r[2],o=r[3],s=r[5];return n<=23&&i<=59&&o<=59&&(!t||s)}e.exports=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":c,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:p,"json-pointer":h,"relative-json-pointer":d},f.full={date:m,time:g,"date-time":function(e){var t=e.split(v);return 2==t.length&&m(t[0])&&g(t[1],!0)},uri:function(e){return y.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&s.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:p,"json-pointer":h,"relative-json-pointer":d};var v=/t|\s/i;var y=/\/|:/;var b=/[^\\]\\Z/;function x(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(156),o=r(10).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","contains","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf"]}],t=["type"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if("object"==(void 0===r?"undefined":n(r))){var a=Object.keys(r)[0];o=r[a],r=a,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:i[r],implements:o}}),r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat(["additionalItems","$schema","$id","id","title","description","default","definitions"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(157),allOf:r(158),anyOf:r(159),const:r(160),contains:r(161),dependencies:r(162),enum:r(163),format:r(164),items:r(165),maximum:r(58),minimum:r(58),maxItems:r(59),minItems:r(59),maxLength:r(60),minLength:r(60),maxProperties:r(61),minProperties:r(61),multipleOf:r(166),not:r(167),oneOf:r(168),pattern:r(169),properties:r(170),propertyNames:r(171),required:r(172),uniqueItems:r(173),validate:r(56)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,o=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(s||""),h="valid"+a;if("#"==u||"#/"==u)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===d){var f=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(f),(y=y||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var m=o;o=y.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,f);e.logger.warn(f),l&&(o+=" if (true) { ")}}else if(d.inline){var g=e.util.copy(e);g.level++;var v="valid"+g.level;g.schema=d.schema,g.schemaPath="",g.errSchemaPath=u,o+=" "+e.validate(g).replace(/validate\.schema/g,d.code)+" ",l&&(o+=" if ("+v+") { ")}else n=!0===d.$async,i=d.code}if(i){var y;(y=y||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+p+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=y.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+h+"; "),o+=" try { "+e.yieldAwait+" "+b+"; ",l&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+h+" = false; "),o+=" } ",l&&(o+=" if ("+h+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,p=u.baseId,h=!0,d=i;if(d)for(var f,m=-1,g=d.length-1;m<g;)f=d[m+=1],e.util.schemaHasRules(f,e.RULES.all)&&(h=!1,u.schema=f,u.schemaPath=o+"["+m+"]",u.errSchemaPath=a+"/"+m,n+="  "+e.validate(u)+" ",u.baseId=p,s&&(n+=" if ("+l+") { ",c+="}"));return s&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h="errs__"+i,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level;if(a.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var g=d.baseId;n+=" var "+h+" = errors; var "+p+" = false;  ";var v=e.compositeRule;e.compositeRule=d.compositeRule=!0;var y=a;if(y)for(var b,x=-1,w=y.length-1;x<w;)b=y[x+=1],d.schema=b,d.schemaPath=s+"["+x+"]",d.errSchemaPath=u+"/"+x,n+="  "+e.validate(d)+" ",d.baseId=g,n+=" "+p+" = "+p+" || "+m+"; if (!"+p+") { ",f+="}";e.compositeRule=d.compositeRule=v,n+=" "+f+" if (!"+p+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),h||(n+=" var schema"+i+" = validate.schema"+s+";"),n+="var "+p+" = equal("+l+", schema"+i+"); if (!"+p+") {   ";var d=d||[];d.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var f=n;return n=d.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h="errs__"+i,d=e.util.copy(e);d.level++;var f="valid"+d.level,m="i"+i,g=d.dataLevel=e.dataLevel+1,v="data"+g,y=e.baseId,b=e.util.schemaHasRules(a,e.RULES.all);if(n+="var "+h+" = errors;var "+p+";",b){var x=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=a,d.schemaPath=s,d.errSchemaPath=u,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=l+"["+m+"]";d.dataPathArr[g]=m;var E=e.validate(d);d.baseId=y,e.util.varOccurences(E,v)<2?n+=" "+e.util.varReplace(E,v,w)+" ":n+=" var "+v+" = "+w+"; "+E+" ",n+=" if ("+f+") break; }  ",e.compositeRule=d.compositeRule=x,n+="  if (!"+f+") {"}else n+=" if ("+l+".length == 0) {";var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;return n=C.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,h=e.util.copy(e),d="";h.level++;var f="valid"+h.level,m={},g={},v=e.opts.ownProperties;for(w in a){var y=a[w],b=Array.isArray(y)?g:m;b[w]=y}n+="var "+p+" = errors;";var x=e.errorPath;for(var w in n+="var missing"+i+";",g)if((b=g[w]).length){if(n+=" if ( "+l+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),c){n+=" && ( ";var E=b;if(E)for(var C=-1,S=E.length-1;C<S;){F=E[C+=1],C&&(n+=" || "),n+=" ( ( "+(I=l+(j=e.util.getProperty(F)))+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(F)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:j)+") ) "}n+=")) {  ";var k="missing"+i,_="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,k,!0):x+" + "+k);var D=D||[];D.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+_+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var A=n;n=D.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var P=b;if(P)for(var F,T=-1,O=P.length-1;T<O;){F=P[T+=1];var j=e.util.getProperty(F),I=(_=e.util.escapeQuotes(F),l+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,F,e.opts.jsonPointers)),n+=" if ( "+I+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(F)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+_+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(d+="}",n+=" else { ")}e.errorPath=x;var N=h.baseId;for(var w in m){y=m[w];e.util.schemaHasRules(y,e.RULES.all)&&(n+=" "+f+" = true; if ( "+l+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",h.schema=y,h.schemaPath=s+e.util.getProperty(w),h.errSchemaPath=u+"/"+e.util.escapeFragment(w),n+="  "+e.validate(h)+" ",h.baseId=N,n+=" }  ",c&&(n+=" if ("+f+") { ",d+="}"))}return c&&(n+="   "+d+" if ("+p+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="i"+i,f="schema"+i;h||(n+=" var "+f+" = validate.schema"+s+";"),n+="var "+p+";",h&&(n+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),n+=p+" = false;for (var "+d+"=0; "+d+"<"+f+".length; "+d+"++) if (equal("+l+", "+f+"["+d+"])) { "+p+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+p+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,t,r){var i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||"");if(!1===e.opts.format)return l&&(i+=" if (true) { "),i;var h,d=e.opts.$data&&s&&s.$data;d?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=s;var f=e.opts.unknownFormats,m=Array.isArray(f);if(d){i+=" var "+(g="format"+o)+" = formats["+h+"]; var "+(v="isObject"+o)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(y="formatType"+o)+" = "+v+" && "+g+".type || 'string'; if ("+v+") { ",e.async&&(i+=" var async"+o+" = "+g+".async; "),i+=" "+g+" = "+g+".validate; } if (  ",d&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (","ignore"!=f&&(i+=" ("+h+" && !"+g+" ",m&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+g+" && "+y+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?i+=" (async"+o+" ? "+e.yieldAwait+" "+g+"("+p+") : "+g+"("+p+")) ":i+=" "+g+"("+p+") ",i+=" : "+g+".test("+p+"))))) {"}else{var g;if(!(g=e.formats[s])){if("ignore"==f)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(i+=" if (true) { "),i;if(m&&f.indexOf(s)>=0)return l&&(i+=" if (true) { "),i;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,y=(v="object"==(void 0===g?"undefined":n(g))&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(v){var b=!0===g.async;g=g.validate}if(y!=r)return l&&(i+=" if (true) { "),i;if(b){if(!e.async)throw new Error("async format in sync schema");var x="formats"+e.util.getProperty(s)+".validate";i+=" if (!("+e.yieldAwait+" "+x+"("+p+"))) { "}else{i+=" if (! ";x="formats"+e.util.getProperty(s);v&&(x+=".validate"),i+="function"==typeof g?" "+x+"("+p+") ":" "+x+".test("+p+") ",i+=") { "}}var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",i+=d?""+h:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=d?"' + "+h+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=w.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,t,r){var i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,d="errs__"+o,f=e.util.copy(e),m="";f.level++;var g="valid"+f.level,v="i"+o,y=f.dataLevel=e.dataLevel+1,b="data"+y,x=e.baseId;if(i+="var "+d+" = errors;var "+h+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){i+=" "+h+" = "+p+".length <= "+s.length+"; ";var E=c;c=e.errSchemaPath+"/additionalItems",i+="  if (!"+h+") {   ";var C=C||[];C.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var S=i;i=C.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=E,l&&(m+="}",i+=" else { ")}var k=s;if(k)for(var _,D=-1,A=k.length-1;D<A;)if(_=k[D+=1],e.util.schemaHasRules(_,e.RULES.all)){i+=" "+g+" = true; if ("+p+".length > "+D+") { ";var P=p+"["+D+"]";f.schema=_,f.schemaPath=u+"["+D+"]",f.errSchemaPath=c+"/"+D,f.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0),f.dataPathArr[y]=D;var F=e.validate(f);f.baseId=x,e.util.varOccurences(F,b)<2?i+=" "+e.util.varReplace(F,b,P)+" ":i+=" var "+b+" = "+P+"; "+F+" ",i+=" }  ",l&&(i+=" if ("+g+") { ",m+="}")}if("object"==(void 0===w?"undefined":n(w))&&e.util.schemaHasRules(w,e.RULES.all)){f.schema=w,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+g+" = true; if ("+p+".length > "+s.length+") {  for (var "+v+" = "+s.length+"; "+v+" < "+p+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);P=p+"["+v+"]";f.dataPathArr[y]=v;F=e.validate(f);f.baseId=x,e.util.varOccurences(F,b)<2?i+=" "+e.util.varReplace(F,b,P)+" ":i+=" var "+b+" = "+P+"; "+F+" ",l&&(i+=" if (!"+g+") break; "),i+=" } }  ",l&&(i+=" if ("+g+") { ",m+="}")}}else if(e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=u,f.errSchemaPath=c,i+="  for (var "+v+" = 0; "+v+" < "+p+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);P=p+"["+v+"]";f.dataPathArr[y]=v;F=e.validate(f);f.baseId=x,e.util.varOccurences(F,b)<2?i+=" "+e.util.varReplace(F,b,P)+" ":i+=" var "+b+" = "+P+"; "+F+" ",l&&(i+=" if (!"+g+") break; "),i+=" }"}return l&&(i+=" "+m+" if ("+d+" == errors) {"),i=e.util.cleanUpCode(i)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="var division"+o+";if (",h&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var f=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u,n+=" var "+p+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,n+=" if ("+d+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h="errs__"+i,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level;n+="var "+h+" = errors;var prevValid"+i+" = false;var "+p+" = false;";var g=d.baseId,v=e.compositeRule;e.compositeRule=d.compositeRule=!0;var y=a;if(y)for(var b,x=-1,w=y.length-1;x<w;)b=y[x+=1],e.util.schemaHasRules(b,e.RULES.all)?(d.schema=b,d.schemaPath=s+"["+x+"]",d.errSchemaPath=u+"/"+x,n+="  "+e.validate(d)+" ",d.baseId=g):n+=" var "+m+" = true; ",x&&(n+=" if ("+m+" && prevValid"+i+") "+p+" = false; else { ",f+="}"),n+=" if ("+m+") "+p+" = prevValid"+i+" = true;";return e.compositeRule=d.compositeRule=v,n+=f+"if (!"+p+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s;var d=h?"(new RegExp("+n+"))":e.usePattern(s);i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+d+".test("+p+") ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+n:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+n+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,t,r){var i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,d="errs__"+o,f=e.util.copy(e),m="";f.level++;var g="valid"+f.level,v="key"+o,y="idx"+o,b=f.dataLevel=e.dataLevel+1,x="data"+b,w="dataProperties"+o,E=Object.keys(s||{}),C=e.schema.patternProperties||{},S=Object.keys(C),k=e.schema.additionalProperties,_=E.length||S.length,D=!1===k,A="object"==(void 0===k?"undefined":n(k))&&Object.keys(k).length,P=e.opts.removeAdditional,F=D||A||P,T=e.opts.ownProperties,O=e.baseId,j=e.schema.required;if(j&&(!e.opts.v5||!j.$data)&&j.length<e.opts.loopRequired)var I=e.util.toHash(j);if(e.opts.patternGroups)var N=e.schema.patternGroups||{},R=Object.keys(N);if(i+="var "+d+" = errors;var "+g+" = true;",T&&(i+=" var "+w+" = undefined;"),F){if(i+=T?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+v+" = "+w+"["+y+"]; ":" for (var "+v+" in "+p+") { ",_){if(i+=" var isAdditional"+o+" = !(false ",E.length)if(E.length>5)i+=" || validate.schema"+u+"["+v+"] ";else{var M=E;if(M)for(var B=-1,L=M.length-1;B<L;)ee=M[B+=1],i+=" || "+v+" == "+e.util.toQuotedString(ee)+" "}if(S.length){var U=S;if(U)for(var $=-1,z=U.length-1;$<z;)ce=U[$+=1],i+=" || "+e.usePattern(ce)+".test("+v+") "}if(e.opts.patternGroups&&R.length){var J=R;if(J){$=-1;for(var q=J.length-1;$<q;)de=J[$+=1],i+=" || "+e.usePattern(de)+".test("+v+") "}}i+=" ); if (isAdditional"+o+") { "}if("all"==P)i+=" delete "+p+"["+v+"]; ";else{var V=e.errorPath,X="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),D)if(P)i+=" delete "+p+"["+v+"]; ";else{i+=" "+g+" = false; ";var K=c;c=e.errSchemaPath+"/additionalProperties",(Ee=Ee||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+X+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have additional properties' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var H=i;i=Ee.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+H+"]); ":i+=" validate.errors = ["+H+"]; return false; ":i+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=K,l&&(i+=" break; ")}else if(A)if("failing"==P){i+=" var "+d+" = errors;  ";var G=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Y=p+"["+v+"]";f.dataPathArr[b]=v;var W=e.validate(f);f.baseId=O,e.util.varOccurences(W,x)<2?i+=" "+e.util.varReplace(W,x,Y)+" ":i+=" var "+x+" = "+Y+"; "+W+" ",i+=" if (!"+g+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+v+"]; }  ",e.compositeRule=f.compositeRule=G}else{f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);Y=p+"["+v+"]";f.dataPathArr[b]=v;W=e.validate(f);f.baseId=O,e.util.varOccurences(W,x)<2?i+=" "+e.util.varReplace(W,x,Y)+" ":i+=" var "+x+" = "+Y+"; "+W+" ",l&&(i+=" if (!"+g+") break; ")}e.errorPath=V}_&&(i+=" } "),i+=" }  ",l&&(i+=" if ("+g+") { ",m+="}")}var Q=e.opts.useDefaults&&!e.compositeRule;if(E.length){var Z=E;if(Z)for(var ee,te=-1,re=Z.length-1;te<re;){var ne=s[ee=Z[te+=1]];if(e.util.schemaHasRules(ne,e.RULES.all)){var ie=e.util.getProperty(ee),oe=(Y=p+ie,Q&&void 0!==ne.default);f.schema=ne,f.schemaPath=u+ie,f.errSchemaPath=c+"/"+e.util.escapeFragment(ee),f.errorPath=e.util.getPath(e.errorPath,ee,e.opts.jsonPointers),f.dataPathArr[b]=e.util.toQuotedString(ee);W=e.validate(f);if(f.baseId=O,e.util.varOccurences(W,x)<2){W=e.util.varReplace(W,x,Y);var ae=Y}else{ae=x;i+=" var "+x+" = "+Y+"; "}if(oe)i+=" "+W+" ";else{if(I&&I[ee]){i+=" if ( "+ae+" === undefined ",T&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(ee)+"') "),i+=") { "+g+" = false; ";V=e.errorPath,K=c;var se=e.util.escapeQuotes(ee);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(V,ee,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(Ee=Ee||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+se+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+se+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";H=i;i=Ee.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+H+"]); ":i+=" validate.errors = ["+H+"]; return false; ":i+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=K,e.errorPath=V,i+=" } else { "}else l?(i+=" if ( "+ae+" === undefined ",T&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(ee)+"') "),i+=") { "+g+" = true; } else { "):(i+=" if ("+ae+" !== undefined ",T&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(ee)+"') "),i+=" ) { ");i+=" "+W+" } "}}l&&(i+=" if ("+g+") { ",m+="}")}}if(S.length){var ue=S;if(ue)for(var ce,le=-1,pe=ue.length-1;le<pe;){ne=C[ce=ue[le+=1]];if(e.util.schemaHasRules(ne,e.RULES.all)){f.schema=ne,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ce),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ce),i+=T?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+v+" = "+w+"["+y+"]; ":" for (var "+v+" in "+p+") { ",i+=" if ("+e.usePattern(ce)+".test("+v+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);Y=p+"["+v+"]";f.dataPathArr[b]=v;W=e.validate(f);f.baseId=O,e.util.varOccurences(W,x)<2?i+=" "+e.util.varReplace(W,x,Y)+" ":i+=" var "+x+" = "+Y+"; "+W+" ",l&&(i+=" if (!"+g+") break; "),i+=" } ",l&&(i+=" else "+g+" = true; "),i+=" }  ",l&&(i+=" if ("+g+") { ",m+="}")}}}if(e.opts.patternGroups&&R.length){var he=R;if(he)for(var de,fe=-1,me=he.length-1;fe<me;){var ge=N[de=he[fe+=1]];ne=ge.schema;if(e.util.schemaHasRules(ne,e.RULES.all)){f.schema=ne,f.schemaPath=e.schemaPath+".patternGroups"+e.util.getProperty(de)+".schema",f.errSchemaPath=e.errSchemaPath+"/patternGroups/"+e.util.escapeFragment(de)+"/schema",i+=" var pgPropCount"+o+" = 0;  ",i+=T?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+v+" = "+w+"["+y+"]; ":" for (var "+v+" in "+p+") { ",i+=" if ("+e.usePattern(de)+".test("+v+")) { pgPropCount"+o+"++; ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);Y=p+"["+v+"]";f.dataPathArr[b]=v;W=e.validate(f);f.baseId=O,e.util.varOccurences(W,x)<2?i+=" "+e.util.varReplace(W,x,Y)+" ":i+=" var "+x+" = "+Y+"; "+W+" ",l&&(i+=" if (!"+g+") break; "),i+=" } ",l&&(i+=" else "+g+" = true; "),i+=" }  ",l&&(i+=" if ("+g+") { ",m+="}");var ve=ge.minimum,ye=ge.maximum;if(void 0!==ve||void 0!==ye){i+=" var "+h+" = true; ";K=c;if(void 0!==ve){var be=ve,xe="minimum",we="less";i+=" "+h+" = pgPropCount"+o+" >= "+ve+"; ",c=e.errSchemaPath+"/patternGroups/minimum",i+="  if (!"+h+") {   ",(Ee=Ee||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { reason: '"+xe+"', limit: "+be+", pattern: '"+e.util.escapeQuotes(de)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have "+we+" than "+be+' properties matching pattern "'+e.util.escapeQuotes(de)+"\"' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";H=i;i=Ee.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+H+"]); ":i+=" validate.errors = ["+H+"]; return false; ":i+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",void 0!==ye&&(i+=" else ")}if(void 0!==ye){var Ee;be=ye,xe="maximum",we="more";i+=" "+h+" = pgPropCount"+o+" <= "+ye+"; ",c=e.errSchemaPath+"/patternGroups/maximum",i+="  if (!"+h+") {   ",(Ee=Ee||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { reason: '"+xe+"', limit: "+be+", pattern: '"+e.util.escapeQuotes(de)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have "+we+" than "+be+' properties matching pattern "'+e.util.escapeQuotes(de)+"\"' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";H=i;i=Ee.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+H+"]); ":i+=" validate.errors = ["+H+"]; return false; ":i+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}c=K,l&&(i+=" if ("+h+") { ",m+="}")}}}}return l&&(i+=" "+m+" if ("+d+" == errors) {"),i=e.util.cleanUpCode(i)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u;var f="key"+i,m="idx"+i,g="i"+i,v="' + "+f+" + '",y="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+i,x=e.opts.ownProperties,w=e.baseId;n+=" var "+p+" = errors; ",x&&(n+=" var "+b+" = undefined; "),n+=x?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var E=f,C=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,y)<2?n+=" "+e.util.varReplace(S,y,E)+" ":n+=" var "+y+" = "+E+"; "+S+" ",e.compositeRule=h.compositeRule=C,n+=" if (!"+d+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+p+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),p="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="schema"+i;if(!h)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=a;if(m)for(var g,v=-1,y=m.length-1;v<y;){g=m[v+=1];var b=e.schema.properties[g];b&&e.util.schemaHasRules(b,e.RULES.all)||(f[f.length]=g)}}else f=a;if(h||f.length){var x=e.errorPath,w=h||f.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",w){h||(n+=" var "+d+" = validate.schema"+s+"; ");var C="' + "+(P="schema"+i+"["+(_="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,P,e.opts.jsonPointers)),n+=" var "+p+" = true; ",h&&(n+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),n+=" for (var "+_+" = 0; "+_+" < "+d+".length; "+_+"++) { "+p+" = "+l+"["+d+"["+_+"]] !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+d+"["+_+"]) "),n+="; if (!"+p+") break; } ",h&&(n+="  }  "),n+="  if (!"+p+") {   ",(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var k=f;if(k)for(var _=-1,D=k.length-1;_<D;){T=k[_+=1],_&&(n+=" || "),n+=" ( ( "+(N=l+(I=e.util.getProperty(T)))+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:I)+") ) "}n+=") {  ";var A;C="' + "+(P="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,P,!0):x+" + "+P),(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";S=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){h||(n+=" var "+d+" = validate.schema"+s+"; ");var P;C="' + "+(P="schema"+i+"["+(_="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,P,e.opts.jsonPointers)),h&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+_+" = 0; "+_+" < "+d+".length; "+_+"++) { if ("+l+"["+d+"["+_+"]] === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+d+"["+_+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var F=f;if(F)for(var T,O=-1,j=F.length-1;O<j;){T=F[O+=1];var I=e.util.getProperty(T),N=(C=e.util.escapeQuotes(T),l+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,T,e.opts.jsonPointers)),n+=" if ( "+N+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=x}else c&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),i+=" var "+h+" = true; if ("+p+".length > 1) { var i = "+p+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+h+" = false; break outer; } } } } ",d&&(i+="  }  "),i+=" if (!"+h+") {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,o=t[r].split("/"),a=e;for(i=1;i<o.length;i++)a=a[o[i]];for(i=0;i<n.length;i++){var s=n[i],u=a[s];u&&(a[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]})}}return e}},function(e,t,r){"use strict";e.exports=function(e){var t=e._opts.defaultMeta,r="string"==typeof t?{$ref:t}:e.getSchema("http://json-schema.org/draft-06/schema")?{$ref:"http://json-schema.org/draft-06/schema"}:{};e.addKeyword("patternGroups",{metaSchema:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{type:"integer",minimum:0},minimum:{type:"integer",minimum:0},schema:r},additionalProperties:!1}}}),e.RULES.all.properties.implements.push("patternGroups")}},function(e,t,r){"use strict";var n=r(33).MissingRef;e.exports=function e(t,r,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var a=s(t).then(function(){var e=o._addSchema(t,void 0,r);return e.validate||function e(t){try{return o._compile(t)}catch(e){if(e instanceof n)return function i(e){var i=e.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+e.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(u,u);return a.then(function(e){if(!c(i))return s(e).then(function(){c(i)||o.addSchema(e,i,void 0,r)})}).then(function(){return function e(t){try{return o._compile(t)}catch(e){if(e instanceof n)return i(e);throw e}function i(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];return a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(u,u),a.then(function(e){if(!c(i))return s(e).then(function(){c(i)||o.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function u(){delete o._loadingSchemas[i]}function c(e){return o._refs[e]||o._schemas[e]}}}(t)});function u(){delete o._loadingSchemas[i]}function c(e){return o._refs[e]||o._schemas[e]}}(e);throw e}function i(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];return a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(u,u),a.then(function(e){if(!c(i))return s(e).then(function(){c(i)||o.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function u(){delete o._loadingSchemas[i]}function c(e){return o._refs[e]||o._schemas[e]}}}(e)});i&&a.then(function(e){i(null,e)},i);return a;function s(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r(178);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var o=t.type;if(Array.isArray(o)){var a,s=o.length;for(a=0;a<s;a++)p(o[a]);for(a=0;a<s;a++)l(e,o[a],t)}else o&&p(o),l(e,o,t);var u=!0===t.$data&&this._opts.$data;if(u&&!t.validate)throw new Error('$data support: "validate" function is not defined');var c=t.metaSchema;c&&(u&&(c={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}),t.validateSchema=this.compile(c,!0))}function l(e,t,n){for(var o,a=0;a<r.length;a++){var s=r[a];if(s.type==t){o=s;break}}o||(o={type:t,rules:[]},r.push(o));var u={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};o.rules.push(u),r.custom[e]=u}function p(e){if(!r.types[e])throw new Error("Unknown type "+e)}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,o=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,h="data"+(s||""),d="valid"+a,f="errs__"+a,m=e.opts.$data&&u&&u.$data;m?(o+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=u;var g,v,y,b,x,w="definition"+a,E=this.definition,C="";if(m&&E.$data){x="keywordValidate"+a;var S=E.validateSchema;o+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+x+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,u,e.schema,e)))return;i="validate.schema"+c,x=b.code,g=E.compile,v=E.inline,y=E.macro}var k=x+".errors",_="i"+a,D="ruleErr"+a,A=E.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(v||y||(o+=k+" = null;"),o+="var "+f+" = errors;var "+d+";",m&&E.$data&&(C+="}",o+=" if ("+i+" === undefined) { "+d+" = true; } else { ",S&&(C+="}",o+=" "+d+" = "+w+".validateSchema("+i+"); if ("+d+") { ")),v)E.statements?o+=" "+b.validate+" ":o+=" "+d+" = "+b.validate+"; ";else if(y){var P=e.util.copy(e);C="";P.level++;var F="valid"+P.level;P.schema=b.validate,P.schemaPath="";var T=e.compositeRule;e.compositeRule=P.compositeRule=!0;var O=e.validate(P).replace(/validate\.schema/g,x);e.compositeRule=P.compositeRule=T,o+=" "+O}else{(R=R||[]).push(o),o="",o+="  "+x+".call( ",e.opts.passContext?o+="this":o+="self",g||!1===E.schema?o+=" , "+h+" ":o+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var j=s?"data"+(s-1||""):"parentData",I=s?e.dataPathArr[s]:"parentDataProperty",N=o+=" , "+j+" , "+I+" , rootData )  ";o=R.pop(),!1===E.errors?(o+=" "+d+" = ",A&&(o+=""+e.yieldAwait),o+=N+"; "):o+=A?" var "+(k="customErrors"+a)+" = null; try { "+d+" = "+e.yieldAwait+N+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } ":" "+k+" = null; "+d+" = "+N+"; "}if(E.modifying&&(o+=" if ("+j+") "+h+" = "+j+"["+I+"];"),o+=""+C,E.valid)p&&(o+=" if (true) { ");else{var R;o+=" if ( ",void 0===E.valid?(o+=" !",o+=y?""+F:""+d):o+=" "+!E.valid+" ",o+=") { ",n=this.keyword,(R=R||[]).push(o),o="",(R=R||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var M=o;o=R.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var B=o;o=R.pop(),v?E.errors?"full"!=E.errors&&(o+="  for (var "+_+"="+f+"; "+_+"<errors; "+_+"++) { var "+D+" = vErrors["+_+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+D+".schemaPath === undefined) { "+D+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+D+".schema = "+i+"; "+D+".data = "+h+"; "),o+=" } "):!1===E.errors?o+=" "+B+" ":(o+=" if ("+f+" == errors) { "+B+" } else {  for (var "+_+"="+f+"; "+_+"<errors; "+_+"++) { var "+D+" = vErrors["+_+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+D+".schemaPath === undefined) { "+D+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+D+".schema = "+i+"; "+D+".data = "+h+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===E.errors?o+=" "+B+" ":(o+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+_+"="+f+"; "+_+"<errors; "+_+"++) { var "+D+" = vErrors["+_+"]; if ("+D+".dataPath === undefined) "+D+".dataPath = (dataPath || '') + "+e.errorPath+";  "+D+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(o+=" "+D+".schema = "+i+"; "+D+".data = "+h+"; "),o+=" } } else { "+B+" } "),o+=" } ",p&&(o+=" else { ")}return o}},function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#",description:"Meta-schema for $data reference (JSON-schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},function(e){e.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}},function(e){e.exports={id:"/definition/",type:"object",properties:{id:{type:"string",format:"uuid"},label:{type:"string"},address:{type:"string"},type:{type:"string"},protocol:{type:"string"},secret:{type:"string"},allCapabilities:{$ref:"/shared/capabilities"},capabilities:{$ref:"/shared/capabilities"}},required:["address"],additionalProperties:!0}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=r(16)("fbp-client:observer"),a=r(16)("fbp-client:observer:ignored");function s(e,t){return"*"===t||e===t}function u(e,t){return"function"==typeof t?t(e):t.filter(function(t){var r=t.split(":"),n=i(r,2),o=n[0],a=n[1];return s(e.protocol,o)&&s(e.command,a)}).length>0}function c(e){var t=e.protocol+":"+e.command,r="Unexpected "+t+" message",n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);var i=new Error(r);return i.signature=t,n&&(i.stack=n),i}var l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(r)}return n(e,[{key:"subscribe",value:function(e){var t=this;this.listener=function(r){u(r,e)?(o("Observed "+r.protocol+":"+r.command),t.signals.push(r)):a(r.protocol+":"+r.command)},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=function(e){t.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}},{key:"unsubscribe",value:function(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}},{key:"until",value:function(e,t){var r=this;return new Promise(function(n,i){if(r.protocolErrors.length){var a=r.protocolErrors[0];return o("Failed with protocol error "+a.message),a.signals=r.signals.slice(0),r.unsubscribe(),r.signals=[],void i(a)}for(var s=0;s<r.signals.length;s+=1){var l=r.signals[s];if(u(l,t)){var p=c(l);return o("Failed with "+l.protocol+":"+l.command),p.signals=r.signals.slice(0,s+1),r.unsubscribe(),r.signals=[],void i(p)}if(u(l,e)){o("Succeeded with "+l.protocol+":"+l.command);var h=r.signals.slice(0,s+1);return r.unsubscribe(),r.signals=[],void n(h)}}var d=null,f=function a(s){if(u(s,t)){o("Failed with "+s.protocol+":"+s.command);var l=c(s);return l.signals=r.signals.slice(0),r.unsubscribe(),r.client.removeListener("signal",a),r.client.options.skipValidation||r.client.removeListener("protocolError",d),r.signals=[],void i(l)}if(u(s,e)){o("Succeeded with "+s.protocol+":"+s.command);var p=r.signals.slice(0);r.unsubscribe(),r.client.removeListener("signal",a),r.client.options.skipValidation||r.client.removeListener("protocolError",d),r.signals=[],n(p)}};d=function(e){o("Failed with protocol error "+e.message);var t=e;t.signals=r.signals.slice(0),r.unsubscribe(),r.client.removeListener("signal",f),r.client.options.skipValidation||r.client.removeListener("protocolError",d),r.signals=[],i(t)},r.client.on("signal",f),r.client.options.skipValidation||r.client.on("protocolError",d)})}}]),e}();e.exports=function(e,t){return new l(e,t)}},function(e,t,r){"use strict";function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var o=a[u];r=i.call(e,o),a.splice(u,1),u--}return r}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(25),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=r(16)("fbp-client:adapter:signal"),o=r(16)("fbp-client:adapter:request"),a=r(16)("fbp-client:adapter:response"),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.commands=[],this.listener=null,this.version=r,this.subscribe(),this.tick()}return n(e,[{key:"subscribe",value:function(){var e=this;this.client.transport.on("message",function(t){e.listener?e.listener(t):(i(t.protocol+":"+t.command),e.client.validate("/"+t.protocol+"/output/"+t.command,t).then(function(){return e.client.canReceive(t.protocol,t.command)}).then(function(){return e.client.signal(t)},function(t){return e.client.protocolError(t)}))}),this.client.transport.on("status",function(t){t.online&&e.tick()})}},{key:"send",value:function(e,t,r){var n=this;return new Promise(function(s,u){var c=[];n.commands.push(function(){var l=null;n.listener=function(r){n.client.validate("/"+r.protocol+"/output/"+r.command,r).then(function(){return n.client.canReceive(r.protocol,r.command)}).then(function(){if(!function(r){if(r.protocol!==e)return!1;var n=[];switch(e+":"+t){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)}(r))return i(r.protocol+":"+r.command),void n.client.signal(r);if(l&&(clearTimeout(l),l=null),a(r.protocol+":"+r.command+" for request "+e+":"+t),"error"===r.command){var o=new Error(r.payload.message);return o.stack=r.payload.stack,n.listener=null,u(o),void n.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(n.listener=null,s(c),void n.tick()):void c.push(r.payload);n.listener=null,s(r.payload),n.tick()},function(e){n.listener=null,u(e),n.tick()})},o(e+":"+t),n.client.transport.send(e,t,r),"component"!==e&&(l="runtime"===e&&"packet"===t&&n.version<=.6?setTimeout(function(){n.listener=null,s(r),n.tick()},10):setTimeout(function(){n.listener=null,u(new Error(e+":"+t+" timed out")),n.tick()},n.client.options.commandTimeout))}),n.tick()})}},{key:"tick",value:function(){this.commands.length&&(this.client.isConnected()&&(this.listener||this.commands.shift()()))}}]),e}();e.exports=function(e,t){return new s(e,t)}},function(e,t,r){"use strict";var n,i,o,a,s,u,c;s=r(34),n=s.Runner,c=r(26),o=r(43),u=r(62),i=r(7)("fbp-spec:mocha"),a=function(e,t){return(t.skip?describe.skip:describe)(""+t.name,function(){return beforeEach(function(r){return null!=t.timeout&&this.timeout(t.timeout),e.setupSuite(t,r)}),afterEach(function(r){return e.teardownSuite(t,r)}),t.cases.forEach(function(r){return(r.skip?describe.skip:describe)(r.name,function(){return it(r.assertion,function(n){return null!=t.timeout&&this.timeout(t.timeout),null!=r.timeout&&this.timeout(r.timeout),s.runTestAndCheck(e,r,function(e,t){return n(e||t.error)})})})})})},t.run=function(e,t,r){var s,l,p,h,d,f,m,g,v,y,b;null==r.starttimeout&&(r.starttimeout=5e3),null==r.fixturetimeout&&(r.fixturetimeout=2e3),m={connectTimeout:r.starttimeout,commandTimeout:r.commandtimeout},f=new n(e,m);try{b=c.getSuitesSync(t)}catch(e){throw s=e,console.log("Unable to get suites:",s),s}for(h=null,g=function(t){var r;return e.command?(r={},h=u.start(e.command,r,t)):t(null)},v=function(e){return h&&h.kill(),e(null)},before(function(e){return this.timeout(r.starttimeout+500),g(function(t){return i("started",t),o.noError(t),f.connect(e)}),null}),after(function(e){return v(function(t){return i("stopped",t),o.noError(t),f.disconnect(e)}),null}),d=[],l=0,p=b.length;l<p;l++)null==(y=b[l]).timeout&&(y.timeout=r.fixturetimeout),d.push(a(f,y));return d}}]);